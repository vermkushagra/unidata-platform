<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="3016e086-cc7e-4910-a4dc-98e2a66072ad" activeEnvironment="Default" name="unidata-soap-automation_v4.3" resourceRoot="" soapui-version="5.2.1" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="requestRelationsSoftDelete"/>
  <con:entry key="Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="1. Do requestRelationsSoftDelete with etalon keys"/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:WsdlInterface" id="0a8ef921-628a-469a-8e18-c6c9216eaa90" wsaVersion="NONE" name="SOAP API" type="wsdl" bindingName="{http://api.mdm.unidata.com/v3/wsdl}UnidataServiceBinding" soapVersion="1_1" anonymous="optional" definition="http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?wsdl"><con:part><con:url>http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?wsdl</con:url><con:content><![CDATA[<definitions targetNamespace="http://api.mdm.unidata.com/v3/wsdl" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tdwsdl="http://api.mdm.unidata.com/v3/wsdl" xmlns:tdapi="http://api.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <xs:schema>
      <xs:import namespace="http://api.mdm.unidata.com/v3/" schemaLocation="http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?xsd=unidata-api-3.0.xsd"/>
    </xs:schema>
  </types>
  <message name="UnidataMessageRequest">
    <part element="tdapi:apiRequestBody" name="apiRequestBody"></part>
  </message>
  <message name="UnidataMessageResponse">
    <part element="tdapi:apiResponseBody" name="apiResponseBody"></part>
  </message>
  <portType name="UnidataServicePortType">
    <operation name="apiCall">
      <input message="tdwsdl:UnidataMessageRequest"></input>
      <output message="tdwsdl:UnidataMessageResponse"></output>
    </operation>
  </portType>
  <binding name="UnidataServiceBinding" type="tdwsdl:UnidataServicePortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="apiCall">
      <soap:operation soapAction="apiCall"/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="UnidataService">
    <port binding="tdwsdl:UnidataServiceBinding" name="UnidataServicePort">
      <soap:address location="http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?xsd=unidata-api-3.0.xsd</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" jaxb:extensionBindingPrefixes="xjc" jaxb:version="2.0" targetNamespace="http://api.mdm.unidata.com/v3/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" xmlns:tdapi="http://api.mdm.unidata.com/v3/" xmlns:meta="http://meta.mdm.unidata.com/v3/" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:data="http://data.mdm.unidata.com/v3/">
  <xs:import namespace="http://meta.mdm.unidata.com/v3/" schemaLocation="http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?xsd=unidata-meta-3.0.xsd"/>
  <xs:import namespace="http://data.mdm.unidata.com/v3/" schemaLocation="http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?xsd=unidata-data-3.0.xsd"/>
  <xs:element name="apiRequestBody" type="tdapi:UnidataRequestBody"/>
  <xs:element name="apiResponseBody" type="tdapi:UnidataResponseBody"/>
  <xs:annotation>
    <xs:documentation>Набор элементов и типов для Unidata Soap API;
Точкой входа во все запросы является структура UnidataRequestBody;
Все ответы приходят как структура UnidataResponseBody</xs:documentation>
  </xs:annotation>
  <!--Начало специальных типов данных для тестового XML-->
  <xs:complexType name="SampleDef">
    <xs:annotation>
      <xs:documentation>Дополнительный тип данных предназначенный для внутреннего тестирования SoapAPI.
Позволяет сформировать произвольный запрос ответ в любом редакторе, поддерживающим проверку XML файла на основе XML Schema</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="requestBody" type="tdapi:UnidataRequestBody"/>
      <xs:element maxOccurs="1" minOccurs="1" name="responseBody" type="tdapi:UnidataResponseBody"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="samples">
    <xs:annotation>
      <xs:documentation>Дополнительный элемент, предназначенный для внутреннего тестирования SoapAPI.
Позволяет сформировать произвольный набор запрос-ответов, а также событий платформы в любом редакторе, поддерживающим проверку XML файла на основе XML Schema</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:choice maxOccurs="unbounded" minOccurs="1">
        <xs:element name="sample" type="tdapi:SampleDef"/>
        <xs:element name="sampleJMSMessage" type="tdapi:UnidataMessageDef"/>
      </xs:choice>
    </xs:complexType>
  </xs:element>
  <!--Конец специальных типов данных для тестового XML-->
  <!--Начало специальных типов данных для точки входа в описание сообщений публикуемых платформой-->
  <xs:simpleType name="UnidataEventType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Upsert"/>
      <xs:enumeration value="Merge"/>
      <xs:enumeration value="SoftDelete"/>
      <xs:enumeration value="Restore"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="UpsertEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по изменению записи сущности. Всегда содержит исходную запись, которую затронуло событие, а также пересчитанную основную запись</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="originRecord" type="data:OriginRecord">
        <xs:annotation>
          <xs:documentation>Исходная запись, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonRecord" type="data:EtalonRecord">
        <xs:annotation>
          <xs:documentation>Основная запись, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="originKey" type="data:OriginKey"/>
    </xs:sequence>
    <xs:attribute name="upsertActionType" type="tdapi:UpsertActionType" use="required">
      <xs:annotation>
        <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SoftDeleteEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по удалению записи сущности. Всегда содержит ключи удаленных записей</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа, идентифицирующего логически удалённую основную запись</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="originKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа, идентифицирующего логически удалённую исходную запись</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="etalonRecord" type="data:EtalonRecord">
        <xs:annotation>
          <xs:documentation>Основная запись, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="SoftDeleteActionType" type="tdapi:SoftDeleteActionType" use="required">
      <xs:annotation>
        <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RestoreEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по востановлению записи сущности. Всегда содержит ключ востановленной записи и ее название.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа, идентифицирующего востановленную запись</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="entityName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Название сущности востановленной записи</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="MergeEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по консолидации записей сущности. Всегда основную запись, в которую произошла консолидация, а также ключи всех проигравших записей</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="winningEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Основная запись, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="1" name="looserEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключей, идентифицирующих проигравшые основные записи</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TimeIntervalDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая временной интервал.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="rangeFrom" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Начало действия данной версии данных. null значит бесконечность в прошлом.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeTo" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Окончание действия данной версии данных. null значит бесконечность в будущем.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="UnidataMessageDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая произвольное событие генерируемое платформой на изменение данных.</xs:documentation>
    </xs:annotation>
    <xs:choice maxOccurs="1" minOccurs="1">
      <xs:element name="upsertEventDetails" type="tdapi:UpsertEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по изменению записи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="mergeEventDetails" type="tdapi:MergeEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по консолидации записей</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="softDeleteEventDetails" type="tdapi:SoftDeleteEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по удалению записи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="restoreEventDetails" type="tdapi:RestoreEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по востановлению записи</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:choice>
    <xs:attribute name="eventType" type="tdapi:UnidataEventType" use="required">
      <xs:annotation>
        <xs:documentation>На данный момент поддерживается два вида событий, в зависимости от которых, содержится один из нижеперечисленных элементов</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="eventDate" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Фактическая дата события</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="publishDate" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Дата публикации события в очередь</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--Конец  специальных типов данных для точки входа в описание сообщений публикуемых платформой-->
  <!--Начало специальных типов данных для точки входа в описания запросов-->
  <xs:complexType name="UnidataRequestBody">
    <xs:annotation>
      <xs:documentation>Структура любого API запроса. Состоит из
- обязательной секции 'common', содержащий стандартный набор общих параметров, таких как идентификатор хранилища, безопасность, итд
- одного из конкретных запросов</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="common" type="tdapi:CommonSectionDef"/>
      <xs:choice maxOccurs="1" minOccurs="1">
        <xs:element name="requestAuthenticate" type="tdapi:RequestAuthenticate"/>
        <xs:element name="requestGetLookupValues" type="tdapi:RequestGetLookupValues"/>
        <xs:element name="requestCleanse" type="tdapi:RequestCleanse"/>
        <xs:element name="requestUpsert" type="tdapi:RequestUpsert"/>
        <xs:element name="requestRelationsUpsert" type="tdapi:RequestRelationsUpsert"/>
        <xs:element name="requestMerge" type="tdapi:RequestMerge"/>
        <xs:element name="requestSoftDelete" type="tdapi:RequestSoftDelete"/>
        <xs:element name="requestRelationsSoftDelete" type="tdapi:RequestRelationsSoftDelete"/>
        <xs:element name="requestGet" type="tdapi:RequestGet"/>
        <xs:element name="requestRelationsGet" type="tdapi:RequestRelationsGet"/>
        <xs:element name="requestSearch" type="tdapi:RequestSearch"/>
        <xs:element name="requestGetDataQualityErrors" type="tdapi:RequestGetDataQualityErrors"/>
        <xs:element name="requestMetaGetCleanseFunctionDesc" type="tdapi:RequestMetaGetCleanseFunctionDesc"/>
        <xs:element name="requestMetaGetCleanseFunctionList" type="tdapi:RequestMetaGetCleanseFunctionList"/>
        <xs:element name="requestInfoGet" type="tdapi:RequestInfoGet"/>
        <xs:element name="requestBulkUpsert" type="tdapi:RequestBulkUpsert"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UnidataResponseBody">
    <xs:annotation>
      <xs:documentation>Структура любого API ответа. Состоит из
- обязательной секции 'common', содержащий стандартный набор общих данных, таких как код ошибки, итд
- одного из конкретных ответов</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="common" type="tdapi:CommonResponseDef"/>
      <xs:choice maxOccurs="1" minOccurs="0">
        <xs:element name="responseAuthenticate" type="tdapi:ResponseAuthenticate"/>
        <xs:element name="responseGetLookupValues" type="tdapi:ResponseGetLookupValues"/>
        <xs:element name="responseCleanse" type="tdapi:ResponseCleanse"/>
        <xs:element name="responseUpsert" type="tdapi:ResponseUpsert"/>
        <xs:element name="responseRelationsUpsert" type="tdapi:ResponseRelationsUpsert"/>
        <xs:element name="responseMerge" type="tdapi:ResponseMerge"/>
        <xs:element name="responseSoftDelete" type="tdapi:ResponseSoftDelete"/>
        <xs:element name="responseRelationsSoftDelete" type="tdapi:ResponseRelationsSoftDelete"/>
        <xs:element name="responseGet" type="tdapi:ResponseGet"/>
        <xs:element name="responseRelationsGet" type="tdapi:ResponseRelationsGet"/>
        <xs:element name="responseSearch" type="tdapi:ResponseSearch"/>
        <xs:element name="responseGetDataQualityErrors" type="tdapi:ResponseGetDataQualityErrors"/>
        <xs:element name="responseMetaGetCleanseFunctionDesc" type="tdapi:ResponseMetaGetCleanseFunctionDesc"/>
        <xs:element name="responseMetaGetCleanseFunctionList" type="tdapi:ResponseMetaGetCleanseFunctionList"/>
        <xs:element name="responseInfoGet" type="tdapi:ResponseInfoGet"/>
        <xs:element name="responseBulkUpsert" type="tdapi:ResponseBulkUpsert"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <!--Конец специальных типов данных для точки входа в описания запросов-->
  <xs:complexType name="CredentialsDef">
    <xs:annotation>
      <xs:documentation>Составная часть любого API запроса. Позволяет задать пользователя и пароль.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="username" type="xs:string" use="required"/>
    <xs:attribute name="password" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="AsyncSectionDef">
    <xs:annotation>
      <xs:documentation>Составная часть любого API запроса. Позволяет задать параметры асинхронного вызова.</xs:documentation>
    </xs:annotation>
    <xs:attribute default="false" name="useJMS" type="xs:boolean">
      <xs:annotation>
        <xs:documentation>Указать, что ответ должен быть доставлен через JMS. В противном случае нужно воспользоваться запросом RequestGetAsyncResults</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="jmsReplyTo" type="xs:string">
      <xs:annotation>
        <xs:documentation>JNDI имя JMS очереди, в которую нужно опубликовать результат исполнения</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="jmsCorrelationId" type="xs:string">
      <xs:annotation>
        <xs:documentation>Идентификатор запроса по которому можно будет идентифицировать запрос в JMS очереди</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SecuritySectionDef">
    <xs:annotation>
      <xs:documentation>Общая часть любого API запроса. Содержащий данные для аутентификации пользователя. Есть возможность работать в двух режимах.
Первый всегда передавать имя пользователя и пароль (элемент 'credentials'). При этом серверная сторона будет всегда создавать новую сессию со всеми вытекающими издержками.
Второй способ передавать сессионый токен, который может быть получен после успешного исполнения сервиса RequestAuthenticate в режиме doLogin='true'. Это рекомендованный подход, когда вызывающая сторона заведомо знает о необходимости выполнить последовательность API запросов</xs:documentation>
    </xs:annotation>
    <xs:choice maxOccurs="1" minOccurs="1">
      <xs:element name="credentials" type="tdapi:CredentialsDef"/>
      <xs:element name="sessionToken" type="tdapi:SessionTokenDef"/>
    </xs:choice>
  </xs:complexType>
  <xs:complexType name="CommonSectionDef">
    <xs:annotation>
      <xs:documentation>Общая часть любого API запроса. Состоит из двух основных частей - параметры безопасности и параметры асинхронного вызова.
Помимо этого, содержит обязательный параметр 'storageId', идентифицирующий логическое хранилище.
Также, есть возможность предоставить опциональный параметр - идентификатор логической операции. Если идентификатор не предоставлен,
то платформа автоматически сгенерирует новое уникальное значение. Идентификатор логических операций используется для аудита, а также для контроля композитных операций</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="security" type="tdapi:SecuritySectionDef">
        <xs:annotation>
          <xs:documentation>Обязательный элемент, содержащий данные для аутентификации пользователя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="asyncOptions" type="tdapi:AsyncSectionDef">
        <xs:annotation>
          <xs:documentation>Опциональный элемент, содержащий параметры асинхронного вызова</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="version" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр, версия API клиента</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="storageId" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр, идентифицирующий логическое хранилище</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CommonResponseDef">
    <xs:annotation>
      <xs:documentation>Общая часть любого API ответа:
- Всегда содержит идентификатор логической операции, либо изначально переданный в запросе, либо авто-сгенерированный платформой.
- Всегда содержит 'exitCode', который должен использоваться вызывающей стороной для анализа ошибок
- Может содержать несколько элементов с сообщениями. В случае 'exitCode' отличного от 'Success', будет как минимум один такой элемент</xs:documentation>
    </xs:annotation>
    <xs:choice maxOccurs="1" minOccurs="0">
      <xs:element name="message" type="tdapi:ExecutionMessageDef">
        <xs:annotation>
          <xs:documentation>Опциональные сообщения, переданные вместе с ответом. В случае ошибок или предупреждений, содержат текст для отображения пользователю, а также технические детали</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:choice>
    <xs:attribute name="version" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр, версия API сервера</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="platform" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр, версия платформы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>идентификатор логической операции, либо изначально переданный в запросе, либо авто-сгенерированный платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="exitCode" type="tdapi:ExitCodeType" use="required">
      <xs:annotation>
        <xs:documentation>Результирующий код исполнения запроса</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="processingTime" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Время исполнения запроса на стороне сервера в миллисекундах.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ExecutionErrorDef">
    <xs:annotation>
      <xs:documentation>Детальное описание ошибки исполнения запроса - включает код ошибки, сообщение для пользователя, а также техническое сообщение для службы поддержки</xs:documentation>
    </xs:annotation>
    <xs:attribute name="errorCode" type="xs:string" use="required"/>
    <xs:attribute name="userMessage" type="xs:string" use="required"/>
    <xs:attribute name="internalMessage" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="ExecutionMessageDef">
    <xs:annotation>
      <xs:documentation>Структура любого сообщение возвращаемого вместе с ответом на запрос. Всегда содержит текст сообщения в поле 'messageText'. Также может содержать структуры,
описывающие ошибку, включая детальные сообщения от сервера</xs:documentation>
    </xs:annotation>
    <xs:choice>
      <xs:element maxOccurs="1" minOccurs="0" name="stackTrace" type="xs:string">
        <xs:annotation>
          <xs:documentation>Необязательный элемент содержащий Java stack-trace. Заполняется для службы поддержки</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="error" type="tdapi:ExecutionErrorDef">
        <xs:annotation>
          <xs:documentation>Необязательный элемент содержащий детальное описание ошибки</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="dqErrors" type="data:DataQualityError">
        <xs:annotation>
          <xs:documentation>Необязательный элемент содержащий описание ошибок правил качества.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:choice>
    <xs:attribute name="messageText" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:simpleType name="ExitCodeType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных кодов возврата. Нормальное исполнение запроса подразумевает код 'Success' или 'Warning'.
Все остальные относятся к ошибкам и требует соответствующей обработки со стороны вызывающей стороны</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Success"/>
      <xs:enumeration value="Error"/>
      <xs:enumeration value="Warning"/>
      <xs:enumeration value="AuthenticationError"/>
      <xs:enumeration value="AuthorizationError"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="UpsertActionType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных типов действия, совершённых 'upsert' API. Позволяет различить операции вставки, изменения как основной сущности, так и соответсвующих исходных записей</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Insert"/>
      <xs:enumeration value="Update"/>
      <xs:enumeration value="UpsertOrigin"/>
      <xs:enumeration value="NoAction"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="SoftDeleteActionType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных типов действия, совершённых 'SoftDelete'. Позволяет различить операции удаления записи, периода</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="SoftDeleteEtalon"/>
      <xs:enumeration value="SoftDeleteOrigin"/>
      <xs:enumeration value="SoftDeleteEtalonPeriod"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="SessionTokenDef">
    <xs:annotation>
      <xs:documentation>Структура описывающая сессионный токен. Представляет собой произвольный набор символов. Используется для передачи ключа сессии между запросами.
В типовом сценарии использования, данный ключ возвращается к ответе на запрос 'RequestAuthenticate' и потом передаётся во все последующие запросы.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="token" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="RoleRefDef">
    <xs:annotation>
      <xs:documentation>Структура описывающая роль из модели безопаснасти. На данный момент содержит только имя роли.
В типовом сценарии использования, список ролей пользователя возвращается к ответе на запрос 'RequestAuthenticate'.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="name" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательное имя роли</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="CompareOperatorType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных видов операторов сравнения. Используется для формирования условий поиска сущности в запросе 'RequestSearch'</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="EQUALS"/>
      <xs:enumeration value="NOT_EQUALS"/>
      <xs:enumeration value="GREATER"/>
      <xs:enumeration value="GREATER_OR_EQUALS"/>
      <xs:enumeration value="LESS"/>
      <xs:enumeration value="LESS_OR_EQUALS"/>
      <xs:enumeration value="LIKE"/>
      <xs:enumeration value="FUZZY_EQUALS"/>
    </xs:restriction>
  </xs:simpleType>
  <!--Base for search expressions.-->
  <xs:complexType name="SearchBaseDef"/>
  <xs:complexType name="SearchAndDef">
    <xs:annotation>
      <xs:documentation>And element.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:SearchBaseDef">
        <xs:sequence>
          <xs:choice maxOccurs="unbounded">
            <xs:annotation>
              <xs:appinfo>
                <jaxb:property name="expressions"/>
              </xs:appinfo>
            </xs:annotation>
            <xs:element name="and" type="tdapi:SearchAndDef"/>
            <xs:element name="or" type="tdapi:SearchOrDef"/>
            <xs:element name="atom" type="tdapi:SearchAtomDef"/>
          </xs:choice>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SearchOrDef">
    <xs:annotation>
      <xs:documentation>Or element.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:SearchBaseDef">
        <xs:sequence>
          <xs:choice maxOccurs="unbounded">
            <xs:annotation>
              <xs:appinfo>
                <jaxb:property name="expressions"/>
              </xs:appinfo>
            </xs:annotation>
            <xs:element name="and" type="tdapi:SearchAndDef"/>
            <xs:element name="or" type="tdapi:SearchOrDef"/>
            <xs:element name="atom" type="tdapi:SearchAtomDef"/>
          </xs:choice>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SearchAtomDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая условия поиска на конкретный атрибут сущности. Используется для формирования условий поиска сущности в запросе 'RequestSearch'.
Всегда состоит из имени атрибута, оператора сравнения и константы.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:SearchBaseDef">
        <xs:attribute name="attributeName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Обязательное имя атрибута</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="operator" type="tdapi:CompareOperatorType" use="required">
          <xs:annotation>
            <xs:documentation>Обязательный оператор сравнения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="constant" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Обязательное значение константы</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SearchConditionDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая условия поиска сущностей. Используется для формирования условий поиска сущности в запросе 'RequestSearch'.
Является точкой входа при описании условий поиска - задаёт начальную группировку либо через логическое 'И', либо 'ИЛИ', либо как простой одиночный атом - условие</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice maxOccurs="1">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="expression"/>
          </xs:appinfo>
        </xs:annotation>
        <xs:element name="and" type="tdapi:SearchAndDef"/>
        <xs:element name="or" type="tdapi:SearchOrDef"/>
        <xs:element name="atom" type="tdapi:SearchAtomDef"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UpsertRelationOverrideDef">
    <xs:annotation>
      <xs:documentation>Элемент описывающий правила автоматического удаления неактуальных связей между сущностями.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UpsertRelationsDef">
    <xs:annotation>
      <xs:documentation>Вспомогательная структура содержащая информацию о связях данной сущности. Состоит из набора обычных связей к другим сущностям ('relationTo'), а также набора неотделимых сущностей ('integralEntity')</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="relation" type="tdapi:UpsertRelationDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UpsertRelationRecordDef">
    <xs:annotation>
      <xs:documentation>Контейнер для одиночных связей.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice maxOccurs="1">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="record"/>
          </xs:appinfo>
        </xs:annotation>
        <xs:element maxOccurs="1" minOccurs="1" name="integralEntity" type="data:IntegralRecord"/>
        <xs:element maxOccurs="1" minOccurs="1" name="relationTo" type="data:RelationTo"/>
      </xs:choice>
      <xs:element name="range" type="tdapi:TimeIntervalDef"/>
      <xs:element name="referenceAliasKey" nillable="true" type="tdapi:ReferenceAliasKey"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ReferenceAliasKey">
    <xs:annotation>
      <xs:documentation>Объет мапинга, необходимый для уведомления системы о том , что связь ссылается на альтернативный ключ в реестре.
                Используется в только с RelationTo объектами.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="value" type="xs:string"/>
    <xs:attribute name="entityAttributeName" type="xs:string"/>
  </xs:complexType>
  <xs:complexType name="UpsertRelationDef">
    <xs:annotation>
      <xs:documentation>Набор связей одного определенного типа.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="1" name="record" type="tdapi:UpsertRelationRecordDef">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="records"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="override" type="tdapi:UpsertRelationOverrideDef"/>
    </xs:sequence>
    <xs:attribute name="name" use="required"/>
  </xs:complexType>
  <xs:complexType name="DeleteRelationsDef">
    <xs:annotation>
      <xs:documentation>Вспомогательная структура содержащая информацию о связях данной сущности.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="relation" type="tdapi:DeleteRelationDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DeleteRelationDef">
    <xs:annotation>
      <xs:documentation>Набор ключей to (правая сторона) одного определенного типа (origin или etalon) для одной определенной связи.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="key" type="tdapi:DeleteRelationRecordDef">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="keys"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="name" use="required"/>
  </xs:complexType>
  <xs:complexType name="DeleteRelationRecordDef">
    <xs:annotation>
      <xs:documentation>Контейнер для одиночных связей.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice maxOccurs="1">
        <xs:element maxOccurs="1" minOccurs="1" name="originKey" type="data:OriginKey"/>
        <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey"/>
      </xs:choice>
      <xs:element name="range" type="tdapi:TimeIntervalDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="LookupEntityRefDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая ссылку на справочник. Используется в запросе 'RequestGetLookupValues'. Состоит из имени справочника и опционального значения конкретного кода. Если код не передан, то ссылка идентифицирует все основные справочника</xs:documentation>
    </xs:annotation>
    <xs:attribute name="entityName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр - имя справочника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="codeValue" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр - значение кода справочника (поле ), для которого нужно вернуть все остальные поля. Если не передан, то возвращаются все значения справочника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="UnidataAbstractRequest"/>
  <xs:complexType name="UnidataAbstractResponse"/>
  <!--Аутентификация запрос-ответ-->
  <xs:complexType name="RequestAuthenticate">
    <xs:annotation>
      <xs:documentation>Запрос на аутентификацию пользователя.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Есть возможность идентифицировать пользователя двумя способами. Первый всегда по имени пользователя и паролю (элемент 'credentials' общей секции).
Второй способ передать сессионый токен, если данная сессия всё ещё активна, то сервер 'обновит' сессию и вернёт ответ как будто были переданы правильные имя и пароль пользователя.
По умолчанию сервер всегда создаёт новую сессию. Если нужно только проверить имя пользователя и пароль или получить список ролей пользователя, то можно использовать режим doLogin='false'. При этом новая сессия не создаётся.
Ответ сервера, при успешной аутентификации, всегда содержит список ролей пользователя. Также, в случае создании новой сессии, ответ содержит сессионный токен, который может быть использован для исполнения последующих запросов.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:attribute name="doLogin" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Указание серверу создать новую сессию. Значение по умолчанию - 'true'</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseAuthenticate">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на аутентификацию пользователя ('RequestAuthenticate').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Содержит список ролей пользователя. Признак администратора. Также может содержать сессионный токен, в случае если запрос был сформирован в режиме doLogin='true'</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="0" name="sessionToken" type="tdapi:SessionTokenDef">
            <xs:annotation>
              <xs:documentation>Опциональное значение сессионого токена</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="role" type="tdapi:RoleRefDef">
            <xs:annotation>
              <xs:documentation>Роль пользователя</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="isAdmin" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Признак того, что пользователь является администратором'</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Получить данные lookup сущностей запрос-ответ-->
  <xs:complexType name="RequestGetLookupValues">
    <xs:annotation>
      <xs:documentation>Запрос на получение деталей справочника.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Можно запрашивать как все записи справочника, так и конкретную запись идентифицированную значением кода.
Для всех справочников всегда определён кодовый атрибут, содержащий уникальные идентификаторы, например трёхбуквенный код странны для справочника стран</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="lookupEntity" type="tdapi:LookupEntityRefDef">
            <xs:annotation>
              <xs:documentation>Ссылка на справочник, для которого нужно вернуть значения</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseGetLookupValues">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение деталей справочника ('RequestGetLookupValues').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Содержит список либо всех записей справочника, либо конкретных если в запросе было указано значение кода</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:choice maxOccurs="unbounded" minOccurs="0">
          <xs:element name="etalonRecord" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Запись справочника</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Cleanse запрос-ответ-->
  <xs:complexType name="RequestCleanse">
    <xs:annotation>
      <xs:documentation>Запрос на исполнение функции очистки данных.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Запрос обязательно содержит полное имя функции очистки данных, включающее имена групп разделённые точкой. Например 'Строковые.УбратьПробелы'
Помимо этого требуется указать значение всех 'входных' портов функции.
Ответ будет содержать значение всех 'выходных' портов функции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="port" type="data:SimpleAttribute">
            <xs:annotation>
              <xs:documentation>Значение 'входного' порта функции</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="cleanseName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Обязательный параметр - полное имя функции очистки данных, включающее имена групп разделённые точкой. Например 'Строковые.УбратьПробелы'</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseCleanse">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на исполнение функции очистки данных ('RequestCleanse').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Ответ содержит значение всех 'выходных' портов функции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:choice maxOccurs="unbounded" minOccurs="1">
          <xs:element maxOccurs="unbounded" minOccurs="1" name="port" type="data:SimpleAttribute">
            <xs:annotation>
              <xs:documentation>Значение 'выходного' порта функции</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Upsert запрос-ответ-->
  <xs:complexType name="RequestUpsert">
    <xs:annotation>
      <xs:documentation>Запрос на вставку или модификацию основной или исходной записи сущности.
                Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из
                структуры 'UnidataRequestBody').

                'upsert' означает комбинацию слов 'update' и 'insert'.

                Все операции по модификации данных производятся над исходными записями сущностей из конкретной системы
                источника, включая служебную систему источник.
                При этом основная запись сущности вычисляется заново как результат консолидации всех исходных записей.

                Имеется возможность передать либо основную запись сущности (элемент 'etalonRecord'), либо исходную
                запись (элемент 'originRecord').
                При передаче основной записи, платформа подберёт соответствующую исходную запись из служебной системы
                источника и
                обеспечит выигрыш соответствующих значений атрибутов при консолидации.
                Любая из переданных записей содержит ключ, на основе значения которого принимается решение будет ли это
                операция вставки или изменения.

                По умолчанию, к любой основной записи применяются все имеющиеся правила контроля качества данных.
                Вызывающая сторона может принудительно отказаться от применения правил, передав skipCleanse='true'
                В случае операции изменения записи, есть возможность передать выборочный набор атрибутов. Все
                непереданные атрибуты остаются без изменений.

                Поле range указывает границы действия версии данных. Отсутствующие значения означают бесконечность в
                прошлом или будущем или их комбинацию. Отсутствующий элемент означает бесконечность с обоих концов.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonRecord" type="data:EtalonRecord">
              <xs:annotation>
                <xs:documentation>Запись основной сущности, включая идентифицирующий ключ</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originRecord" type="data:OriginRecord">
              <xs:annotation>
                <xs:documentation>Запись исходной сущности, включая идентифицирующий ключ</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="0" name="relations" type="tdapi:UpsertRelationsDef"/>
          <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="aliasCodeAttributePointers" type="tdapi:AliasCodeAttributePointerDef"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="classifierPointers" type="tdapi:ClassifierPointerDef"/>
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="optional">
          <xs:annotation>
            <xs:documentation>Имя сущности, в которую приизводится вставка.
                            В случае, если вставляется НОВАЯ эталонная запись (от имени специальной системы источника) и параметр не указан, вставка будет отклонена.
                            Для ориджин записей должен быть указан полный ключ!</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="lastUpdateDate" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Опциональный параметр задающий дату последнего изменения исходной записи.
                            Если не передан, то платформа будет использовать текущую дату</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="skipCleanse" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Принудительно отказаться от применения правил контроля качества</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="mergeWithPreviousVersion" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Обоготить данные записи, данными преведущей версии от этой же системы источника</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="bypassExtensionPoints" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Пропустить вызовы пользовательского кода, назначенного на различные точки расширения функционала</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseUpsert">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на вставку или модификацию основной или исходной записи сущности ('RequestUpsert').
                Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
                В случае успешного исполнения всегда содержит два ключа, один идентифицирующий исходную запись, фактически изменённую, второй идентифицирующий основную запись сущности.
                Помимо этого возращается тип действия, фактически выполненного платформой - 'action'.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="originKey" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Обязательное значение ключа идентифицирующего исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Обязательное значение ключа идентифицирующего основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="originAction" type="tdapi:UpsertActionType" use="required">
          <xs:annotation>
            <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Upsert запрос-ответ-->
  <xs:complexType name="RequestBulkUpsert">
    <xs:annotation>
      <xs:documentation>Запрос на множественную вставку или модификацию основной или исходной записи сущности.
                Документацию о единичной вставке в ('RequestUpsert')</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="upsertRecordRequests" type="tdapi:RequestUpsert"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseBulkUpsert">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на множественную вставку или модификацию основной или исходной записи сущности ('BulkRequestUpsert').
                Документацию об ответе при единичной вставке в ('ResponseUpsert')</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="upsertRecordResponses" type="tdapi:ResponseUpsert"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Upsert запрос-ответ-->
  <xs:complexType name="RequestRelationsUpsert">
    <xs:annotation>
      <xs:documentation>Запрос на вставку или модификацию основной или исходной записи сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

'upsert' означает комбинацию слов 'update' и 'insert'.

Все операции по модификации данных производятся над исходными записями сущностей из конкретной системы источника, включая служебную систему источник.
При этом основная запись сущности вычисляется заново как результат консолидации всех исходных записей.

Имеется возможность передать либо основную запись сущности (элемент 'etalonRecord'), либо исходную запись (элемент 'originRecord'). 
При передаче основной записи, платформа подберёт соответствующую исходную запись из служебной системы источника и
обеспечит выигрыш соответствующих значений атрибутов при консолидации. 
Любая из переданных записей содержит ключ, на основе значения которого принимается решение будет ли это операция вставки или изменения.

По умолчанию, к любой основной записи применяются все имеющиеся правила контроля качества данных. Вызывающая сторона может принудительно отказаться от применения правил, передав skipCleanse='true'
В случае операции изменения записи, есть возможность передать выборочный набор атрибутов. Все непереданные атрибуты остаются без изменений.

Поле range указывает границы действия версии данных. Отсутствующие значения означают бесконечность в прошлом или будущем или их комбинацию. Отсутствующий элемент означает бесконечность с обоих концов.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element maxOccurs="1" minOccurs="1" name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Обязательное значение ключа идентифицирующего исходную запись (левый конец связи)</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Обязательное значение ключа идентифицирующего основную запись (левый конец связи)</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="1" name="relations" type="tdapi:UpsertRelationsDef">
            <xs:annotation>
              <xs:documentation>Правые концы связей и временные интервалы.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
        </xs:sequence>
        <xs:attribute name="lastUpdateDate" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Опциональный параметр задающий дату последнего изменения исходной записи. Если не передан, то платформа будет использовать текущую дату</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="skipCleanse" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Принудительно отказаться от применения правил контроля качества</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="bypassExtensionPoints" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Пропустить вызовы пользовательского кода, назначенного на различные точки расширения функционала</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseRelationsUpsert">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на вставку или модификацию основной или исходной записи сущности ('RequestRelationsUpsert').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
В случае успешного исполнения всегда содержит два ключа, один идентифицирующий исходную запись, фактически изменённую, второй идентифицирующий основную запись сущности.
Помимо этого возращается тип действия, фактически выполненного платформой - 'action'.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="upsertCount" type="xs:int">
            <xs:annotation>
              <xs:documentation>Количество вставленных записей</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="originAction" type="tdapi:UpsertActionType" use="required">
          <xs:annotation>
            <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Upsert запрос-ответ-->
  <xs:complexType name="RequestUpsertList">
    <xs:annotation>
      <xs:documentation>Запрос на вставку или модификацию основной или исходной записи сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

'upsert' означает комбинацию слов 'update' и 'insert'.

Все операции по модификации данных производятся над исходными записями сущностей из конкретной системы источника, включая служебную систему источник.
При этом основная запись сущности вычисляется заново как результат консолидации всех исходных записей.

Имеется возможность передать либо основную запись сущности (элемент 'etalonRecord'), либо исходную запись (элемент 'originRecord'). 
При передаче основной записи, платформа подберёт соответствующую исходную запись из служебной системы источника и
обеспечит выигрыш соответствующих значений атрибутов при консолидации. 
Любая из переданных записей содержит ключ, на основе значения которого принимается решение будет ли это операция вставки или изменения.

По умолчанию, к любой основной записи применяются все имеющиеся правила контроля качества данных. Вызывающая сторона может принудительно отказаться от применения правил, передав skipCleanse='true'
В случае операции изменения записи, есть возможность передать выборочный набор атрибутов. Все непереданные атрибуты остаются без изменений.

Поле range указывает границы действия версии данных. Отсутствующие значения означают бесконечность в прошлом или будущем или их комбинацию. Отсутствующий элемент означает бесконечность с обоих концов.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1">
            <xs:element maxOccurs="unbounded" minOccurs="1" name="etalonRecords" type="data:EtalonRecord">
              <xs:annotation>
                <xs:documentation>Запись основной сущности, включая идентифицирующий ключ</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="originRecords" type="data:OriginRecord">
              <xs:annotation>
                <xs:documentation>Запись исходной сущности, включая идентифицирующий ключ</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
        </xs:sequence>
        <xs:attribute name="lastUpdateDate" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Опциональный параметр задающий дату последнего изменения исходной записи. Если не передан, то платформа будет использовать текущую дату</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="skipCleanse" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Принудительно отказаться от применения правил контроля качества</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="bypassExtensionPoints" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Пропустить вызовы пользовательского кода, назначенного на различные точки расширения функционала</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseUpsertList">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на вставку или модификацию основной или исходной записи сущности ('RequestUpsert').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
В случае успешного исполнения всегда содержит два ключа, один идентифицирующий исходную запись, фактически изменённую, второй идентифицирующий основную запись сущности.
Помимо этого возращается тип действия, фактически выполненного платформой - 'action'.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:choice maxOccurs="1">
            <xs:element maxOccurs="unbounded" minOccurs="1" name="originKeys" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Обязательное значение ключа идентифицирующего исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="etalonKeys" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Обязательное значение ключа идентифицирующего основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="originActions" type="tdapi:UpsertActionType">
            <xs:annotation>
              <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Merge запрос-ответ-->
  <xs:complexType name="RequestMerge">
    <xs:annotation>
      <xs:documentation>Запрос на консолидацию нескольких основных записей сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

Любая консолидация всегда производится над основными записями сущности, но при этом у пользователя есть возможность идентификации основной записи ключом от исходной записи из системы источника
Запрос всегда содержит один ключ, идентифицирующий выигрывающую запись и несколько ключей проигравших записей.

По умолчанию, к консолидированной записи применяются все имеющиеся правила контроля качества данных. Вызывающая сторона может принудительно отказаться от применения правил, передав skipCleanse='true'</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="masterEtalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего выигрывшую основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="masterOriginKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего выигрывшую исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:choice maxOccurs="unbounded" minOccurs="1">
            <xs:element name="duplicateEtalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего проигравшую основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="duplicateOriginKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего проигравшую исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности, для записей которой производится консолидации</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="skipCleanse" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Принудительно отказаться от применения правил контроля качества</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="bypassExtensionPoints" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Пропустить вызовы пользовательского кода, назначенного на различные точки расширения функционала</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseMerge">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на консолидацию нескольких основных записей сущности ('RequestMerge').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Ответ не содержит никаких специфических параметров. Вызывающая сторона должна ориентироваться на код возврата из общей секции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse"/>
    </xs:complexContent>
  </xs:complexType>
  <!--SoftDeleteEntity запрос-ответ-->
  <xs:complexType name="RequestSoftDelete">
    <xs:annotation>
      <xs:documentation>Запрос на логическое удаление основной записи сущности, исходной записи сущности или ее отдельного
                периода.
                Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из
                структуры 'UnidataRequestBody').
                Логическое удаление позволяет пометить либо исходную запись из конкретной системы источника, либо
                основную запись, как логически удалённую, при этом такие записи выпадают из обычных операции, таких как
                поиск.
                При логическом удалении одной исходной записи из конкретной системы источника, основная запись может
                продолжать оставаться активной, если в её составе есть другие активные исходные записи.

                Поле range указывает границы действия НЕАКТИВНОЙ (удаленной) версии данных для указанного источника,
                которая будет создана в результате запроса, если речь идет о деактивации периода.
                Отсутствующие значения означают бесконечность в прошлом или будущем или их комбинацию.
                Тип удаления указывается в поле actionType.
                При наличии прав запрос может содержать значение true в поле wipe. В этом случае запись будет ФИЗИЧЕСКИ
                и БЕЗВОЗВРАТНО удалена из хранилищи (hard delete).</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего основную запись, для которой
                                    приизводится логическое удаление</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего исходную запись, для которой
                                    приизводится логическое удаление</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
        </xs:sequence>
        <xs:attribute name="actionType" type="tdapi:SoftDeleteActionType" use="required"/>
        <xs:attribute name="wipe" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Логический параметр, при значении false запись удаляется логически, при значении true запись
                            удаляется из системы.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseSoftDelete">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на логическое удаление основной или исходной записи сущности ('RequestSoftDelete').
                Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках
                (смотри элемент 'common' из структуры 'UnidataResponseBody').

                В случае успешного исполнения содержит список ключей логически удалённых записей, а также
                соответствующих исходных записей.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="etalonKeys" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего логически удалённую основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="originKeys" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего логически удалённую исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--SoftDeleteEntity запрос-ответ-->
  <xs:complexType name="RequestRelationsSoftDelete">
    <xs:annotation>
      <xs:documentation>Запрос на логическое удаление связи основной записи, исходной записи или деактивация отдельного периода.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Логическое удаление позволяет пометить связь либо исходной запись из конкретной системы источника, либо основной записи как логически удалённую.
При логическом удалении связи одной исходной записи из конкретной системы источника, связь на основная запись может продолжать оставаться активной, если в её составе есть другие активные исходные записи.
Тип удаления указывается в поле actionType.
При наличии прав запрос может содержать значение true в поле wipe. В этом случае запись будет ФИЗИЧЕСКИ и БЕЗВОЗВРАТНО удалена из хранилищи (hard delete).</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего основную запись, для которой приизводится логическое удаление</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего исходную запись, для которой приизводится логическое удаление</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="1" name="relations" type="tdapi:DeleteRelationsDef"/>
        </xs:sequence>
        <xs:attribute name="actionType" type="tdapi:SoftDeleteActionType" use="required"/>
        <xs:attribute name="wipe" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Имя сущности, для записей которой приизводится логическое удаление</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseRelationsSoftDelete">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на логическое удаление основной или исходной записи сущности ('RequestSoftDelete').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').

В случае успешного исполнения содержит список ключей логически удалённых записей, а также соответствующих исходных записей.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="etalonKeys" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего логически удалённую основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="originKeys" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего логически удалённую исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Get запрос-ответ-->
  <xs:complexType name="RequestGet">
    <xs:annotation>
      <xs:documentation>Запрос на получение основных и исходных записей для конкретной сущности, а также исторических деталей.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Запрос всегда содержит имя сущности, ключ идентифицирующий либо основную либо исходную запись, а также ряд параметров, указывающих что именно нужно вернуть.
По умолчанию запрос всегда возвращает текущее значение основной записи, но вызывающая сторона может указать значение даты ('forDate'), на которое нужно вернуть основную запись. Данный функционал полезен при работе с временными диапазонами.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="asOf" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Дата, на которую нужно вернуть основную запись</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="originsAsOf" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Возвращать все исходные записи на дату</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="etalonHistory" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Возвращать историю изменений основной записи</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="softDeleted" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Возвращать логически удалённые основные и исходные записи</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseGet">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение основных и исходных записей для конкретной сущности, а также исторических деталей ('RequestGet').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').

В зависимости от выбранных параметров в запросе, содержит различный набор исходных, а также исторических записей для конкретной основной записи.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element name="etalonRecord" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Основная запись либо на данный момент, либо на определённую дату, переданную в запросе</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="etalonHistoryRecords" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Исторические записи</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="originRecords" type="data:OriginRecord">
            <xs:annotation>
              <xs:documentation>Исходные записи</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="rangeFromMin" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Минимальное значение всех временных диапозонов</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="rangeToMax" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Максимальное значение всех временных диапозонов</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestRelationsGet">
    <xs:annotation>
      <xs:documentation>Запрос на получение связей записи конкретной сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Запрос всегда содержит имя сущности, ключ идентифицирующий либо основную либо исходную запись, список имен связей, а также ряд параметров, указывающих что именно нужно вернуть.
По умолчанию запрос всегда возвращает текущее значение основной записи, но вызывающая сторона может указать значение даты ('asOf'), на которое нужно вернуть основную запись. Данный функционал полезен при работе с временными диапазонами.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="relations" type="xs:string">
            <xs:annotation>
              <xs:documentation>Список имен связей сущности, по которым необходимо вернуть информацию.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="asOf" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Дата, на которую нужно вернуть основную запись</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseRelationsGet">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение основных и исходных записей связей для конкретной сущности.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element name="relations" type="data:EntityRelations">
            <xs:annotation>
              <xs:documentation>Контейнер связей</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestInfoGet">
    <xs:annotation>
      <xs:documentation>Запрос на получение общей информации для конкретного типа сущностей.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="from" type="xs:dateTime" use="required"/>
        <xs:attribute name="to" type="xs:dateTime" use="required"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseInfoGet">
    <xs:annotation>
      <xs:documentation>Ответ на Запрос на получение общей информации для
				конкретного типа
				сущностей ('RequestInfoGet').
				Общая часть ответа
				содержит код возврата, идентификатор логической
				операции и сообщения
				об ошибках (смотри элемент 'common' из
				структуры
				'UnidataResponseBody').</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="statistic" type="tdapi:Statistic"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Search запрос-ответ-->
  <xs:complexType name="RequestSearch">
    <xs:annotation>
      <xs:documentation>Запрос на поиск основных записей сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Вызывающая сторона должна задать условия поиска и сортировки ('searchCondition' и 'sortCondition'), а также параметры постраничного вывода результатов</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element name="searchCondition" type="tdapi:SearchConditionDef">
            <xs:annotation>
              <xs:documentation>Критерий, на основе которого осуществляется поиск</xs:documentation>
            </xs:annotation>
          </xs:element>
          <!--<xs:element name="sortCondition" type="tdapi:SortConditionDef" minOccurs="0" maxOccurs="1"/>-->
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности, для которой осуществляется поиск</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="true" name="returnCount" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Возвращать общее количество записей, подпадающих по критерий поиска</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="doCountOnly" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Не возвращать данные, а только подсчитать количество записей, подпадающих по критерий поиска</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="10" name="pageSize" type="xs:integer" use="optional">
          <xs:annotation>
            <xs:documentation>Размер страницы - количество сущностей, возвращаемых за один раз</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="0" name="pageNumber" type="xs:integer" use="optional">
          <xs:annotation>
            <xs:documentation>Номер страницы, начиная с которого выдавать результаты</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="asOf" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Дата, на которую нужно искать</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseSearch">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на поиск основных записей сущности ('RequestSearch').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="etalonRecord" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Найденные основные записи</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="pageSize" type="xs:integer" use="required">
          <xs:annotation>
            <xs:documentation>Размер страницы - количество сущностей, возвращаемых за один раз</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="pageNumber" type="xs:integer" use="required">
          <xs:annotation>
            <xs:documentation>Номер страницы, начиная с которой выданы результаты</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="count" type="xs:integer" use="optional">
          <xs:annotation>
            <xs:documentation>Опциональное значение - количество записей, подпадающих по критерий поиска</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--MetaGetCleanseFunctionDesc запрос-ответ. Получить описание функции очистки данных-->
  <xs:complexType name="RequestMetaGetCleanseFunctionDesc">
    <xs:annotation>
      <xs:documentation>Запрос на получение метаданных, описывающих конкретную функцию очистки данных
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

Запрос всегда содержит имя полное имя функции очистки данных.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:attribute name="cleanseFunctionName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Полное имя функции очистки данных, включающее имена групп разделённые точкой. Например 'Строковые.УбратьПробелы'</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseMetaGetCleanseFunctionDesc">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение метаданных, описывающих конкретную функцию очистки данных.
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Содержит полное описание семантики одной функции очистки данных</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="cleanseFunction" type="meta:CleanseFunctionExtendedDef">
            <xs:annotation>
              <xs:documentation>Полное описание семинтики одной функции очистки данных</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--MetaGetCleanseFunctionList запрос-ответ. Получить список всех функций очистки данных-->
  <xs:complexType name="RequestMetaGetCleanseFunctionList">
    <xs:annotation>
      <xs:documentation>Запрос на получение метаданных, описывающих список всех функций очистки данных
                Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

                Запрос всегда содержит имя полное имя функции очистки данных.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseMetaGetCleanseFunctionList">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение метаданных, описывающих список всех функций очистки данных.
                Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
                Содержит полный список всех функций очистки данных</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="cleanseFunctions" type="meta:ListOfCleanseFunctions">
            <xs:annotation>
              <xs:documentation>Полный список всех функций очистки данных</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--GetDataQualityErrors запрос-ответ. Получить ошибки для данной сущности-->
  <xs:complexType name="RequestGetDataQualityErrors">
    <xs:annotation>
      <xs:documentation>Запрос на получение списка ошибок основной сущoности, созданных в результате применения правил контроля качества данных.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

Запрос всегда содержит имя сущности, ключ идентифицирующий либо основную либо исходную запись, а также опциональный параметр 'forDate', позволяющий вернуть актуальные ошибки на указанную дату.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:choice maxOccurs="1" minOccurs="1">
          <xs:element name="etalonKey" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="originKey" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:choice>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="forDate" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Момент времени, на который нужно вернуть все актуальные ошибки. Если не указан, то возвращаются ошибки на текущий момент</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseGetDataQualityErrors">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение списка ошибок основной сущности, созданных в результате применения правил контроля качества данных ('RequestGetDataQualityErrors').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Содержит список ошибок качества данных</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="dqError" type="data:DataQualityError">
            <xs:annotation>
              <xs:documentation>Ошибка, сфорированная в результате применения правил качества данных</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="AliasCodeAttributePointerDef">
    <xs:annotation>
      <xs:documentation>Объет мапинга, необходимый для уведомления системы о том , что запись ссылается на альтернативный кодовый атрибут в справочнике.
                'recordAttributeName' - имя атрибута ссылающегося на справочник. (если это вложенный атрибут, то имя должно разделяться точками)
                'aliasCodeAttributeName' - имя альтернативного кодового атрибута справочника.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="aliasCodeAttributeName" type="xs:string"/>
    <xs:attribute name="recordAttributeName" type="xs:string"/>
  </xs:complexType>
  <xs:simpleType name="ClassifierPointerType">
    <xs:annotation>
      <xs:documentation>Типы указателей для нод.
                NODE_NAME - нода классификатора будет найдена из полного имени ноды разделенного точкой.
                NODE_CODE - нода классификатора будет найдена из кода ноды.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="NODE_NAME"/>
      <xs:enumeration value="NODE_CODE"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="ClassifierPointerDef">
    <xs:annotation>
      <xs:documentation>Объет мапинга, необходимый для уведомления системы о том , что запись классификатора принадлежит определенной ноде.
                classifierName - имя классификатора, которым проклассифицированна запись.
                classifierPointer - значение указателя.
                pointerType - тип указателя.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="pointerType" nillable="false" type="tdapi:ClassifierPointerType"/>
    </xs:sequence>
    <xs:attribute name="classifierName" type="xs:string" use="required"/>
    <xs:attribute name="classifierPointer" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="Statistic">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="type" type="tdapi:StatisticEnum"/>
      <xs:element maxOccurs="unbounded" minOccurs="1" name="series" type="tdapi:TimeSerie"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="TimeSerie">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="time" type="xs:dateTime"/>
      <xs:element maxOccurs="1" minOccurs="1" name="value" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType final="restriction" name="StatisticEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="NEW"/>
      <xs:enumeration value="ERRORS"/>
      <xs:enumeration value="UPDATED"/>
      <xs:enumeration value="TOTAL"/>
      <xs:enumeration value="MERGED"/>
      <xs:enumeration value="DUPLICATES"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?xsd=unidata-meta-3.0.xsd</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" jaxb:version="2.0" targetNamespace="http://meta.mdm.unidata.com/v3/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:meta="http://meta.mdm.unidata.com/v3/" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:data="http://data.mdm.unidata.com/v3/">
  <xs:import namespace="http://data.mdm.unidata.com/v3/" schemaLocation="http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?xsd=unidata-data-3.0.xsd"/>
  <xs:simpleType name="SimpleDataType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Date"/>
      <xs:enumeration value="Time"/>
      <xs:enumeration value="Timestamp"/>
      <xs:enumeration value="String"/>
      <xs:enumeration value="Integer"/>
      <xs:enumeration value="Number"/>
      <xs:enumeration value="Boolean"/>
      <xs:enumeration value="Blob"/>
      <xs:enumeration value="Clob"/>
      <xs:enumeration value="Any"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="SeverityType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="CRITICAL"/>
      <xs:enumeration value="HIGH"/>
      <xs:enumeration value="NORMAL"/>
      <xs:enumeration value="LOW"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DQRPhaseType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="BEFORE_UPSERT"/>
      <xs:enumeration value="AFTER_UPSERT"/>
      <xs:enumeration value="AFTER_MERGE"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DQRActionType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="CREATE_NEW"/>
      <xs:enumeration value="UPDATE_CURRENT"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DQRuleType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="VALIDATE"/>
      <xs:enumeration value="ENRICH"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DQRuleClass">
    <xs:restriction base="xs:string">
      <xs:enumeration value="SYSTEM"/>
      <xs:enumeration value="USER_DEFINED"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="MergeType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="BVR"/>
      <xs:enumeration value="BVT"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="KeyAttribute">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:pattern value=".*[^\s].*"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="EnumerationValue">
    <xs:attribute name="code" type="xs:string" use="required"/>
    <xs:attribute name="desc" type="xs:string" use="optional"/>
  </xs:complexType>
  <xs:complexType name="EnumerationDataType">
    <xs:complexContent>
      <xs:extension base="meta:VersionedObjectDef">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="enumVal" type="meta:EnumerationValue"/>
        </xs:sequence>
        <xs:attribute name="name" type="xs:string" use="required"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="AbstractAttributeDef">
    <xs:attribute name="name" type="meta:KeyAttribute" use="required"/>
    <xs:attribute name="displayName" type="xs:string" use="optional"/>
    <xs:attribute name="description" type="xs:string" use="optional"/>
    <xs:attribute default="false" name="readOnly" type="xs:boolean" use="optional"/>
    <xs:attribute default="false" name="hidden" type="xs:boolean" use="optional"/>
  </xs:complexType>
  <xs:complexType name="SimpleAttributeDef">
    <xs:complexContent>
      <xs:extension base="meta:AbstractSimpleAttributeDef">
        <xs:attribute name="nullable" type="xs:boolean" use="required"/>
        <xs:attribute default="false" name="unique" type="xs:boolean"/>
        <!--Взаимо-исключающий набор атрибутов. Начало объявления-->
        <!--Поле типа строка, являющееся ссылкой на данные некоего перечисления.-->
        <xs:attribute name="enumDataType" type="xs:string" use="optional"/>
        <!--Поле типа строка, предусматривающее специальную обработку (подстановку значений других аттрибутов из темплейта при отдаче объекта данных).
				Например http://www.mycompany.com/{inn}/{okpo}.-->
        <xs:attribute name="linkDataType" type="xs:string" use="optional"/>
        <!--Поле типа строка, являющееся ссылкой на данные некоего справочника.-->
        <xs:attribute name="lookupEntityType" type="xs:string" use="optional"/>
        <xs:attribute default="" name="mask" type="xs:string"/>
        <!--Взаимо-исключающий набор атрибутов. Конец объявления-->
        <xs:attribute default="0" name="order" type="xs:integer"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="AttributeGroupDef">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="attributes" type="xs:string"/>
    </xs:sequence>
    <xs:attribute name="row" type="xs:int" use="required"/>
    <xs:attribute name="column" type="xs:int" use="required"/>
    <xs:attribute name="title" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="AbstractSimpleAttributeDef">
    <xs:complexContent>
      <xs:extension base="meta:AbstractAttributeDef">
        <!--Для атрибутов ниже, значение по умолчанию является также единствено
					возможнвым-->
        <xs:attribute name="simpleDataType" type="meta:SimpleDataType" use="optional"/>
        <xs:attribute default="false" name="searchable" type="xs:boolean" use="optional"/>
        <xs:attribute default="false" name="displayable" type="xs:boolean" use="optional"/>
        <xs:attribute default="false" name="mainDisplayable" type="xs:boolean" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="CodeAttributeDef">
    <xs:complexContent>
      <xs:extension base="meta:AbstractSimpleAttributeDef">
        <xs:attribute default="false" name="nullable" type="xs:boolean"/>
        <xs:attribute default="true" name="unique" type="xs:boolean"/>
        <xs:attribute default="" name="mask" type="xs:string"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ComplexAttributeDef">
    <xs:complexContent>
      <xs:extension base="meta:AbstractAttributeDef">
        <xs:attribute name="nestedEntityName" type="meta:KeyAttribute"/>
        <xs:attribute name="minCount" type="xs:integer"/>
        <xs:attribute name="maxCount" type="xs:integer"/>
        <!--Позволяет сказать какой из атрибутов вложенной сущности будет использоваться
					как натуральный ключ Например для вложенной сущности 'телефон', ключом может
					быть 'тип телефона' - 'рабочий', 'домашний' итд-->
        <xs:attribute name="subEntityKeyAttribute" type="xs:string" use="optional"/>
        <xs:attribute default="0" name="order" type="xs:integer"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="VersionedObjectDef">
    <xs:attribute name="version" type="xs:long"/>
  </xs:complexType>
  <xs:complexType name="AbstractEntityDef">
    <xs:complexContent>
      <xs:extension base="meta:VersionedObjectDef">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="0" name="mergeSettings" type="meta:MergeSettingsDef"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="classifiers" nillable="true" type="xs:string"/>
          <xs:element maxOccurs="1" minOccurs="0" name="validityPeriod" type="meta:PeriodBoundaryDef"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="attributeGroups" type="meta:AttributeGroupDef"/>
          <xs:element maxOccurs="1" minOccurs="0" name="dataQuality" type="meta:EntityDataQualityDef"/>
        </xs:sequence>
        <xs:attribute name="name" type="meta:KeyAttribute" use="required"/>
        <xs:attribute name="displayName" type="xs:string" use="optional"/>
        <xs:attribute name="description" type="xs:string" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SimpleAttributesHolderEntityDef">
    <xs:complexContent>
      <xs:extension base="meta:AbstractEntityDef">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="simpleAttribute" nillable="true" type="meta:SimpleAttributeDef"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ComplexAttributesHolderEntityDef">
    <xs:complexContent>
      <xs:extension base="meta:SimpleAttributesHolderEntityDef">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="complexAttribute" nillable="true" type="meta:ComplexAttributeDef"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="NestedEntityDef">
    <xs:complexContent>
      <xs:extension base="meta:ComplexAttributesHolderEntityDef"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="LookupEntityDef">
    <xs:complexContent>
      <xs:extension base="meta:SimpleAttributesHolderEntityDef">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="codeAttribute" nillable="false" type="meta:CodeAttributeDef"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="aliasCodeAttributes" nillable="false" type="meta:CodeAttributeDef"/>
        </xs:sequence>
        <xs:attribute default="false" name="dashboardVisible" type="xs:boolean"/>
        <xs:attribute name="groupName" type="xs:string"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="PeriodBoundaryDef">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="start" type="xs:dateTime"/>
      <xs:element maxOccurs="1" minOccurs="0" name="end" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EntityDef">
    <xs:complexContent>
      <xs:extension base="meta:NestedEntityDef">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="0" name="matchSettings" type="meta:MatchSettingsDef"/>
        </xs:sequence>
        <xs:attribute default="false" name="dashboardVisible" type="xs:boolean"/>
        <xs:attribute name="groupName" type="xs:string"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="RelType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="References"/>
      <!--Ссылается-->
      <xs:enumeration value="Contains"/>
      <!--Содержит-->
      <xs:enumeration value="ManyToMany"/>
      <!--TODO rename-->
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="DQRMappingDef">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="dqrMapping" type="meta:DQRMappingDef"/>
      <xs:element maxOccurs="1" minOccurs="0" name="attributeConstantValue" type="data:SimpleAttribute"/>
    </xs:sequence>
    <xs:attribute name="attributeName" type="meta:KeyAttribute" use="required"/>
    <xs:attribute name="filterValue" type="xs:string" use="optional"/>
    <xs:attribute name="inputPort" type="xs:string" use="optional"/>
    <xs:attribute name="outputPort" type="xs:string" use="optional"/>
  </xs:complexType>
  <xs:complexType name="DQREnrichDef">
    <xs:attribute name="sourceSystem" type="xs:string" use="optional"/>
    <xs:attribute name="action" type="meta:DQRActionType" use="optional"/>
    <xs:attribute name="phase" type="meta:DQRPhaseType" use="optional"/>
  </xs:complexType>
  <xs:complexType name="DQRRaiseDef">
    <xs:attribute name="functionRaiseErrorPort" type="xs:string" use="required"/>
    <xs:attribute name="messagePort" type="xs:string" use="optional"/>
    <xs:attribute name="messageText" type="xs:string" use="optional"/>
    <xs:attribute name="severityPort" type="xs:string" use="optional"/>
    <xs:attribute name="severityValue" type="meta:SeverityType" use="optional"/>
    <xs:attribute name="categoryPort" type="xs:string" use="optional"/>
    <xs:attribute name="categoryText" type="xs:string" use="optional"/>
    <xs:attribute name="phase" type="meta:DQRPhaseType" use="optional"/>
  </xs:complexType>
  <xs:complexType name="DQRSourceSystemRef">
    <xs:attribute name="name" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="DQROriginsDef">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="sourceSystem" type="meta:DQRSourceSystemRef"/>
    </xs:sequence>
    <xs:attribute name="all" type="xs:boolean" use="required"/>
  </xs:complexType>
  <xs:complexType name="DQRuleDef">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="1" name="dqrMapping" type="meta:DQRMappingDef"/>
      <xs:element maxOccurs="1" minOccurs="1" name="origins" type="meta:DQROriginsDef"/>
      <xs:element maxOccurs="1" minOccurs="0" name="raise" type="meta:DQRRaiseDef"/>
      <xs:element maxOccurs="1" minOccurs="0" name="enrich" type="meta:DQREnrichDef"/>
      <xs:element maxOccurs="2" minOccurs="1" name="type" type="meta:DQRuleType"/>
      <xs:element maxOccurs="1" minOccurs="0" name="rClass" type="meta:DQRuleClass"/>
      <xs:element maxOccurs="2" minOccurs="0" name="applicable" type="meta:DQApplicableType"/>
    </xs:sequence>
    <xs:attribute name="name" type="meta:KeyAttribute" use="required"/>
    <xs:attribute name="cleanseFunctionName" type="xs:string" use="required"/>
    <xs:attribute name="complexAttributeName" type="xs:string" use="required"/>
    <xs:attribute name="description" type="xs:string" use="optional"/>
    <xs:attribute name="order" type="xs:integer" use="required"/>
    <xs:attribute name="id" type="xs:string" use="optional"/>
    <xs:attribute default="false" name="special" type="xs:boolean"/>
  </xs:complexType>
  <xs:simpleType name="PhaseDef">
    <xs:restriction base="xs:string">
      <xs:enumeration value="BEFORE_UPSERT"/>
      <xs:enumeration value="AFTER_UPSERT"/>
      <xs:enumeration value="AFTER_MERGE"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="EntityDataQualityDef">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="dqRule" type="meta:DQRuleDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="MatchSettingsDef">
    <xs:complexContent>
      <xs:extension base="meta:VersionedObjectDef">
        <xs:choice>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="settings" type="meta:MatchingSettings"/>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="AbstractMergeTypeDef"/>
  <!--BVR merge type contains source systems set, relevant to a particular entity.-->
  <xs:complexType name="BVRMergeTypeDef">
    <xs:complexContent>
      <xs:extension base="meta:AbstractMergeTypeDef">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="sourceSystemsConfig" type="meta:ListOfSourceSystems"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="MergeAttributeDef">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="sourceSystemsConfig" type="meta:ListOfSourceSystems"/>
    </xs:sequence>
    <xs:attribute name="name" type="xs:string" use="required"/>
  </xs:complexType>
  <!--BVT merge type contains attributes merge settings alone with source systems set, relevant to a particular entity.-->
  <xs:complexType name="BVTMergeTypeDef">
    <xs:complexContent>
      <xs:extension base="meta:AbstractMergeTypeDef">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="attribute" type="meta:MergeAttributeDef">
            <xs:annotation>
              <xs:appinfo>
                <jaxb:property name="attributes"/>
              </xs:appinfo>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="MergeSettingsDef">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="bvtSettings" type="meta:BVTMergeTypeDef"/>
      <xs:element maxOccurs="1" minOccurs="0" name="bvrSettings" type="meta:BVRMergeTypeDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="CleansePortList">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="1" name="port">
        <xs:complexType>
          <xs:attribute name="name" type="xs:string" use="required"/>
          <xs:attribute name="dataType" type="meta:SimpleDataType" use="required"/>
          <xs:attribute name="required" type="xs:boolean" use="required"/>
          <xs:attribute name="description" type="xs:string" use="optional"/>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="DQApplicableType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="ORIGIN"/>
      <xs:enumeration value="ETALON"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CompositeCleanseFunctionNodeType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Constant"/>
      <xs:enumeration value="InputPorts"/>
      <xs:enumeration value="OutputPorts"/>
      <xs:enumeration value="Function"/>
      <xs:enumeration value="Switch"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="CleanseFunctionConstant">
    <!--Взаимо-исключающий набор атрибутов-->
    <xs:attribute name="intValue" type="xs:int" use="optional"/>
    <xs:attribute name="dateValue" type="xs:date" use="optional"/>
    <xs:attribute name="stringValue" type="xs:string" use="optional"/>
    <xs:attribute name="numberValue" type="xs:double" use="optional"/>
    <xs:attribute name="boolValue" type="xs:boolean" use="optional"/>
  </xs:complexType>
  <xs:complexType name="CompositeCleanseFunctionLogic">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="nodes">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="2" name="node">
              <xs:complexType>
                <xs:sequence>
                  <xs:element maxOccurs="1" minOccurs="0" name="constant" type="meta:CleanseFunctionConstant"/>
                </xs:sequence>
                <xs:attribute name="nodeId" type="xs:integer" use="required"/>
                <xs:attribute name="nodeType" type="meta:CompositeCleanseFunctionNodeType" use="required"/>
                <xs:attribute name="functionName" type="xs:string" use="optional"/>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="links">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="nodeLink">
              <xs:complexType>
                <xs:attribute name="fromNodeId" type="xs:integer" use="required"/>
                <xs:attribute name="fromPort" type="xs:string" use="required"/>
                <xs:attribute name="toNodeId" type="xs:integer" use="required"/>
                <xs:attribute name="toPort" type="xs:string" use="required"/>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="CleanseFunctionDef">
    <xs:attribute name="functionName" type="xs:string" use="required"/>
    <xs:attribute name="javaClass" type="xs:string" use="optional"/>
    <xs:attribute name="description" type="xs:string" use="optional"/>
  </xs:complexType>
  <xs:complexType name="CleanseFunctionExtendedDef">
    <xs:complexContent>
      <xs:extension base="meta:CleanseFunctionDef">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="inputPorts" type="meta:CleansePortList"/>
          <xs:element maxOccurs="1" minOccurs="1" name="outputPorts" type="meta:CleansePortList"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="CompositeCleanseFunctionDef">
    <xs:complexContent>
      <xs:extension base="meta:CleanseFunctionExtendedDef">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="logic" type="meta:CompositeCleanseFunctionLogic"/>
        </xs:sequence>
        <!--<xs:attribute name="javaClass" type="xs:string" use="optional"/>-->
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="CleanseFunctionGroupDef">
    <xs:complexContent>
      <xs:extension base="meta:VersionedObjectDef">
        <xs:choice maxOccurs="unbounded" minOccurs="1">
          <xs:element name="group" type="meta:CleanseFunctionGroupDef"/>
          <xs:element name="cleanseFunction" type="meta:CleanseFunctionDef"/>
          <xs:element name="compositeCleanseFunction" type="meta:CompositeCleanseFunctionDef"/>
        </xs:choice>
        <xs:attribute name="groupName" type="xs:string" use="required"/>
        <xs:attribute name="description" type="xs:string" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SourceSystemDef">
    <xs:complexContent>
      <xs:extension base="meta:VersionedObjectDef">
        <xs:attribute name="name" type="meta:KeyAttribute" use="required"/>
        <xs:attribute name="weight" type="xs:nonNegativeInteger" use="required"/>
        <xs:attribute name="description" type="xs:string" use="optional"/>
        <xs:attribute name="admin" type="xs:boolean" use="required"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RelationDef">
    <xs:complexContent>
      <xs:extension base="meta:ComplexAttributesHolderEntityDef">
        <xs:attribute name="fromEntity" type="meta:KeyAttribute" use="required"/>
        <xs:attribute name="toEntity" type="meta:KeyAttribute" use="required"/>
        <xs:attribute name="relType" type="meta:RelType" use="required"/>
        <xs:attribute default="false" name="required" type="xs:boolean" use="optional"/>
        <xs:attribute name="toEntityDefaultDisplayAttribute" type="xs:string" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ListOfEnumerations">
    <xs:choice maxOccurs="unbounded" minOccurs="0">
      <xs:element name="enumeration" type="meta:EnumerationDataType"/>
    </xs:choice>
  </xs:complexType>
  <xs:complexType name="ListOfNestedEntities">
    <xs:choice maxOccurs="unbounded" minOccurs="0">
      <xs:element name="nestedEntity" type="meta:NestedEntityDef"/>
    </xs:choice>
  </xs:complexType>
  <xs:complexType name="ListOfLookupEntities">
    <xs:choice maxOccurs="unbounded" minOccurs="0">
      <xs:element name="lookupEntity" type="meta:LookupEntityDef"/>
    </xs:choice>
  </xs:complexType>
  <xs:complexType name="ListOfEntities">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="entity" type="meta:EntityDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ListOfRelations">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="rel" type="meta:RelationDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ListOfCleanseFunctions">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="group" type="meta:CleanseFunctionGroupDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ListOfSourceSystems">
    <xs:choice maxOccurs="unbounded" minOccurs="1">
      <xs:element name="sourceSystem" type="meta:SourceSystemDef"/>
    </xs:choice>
  </xs:complexType>
  <xs:complexType name="EntitiesGroupDef">
    <xs:complexContent>
      <xs:extension base="meta:VersionedObjectDef">
        <xs:sequence maxOccurs="unbounded" minOccurs="0">
          <xs:element maxOccurs="unbounded" minOccurs="0" name="innerGroups" type="meta:EntitiesGroupDef"/>
        </xs:sequence>
        <xs:attribute name="groupName" type="xs:string" use="required"/>
        <xs:attribute name="title" type="xs:string" use="required"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="MatchingSettings">
    <xs:sequence>
      <xs:element maxOccurs="5" minOccurs="1" name="attributes" type="xs:string"/>
    </xs:sequence>
    <xs:attribute name="strategyName" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:element name="model">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="1" minOccurs="1" name="cleanseFunctions" type="meta:ListOfCleanseFunctions"/>
        <xs:element maxOccurs="1" minOccurs="1" name="sourceSystems" type="meta:ListOfSourceSystems"/>
        <xs:element maxOccurs="1" minOccurs="1" name="enumerations" type="meta:ListOfEnumerations"/>
        <xs:element maxOccurs="1" minOccurs="1" name="lookupEntities" type="meta:ListOfLookupEntities"/>
        <xs:element maxOccurs="1" minOccurs="1" name="nestedEntities" type="meta:ListOfNestedEntities"/>
        <xs:element maxOccurs="1" minOccurs="1" name="entities" type="meta:ListOfEntities"/>
        <xs:element maxOccurs="1" minOccurs="1" name="relations" type="meta:ListOfRelations"/>
        <xs:element maxOccurs="1" minOccurs="1" name="entitiesGroup" type="meta:EntitiesGroupDef"/>
      </xs:sequence>
      <xs:attribute name="storageId" type="xs:string" use="required"/>
    </xs:complexType>
    <!--Обеспечиваем уникальность имени всех объектов вида EnumerationDataType-->
    <xs:key name="keyEnumerationTypeName">
      <xs:selector xpath="meta:enumerations/meta:enumeration"/>
      <xs:field xpath="@name"/>
    </xs:key>
    <!--Обеспечиваем уникальность имени всех объектов вида LookupEntityType-->
    <xs:key name="keyLookupEntityTypeName">
      <xs:selector xpath="meta:lookupEntities/meta:lookupEntity"/>
      <xs:field xpath="@name"/>
    </xs:key>
    <!--Обеспечиваем уникальность имени всех объектов вида NestedEntityType-->
    <xs:key name="keyNestedEntityTypeName">
      <xs:selector xpath="meta:nestedEntities/meta:nestedEntity"/>
      <xs:field xpath="@name"/>
    </xs:key>
    <!--Обеспечиваем уникальность имени всех объектов вида EntityType-->
    <xs:key name="keyEntityTypeName">
      <xs:selector xpath="meta:entities/meta:entity"/>
      <xs:field xpath="@name"/>
    </xs:key>
    <!--Обеспечиваем целостность ссылки на имя LookupEntityType-->
    <xs:keyref name="refLookupTypeName" refer="meta:keyLookupEntityTypeName">
      <xs:selector xpath=".//meta:simpleAttribute"/>
      <xs:field xpath="@lookupEntityType"/>
    </xs:keyref>
    <!--Обеспечиваем целостность ссылки на имя EnumerationDataType-->
    <xs:keyref name="refEnumerationTypeName" refer="meta:keyEnumerationTypeName">
      <xs:selector xpath=".//meta:simpleAttribute"/>
      <xs:field xpath="@enumDataType"/>
    </xs:keyref>
    <!--Обеспечиваем целостность ссылки на имя NestedEntityType-->
    <xs:keyref name="refNestedEntityTypeName" refer="meta:keyNestedEntityTypeName">
      <xs:selector xpath=".//meta:complexAttribute"/>
      <xs:field xpath="@nestedEntityType"/>
    </xs:keyref>
    <!--Обеспечиваем целостность ссылок на имя NestedEntityType для RelationDef-->
    <xs:keyref name="refRelationsFrom" refer="meta:keyEntityTypeName">
      <xs:selector xpath=".//meta:rel"/>
      <xs:field xpath="@fromEntity"/>
    </xs:keyref>
    <xs:keyref name="refRelationsTo" refer="meta:keyEntityTypeName">
      <xs:selector xpath=".//meta:rel"/>
      <xs:field xpath="@toEntity"/>
    </xs:keyref>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://localhost:8080/nsi-asoup-3-backend/api/public/UnidataService/v3?xsd=unidata-data-3.0.xsd</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" jaxb:extensionBindingPrefixes="xjc" jaxb:version="2.1" targetNamespace="http://data.mdm.unidata.com/v3/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:data="http://data.mdm.unidata.com/v3/">
  <xs:annotation>
    <xs:documentation>Набор элементов и типов для данных платформы Unidata;</xs:documentation>
    <xs:appinfo>
      <!--generateElementProperty="true"-->
      <jaxb:globalBindings>
        <xjc:serializable uid="12345"/>
      </jaxb:globalBindings>
    </xs:appinfo>
  </xs:annotation>
  <!--Elements-->
  <xs:element name="etalonRecord" type="data:EtalonRecord"/>
  <xs:element name="originRecord" type="data:OriginRecord"/>
  <xs:element name="relationTo" type="data:RelationTo"/>
  <!--Do not remove! This enumeration is used internally.-->
  <xs:simpleType name="ValueDataType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Date"/>
      <xs:enumeration value="Time"/>
      <xs:enumeration value="Timestamp"/>
      <xs:enumeration value="String"/>
      <xs:enumeration value="Integer"/>
      <xs:enumeration value="Number"/>
      <xs:enumeration value="Boolean"/>
      <xs:enumeration value="Blob"/>
      <xs:enumeration value="Clob"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="RecordStatus">
    <xs:restriction base="xs:string">
      <xs:enumeration value="ACTIVE"/>
      <xs:enumeration value="INACTIVE"/>
      <xs:enumeration value="MERGED"/>
      <xs:enumeration value="PENDING"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DataShift">
    <xs:restriction base="xs:string">
      <xs:enumeration value="PRISTINE"/>
      <xs:enumeration value="REVISED"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ApprovalState">
    <xs:restriction base="xs:string">
      <xs:enumeration value="PENDING"/>
      <xs:enumeration value="APPROVED"/>
      <xs:enumeration value="DECLINED"/>
    </xs:restriction>
  </xs:simpleType>
  <!--Base for search expressions.-->
  <xs:complexType name="BaseValue"/>
  <!--BLOB-->
  <xs:complexType name="BlobValue">
    <xs:complexContent>
      <xs:extension base="data:BaseValue">
        <xs:sequence>
          <xs:element maxOccurs="1" name="data" nillable="true" type="xs:base64Binary"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:string" use="optional"/>
        <xs:attribute name="fileName" type="xs:string" use="optional"/>
        <xs:attribute name="mimeType" type="xs:string" use="optional"/>
        <xs:attribute default="0" name="size" type="xs:long" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--CLOB-->
  <xs:complexType name="ClobValue">
    <xs:complexContent>
      <xs:extension base="data:BaseValue">
        <xs:sequence>
          <xs:element maxOccurs="1" name="data" nillable="true" type="xs:string"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:string" use="optional"/>
        <xs:attribute name="fileName" type="xs:string" use="optional"/>
        <xs:attribute name="mimeType" type="xs:string" use="optional"/>
        <xs:attribute default="0" name="size" type="xs:long" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Base for all attributes types.-->
  <xs:complexType name="AbstractAttribute">
    <xs:attribute name="name" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="AbstractSingleValueAttribute">
    <xs:annotation>
      <xs:documentation>Базовая структура, описывающая значение атрибута сущности. Всегда содержит только одно значение в зависимости от типа данных</xs:documentation>
      <xs:appinfo>
        <jaxb:class implClass="com.unidata.mdm.data.SingleValueAttributeImpl"/>
      </xs:appinfo>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractAttribute">
        <xs:sequence>
          <xs:choice maxOccurs="1">
            <xs:element name="blobValue" nillable="true" type="data:BlobValue"/>
            <xs:element name="clobValue" nillable="true" type="data:ClobValue"/>
            <xs:element name="intValue" nillable="true" type="xs:long"/>
            <xs:element name="dateValue" nillable="true" type="xs:date"/>
            <xs:element name="timeValue" nillable="true" type="xs:time"/>
            <xs:element name="timestampValue" nillable="true" type="xs:dateTime"/>
            <xs:element name="stringValue" nillable="true" type="xs:string"/>
            <xs:element name="numberValue" nillable="true" type="xs:double"/>
            <xs:element name="boolValue" nillable="true" type="xs:boolean"/>
          </xs:choice>
        </xs:sequence>
        <!--Взаимо-исключающий набор. Конец объявления-->
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SimpleAttribute">
    <xs:annotation>
      <xs:documentation>Базовая структура, описывающая простой атрибут сущности. Состоит из обязательного имени и только одного значения в зависимости от типа данных</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractSingleValueAttribute"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ComplexAttribute">
    <xs:annotation>
      <xs:documentation>Базовая структура, описывающая сложный атрибут сущности. Состоит из обязательного имени и неограниченного набора вложенных сущностей</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractAttribute">
        <xs:choice maxOccurs="unbounded" minOccurs="0">
          <xs:element name="nestedRecord" type="data:NestedRecord"/>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="EtalonKey">
    <xs:annotation>
      <xs:documentation>Структура, представляющая собой значение ключа для идентификации 'EtalonRecord' сущности.
                Состоит из суррогатного идентификатора основной записи</xs:documentation>
    </xs:annotation>
    <xs:attribute name="id" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="OriginKey">
    <xs:annotation>
      <xs:documentation>Структура, представляющая собой значение ключа для идентификации исходной записи сущности.
                Представляет собой композитный ключ, всегда состоящий из трёх частей - обязательный идентификатор системы источника, непосредственно строкового ключа.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="id" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Ключ записи в системе UniData</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="externalId" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Натуральный ключ исходной записи в системе источника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="sourceSystem" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Код системы источника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="entityName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательное имя сущности для идентификации по натуральный ключ исходной записи в системе источника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="NestedRecord">
    <xs:annotation>
      <xs:documentation>Рекурсивная структура, описывающая запись произвольной вложенной сущности. Состоит из произвольного количества простых атрибутов, а также сложных атрибутов, обеспечивающих рекурсивного погружение.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="id" type="xs:string">
        <xs:annotation>
          <xs:documentation>ИД сущности</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="simpleAttribute" type="data:SimpleAttribute">
        <xs:annotation>
          <xs:documentation>Простой атрибут записи - имя плюс значение</xs:documentation>
          <xs:appinfo>
            <jaxb:property name="simpleAttributes"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="complexAttribute" type="data:ComplexAttribute">
        <xs:annotation>
          <xs:documentation>Сложный атрибут записи - имя плюс вложенная
					сущность</xs:documentation>
          <xs:appinfo>
            <jaxb:property name="complexAttributes"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--Just a merking base type-->
  <xs:complexType name="RelationBase">
    <xs:attribute name="relName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательное имя связи</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="IntegralRecord">
    <xs:annotation>
      <xs:documentation>Структура, описывающая неотделимую сущность. Используется для представления записи в композитных объектах. Состоит из обязательного имени связи, а также либо основной, либо исходной записи сущности.
Примером такой связанной сущности может служить информация о банковском счёте, неотделимой от сущности 'сотрудник'</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:RelationBase">
        <xs:choice maxOccurs="1" minOccurs="1">
          <xs:element name="etalonRecord" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Основаня запись связанной сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="originRecord" type="data:OriginRecord">
            <xs:annotation>
              <xs:documentation>Исходная запись связанной сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RelationToInfoSection">
    <xs:attribute name="createdBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем создан</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updatedBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем последний раз обновлен</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата создания записи эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updateDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата последнего обновления эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="status" type="data:RecordStatus" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий общий статус эталонной записи. 
                Запись может быть: 
                - ACTIVE - активна, 
                - INACTIVE - неакитвна из-за удаления, 
                - MERGED - неактивна после слияния с другим объектом в результате слияния дубликатов</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="approval" type="data:ApprovalState" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий состояние изменений эталонной записи. 
                Запись может быть: 
                - PENDING - некие изменения ожидают подтверждений, 
                - APPROVED - неподтвержденные изменения отсутствуют, 
                - DECLINED -  изменения отклонены (Состояние невозможное для инфо-секции эталонной записи)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeFrom" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Начало действия данной версии эталонных данных. null значит бесконечность в прошлом.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeTo" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Окончание действия данной версии эталонных данных. null значит бесконечность в будущем.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RelationTo">
    <xs:annotation>
      <xs:documentation>Структура, описывающая связь между сущностями. Используется для представления связи в композитных сущностях. Состоит из обязательного имени связи, а также ключа для идентификации либо основной, либо исходной записи сущности.
Помимо этого, сама связь может содержать, как простые так и сложные атрибуты.
Примером такой связи между сущностями может служить связь, сущностями 'сотрудник' и 'отдел', каждая из которых имеет свой жизненный цикл.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:RelationBase">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="toEtalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Ключ основной записи сущности</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="toOriginKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Ключ исходной записи сущности</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="simpleAttributes" type="data:SimpleAttribute">
              <xs:annotation>
                <xs:documentation>Простые аттрибуты связи</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="complexAttributes" type="data:ComplexAttribute">
              <xs:annotation>
                <xs:documentation>Сложные аттрибуты связи</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="0" name="infoSection" type="data:RelationToInfoSection">
              <xs:annotation>
                <xs:documentation>Опциональная секция описывающая состояние объекта. Заполняется системой при отдаче записи.</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="EntityRelations">
    <xs:annotation>
      <xs:documentation>Вспомогательная структура содержащая информацию о связях данной сущности. Состоит из набора обычных связей к другим сущностям ('relationTo'), а также набора неотделимых сущностей ('integralEntity')</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="integralEntities" type="data:IntegralRecord"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="relationsTo" type="data:RelationTo"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EtalonRecordInfoSection">
    <xs:attribute name="entityName" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Имя сущности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createdBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем создан</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updatedBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем последний раз обновлен</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="status" type="data:RecordStatus" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий общий статус эталонной записи. 
                Запись может быть: 
                - ACTIVE - активна, 
                - INACTIVE - неакитвна из-за удаления, 
                - MERGED - неактивна после слияния с другим объектом в результате слияния дубликатов</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="approval" type="data:ApprovalState" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий статус подтверждения эталонной записи. 
                Запись может быть: 
                - PENDING - активна, но ожидает подтверждения,
                - APPROVED - активна и подтверждена, 
                - DECLINED - неактивна после отклонения изменений.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeFrom" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Начало действия данной версии эталонных данных. null значит бесконечность в прошлом.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeTo" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Окончание действия данной версии эталонных данных. null значит бесконечность в будущем.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата создания записи эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updateDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата последнего обновления эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="EtalonRecord">
    <xs:annotation>
      <xs:documentation>Структура полностью описывающая основную запись сущности. Является логическим расширением структуры 'NestedRecord'. Всегда содержит
- имя сущности, такое как 'Банк', 'Сотдрудник' итд.
- набор простых и сложных атрибутов
- значение ключа идентифицирующего основную запись
- список связей данной сущности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:NestedRecord">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Обязательное значение ключа идентифицирующего основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="relations" type="data:EntityRelations">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая связи сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="classifiers" type="data:EtalonClassifierRecord">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая классификаторы сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="infoSection" type="data:EtalonRecordInfoSection">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая состояние объекта. Заполняется системой при отдаче записи.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="OriginRecordInfoSection">
    <xs:attribute name="entityName" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Имя сущности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createdBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем создан</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updatedBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем последний раз обновлен</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="status" type="data:RecordStatus" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий статус эталонной записи. 
                 Запись может быть: 
                 - ACTIVE - активна, 
                 - INACTIVE - неакитвна из-за удаления, 
                 - MERGED - неактивна после слияния с другим объектом в результате слияния дубликатов</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="approval" type="data:ApprovalState" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий статус эталонной записи. 
                 Запись может быть: 
                 - PENDING - активна, но ожидает подтверждения,
                 - APPROVED - активна и подтверждена, 
                 - DECLINED - неактивна после отклонения изменений.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeFrom" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Начало действия данной версии эталонных данных. null значит бесконечность в прошлом.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeTo" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Окончание действия данной версии эталонных данных. null значит бесконечность в будущем.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата создания записи эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updateDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата последнего обновления эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="revision" type="xs:int" use="optional">
      <xs:annotation>
        <xs:documentation>Ревизия ориджин записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="OriginRecord">
    <xs:annotation>
      <xs:documentation>Структура полностю аналогичная 'EtalonRecord' с той лишь разницей, что описывает исходную запись сущности. Также является логическим расширением структуры 'NestedRecord'. Всегда содержит
- имя сущности, такое как 'Банк', 'Сотдрудник' итд.
- набор простых и сложных атрибутов
- значение ключа идентифицирующего исходную запись
- список связей данной сущности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:NestedRecord">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="originKey" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Обязательное значение ключа идентифицирующего исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="relations" type="data:EntityRelations">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая связи сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="classifiers" type="data:OriginClassifierRecord">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая классификаторы сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="infoSection" type="data:OriginRecordInfoSection">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая состояние сущности.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="OriginClassifierRecord">
    <xs:complexContent>
      <xs:extension base="data:ClassifierRecord"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="EtalonClassifierRecord">
    <xs:complexContent>
      <xs:extension base="data:ClassifierRecord"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ClassifierRecord">
    <xs:annotation>
      <xs:documentation>Структура полностю аналогичная 'EtalonRecord' и 'OriginRecord' с той лишь разницей, что описывает
                класиффицируемую часть данных.
                Также является логическим расширением структуры 'NestedRecord'. Всегда содержит
                - имя классификатора, такое как 'Человек', 'Горила' итд.
                - индитификатор ноды классификатора.
                - набор простых атрибутов</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:NestedRecord">
        <xs:attribute name="classifierNodeId" type="xs:string">
          <xs:annotation>
            <xs:documentation>Индетификатор ноды классификатора</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="classifierName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя классификатора</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="status" type="data:RecordStatus" use="required">
          <xs:annotation>
            <xs:documentation>Состояние классификатора</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="DataQualityStatusType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных состояний ошибок данных, ассоциированных с основной записью сущности. Используется в ответе на запрос 'RequestGetDataQualityErrors'</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="new"/>
      <xs:enumeration value="resolved"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="DataQualityError">
    <xs:annotation>
      <xs:documentation>Структура, описывающая ошибоку данных, ассоциированную с основной записью сущности. Используется в ответе на запрос 'RequestGetDataQualityErrors'</xs:documentation>
    </xs:annotation>
    <xs:attribute name="errorId" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Уникальный идентификатор ошибки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createDate" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Дата создания ошибки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updateDate" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Дата последненго обновления информации об ошибке</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="status" type="data:DataQualityStatusType" use="required">
      <xs:annotation>
        <xs:documentation>Состояние данной ошибки - новая, исправленная итд</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ruleName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Имя правила качества данных, на основе которого была сформирована ошибка</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="message" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Текст сообщения ошибки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="severity" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Уровень критичности, используется для группировки в отчётах</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="category" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Имя категории ошибки, используется для группировки в отчётах</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint></con:endpoints><con:operation id="e25a0c94-bc51-44c4-8deb-8b2f512e02c8" isOneWay="false" action="apiCall" name="apiCall" bindingOperationName="apiCall" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="b455cd9c-f9a4-449a-a385-209744c56f57" name="dummy"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common version="?" storageId="?" operationId="?">\r
            <api:security>\r
               <!--You have a CHOICE of the next 2 items at this level-->\r
               <api:credentials username="?" password="?"/>\r
               <api:sessionToken token="?"/>\r
            </api:security>\r
            <!--Optional:-->\r
            <api:asyncOptions useJMS="false" jmsReplyTo="?" jmsCorrelationId="?"/>\r
         </api:common>\r
         <!--You have a CHOICE of the next 16 items at this level-->\r
         <api:requestAuthenticate doLogin="?"/>\r
         <api:requestGetLookupValues>\r
            <!--1 or more repetitions:-->\r
            <api:lookupEntity entityName="?" codeValue="?"/>\r
         </api:requestGetLookupValues>\r
         <api:requestCleanse cleanseName="?">\r
            <!--1 or more repetitions:-->\r
            <api:port name="?">\r
               <!--You have a CHOICE of the next 9 items at this level-->\r
               <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                  <data:data>cid:348855811852</data:data>\r
               </data:blobValue>\r
               <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                  <data:data>?</data:data>\r
               </data:clobValue>\r
               <data:intValue>?</data:intValue>\r
               <data:dateValue>?</data:dateValue>\r
               <data:timeValue>?</data:timeValue>\r
               <data:timestampValue>?</data:timestampValue>\r
               <data:stringValue>?</data:stringValue>\r
               <data:numberValue>?</data:numberValue>\r
               <data:boolValue>?</data:boolValue>\r
            </api:port>\r
         </api:requestCleanse>\r
         <api:requestUpsert entityName="?" lastUpdateDate="?" skipCleanse="false" mergeWithPreviousVersion="false" bypassExtensionPoints="false">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:etalonRecord>\r
               <!--Optional:-->\r
               <data:id>?</data:id>\r
               <!--Zero or more repetitions:-->\r
               <data:simpleAttribute name="?">\r
                  <!--You have a CHOICE of the next 9 items at this level-->\r
                  <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                     <data:data>cid:1208145227186</data:data>\r
                  </data:blobValue>\r
                  <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                     <data:data>?</data:data>\r
                  </data:clobValue>\r
                  <data:intValue>?</data:intValue>\r
                  <data:dateValue>?</data:dateValue>\r
                  <data:timeValue>?</data:timeValue>\r
                  <data:timestampValue>?</data:timestampValue>\r
                  <data:stringValue>?</data:stringValue>\r
                  <data:numberValue>?</data:numberValue>\r
                  <data:boolValue>?</data:boolValue>\r
               </data:simpleAttribute>\r
               <!--Zero or more repetitions:-->\r
               <data:complexAttribute name="?">\r
                  <!--You have a CHOICE of the next 1 items at this level-->\r
                  <data:nestedRecord>\r
                     <!--Optional:-->\r
                     <data:id>?</data:id>\r
                     <!--Zero or more repetitions:-->\r
                     <data:simpleAttribute name="?">\r
                        <!--You have a CHOICE of the next 9 items at this level-->\r
                        <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>cid:1024261713256</data:data>\r
                        </data:blobValue>\r
                        <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>?</data:data>\r
                        </data:clobValue>\r
                        <data:intValue>?</data:intValue>\r
                        <data:dateValue>?</data:dateValue>\r
                        <data:timeValue>?</data:timeValue>\r
                        <data:timestampValue>?</data:timestampValue>\r
                        <data:stringValue>?</data:stringValue>\r
                        <data:numberValue>?</data:numberValue>\r
                        <data:boolValue>?</data:boolValue>\r
                     </data:simpleAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <data:complexAttribute/>\r
                  </data:nestedRecord>\r
               </data:complexAttribute>\r
               <data:etalonKey id="?"/>\r
               <!--Optional:-->\r
               <data:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <data:integralEntities relName="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <data:etalonRecord/>\r
                     <data:originRecord>\r
                        <!--Optional:-->\r
                        <data:id>?</data:id>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttribute name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:695150975358</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttribute name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <data:nestedRecord>\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:394305860910</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute/>\r
                           </data:nestedRecord>\r
                        </data:complexAttribute>\r
                        <data:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Optional:-->\r
                        <data:relations/>\r
                        <!--Zero or more repetitions:-->\r
                        <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:1200273632821</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:207884374737</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttribute>\r
                        </data:classifiers>\r
                        <!--Optional:-->\r
                        <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                     </data:originRecord>\r
                  </data:integralEntities>\r
                  <!--Zero or more repetitions:-->\r
                  <data:relationsTo relName="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <data:toEtalonKey id="?"/>\r
                     <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                     <!--Zero or more repetitions:-->\r
                     <data:simpleAttributes name="?">\r
                        <!--You have a CHOICE of the next 9 items at this level-->\r
                        <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>cid:1333785945743</data:data>\r
                        </data:blobValue>\r
                        <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>?</data:data>\r
                        </data:clobValue>\r
                        <data:intValue>?</data:intValue>\r
                        <data:dateValue>?</data:dateValue>\r
                        <data:timeValue>?</data:timeValue>\r
                        <data:timestampValue>?</data:timestampValue>\r
                        <data:stringValue>?</data:stringValue>\r
                        <data:numberValue>?</data:numberValue>\r
                        <data:boolValue>?</data:boolValue>\r
                     </data:simpleAttributes>\r
                     <!--Zero or more repetitions:-->\r
                     <data:complexAttributes name="?">\r
                        <!--You have a CHOICE of the next 1 items at this level-->\r
                        <data:nestedRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:58589874782</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute/>\r
                        </data:nestedRecord>\r
                     </data:complexAttributes>\r
                     <!--Optional:-->\r
                     <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                  </data:relationsTo>\r
               </data:relations>\r
               <!--Zero or more repetitions:-->\r
               <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                  <!--Optional:-->\r
                  <data:id>?</data:id>\r
                  <!--Zero or more repetitions:-->\r
                  <data:simpleAttribute name="?">\r
                     <!--You have a CHOICE of the next 9 items at this level-->\r
                     <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <data:data>cid:1064525488986</data:data>\r
                     </data:blobValue>\r
                     <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <data:data>?</data:data>\r
                     </data:clobValue>\r
                     <data:intValue>?</data:intValue>\r
                     <data:dateValue>?</data:dateValue>\r
                     <data:timeValue>?</data:timeValue>\r
                     <data:timestampValue>?</data:timestampValue>\r
                     <data:stringValue>?</data:stringValue>\r
                     <data:numberValue>?</data:numberValue>\r
                     <data:boolValue>?</data:boolValue>\r
                  </data:simpleAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <data:complexAttribute name="?">\r
                     <!--You have a CHOICE of the next 1 items at this level-->\r
                     <data:nestedRecord>\r
                        <!--Optional:-->\r
                        <data:id>?</data:id>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttribute name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:972990359739</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttribute/>\r
                     </data:nestedRecord>\r
                  </data:complexAttribute>\r
               </data:classifiers>\r
               <!--Optional:-->\r
               <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
            </api:etalonRecord>\r
            <api:originRecord>\r
               <!--Optional:-->\r
               <data:id>?</data:id>\r
               <!--Zero or more repetitions:-->\r
               <data:simpleAttribute name="?">\r
                  <!--You have a CHOICE of the next 9 items at this level-->\r
                  <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                     <data:data>cid:918484716786</data:data>\r
                  </data:blobValue>\r
                  <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                     <data:data>?</data:data>\r
                  </data:clobValue>\r
                  <data:intValue>?</data:intValue>\r
                  <data:dateValue>?</data:dateValue>\r
                  <data:timeValue>?</data:timeValue>\r
                  <data:timestampValue>?</data:timestampValue>\r
                  <data:stringValue>?</data:stringValue>\r
                  <data:numberValue>?</data:numberValue>\r
                  <data:boolValue>?</data:boolValue>\r
               </data:simpleAttribute>\r
               <!--Zero or more repetitions:-->\r
               <data:complexAttribute name="?">\r
                  <!--You have a CHOICE of the next 1 items at this level-->\r
                  <data:nestedRecord>\r
                     <!--Optional:-->\r
                     <data:id>?</data:id>\r
                     <!--Zero or more repetitions:-->\r
                     <data:simpleAttribute name="?">\r
                        <!--You have a CHOICE of the next 9 items at this level-->\r
                        <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>cid:368102887727</data:data>\r
                        </data:blobValue>\r
                        <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>?</data:data>\r
                        </data:clobValue>\r
                        <data:intValue>?</data:intValue>\r
                        <data:dateValue>?</data:dateValue>\r
                        <data:timeValue>?</data:timeValue>\r
                        <data:timestampValue>?</data:timestampValue>\r
                        <data:stringValue>?</data:stringValue>\r
                        <data:numberValue>?</data:numberValue>\r
                        <data:boolValue>?</data:boolValue>\r
                     </data:simpleAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <data:complexAttribute/>\r
                  </data:nestedRecord>\r
               </data:complexAttribute>\r
               <data:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
               <!--Optional:-->\r
               <data:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <data:integralEntities relName="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <data:etalonRecord>\r
                        <!--Optional:-->\r
                        <data:id>?</data:id>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttribute name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:137999947524</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttribute name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <data:nestedRecord>\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:579451031269</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute/>\r
                           </data:nestedRecord>\r
                        </data:complexAttribute>\r
                        <data:etalonKey id="?"/>\r
                        <!--Optional:-->\r
                        <data:relations/>\r
                        <!--Zero or more repetitions:-->\r
                        <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:1329587668554</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:148827954887</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttribute>\r
                        </data:classifiers>\r
                        <!--Optional:-->\r
                        <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                     </data:etalonRecord>\r
                     <data:originRecord/>\r
                  </data:integralEntities>\r
                  <!--Zero or more repetitions:-->\r
                  <data:relationsTo relName="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <data:toEtalonKey id="?"/>\r
                     <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                     <!--Zero or more repetitions:-->\r
                     <data:simpleAttributes name="?">\r
                        <!--You have a CHOICE of the next 9 items at this level-->\r
                        <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>cid:438475986521</data:data>\r
                        </data:blobValue>\r
                        <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>?</data:data>\r
                        </data:clobValue>\r
                        <data:intValue>?</data:intValue>\r
                        <data:dateValue>?</data:dateValue>\r
                        <data:timeValue>?</data:timeValue>\r
                        <data:timestampValue>?</data:timestampValue>\r
                        <data:stringValue>?</data:stringValue>\r
                        <data:numberValue>?</data:numberValue>\r
                        <data:boolValue>?</data:boolValue>\r
                     </data:simpleAttributes>\r
                     <!--Zero or more repetitions:-->\r
                     <data:complexAttributes name="?">\r
                        <!--You have a CHOICE of the next 1 items at this level-->\r
                        <data:nestedRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:1165525330952</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute/>\r
                        </data:nestedRecord>\r
                     </data:complexAttributes>\r
                     <!--Optional:-->\r
                     <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                  </data:relationsTo>\r
               </data:relations>\r
               <!--Zero or more repetitions:-->\r
               <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                  <!--Optional:-->\r
                  <data:id>?</data:id>\r
                  <!--Zero or more repetitions:-->\r
                  <data:simpleAttribute name="?">\r
                     <!--You have a CHOICE of the next 9 items at this level-->\r
                     <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <data:data>cid:897994245791</data:data>\r
                     </data:blobValue>\r
                     <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <data:data>?</data:data>\r
                     </data:clobValue>\r
                     <data:intValue>?</data:intValue>\r
                     <data:dateValue>?</data:dateValue>\r
                     <data:timeValue>?</data:timeValue>\r
                     <data:timestampValue>?</data:timestampValue>\r
                     <data:stringValue>?</data:stringValue>\r
                     <data:numberValue>?</data:numberValue>\r
                     <data:boolValue>?</data:boolValue>\r
                  </data:simpleAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <data:complexAttribute name="?">\r
                     <!--You have a CHOICE of the next 1 items at this level-->\r
                     <data:nestedRecord>\r
                        <!--Optional:-->\r
                        <data:id>?</data:id>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttribute name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:11913627686</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttribute/>\r
                     </data:nestedRecord>\r
                  </data:complexAttribute>\r
               </data:classifiers>\r
               <!--Optional:-->\r
               <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
            </api:originRecord>\r
            <!--Optional:-->\r
            <api:relations>\r
               <!--Zero or more repetitions:-->\r
               <api:relation name="?">\r
                  <!--1 or more repetitions:-->\r
                  <api:record>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <api:integralEntity relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <data:etalonRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:971194182764</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:419571097600</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttribute>\r
                           <data:etalonKey id="?"/>\r
                           <!--Optional:-->\r
                           <data:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <data:integralEntities/>\r
                              <!--Zero or more repetitions:-->\r
                              <data:relationsTo relName="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <data:toEtalonKey id="?"/>\r
                                 <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttributes name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:1141942008679</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttributes>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttributes name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <data:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <data:id>?</data:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:simpleAttribute name="?">\r
                                          <!--You have a CHOICE of the next 9 items at this level-->\r
                                          <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>cid:677018512707</data:data>\r
                                          </data:blobValue>\r
                                          <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>?</data:data>\r
                                          </data:clobValue>\r
                                          <data:intValue>?</data:intValue>\r
                                          <data:dateValue>?</data:dateValue>\r
                                          <data:timeValue>?</data:timeValue>\r
                                          <data:timestampValue>?</data:timestampValue>\r
                                          <data:stringValue>?</data:stringValue>\r
                                          <data:numberValue>?</data:numberValue>\r
                                          <data:boolValue>?</data:boolValue>\r
                                       </data:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:complexAttribute/>\r
                                    </data:nestedRecord>\r
                                 </data:complexAttributes>\r
                                 <!--Optional:-->\r
                                 <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                              </data:relationsTo>\r
                           </data:relations>\r
                           <!--Zero or more repetitions:-->\r
                           <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:164413517169</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <data:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <data:id>?</data:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttribute name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:1315630282330</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttribute/>\r
                                 </data:nestedRecord>\r
                              </data:complexAttribute>\r
                           </data:classifiers>\r
                           <!--Optional:-->\r
                           <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                        </data:etalonRecord>\r
                        <data:originRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:1390359174875</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:247751486884</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttribute>\r
                           <data:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                           <!--Optional:-->\r
                           <data:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <data:integralEntities/>\r
                              <!--Zero or more repetitions:-->\r
                              <data:relationsTo relName="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <data:toEtalonKey id="?"/>\r
                                 <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttributes name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:1234848628753</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttributes>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttributes name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <data:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <data:id>?</data:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:simpleAttribute name="?">\r
                                          <!--You have a CHOICE of the next 9 items at this level-->\r
                                          <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>cid:252189136171</data:data>\r
                                          </data:blobValue>\r
                                          <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>?</data:data>\r
                                          </data:clobValue>\r
                                          <data:intValue>?</data:intValue>\r
                                          <data:dateValue>?</data:dateValue>\r
                                          <data:timeValue>?</data:timeValue>\r
                                          <data:timestampValue>?</data:timestampValue>\r
                                          <data:stringValue>?</data:stringValue>\r
                                          <data:numberValue>?</data:numberValue>\r
                                          <data:boolValue>?</data:boolValue>\r
                                       </data:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:complexAttribute/>\r
                                    </data:nestedRecord>\r
                                 </data:complexAttributes>\r
                                 <!--Optional:-->\r
                                 <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                              </data:relationsTo>\r
                           </data:relations>\r
                           <!--Zero or more repetitions:-->\r
                           <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:295409407387</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <data:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <data:id>?</data:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttribute name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:765533993004</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttribute/>\r
                                 </data:nestedRecord>\r
                              </data:complexAttribute>\r
                           </data:classifiers>\r
                           <!--Optional:-->\r
                           <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                        </data:originRecord>\r
                     </api:integralEntity>\r
                     <api:relationTo relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <data:toEtalonKey id="?"/>\r
                        <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttributes name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:1250913669737</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttributes>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttributes name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <data:nestedRecord>\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:826793507244</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute/>\r
                           </data:nestedRecord>\r
                        </data:complexAttributes>\r
                        <!--Optional:-->\r
                        <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                     </api:relationTo>\r
                     <api:range rangeFrom="?" rangeTo="?"/>\r
                     <api:referenceAliasKey value="?" entityAttributeName="?"/>\r
                  </api:record>\r
                  <!--Optional:-->\r
                  <api:override>\r
                     <!--Optional:-->\r
                     <api:range rangeFrom="?" rangeTo="?"/>\r
                  </api:override>\r
               </api:relation>\r
            </api:relations>\r
            <!--Optional:-->\r
            <api:range rangeFrom="?" rangeTo="?"/>\r
            <!--Zero or more repetitions:-->\r
            <api:aliasCodeAttributePointers aliasCodeAttributeName="?" recordAttributeName="?"/>\r
            <!--Zero or more repetitions:-->\r
            <api:classifierPointers classifierName="?" classifierPointer="?">\r
               <api:pointerType>?</api:pointerType>\r
            </api:classifierPointers>\r
         </api:requestUpsert>\r
         <api:requestRelationsUpsert lastUpdateDate="?" skipCleanse="false" bypassExtensionPoints="false">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <api:etalonKey id="?"/>\r
            <api:relations>\r
               <!--Zero or more repetitions:-->\r
               <api:relation name="?">\r
                  <!--1 or more repetitions:-->\r
                  <api:record>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <api:integralEntity relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <data:etalonRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:937174472542</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:1441833142684</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttribute>\r
                           <data:etalonKey id="?"/>\r
                           <!--Optional:-->\r
                           <data:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <data:integralEntities/>\r
                              <!--Zero or more repetitions:-->\r
                              <data:relationsTo relName="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <data:toEtalonKey id="?"/>\r
                                 <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttributes name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:1411812368250</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttributes>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttributes name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <data:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <data:id>?</data:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:simpleAttribute name="?">\r
                                          <!--You have a CHOICE of the next 9 items at this level-->\r
                                          <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>cid:154418481877</data:data>\r
                                          </data:blobValue>\r
                                          <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>?</data:data>\r
                                          </data:clobValue>\r
                                          <data:intValue>?</data:intValue>\r
                                          <data:dateValue>?</data:dateValue>\r
                                          <data:timeValue>?</data:timeValue>\r
                                          <data:timestampValue>?</data:timestampValue>\r
                                          <data:stringValue>?</data:stringValue>\r
                                          <data:numberValue>?</data:numberValue>\r
                                          <data:boolValue>?</data:boolValue>\r
                                       </data:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:complexAttribute/>\r
                                    </data:nestedRecord>\r
                                 </data:complexAttributes>\r
                                 <!--Optional:-->\r
                                 <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                              </data:relationsTo>\r
                           </data:relations>\r
                           <!--Zero or more repetitions:-->\r
                           <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:601417366986</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <data:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <data:id>?</data:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttribute name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:825669044925</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttribute/>\r
                                 </data:nestedRecord>\r
                              </data:complexAttribute>\r
                           </data:classifiers>\r
                           <!--Optional:-->\r
                           <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                        </data:etalonRecord>\r
                        <data:originRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:224355755350</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:1044132252013</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttribute>\r
                           <data:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                           <!--Optional:-->\r
                           <data:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <data:integralEntities/>\r
                              <!--Zero or more repetitions:-->\r
                              <data:relationsTo relName="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <data:toEtalonKey id="?"/>\r
                                 <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttributes name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:735809388424</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttributes>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttributes name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <data:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <data:id>?</data:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:simpleAttribute name="?">\r
                                          <!--You have a CHOICE of the next 9 items at this level-->\r
                                          <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>cid:1013258650261</data:data>\r
                                          </data:blobValue>\r
                                          <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>?</data:data>\r
                                          </data:clobValue>\r
                                          <data:intValue>?</data:intValue>\r
                                          <data:dateValue>?</data:dateValue>\r
                                          <data:timeValue>?</data:timeValue>\r
                                          <data:timestampValue>?</data:timestampValue>\r
                                          <data:stringValue>?</data:stringValue>\r
                                          <data:numberValue>?</data:numberValue>\r
                                          <data:boolValue>?</data:boolValue>\r
                                       </data:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:complexAttribute/>\r
                                    </data:nestedRecord>\r
                                 </data:complexAttributes>\r
                                 <!--Optional:-->\r
                                 <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                              </data:relationsTo>\r
                           </data:relations>\r
                           <!--Zero or more repetitions:-->\r
                           <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:1364840371914</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <data:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <data:id>?</data:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttribute name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:905380004438</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttribute/>\r
                                 </data:nestedRecord>\r
                              </data:complexAttribute>\r
                           </data:classifiers>\r
                           <!--Optional:-->\r
                           <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                        </data:originRecord>\r
                     </api:integralEntity>\r
                     <api:relationTo relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <data:toEtalonKey id="?"/>\r
                        <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttributes name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:1059793233515</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttributes>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttributes name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <data:nestedRecord>\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:1113328516795</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute/>\r
                           </data:nestedRecord>\r
                        </data:complexAttributes>\r
                        <!--Optional:-->\r
                        <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                     </api:relationTo>\r
                     <api:range rangeFrom="?" rangeTo="?"/>\r
                     <api:referenceAliasKey value="?" entityAttributeName="?"/>\r
                  </api:record>\r
                  <!--Optional:-->\r
                  <api:override>\r
                     <!--Optional:-->\r
                     <api:range rangeFrom="?" rangeTo="?"/>\r
                  </api:override>\r
               </api:relation>\r
            </api:relations>\r
            <!--Optional:-->\r
            <api:range rangeFrom="?" rangeTo="?"/>\r
         </api:requestRelationsUpsert>\r
         <api:requestMerge entityName="?" skipCleanse="false" bypassExtensionPoints="false">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:masterEtalonKey id="?"/>\r
            <api:masterOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:duplicateEtalonKey id="?"/>\r
            <api:duplicateOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
         </api:requestMerge>\r
         <api:requestSoftDelete actionType="?" wipe="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:etalonKey id="?"/>\r
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <!--Optional:-->\r
            <api:range rangeFrom="?" rangeTo="?"/>\r
         </api:requestSoftDelete>\r
         <api:requestRelationsSoftDelete actionType="?" wipe="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:etalonKey id="?"/>\r
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <api:relations>\r
               <!--Zero or more repetitions:-->\r
               <api:relation name="?">\r
                  <!--Zero or more repetitions:-->\r
                  <api:key>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                     <api:etalonKey id="?"/>\r
                     <api:range rangeFrom="?" rangeTo="?"/>\r
                  </api:key>\r
               </api:relation>\r
            </api:relations>\r
         </api:requestRelationsSoftDelete>\r
         <api:requestGet entityName="?" asOf="?" originsAsOf="?" etalonHistory="?" softDeleted="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:etalonKey id="?"/>\r
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
         </api:requestGet>\r
         <api:requestRelationsGet entityName="?" asOf="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:etalonKey id="?"/>\r
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <!--1 or more repetitions:-->\r
            <api:relations>?</api:relations>\r
         </api:requestRelationsGet>\r
         <api:requestSearch entityName="?" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="?">\r
            <api:searchCondition>\r
               <!--You have a CHOICE of the next 3 items at this level-->\r
               <api:and>\r
                  <!--You have a CHOICE of the next 3 items at this level-->\r
                  <api:and/>\r
                  <api:or>\r
                     <!--You have a CHOICE of the next 3 items at this level-->\r
                     <api:and/>\r
                     <api:or/>\r
                     <api:atom attributeName="?" operator="?" constant="?"/>\r
                  </api:or>\r
                  <api:atom attributeName="?" operator="?" constant="?"/>\r
               </api:and>\r
               <api:or>\r
                  <!--You have a CHOICE of the next 3 items at this level-->\r
                  <api:and>\r
                     <!--You have a CHOICE of the next 3 items at this level-->\r
                     <api:and/>\r
                     <api:or/>\r
                     <api:atom attributeName="?" operator="?" constant="?"/>\r
                  </api:and>\r
                  <api:or/>\r
                  <api:atom attributeName="?" operator="?" constant="?"/>\r
               </api:or>\r
               <api:atom attributeName="?" operator="?" constant="?"/>\r
            </api:searchCondition>\r
         </api:requestSearch>\r
         <api:requestGetDataQualityErrors entityName="?" forDate="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <api:etalonKey id="?"/>\r
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
         </api:requestGetDataQualityErrors>\r
         <api:requestMetaGetCleanseFunctionDesc cleanseFunctionName="?"/>\r
         <api:requestMetaGetCleanseFunctionList/>\r
         <api:requestInfoGet entityName="?" from="?" to="?"/>\r
         <api:requestBulkUpsert>\r
            <!--1 or more repetitions:-->\r
            <api:upsertRecordRequests entityName="?" lastUpdateDate="?" skipCleanse="false" mergeWithPreviousVersion="false" bypassExtensionPoints="false">\r
               <!--You have a CHOICE of the next 2 items at this level-->\r
               <api:etalonRecord>\r
                  <!--Optional:-->\r
                  <data:id>?</data:id>\r
                  <!--Zero or more repetitions:-->\r
                  <data:simpleAttribute name="?">\r
                     <!--You have a CHOICE of the next 9 items at this level-->\r
                     <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <data:data>cid:1111422969187</data:data>\r
                     </data:blobValue>\r
                     <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <data:data>?</data:data>\r
                     </data:clobValue>\r
                     <data:intValue>?</data:intValue>\r
                     <data:dateValue>?</data:dateValue>\r
                     <data:timeValue>?</data:timeValue>\r
                     <data:timestampValue>?</data:timestampValue>\r
                     <data:stringValue>?</data:stringValue>\r
                     <data:numberValue>?</data:numberValue>\r
                     <data:boolValue>?</data:boolValue>\r
                  </data:simpleAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <data:complexAttribute name="?">\r
                     <!--You have a CHOICE of the next 1 items at this level-->\r
                     <data:nestedRecord>\r
                        <!--Optional:-->\r
                        <data:id>?</data:id>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttribute name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:753882267763</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttribute/>\r
                     </data:nestedRecord>\r
                  </data:complexAttribute>\r
                  <data:etalonKey id="?"/>\r
                  <!--Optional:-->\r
                  <data:relations>\r
                     <!--Zero or more repetitions:-->\r
                     <data:integralEntities relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <data:etalonRecord/>\r
                        <data:originRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:740878951315</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:755624284851</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttribute>\r
                           <data:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                           <!--Optional:-->\r
                           <data:relations/>\r
                           <!--Zero or more repetitions:-->\r
                           <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:745831555677</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <data:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <data:id>?</data:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttribute name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:1125651305146</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttribute/>\r
                                 </data:nestedRecord>\r
                              </data:complexAttribute>\r
                           </data:classifiers>\r
                           <!--Optional:-->\r
                           <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                        </data:originRecord>\r
                     </data:integralEntities>\r
                     <!--Zero or more repetitions:-->\r
                     <data:relationsTo relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <data:toEtalonKey id="?"/>\r
                        <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttributes name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:849145120055</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttributes>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttributes name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <data:nestedRecord>\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:1365608978815</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute/>\r
                           </data:nestedRecord>\r
                        </data:complexAttributes>\r
                        <!--Optional:-->\r
                        <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                     </data:relationsTo>\r
                  </data:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                     <!--Optional:-->\r
                     <data:id>?</data:id>\r
                     <!--Zero or more repetitions:-->\r
                     <data:simpleAttribute name="?">\r
                        <!--You have a CHOICE of the next 9 items at this level-->\r
                        <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>cid:408074660551</data:data>\r
                        </data:blobValue>\r
                        <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>?</data:data>\r
                        </data:clobValue>\r
                        <data:intValue>?</data:intValue>\r
                        <data:dateValue>?</data:dateValue>\r
                        <data:timeValue>?</data:timeValue>\r
                        <data:timestampValue>?</data:timestampValue>\r
                        <data:stringValue>?</data:stringValue>\r
                        <data:numberValue>?</data:numberValue>\r
                        <data:boolValue>?</data:boolValue>\r
                     </data:simpleAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <data:complexAttribute name="?">\r
                        <!--You have a CHOICE of the next 1 items at this level-->\r
                        <data:nestedRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:824476000960</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute/>\r
                        </data:nestedRecord>\r
                     </data:complexAttribute>\r
                  </data:classifiers>\r
                  <!--Optional:-->\r
                  <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
               </api:etalonRecord>\r
               <api:originRecord>\r
                  <!--Optional:-->\r
                  <data:id>?</data:id>\r
                  <!--Zero or more repetitions:-->\r
                  <data:simpleAttribute name="?">\r
                     <!--You have a CHOICE of the next 9 items at this level-->\r
                     <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <data:data>cid:910056866182</data:data>\r
                     </data:blobValue>\r
                     <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <data:data>?</data:data>\r
                     </data:clobValue>\r
                     <data:intValue>?</data:intValue>\r
                     <data:dateValue>?</data:dateValue>\r
                     <data:timeValue>?</data:timeValue>\r
                     <data:timestampValue>?</data:timestampValue>\r
                     <data:stringValue>?</data:stringValue>\r
                     <data:numberValue>?</data:numberValue>\r
                     <data:boolValue>?</data:boolValue>\r
                  </data:simpleAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <data:complexAttribute name="?">\r
                     <!--You have a CHOICE of the next 1 items at this level-->\r
                     <data:nestedRecord>\r
                        <!--Optional:-->\r
                        <data:id>?</data:id>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttribute name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:804825968541</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttribute/>\r
                     </data:nestedRecord>\r
                  </data:complexAttribute>\r
                  <data:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                  <!--Optional:-->\r
                  <data:relations>\r
                     <!--Zero or more repetitions:-->\r
                     <data:integralEntities relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <data:etalonRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:1177473373809</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:590771174699</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttribute>\r
                           <data:etalonKey id="?"/>\r
                           <!--Optional:-->\r
                           <data:relations/>\r
                           <!--Zero or more repetitions:-->\r
                           <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:924952732953</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <data:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <data:id>?</data:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttribute name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:741131600390</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttribute/>\r
                                 </data:nestedRecord>\r
                              </data:complexAttribute>\r
                           </data:classifiers>\r
                           <!--Optional:-->\r
                           <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                        </data:etalonRecord>\r
                        <data:originRecord/>\r
                     </data:integralEntities>\r
                     <!--Zero or more repetitions:-->\r
                     <data:relationsTo relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <data:toEtalonKey id="?"/>\r
                        <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Zero or more repetitions:-->\r
                        <data:simpleAttributes name="?">\r
                           <!--You have a CHOICE of the next 9 items at this level-->\r
                           <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>cid:488426821419</data:data>\r
                           </data:blobValue>\r
                           <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <data:data>?</data:data>\r
                           </data:clobValue>\r
                           <data:intValue>?</data:intValue>\r
                           <data:dateValue>?</data:dateValue>\r
                           <data:timeValue>?</data:timeValue>\r
                           <data:timestampValue>?</data:timestampValue>\r
                           <data:stringValue>?</data:stringValue>\r
                           <data:numberValue>?</data:numberValue>\r
                           <data:boolValue>?</data:boolValue>\r
                        </data:simpleAttributes>\r
                        <!--Zero or more repetitions:-->\r
                        <data:complexAttributes name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <data:nestedRecord>\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:356708806125</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute/>\r
                           </data:nestedRecord>\r
                        </data:complexAttributes>\r
                        <!--Optional:-->\r
                        <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                     </data:relationsTo>\r
                  </data:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                     <!--Optional:-->\r
                     <data:id>?</data:id>\r
                     <!--Zero or more repetitions:-->\r
                     <data:simpleAttribute name="?">\r
                        <!--You have a CHOICE of the next 9 items at this level-->\r
                        <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>cid:1244688153057</data:data>\r
                        </data:blobValue>\r
                        <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <data:data>?</data:data>\r
                        </data:clobValue>\r
                        <data:intValue>?</data:intValue>\r
                        <data:dateValue>?</data:dateValue>\r
                        <data:timeValue>?</data:timeValue>\r
                        <data:timestampValue>?</data:timestampValue>\r
                        <data:stringValue>?</data:stringValue>\r
                        <data:numberValue>?</data:numberValue>\r
                        <data:boolValue>?</data:boolValue>\r
                     </data:simpleAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <data:complexAttribute name="?">\r
                        <!--You have a CHOICE of the next 1 items at this level-->\r
                        <data:nestedRecord>\r
                           <!--Optional:-->\r
                           <data:id>?</data:id>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttribute name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:291817956441</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttribute/>\r
                        </data:nestedRecord>\r
                     </data:complexAttribute>\r
                  </data:classifiers>\r
                  <!--Optional:-->\r
                  <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
               </api:originRecord>\r
               <!--Optional:-->\r
               <api:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <api:relation name="?">\r
                     <!--1 or more repetitions:-->\r
                     <api:record>\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <api:integralEntity relName="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <data:etalonRecord>\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:1002471772349</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <data:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <data:id>?</data:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttribute name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:1112666016888</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttribute/>\r
                                 </data:nestedRecord>\r
                              </data:complexAttribute>\r
                              <data:etalonKey id="?"/>\r
                              <!--Optional:-->\r
                              <data:relations>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:integralEntities/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:relationsTo relName="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <data:toEtalonKey id="?"/>\r
                                    <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttributes name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:1007421794627</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttributes>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttributes name="?">\r
                                       <!--You have a CHOICE of the next 1 items at this level-->\r
                                       <data:nestedRecord>\r
                                          <!--Optional:-->\r
                                          <data:id>?</data:id>\r
                                          <!--Zero or more repetitions:-->\r
                                          <data:simpleAttribute name="?">\r
                                             <!--You have a CHOICE of the next 9 items at this level-->\r
                                             <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                                <data:data>cid:602791549654</data:data>\r
                                             </data:blobValue>\r
                                             <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                                <data:data>?</data:data>\r
                                             </data:clobValue>\r
                                             <data:intValue>?</data:intValue>\r
                                             <data:dateValue>?</data:dateValue>\r
                                             <data:timeValue>?</data:timeValue>\r
                                             <data:timestampValue>?</data:timestampValue>\r
                                             <data:stringValue>?</data:stringValue>\r
                                             <data:numberValue>?</data:numberValue>\r
                                             <data:boolValue>?</data:boolValue>\r
                                          </data:simpleAttribute>\r
                                          <!--Zero or more repetitions:-->\r
                                          <data:complexAttribute/>\r
                                       </data:nestedRecord>\r
                                    </data:complexAttributes>\r
                                    <!--Optional:-->\r
                                    <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                                 </data:relationsTo>\r
                              </data:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:1169541386384</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <data:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <data:id>?</data:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:simpleAttribute name="?">\r
                                          <!--You have a CHOICE of the next 9 items at this level-->\r
                                          <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>cid:973843861198</data:data>\r
                                          </data:blobValue>\r
                                          <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>?</data:data>\r
                                          </data:clobValue>\r
                                          <data:intValue>?</data:intValue>\r
                                          <data:dateValue>?</data:dateValue>\r
                                          <data:timeValue>?</data:timeValue>\r
                                          <data:timestampValue>?</data:timestampValue>\r
                                          <data:stringValue>?</data:stringValue>\r
                                          <data:numberValue>?</data:numberValue>\r
                                          <data:boolValue>?</data:boolValue>\r
                                       </data:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:complexAttribute/>\r
                                    </data:nestedRecord>\r
                                 </data:complexAttribute>\r
                              </data:classifiers>\r
                              <!--Optional:-->\r
                              <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                           </data:etalonRecord>\r
                           <data:originRecord>\r
                              <!--Optional:-->\r
                              <data:id>?</data:id>\r
                              <!--Zero or more repetitions:-->\r
                              <data:simpleAttribute name="?">\r
                                 <!--You have a CHOICE of the next 9 items at this level-->\r
                                 <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>cid:538851867932</data:data>\r
                                 </data:blobValue>\r
                                 <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <data:data>?</data:data>\r
                                 </data:clobValue>\r
                                 <data:intValue>?</data:intValue>\r
                                 <data:dateValue>?</data:dateValue>\r
                                 <data:timeValue>?</data:timeValue>\r
                                 <data:timestampValue>?</data:timestampValue>\r
                                 <data:stringValue>?</data:stringValue>\r
                                 <data:numberValue>?</data:numberValue>\r
                                 <data:boolValue>?</data:boolValue>\r
                              </data:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <data:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <data:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <data:id>?</data:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttribute name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:34740420432</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttribute/>\r
                                 </data:nestedRecord>\r
                              </data:complexAttribute>\r
                              <data:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                              <!--Optional:-->\r
                              <data:relations>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:integralEntities/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:relationsTo relName="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <data:toEtalonKey id="?"/>\r
                                    <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:simpleAttributes name="?">\r
                                       <!--You have a CHOICE of the next 9 items at this level-->\r
                                       <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>cid:290432600483</data:data>\r
                                       </data:blobValue>\r
                                       <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <data:data>?</data:data>\r
                                       </data:clobValue>\r
                                       <data:intValue>?</data:intValue>\r
                                       <data:dateValue>?</data:dateValue>\r
                                       <data:timeValue>?</data:timeValue>\r
                                       <data:timestampValue>?</data:timestampValue>\r
                                       <data:stringValue>?</data:stringValue>\r
                                       <data:numberValue>?</data:numberValue>\r
                                       <data:boolValue>?</data:boolValue>\r
                                    </data:simpleAttributes>\r
                                    <!--Zero or more repetitions:-->\r
                                    <data:complexAttributes name="?">\r
                                       <!--You have a CHOICE of the next 1 items at this level-->\r
                                       <data:nestedRecord>\r
                                          <!--Optional:-->\r
                                          <data:id>?</data:id>\r
                                          <!--Zero or more repetitions:-->\r
                                          <data:simpleAttribute name="?">\r
                                             <!--You have a CHOICE of the next 9 items at this level-->\r
                                             <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                                <data:data>cid:1172364468922</data:data>\r
                                             </data:blobValue>\r
                                             <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                                <data:data>?</data:data>\r
                                             </data:clobValue>\r
                                             <data:intValue>?</data:intValue>\r
                                             <data:dateValue>?</data:dateValue>\r
                                             <data:timeValue>?</data:timeValue>\r
                                             <data:timestampValue>?</data:timestampValue>\r
                                             <data:stringValue>?</data:stringValue>\r
                                             <data:numberValue>?</data:numberValue>\r
                                             <data:boolValue>?</data:boolValue>\r
                                          </data:simpleAttribute>\r
                                          <!--Zero or more repetitions:-->\r
                                          <data:complexAttribute/>\r
                                       </data:nestedRecord>\r
                                    </data:complexAttributes>\r
                                    <!--Optional:-->\r
                                    <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                                 </data:relationsTo>\r
                              </data:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <data:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:899119878077</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <data:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <data:id>?</data:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:simpleAttribute name="?">\r
                                          <!--You have a CHOICE of the next 9 items at this level-->\r
                                          <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>cid:1260473249856</data:data>\r
                                          </data:blobValue>\r
                                          <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <data:data>?</data:data>\r
                                          </data:clobValue>\r
                                          <data:intValue>?</data:intValue>\r
                                          <data:dateValue>?</data:dateValue>\r
                                          <data:timeValue>?</data:timeValue>\r
                                          <data:timestampValue>?</data:timestampValue>\r
                                          <data:stringValue>?</data:stringValue>\r
                                          <data:numberValue>?</data:numberValue>\r
                                          <data:boolValue>?</data:boolValue>\r
                                       </data:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <data:complexAttribute/>\r
                                    </data:nestedRecord>\r
                                 </data:complexAttribute>\r
                              </data:classifiers>\r
                              <!--Optional:-->\r
                              <data:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                           </data:originRecord>\r
                        </api:integralEntity>\r
                        <api:relationTo relName="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <data:toEtalonKey id="?"/>\r
                           <data:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                           <!--Zero or more repetitions:-->\r
                           <data:simpleAttributes name="?">\r
                              <!--You have a CHOICE of the next 9 items at this level-->\r
                              <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>cid:569635285765</data:data>\r
                              </data:blobValue>\r
                              <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <data:data>?</data:data>\r
                              </data:clobValue>\r
                              <data:intValue>?</data:intValue>\r
                              <data:dateValue>?</data:dateValue>\r
                              <data:timeValue>?</data:timeValue>\r
                              <data:timestampValue>?</data:timestampValue>\r
                              <data:stringValue>?</data:stringValue>\r
                              <data:numberValue>?</data:numberValue>\r
                              <data:boolValue>?</data:boolValue>\r
                           </data:simpleAttributes>\r
                           <!--Zero or more repetitions:-->\r
                           <data:complexAttributes name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <data:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <data:id>?</data:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:simpleAttribute name="?">\r
                                    <!--You have a CHOICE of the next 9 items at this level-->\r
                                    <data:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>cid:882308483210</data:data>\r
                                    </data:blobValue>\r
                                    <data:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <data:data>?</data:data>\r
                                    </data:clobValue>\r
                                    <data:intValue>?</data:intValue>\r
                                    <data:dateValue>?</data:dateValue>\r
                                    <data:timeValue>?</data:timeValue>\r
                                    <data:timestampValue>?</data:timestampValue>\r
                                    <data:stringValue>?</data:stringValue>\r
                                    <data:numberValue>?</data:numberValue>\r
                                    <data:boolValue>?</data:boolValue>\r
                                 </data:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <data:complexAttribute/>\r
                              </data:nestedRecord>\r
                           </data:complexAttributes>\r
                           <!--Optional:-->\r
                           <data:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                        </api:relationTo>\r
                        <api:range rangeFrom="?" rangeTo="?"/>\r
                        <api:referenceAliasKey value="?" entityAttributeName="?"/>\r
                     </api:record>\r
                     <!--Optional:-->\r
                     <api:override>\r
                        <!--Optional:-->\r
                        <api:range rangeFrom="?" rangeTo="?"/>\r
                     </api:override>\r
                  </api:relation>\r
               </api:relations>\r
               <!--Optional:-->\r
               <api:range rangeFrom="?" rangeTo="?"/>\r
               <!--Zero or more repetitions:-->\r
               <api:aliasCodeAttributePointers aliasCodeAttributeName="?" recordAttributeName="?"/>\r
               <!--Zero or more repetitions:-->\r
               <api:classifierPointers classifierName="?" classifierPointer="?">\r
                  <api:pointerType>?</api:pointerType>\r
               </api:classifierPointers>\r
            </api:upsertRecordRequests>\r
         </api:requestBulkUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="apiCall"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" id="8c057321-b813-49ee-8cf7-3e55242cce4b" wadlVersion="http://wadl.dev.java.net/2009/02" name="REST API" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint></con:endpoints><con:resource name="login" path="/authentication/login" id="f4dc1513-1cc4-4902-8327-7189e5b1c1f6"><con:settings/><con:parameters/><con:method name="POST" id="08005e13-d6b1-4a07-a278-5e682e7d7ce3" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="http://localhost/nsi-asoup-3-backend/api/internal/authentication/login">log:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:request name="doLogin" id="32af7288-df74-491c-bb14-e12eb6b4231e" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "userName": "admin",
  "password": "admin1234"
}</con:request><con:originalUri>http://localhost/nsi-asoup-3-backend/api/internal/authentication/login</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="get-current-user" path="/authentication/get-current-user" id="fb295624-d863-4d8f-8f12-1c35d8188bd6"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="be559a8e-7ae9-4740-8ccb-dbdbcb474566" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://localhost/nsi-asoup-3-backend/api/internal/authentication/get-current-user">get:Response</con:element></con:representation><con:request name="getCurrentUser" id="179c6542-16a3-444a-b488-6a8addda01f1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/nsi-asoup-3-backend/api/internal/authentication/get-current-user</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="d1348b57-3623-4c86-b5a9-bae8c9d95d18" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="user" path="/security/user" id="10536f6b-b0f0-49ce-aa80-6a9ab6cd23fa"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="POST" id="0773fea9-19ba-44e4-9af4-5040a9bd927c" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403 500</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:user="http://localhost/nsi-asoup-3-backend/api/internal/security/user">user:Response</con:element></con:representation><con:request name="createUser" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser77@testuser77.com",
  "firstName": "New-testuser77",
  "lastName": "User-testuser77",
  "login": "testuser77",
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [
    {
      "id": -4,
      "name": "department",
      "displayName": "",
      "value": ""
    },
	{
      "id": -5,
      "name": "phone",
      "displayName": "",
      "value": ""
    },
	{
      "id": -6,
      "name": "city",
      "displayName": "",
      "value": ""
    }
  ],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/nsi-asoup-3-backend/api/internal/security/user</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="d1348b57-3623-4c86-b5a9-bae8c9d95d18" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="lookup-entities" path="/meta/lookup-entities" id="53ad2517-a60a-4df2-8922-2d77ee51875f"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>page</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>size</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sort</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="e8509125-7e2e-4f08-bac5-23c24b8059d7" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:look="http://localhost/nsi-asoup-3-backend/api/internal/meta/lookup-entities">look:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="getLookupEntitiesList" id="d2fb8a38-2e1b-43e9-93e2-cba7d45f1172" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/nsi-asoup-3-backend/api/internal/meta/lookup-entities</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="996ca041-e060-455b-b77a-ed386ba6a070"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="entities" path="/meta/entities" id="38d445d8-ef58-4f07-a26f-cdf878cdce8d"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>page</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>size</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sort</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="8908430a-8857-4645-b8dd-7b8855c84f92" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ent="http://localhost/nsi-asoup-3-backend/api/internal/meta/entities">ent:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="getEntitiesList" id="0f158123-b81f-4e0e-b9c0-dbeed1210cf1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/nsi-asoup-3-backend/api/internal/meta/entities</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="996ca041-e060-455b-b77a-ed386ba6a070"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="source-systems" path="/meta/source-systems" id="ea8ec5e8-3b17-4b5b-a11f-47f00e66440c"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="7bdc03cf-ccd8-4239-a510-41099f65355f" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sour="http://localhost/nsi-asoup-3-backend/api/internal/meta/source-systems">sour:Response</con:element></con:representation><con:request name="getSourceSystemsList" id="44513107-decf-41ff-b70f-57ec56eda6d8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="27168e1c-4c5f-45cf-be5a-dda607da389f" name="requestAuthenticate"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="846a5f34-ccfc-4029-9800-e39bf9a5fbe3" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="All-in-one requestAuthenticate test cases" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="1. Login as admin" id="d6f4de7b-bf6e-4103-a450-0c9230949f9f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer sessionToken to createUser request" id="dccee485-3515-483e-a299-a778d0a2f2af"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to 4 step</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>1. Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>4. Create non-admin user</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random append for non-admin username" id="870722c3-2562-45c5-8d70-1e25758152de"><con:settings/><con:config><script>random = new Random().nextInt(199999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="restrequest" name="4. Create non-admin user" id="45c2fdf6-67c6-4960-bdda-56b4945a16e8"><con:settings/><con:config service="REST API" resourcePath="/security/user" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Create non-admin user" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser${3. Generate random append for non-admin username#result}@testuser${3. Generate random append for non-admin username#result}.com",
  "firstName": "FirstName${3. Generate random append for non-admin username#result}",
  "lastName": "LastName${3. Generate random append for non-admin username#result}",
  "login": "testuser${3. Generate random append for non-admin username#result}",
 
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [
    {
      "id": -4,
      "name": "department",
      "displayName": "",
      "value": ""
    },
	{
      "id": -5,
      "name": "phone",
      "displayName": "",
      "value": ""
    },
	{
      "id": -6,
      "name": "city",
      "displayName": "",
      "value": ""
    }
  ],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/nsi-asoup-3-backend/api/internal/security/user</con:originalUri><con:assertion type="JsonPath Match" id="bac2b501-edb8-4705-98a4-f10cdbff7997" name="JsonPath Match"><con:configuration><path>success</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="88d9f928-0323-4cee-8e99-85ed0975174f" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="5. Login as non-admin user" id="4bb1c8e2-c19e-4367-af83-a816614ddb69"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Login as non-admin user" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="testuser${3. Generate random append for non-admin username#result}" password="password32"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin=false"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:responseAuthenticate[@isAdmin='false']</path><content>&lt;responseAuthenticate isAdmin="false" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;sessionToken token="*"/>
&lt;/responseAuthenticate></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Login as non-existent user" id="5c9c9fae-1808-4c97-b26c-fea57b0b1140"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Login as non-existent user" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="blablabla${3. Generate random append for non-admin username#result}" password="password32"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="exitCode=AuthenticationError"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='AuthenticationError']</path><content>&lt;common exitCode="AuthenticationError" processingTime="0" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="Authentication with supplied credentials failed. Please, verify user and password."/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Login with wrong password" id="ca96b44f-ae47-41e6-8405-1ba0742042df"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Login with wrong password" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="testuser${3. Generate random append for non-admin username#result}" password="wrongpassword32"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="exitCode=AuthenticationError"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='AuthenticationError']</path><content>&lt;common exitCode="AuthenticationError" processingTime="0" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="Authentication with supplied credentials failed. Please, verify user and password."/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Login with empty values of username and password" id="cfbfba0e-27b3-478b-8e19-23432ab477be"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Login with empty values of username and password" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="" password=""/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="exitCode=AuthenticationError"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='AuthenticationError']</path><content>&lt;common exitCode="AuthenticationError" processingTime="0" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="Authentication with supplied credentials failed. Please, verify user and password."/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Login as admin with doLogin=false" id="e30af3f9-392d-47b5-b310-c4baecd65ac5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Login as admin with doLogin=false" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="false"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="43caac6f-544a-4839-9412-5f46862b9733" name="List of admin's roles"><con:configuration><token>&lt;role name="ADMIN_SYSTEM_MANAGEMENT"/>
            &lt;role name="ADMIN_CLASSIFIER_MANAGEMENT"/>
            &lt;role name="ADMIN_MATCHING_MANAGEMENT"/>
            &lt;role name="ADMIN_DATA_MANAGEMENT"/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Login as non-admin user with doLogin=false" id="bd2cc1a2-139d-4e23-9f0f-b9367797a020"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Login as non-admin user with doLogin=false" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                <api:credentials username="testuser${3. Generate random append for non-admin username#result}" password="password32"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="false"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin = False"><con:configuration><path>//@isAdmin</path><content>false</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="43caac6f-544a-4839-9412-5f46862b9733" name="List of user's roles" disabled="true"><con:configuration><token>&lt;role name="ADMIN_SYSTEM_MANAGEMENT"/>
            &lt;role name="ADMIN_DATA_MANAGEMENT"/>

</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="bbba6f1c-6914-476e-b384-0d9404aab36a" name="requestInfoGet"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e49aab3a-d0bb-4c5f-b307-af33fbefb919" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="All-in-one requestInfoGet test cases" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="0. Get admin sessionToken" id="7b8a8510-f047-4e1f-8965-9f096167aa3e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="0. Get admin sessionToken" id="7a4df614-6112-4a0e-904d-e4e77feb9875"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f799e3b8-6275-4cbb-8171-78b49dc8c7f5"/><con:assertion type="XPath Match" id="34fe31c8-9608-4204-acca-85621287eeeb" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4a4f8f47-6938-4c43-920e-ed575184b480" name="isAdmin = true"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="1. Transfer adminSessionToken to Auth Header" id="b1cf2ab4-c8ef-42e6-9859-75ab57309812"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>adminSessionToken to Get lookup ent</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>0. Get admin sessionToken</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>5. Get lookup entities list</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>adminSessionToken to Get ent list</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>0. Get admin sessionToken</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>2. Get entities list</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get entities list" id="2bd76365-133f-4d7b-b686-c2b542c7a899"><con:settings/><con:config service="REST API" resourcePath="/meta/entities" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get entities list" id="0f158123-b81f-4e0e-b9c0-dbeed1210cf1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/nsi-asoup-3-backend/api/internal/meta/entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c51d1a68-224f-4903-8f74-cc53d5a1c7d1" name="Check Auth on HTTP status"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="7be67e28-f31b-4b37-8fc1-d34ded0d2f70"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer entity name of 0 element to prop commonEntityName" id="795c9c0a-5d86-41ba-84e5-bbd5a9cc6b30"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>all content to commonEntName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Get entities list</con:sourceStep><con:sourcePath>content[0].name</con:sourcePath><con:targetType>commonEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do InfoGet request for Entity" id="3191f020-9172-4120-b7d4-454615cb62bd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do InfoGet request for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="${#TestCase#rangeFrom}" to="${#TestCase#rangeTo}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bc079a2b-4312-452e-86c3-a4b75b528c92" name="UPDATED"><con:configuration><token>UPDATED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8196d8f-107f-4579-8141-770a9106767b" name="NEW"><con:configuration><token>NEW</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11b3c833-adf2-443d-973b-b1bb50f10621" name="ERRORS"><con:configuration><token>ERRORS</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="afe368c6-036c-454c-8657-a8ff2068b214" name="MERGED"><con:configuration><token>MERGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b4b167ca-1984-4d7c-a7dd-4544673572df" name="TOTAL"><con:configuration><token>TOTAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cc5dbfb3-05ec-4362-ae7e-a41b4df6b7ae" name="DUPLICATES"><con:configuration><token>DUPLICATES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="5. Get lookup entities list" id="79026473-dc7b-4ee0-9a31-61270f83c2c3"><con:settings/><con:config service="REST API" resourcePath="/meta/lookup-entities" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Get lookup entities list" id="d2fb8a38-2e1b-43e9-93e2-cba7d45f1172" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/nsi-asoup-3-backend/api/internal/meta/lookup-entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cffccf0d-2647-4181-b34c-17e8c07a541e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="7be67e28-f31b-4b37-8fc1-d34ded0d2f70"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer lookup entity name of 0 element to prop commonEntityName" id="247e3963-c3df-4915-ac69-39fb85e320f9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>lookup name to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Get lookup entities list</con:sourceStep><con:sourcePath>content[0].name</con:sourcePath><con:targetType>commonEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do InfoGet request for lookupEntity" id="bd0545a7-befa-4605-95ca-3920a87b0373"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do InfoGet request for lookupEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="${#TestCase#rangeFrom}" to="${#TestCase#rangeTo}"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bc079a2b-4312-452e-86c3-a4b75b528c92" name="UPDATED"><con:configuration><token>UPDATED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8196d8f-107f-4579-8141-770a9106767b" name="NEW"><con:configuration><token>NEW</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11b3c833-adf2-443d-973b-b1bb50f10621" name="ERRORS"><con:configuration><token>ERRORS</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="afe368c6-036c-454c-8657-a8ff2068b214" name="MERGED"><con:configuration><token>MERGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b4b167ca-1984-4d7c-a7dd-4544673572df" name="TOTAL"><con:configuration><token>TOTAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cc5dbfb3-05ec-4362-ae7e-a41b4df6b7ae" name="DUPLICATES"><con:configuration><token>DUPLICATES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Do InfoGet request for non-existent Entity" id="b0dad199-d0a3-4ec0-b6e1-b1f739be7a21"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do InfoGet request for non-existent Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestInfoGet entityName="blablabla789078907890" from="${#TestCase#rangeFrom}" to="${#TestCase#rangeTo}"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="efbae329-f1a0-49fb-b64a-142d9c0881a4" name="errorCode = EX_META_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_META_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Do InfoGet request without time in Ranges" id="e88a585c-ebf9-40eb-bba6-ac9894ec18f7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Do InfoGet request without time in Ranges" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="1900-01-01" to="9999-12-31"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bc079a2b-4312-452e-86c3-a4b75b528c92" name="UPDATED"><con:configuration><token>UPDATED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8196d8f-107f-4579-8141-770a9106767b" name="NEW"><con:configuration><token>NEW</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11b3c833-adf2-443d-973b-b1bb50f10621" name="ERRORS"><con:configuration><token>ERRORS</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="afe368c6-036c-454c-8657-a8ff2068b214" name="MERGED"><con:configuration><token>MERGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b4b167ca-1984-4d7c-a7dd-4544673572df" name="TOTAL"><con:configuration><token>TOTAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cc5dbfb3-05ec-4362-ae7e-a41b4df6b7ae" name="DUPLICATES"><con:configuration><token>DUPLICATES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Do InfoGet request: from > to" id="f42a4add-ab20-4f17-9c16-0cb9beaebec4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Do InfoGet request: from > to" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="${#TestCase#rangeTo}" to="${#TestCase#rangeFrom}"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ce3aa391-b348-49a8-937e-7a05e3a43666" name="Contains &lt;responseInfoGet>"><con:configuration><token>&lt;responseInfoGet></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Do InfoGet request: from = to" id="2e2fd78b-f0a0-4345-aa9d-241c1dff530a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do InfoGet request: from = to" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="${#TestCase#rangeFrom}" to="${#TestCase#rangeFrom}"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="1419be84-8d02-49eb-89d3-67e780c9507e" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f5c3d124-e30d-4155-90ef-3e0bdfbf95a3" name="Contains &lt;responseInfoGet>"><con:configuration><token>&lt;responseInfoGet></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>commonEntityName</con:name><con:value>REST_S_LINK</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="7b0f3968-7018-4d8c-b935-b917850c37eb" name="requestGet"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="bcad3845-f43a-4513-b19d-d4e903afdf13" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestGet with origin and etalon keys for Entity (+3 additional cases)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="7917933b-d678-4a0b-80a7-e1ac4074827c"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="608205b5-2a18-4bfa-94e9-cf2e74502cd0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="a5b866f8-39a7-4bdc-a5af-babdf64cdfc1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="69c1d087-ffbc-4619-8dff-ea3845b2d7b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with origin key for Entity" id="ac0e7342-70e4-4781-aba7-28889abf268e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with origin key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            <!--<api:etalonKey id="?"/>
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Do requestGet with etalon key for Entity" id="37464b14-ec86-4aaa-be30-7e584e51532e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Do requestGet with etalon key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="2016-12-12T18:14:50.632">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="5392bd33-b2f3-4837-8f49-767edf2f1bb7" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="88ff3cdc-49d8-4f99-8e37-22e20f8880db" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Do requestGet with non-existing etalon key" id="e32bc64d-8463-4feb-80e6-9925c447c978"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestGet with non-existing etalon key" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">
            
             <api:etalonKey id="non-existing-${#TestCase#etalonKeyID}"/>          
<!--

            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
     -->       
         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6e5642cd-4fe2-4d42-a8f2-e52dd807042e" name="errorCode = EX_DATA_GET_NOT_FOUND_BY_SUPPLIED_KEYS"><con:configuration><path>//@errorCode</path><content>EX_DATA_GET_NOT_FOUND_BY_SUPPLIED_KEYS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Do requestGet with non-existing origin key" id="60d60be3-3767-4540-bf9b-7cd3fa2333e8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestGet with non-existing origin key" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:originKey id="non-existing-${#TestCase#originKeyID}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            <!--<api:originKey id="non-existing-${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="86281228-95e5-4ae3-8444-5efaff7db468" name="errorCode = EX_DATA_GET_NOT_FOUND_BY_SUPPLIED_KEYS"><con:configuration><path>//@errorCode</path><content>EX_DATA_GET_NOT_FOUND_BY_SUPPLIED_KEYS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Do requestGet with non-existing Entity" id="dd7b119e-302d-4ba2-897f-e074ea050906"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Do requestGet with non-existing Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="non-existing-${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">
            
            <api:originKey id="${#TestCase#originKeyID}" sourceSystem="${#TestCase#sourceSystem}" entityName="non-existing-${#TestCase#entityName}"/>
<!--
<api:etalonKey id="?"/>
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
     -->       
         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>1d8bc351-31bf-4ec4-b33e-42471c406dd6</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">67bf5b0c-aaab-4bbd-a5d5-5802c8063214</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="1d8bc351-31bf-4ec4-b33e-42471c406dd6" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>133012</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="a0b9a77d-4327-4981-aba4-d592216c6992" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Do requestGet with etalon key for lookupEntity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="a8ed8df1-9842-42bf-9844-ed7033c5a19f"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="3539dbbd-404c-4d22-a496-08fc4b3609c7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="c6d90e44-94be-4110-a921-907f76da1d8c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#lookup_attrs}

 <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="dd9250d6-97b7-4f80-94ed-a311e1fca3b0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with etalon key for lookupEntity" id="ab1bd2d3-ea26-4fcb-ae5c-dddb8a7bc701"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with etalon key for lookupEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="5392bd33-b2f3-4837-8f49-767edf2f1bb7" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="88ff3cdc-49d8-4f99-8e37-22e20f8880db" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>e43a86c7-6766-469d-822b-ff1f49786d42</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">bb9ff6b8-a787-4487-b3d1-af21514eda7f</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="e43a86c7-6766-469d-822b-ff1f49786d42" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>116148</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="KOD"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="NAME"> <data:stringValue>test string ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="f6674e3a-8ef6-4fc9-86ad-3cd64323b672" name="requestRelationsGet"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="61f3cfff-bfd1-44fc-a537-793b0c9453df" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestRelationsGet with origin and etalon keys for Entity (+2 additional cases)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b6751a7b-88ef-47dd-89eb-7c01a0ae16e2"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random
asdf =  random +1</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="ed4306fd-aabf-4e1c-b548-cc3aa85e6972"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="b3b8f67b-9cc5-4903-8ad3-2d647e6e6ed4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="4494b062-f48a-4bc4-a820-6120e1f2b351"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer refEtalonKey to Upsert" id="f5bb07df-a68f-41e6-b7ab-b85dd4c3325c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="aed6b5d4-abf8-43bd-af71-c903c751c123"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="53137806-e5cf-45b1-b824-a7d5746c379b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsGet with etalon key for Entity" id="70470051-f4e1-4a15-8bd9-778c094dab60"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsGet with etalon key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="2016-11-29T00:00:00.000">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Do requestRelationsGet with origin key for Entity" id="8e247b0e-5ab7-48b7-ba5a-08f2fc202d5b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Do requestRelationsGet with origin key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}">
            
            <!-- <api:etalonKey id="${#TestCase#etalonKeyID}"/> -->
            <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Do requestRelationsGet with etalon without relation" id="e4471bc5-7e92-4369-987c-a7cd0cb0a6c3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Do requestRelationsGet with etalon without relation" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}">
            
            <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>

            <!--1 or more repetitions:   -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="Simple Contains" id="79124381-fc32-4599-bc74-82df1a38dbc0" name="Contains empty response"><con:configuration><token> &lt;responseRelationsGet>
            &lt;relations/>
         &lt;/responseRelationsGet>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsGet with non-existing relation" id="ec7cc7f9-b890-435d-97f3-cf1b14a0a28e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsGet with non-existing relation" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>

            <!--1 or more repetitions:   -->
            <api:relations>non-existing-${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="01b00878-e4ff-4692-9364-fefd4df7a0c8" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="ca83a43f-854c-4546-814a-7134a8a015de" name="errorCode = EX_DATA_RELATIONS_GET_RELATION_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_DATA_RELATIONS_GET_RELATION_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>5baf39a3-784c-4b3e-ae71-9ec9f0695925</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">91ccba1d-cbc8-4ba2-aeb3-8230a393718b</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="5baf39a3-784c-4b3e-ae71-9ec9f0695925" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>214620</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>251972</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>341370c8-e4aa-4aca-a5c8-0a7446740054</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-21T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="fd61eede-606f-4f8f-b16e-427644fae5e8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Check asOf parameter (many-to-many)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="3da8943f-8b4f-4380-9111-b9aadda83a37"><con:settings/><con:config><script>rand1 = new Random().nextInt(299999 - 100000) + 100000
rand2 = new Random().nextInt(299999 - 100000) + 100000
rand3 = new Random().nextInt(299999 - 100000) + 100000
rand4 = new Random().nextInt(299999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData11", rand2.toString())
testRunner.testCase.setPropertyValue("randomData12", rand3.toString())
testRunner.testCase.setPropertyValue("randomData13", rand4.toString())</script></con:config></con:testStep><con:testStep type="request" name="2. Upsert first record to refEntity" id="f0c67a58-71a9-44e0-b1b6-38054228b8ce"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="2. Upsert first record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs1}

<data:originKey externalId="${#TestCase#randomData11}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="3. Upsert second record to refEntity" id="389ef55e-3f90-4082-9ed7-2c0838035c90"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert second record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs2}

<data:originKey externalId="${#TestCase#randomData12}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="4. Upsert third record to refEntity" id="9ac012ed-26f4-4346-beac-da1c941661e2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert third record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs3}

<data:originKey externalId="${#TestCase#randomData13}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="6bbd8bdb-b2b4-4762-a573-b559caceb58b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. buff to refEtalonKeyID1</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to refOriginKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. buff to refEtalonKeyID2</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to refOriginKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. buff to refEtalonKeyID3</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to refOriginKeyID3</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="1515e648-8de3-4d4d-8a82-94b702c24b77"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

   		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID1}"/>
                        </api:relationTo>
                        ${#TestCase#range1}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range1}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="ec6b6804-3c90-4dc3-9744-c0479270bc20"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID2}"/>
                        </api:relationTo>
                        ${#TestCase#range2}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range2}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="601a3ec6-1242-494f-811c-b72cbf9cd3de"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID3}"/>
                        </api:relationTo>
                         ${#TestCase#range3}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range3}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer origin and etalon keys to properties" id="34963e62-399f-4634-938e-8d0d087ce62d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to etalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Do requestRelationsGet for record with asOf from first period" id="891efe2e-0927-40b2-aa99-45322066dc59"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Do requestRelationsGet for record with asOf from first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf1}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID1"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsGet for record with asOf from second period" id="fe818f7b-b152-45f2-b704-fdb731438211"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsGet for record with asOf from second period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf2}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID2"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID2}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Do requestRelationsGet for record with asOf from third period" id="1a65398c-7181-40c2-a67c-18994ac065f3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Do requestRelationsGet for record with asOf from third period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf3}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID3"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID3}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MNOGIE</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="attr_simp_mnogie">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>7a2b1802-523d-464e-b778-a3d511051aae</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2e51433a-7897-4ac8-99a5-d22d59e534ef</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="7a2b1802-523d-464e-b778-a3d511051aae" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>246913</con:value></con:property><con:property><con:name>randomData11</con:name><con:value>232376</con:value></con:property><con:property><con:name>randomData12</con:name><con:value>190387</con:value></con:property><con:property><con:name>randomData13</con:name><con:value>211944</con:value></con:property><con:property><con:name>range1</con:name><con:value>&lt;api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/></con:value></con:property><con:property><con:name>range2</con:name><con:value>&lt;api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/></con:value></con:property><con:property><con:name>range3</con:name><con:value>&lt;api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/></con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs1</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData11}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs2</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData12}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs3</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData13}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID1</con:name><con:value>0945725f-5532-4ac0-b4ab-8bc4524ffd3a</con:value></con:property><con:property><con:name>refEtalonKeyID2</con:name><con:value>c7e1f6e3-1323-45d8-afad-cbc2dc53f793</con:value></con:property><con:property><con:name>refEtalonKeyID3</con:name><con:value>c4d03d08-c61f-4518-9148-8d313e8c5299</con:value></con:property><con:property><con:name>refOriginKeyID1</con:name><con:value>cf41c140-4cfe-44a7-a45c-f71e79fdcfce</con:value></con:property><con:property><con:name>refOriginKeyID2</con:name><con:value>266a9cd3-3bb2-4856-8a64-a112c21770fb</con:value></con:property><con:property><con:name>refOriginKeyID3</con:name><con:value>d55b022a-19b7-4bea-95fd-223552b75319</con:value></con:property><con:property><con:name>relName1</con:name><con:value>MNOG_2_MNOG</con:value></con:property><con:property><con:name>asOf1</con:name><con:value>2016-07-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf2</con:name><con:value>2016-08-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf3</con:name><con:value>2016-09-11T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="f8a0784d-d756-43fc-8710-3a31e6e00ecf" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3. Check asOf parameter (reference)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="5453682a-d001-47ef-8cad-d70e1ef8f802"><con:settings/><con:config><script>rand1 = new Random().nextInt(299999 - 100000) + 100000
rand2 = new Random().nextInt(299999 - 100000) + 100000
rand3 = new Random().nextInt(299999 - 100000) + 100000
rand4 = new Random().nextInt(299999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData11", rand2.toString())
testRunner.testCase.setPropertyValue("randomData12", rand3.toString())
testRunner.testCase.setPropertyValue("randomData13", rand4.toString())</script></con:config></con:testStep><con:testStep type="request" name="2. Upsert first record to refEntity" id="4e98b35d-d6da-4024-82ae-ac124278a820"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="2. Upsert first record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs1}

<data:originKey externalId="${#TestCase#randomData11}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="3. Upsert second record to refEntity" id="1560b504-5829-4581-b463-d92d4cf5093e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert second record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs2}

<data:originKey externalId="${#TestCase#randomData12}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="4. Upsert third record to refEntity" id="eea9bab2-33a5-4d59-b03b-38ac413bc7d8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert third record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs3}

<data:originKey externalId="${#TestCase#randomData13}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="ebaecdcd-3ba1-47fb-aa7b-6e48108a45f3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. buff to refEtalonKeyID1</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to refOriginKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. buff to refEtalonKeyID2</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to refOriginKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. buff to refEtalonKeyID3</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to refOriginKeyID3</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="1dbffb69-f9f8-4a9b-8356-cdeb15c2c3bf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

   		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID1}"/>
                        </api:relationTo>
                        ${#TestCase#range1}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range1}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="10ef6eb2-ad38-4d34-a433-143ab6e29863"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID2}"/>
                        </api:relationTo>
                        ${#TestCase#range2}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range2}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="309fe8cd-75db-4a05-9f9b-ed8bb43fb1c4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID3}"/>
                        </api:relationTo>
                         ${#TestCase#range3}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range3}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer origin and etalon keys to properties" id="3333e720-55fe-4346-9be2-713312107343"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to etalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Do requestRelationsGet for record with asOf from first period" id="1c05e800-a640-4ffc-9cf5-9d2096898654"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Do requestRelationsGet for record with asOf from first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf1}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID1"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsGet for record with asOf from second period" id="cdc9e6f1-f58a-4bc2-893d-a97db340fc6c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsGet for record with asOf from second period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf2}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID2"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID2}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Do requestRelationsGet for record with asOf from third period" id="f7f896fc-df88-4332-9bf2-9af55b408449"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Do requestRelationsGet for record with asOf from third period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf3}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID3"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID3}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>9eb07e2c-566e-4458-98b1-ae866d0b7f4d</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">adec8cd8-3046-4ff9-bec8-3fbdfe29636e</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="9eb07e2c-566e-4458-98b1-ae866d0b7f4d" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>242894</con:value></con:property><con:property><con:name>randomData11</con:name><con:value>129979</con:value></con:property><con:property><con:name>randomData12</con:name><con:value>116656</con:value></con:property><con:property><con:name>randomData13</con:name><con:value>127850</con:value></con:property><con:property><con:name>range1</con:name><con:value>&lt;api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/></con:value></con:property><con:property><con:name>range2</con:name><con:value>&lt;api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/></con:value></con:property><con:property><con:name>range3</con:name><con:value>&lt;api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/></con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs1</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData11}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs2</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData12}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs3</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData13}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID1</con:name><con:value>edb82d48-9926-48c4-a2a6-c2fe44621dfe</con:value></con:property><con:property><con:name>refEtalonKeyID2</con:name><con:value>b5cd93bd-fe67-46e6-af9d-0dddb293f8da</con:value></con:property><con:property><con:name>refEtalonKeyID3</con:name><con:value>f19ab245-8d35-4f5b-9d3c-68529af39612</con:value></con:property><con:property><con:name>refOriginKeyID1</con:name><con:value>ca7d9653-e926-4e6e-b1ae-d5428fc483d1</con:value></con:property><con:property><con:name>refOriginKeyID2</con:name><con:value>e7ecb539-998b-498a-8d36-88be3c74a9d5</con:value></con:property><con:property><con:name>refOriginKeyID3</con:name><con:value>31c644fd-5dd2-487f-a664-30eec4bfe6b3</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>asOf1</con:name><con:value>2016-07-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf2</con:name><con:value>2016-08-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf3</con:name><con:value>2016-09-11T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="96e714db-a0a5-4b2a-93dd-da6eb87e2fd2" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="4. Check asOf parameter (reference status)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="88ab151a-32b7-4af5-aeeb-4572f49a8712"><con:settings/><con:config><script>rand1 = new Random().nextInt(299999 - 100000) + 100000
rand2 = new Random().nextInt(299999 - 100000) + 100000
rand3 = new Random().nextInt(299999 - 100000) + 100000
rand4 = new Random().nextInt(299999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData11", rand2.toString())
testRunner.testCase.setPropertyValue("randomData12", rand3.toString())
testRunner.testCase.setPropertyValue("randomData13", rand4.toString())</script></con:config></con:testStep><con:testStep type="request" name="2. Upsert first record to refEntity" id="51794671-8ba8-4469-ab88-02b72de69aab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="2. Upsert first record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs1}

<data:originKey externalId="${#TestCase#randomData11}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="3. Upsert second record to refEntity" id="2177f99b-9e0c-435a-bfdd-45c2f0e34563"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert second record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs2}

<data:originKey externalId="${#TestCase#randomData12}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="4. Upsert third record to refEntity" id="ec7f0a1f-2576-4b60-87f2-a7f5153c5c93"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert third record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs3}

<data:originKey externalId="${#TestCase#randomData13}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="f578e8e9-b360-41a0-8bdd-27b4db7ec497"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. buff to refEtalonKeyID1</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to refOriginKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. buff to refEtalonKeyID2</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to refOriginKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. buff to refEtalonKeyID3</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to refOriginKeyID3</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="4ea3df36-5a96-40cd-ad0a-c82a153322f9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

   		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID1}"/>
                        </api:relationTo>
                        
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range1}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="a2c0193f-c823-49f4-96c2-7563f07f8a16"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID2}"/>
                        </api:relationTo>
                        
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range2}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="168f8ad2-f951-4c16-9fda-cc208dfdd65f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID3}"/>
                        </api:relationTo>
                         
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range3}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer origin and etalon keys to properties" id="5b3498fe-7f64-4eff-9899-b0aab6e24cf7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to etalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Do requestRelationsGet for record with asOf from first period" id="c9bfb9b6-728f-4e30-82de-18e44942a39e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Do requestRelationsGet for record with asOf from first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf1}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = LAST refEtalonKeyID3"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID3}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsGet for record with asOf from second period" id="ea6abc1f-66f0-4d7e-b41c-614dcc339b28"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsGet for record with asOf from second period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf2}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = LAST refEtalonKeyID3"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID3}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Do requestRelationsGet for record with asOf from third period" id="257a6fe1-fdea-4cda-8f46-0fee38675e40"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Do requestRelationsGet for record with asOf from third period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf3}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID3"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID3}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="jdbc" name="13. Check status of first relation at DB" id="658b9407-8583-4421-8600-ad7fa080801c" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where etalon_id_to = '${#TestCase#refEtalonKeyID1}';
</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="14. Check status of second relation at DB" id="485889fd-20ca-4145-bc00-9baf71a0b2f9" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where etalon_id_to = '${#TestCase#refEtalonKeyID2}';
</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="15. Check status of third relation at DB" id="8fd6f441-e95d-4d93-b233-5220b84c111a" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where etalon_id_to = '${#TestCase#refEtalonKeyID3}';
</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = ACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>f55d89cf-780c-4eda-b3eb-28ba384c0053</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">108af5b5-17c3-4e4c-a999-342960784e5c</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="f55d89cf-780c-4eda-b3eb-28ba384c0053" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>131980</con:value></con:property><con:property><con:name>randomData11</con:name><con:value>199856</con:value></con:property><con:property><con:name>randomData12</con:name><con:value>202681</con:value></con:property><con:property><con:name>randomData13</con:name><con:value>186486</con:value></con:property><con:property><con:name>range1</con:name><con:value>&lt;api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/></con:value></con:property><con:property><con:name>range2</con:name><con:value>&lt;api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/></con:value></con:property><con:property><con:name>range3</con:name><con:value>&lt;api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/></con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs1</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData11}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs2</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData12}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs3</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData13}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID1</con:name><con:value>116b8130-1697-45eb-8d33-163819d3b53c</con:value></con:property><con:property><con:name>refEtalonKeyID2</con:name><con:value>74e17d3f-10d8-4be5-846f-aedb380baab1</con:value></con:property><con:property><con:name>refEtalonKeyID3</con:name><con:value>d9024c9a-e1b4-4bae-8d12-864983f04f63</con:value></con:property><con:property><con:name>refOriginKeyID1</con:name><con:value>cc3654f6-44c5-4955-b367-25eaf71edc3b</con:value></con:property><con:property><con:name>refOriginKeyID2</con:name><con:value>f0eeb36c-bf04-41f9-9300-35fbc31c5d7f</con:value></con:property><con:property><con:name>refOriginKeyID3</con:name><con:value>929a30a6-890b-4891-a4f8-2cc27c54891e</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>asOf1</con:name><con:value>2016-07-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf2</con:name><con:value>2016-08-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf3</con:name><con:value>2016-09-11T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="c4af1628-6b2f-4aa4-acad-a19fdefda017" name="requestSearch"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="aa0150fb-7a02-4655-a92e-c0b74906534e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestSearch for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="d0e853f4-5780-4793-9cb5-1925a0eaf0f5"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="ddc41962-9210-41b9-b1ac-3e95eaf80630"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="43a706e9-2ec6-4703-b450-237d8b201f02"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to Entity" id="eae08bc4-5cba-45c1-812b-8a161811bc9a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer origin and etalon keys to properties" id="e1b3016a-5dc3-4e29-a6f4-ceae430163c8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Do requestSearch for Entity" id="9f7e7617-513c-4aeb-987d-61bdf297346e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Do requestSearch for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">
         <api:searchCondition>
             
               ${#TestCase#search_condition}
              
            </api:searchCondition>
         </api:requestSearch>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 1" disabled="true"><con:configuration><path>//@count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>b20377ef-b8f6-425b-b9b0-6fe21c1f1ad5</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">bd4cf222-363a-47bf-bd74-9ca9d7d2f42d</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="b20377ef-b8f6-425b-b9b0-6fe21c1f1ad5" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>117115</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:35.506</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="e68b047e-ab42-496c-bf0a-536b15a45555" name="requestUpsert"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="3c5e1b21-d712-4843-9b8b-3d679ce85245" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestUpsert for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="acd036c6-e0e9-4af2-a698-8cd5dd31562c"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="281b7ef5-45e4-436b-8f25-8e8c0d934f6f"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="6b36afd8-cbf1-47c0-94b4-a77ce3bf4ef3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="5a1d880a-a474-4224-b2dc-9742122345ce"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="d96d13b1-6638-4103-bd02-673c725c7478" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Do requestUpsert for Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Do requestUpsert for Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Search for upserted record" id="f4a3900d-3776-4d96-9d23-a9d28c6c0b99" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Search for upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">
         <api:searchCondition>
             
              ${#TestCase#search_condition}
            
            </api:searchCondition>
         </api:requestSearch>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 1"><con:configuration><path>//@count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>110979</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:43.564</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="3802cb1f-ec14-4489-aa46-1efa217a134b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Partial upsert for simple attribute" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="787faa47-34b9-4d60-879d-9bc6e575b6e0"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="399d5cbf-bb9b-4ea2-82ad-6885ac13864d"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="79b60dc6-738f-4016-8b13-7db9419214d3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for lookupEntity" id="f243e9d9-349d-4e80-a66e-78edd44c77cd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Entity" id="56e75d53-8a33-4241-95bb-acef85a19239"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="22e2804c-669e-4e90-bfad-31849764e3c7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="8e910aa3-5a51-4d18-b6c0-4bb19a9a1be2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>2</data:stringValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="de2cbfe8-c830-4682-a68e-20d447a56d4c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert nested attribute is old"><con:configuration><path>//*:etalonRecord//*[@name='inner_atr_1']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">556fabc8-051f-4fc3-9c59-4815a631e38c</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>163557</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:43.839</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> <data:simpleAttribute name="spr_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="98bc0985-64cf-4c72-b507-217e5c550046" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2-2. Partial upsert for simple attribute Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b47fd398-45a2-40bc-8c42-5a2c39a6ce98"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="26cb69f2-3c09-4186-bb40-a01acd3b6888"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="b68b9cb8-3bd9-4f7d-9e2b-5a007b29b194"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for linked Lookup entity" id="fe82b2e6-62fc-404d-a44a-f8c5beb89d65"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for linked Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"    skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#link_lookup_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Lookup entity" id="8b126932-9df6-452a-8695-b04ec3d08fd1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="05810b7a-3317-46ef-bc74-2247b6a1bee2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="1c81b35d-af9f-48e2-b0d0-36e97c38cc13"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

${#TestCase#lookup_attrs_new}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="93f2dfa0-db45-454f-af07-0be1bab60f34"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>randomData1</con:name><con:value>118526</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:44.568</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute><data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> <data:simpleAttribute name="spr_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>link_lookup_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_new</con:name><con:value><![CDATA[<data:simpleAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute><data:simpleAttribute name="string_attr">  <data:stringValue>2</data:stringValue>  </data:simpleAttribute>  ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="c76824a8-200d-4b0d-b046-33dbcec5ce20" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3. Partial upsert for complex attribute" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="36b0a751-f92b-4075-9826-946cb82b30bf"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="8cc0cf3a-d07f-4072-b2bc-1fbd34c62044"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="d3de0ea7-5c6a-459a-b0da-852a4ebb6eb9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="f1fc4fbe-1ec8-4b86-91cf-21e62730b8e9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="5f6855f9-86cf-4ff6-bc70-b336d5b2a3aa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="8a08f950-58e2-40eb-84d1-b0be8e7ff45c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

  <data:simpleAttribute name="string_attr">
 <data:stringValue>2</data:stringValue>  
 </data:simpleAttribute>

${#TestCase#ent_complex_attrs_upsert}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="ae9599f2-c1cc-4f28-bde7-51ce7a340fec"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="53d4abe4-c6d2-49eb-9c09-522578af9832" name="Assert count of nested records"><con:configuration><path>count(//*:etalonRecord//*:nestedRecord)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert nested attribute is new"><con:configuration><path>//*:etalonRecord//*[@name='inner_atr_1']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">8cc4d2f6-d8ad-4b2a-983e-28303dd78168</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>293206</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>randomData3</con:name><con:value/></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:45.282</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[  <data:complexAttribute name="complex_atr">    <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>1-1</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>1-1</data:stringValue>  </data:simpleAttribute> </data:nestedRecord>  <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>1-2</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>1-2</data:stringValue>  </data:simpleAttribute> </data:nestedRecord> </data:complexAttribute>   ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>ent_cls_pointer</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs_upsert</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">    <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>2</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>2</data:stringValue>  </data:simpleAttribute> </data:nestedRecord> </data:complexAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="ec1551fb-7506-4446-b228-74b1f03a1ce5" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="4. Ignoring of mandatory attribute for partial upsert (for 4.5)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="2b0b2832-7a70-4a23-a203-c2a14f6fc406"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="f54a00d4-781e-4cc9-9b70-d9f4a97745da"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="2f117009-a4a1-4c05-8e1b-adc1f4125c67"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="17f6267b-ecc1-46c2-abb5-086d5596367d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer origin and etalon keys to properties" id="ca515698-4f76-4446-9613-4c047d5fef55"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="ca212146-8c8b-44a4-8158-1cd77b246a9a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 <data:simpleAttribute name="int_atr">
 <data:intValue>2</data:intValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4a82d0d6-82a7-4b96-b8d5-b40ac06ba535</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>ec78dc3d-168f-4318-a533-4eedd734b7a0</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4a82d0d6-82a7-4b96-b8d5-b40ac06ba535" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>278154</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>randomData3</con:name><con:value/></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2016-09-15T17:42:55.547</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[  <data:complexAttribute name="complex_atr">    <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>1-1</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>1-1</data:stringValue>  </data:simpleAttribute> </data:nestedRecord>  <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>1-2</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>1-2</data:stringValue>  </data:simpleAttribute> </data:nestedRecord> </data:complexAttribute>   ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>ent_cls_pointer</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs_upsert</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">    <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>2</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>2</data:stringValue>  </data:simpleAttribute> </data:nestedRecord> </data:complexAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="cb69c7b9-3532-4aa5-af5b-f4dafae4c863" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="4. Validation of mandatory attribute for partial upsert (for 4.2)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="0a13007a-a0a2-4b11-b333-c7c403253755"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="6b2f04b2-f30c-448d-bedb-9bd22604fec5"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="2b5e8214-f6d0-42aa-b197-c7796ff79a51"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="d3b4044f-93a3-4601-837c-1b1cccde5b52"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="22dbe0a6-21f0-44e2-b1e4-69cdcd0eb97a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="19b8da7c-5505-4c1d-a16d-8e777576a30f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 <data:simpleAttribute name="int_atr">
 <data:intValue>2</data:intValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode"><con:configuration><path>//@errorCode</path><content>EX_DATA_UPSERT_REQUIRED_ATTRS_IS_NOT_PRESENTED</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">035ce980-574e-45ec-9361-d4df211ac502</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>196415</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2016-12-01T14:25:47.989</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs_upsert</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">    <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>2</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>2</data:stringValue>  </data:simpleAttribute> </data:nestedRecord> </data:complexAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="58883150-b904-43b7-9193-1bcd2c735036" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="4-2. Validation of mandatory attribute for partial upsert (for 4.2) lookup Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b86acd0b-e512-4dd2-ad03-4f98570b1a3e"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="998f56a6-d76c-4cf0-a96f-3ec732e80762"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="8ad0eb92-5fc4-427e-8054-3e8a8c29041d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Lookup entity" id="d10b0233-c889-4175-a340-22449f38e982"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="65d43916-076a-4c9f-bace-2c685d2bda2e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="65152b65-00d9-4db9-a548-cb671accae5c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 <data:simpleAttribute name="int_atr">
 <data:intValue>2</data:intValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode"><con:configuration><path>//@errorCode</path><content>EX_DATA_UPSERT_REQUIRED_ATTRS_IS_NOT_PRESENTED</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1ffe886b-e0e9-41f2-8b1d-1b8af8a0f04e</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>250953</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2016-12-01T14:25:48.405</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[   <data:simpleAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="9c3d420f-0f7d-4a5a-81df-4798026ce377" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="5. Partial upsert for non-existing record" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="e96a84f0-be0d-4d2a-ac44-490a0bfaf04d"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="9125bf40-f20d-4b06-96aa-f029cef6644e"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="07d0b680-1785-4326-8a2a-69e5ca54d584"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="18b865f1-0929-4ed7-b685-d56a4c61d4ea"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>844f9de6-c37e-416d-850a-7246f0e68246</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>195658</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:45.902</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="0111f83f-869a-4cfd-9d21-d0c42d612cfa" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="5-2. Partial upsert for non-existing record Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="c4373d7e-c6bd-4d64-8fe2-f94e31e192e0"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="43dd978a-33dc-46ee-9488-4a3bd6e8e6e3"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="7cad13c2-7385-47b0-904a-8eacdd7c66a5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Lookup entity" id="0b8579d9-4a43-4921-a213-52c3437a19c8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_ent_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>844f9de6-c37e-416d-850a-7246f0e68246</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>243968</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>randomData3</con:name><con:value/></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:46.127</con:value></con:property><con:property><con:name>lookup_ent_attrs</con:name><con:value><![CDATA[   <data:simpleAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="cb989c2d-adea-45cf-90ab-76841f50bfc1" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="6. Partial upsert for simple attribute - null value" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="045dad97-93b7-4e98-bb47-79f9f6a5e616"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="7dab1cc8-127a-4cfa-b382-38c9abfad7fe"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="c3bfe08a-9c29-4625-9a04-1d7c2885eea4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for lookupEntity" id="363f17ca-4ca1-4c44-b537-8811a7876fdf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Entity" id="7ba3be74-6e0f-4733-bcf3-9f3cf80d3434"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="65761a1e-a4db-4a29-b852-eb7bd587a953"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="bdf10f8c-fd83-431b-8049-b038d044f545"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>2</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="int_atr" xmlns:nil="true"/>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="5c324e74-d99a-4312-8fdd-d31d20f118cc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert str_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr absence"><con:configuration><path>@name='int_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert nested attribute is old"><con:configuration><path>//*:etalonRecord//*[@name='inner_atr_1']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">e41d17be-7d7e-4cee-94a5-1996cfa9b928</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>245585</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:46.329</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> <data:simpleAttribute name="spr_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="87e4a90d-bb17-4be7-b92b-9c29ce7053ed" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="6-2. Partial upsert for simple attribute - null value Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="a8559caa-ae84-4849-90a8-d3463f52e4e2"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="e618cee7-c526-44c7-9439-113fafd5769b"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="d4183570-5172-4863-abcf-70e878d61966"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for linked lookupEntity" id="ac839209-3aee-490e-a449-03c5a9d8b551"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Lookup entity" id="bd20d605-eb37-4e9c-847d-efd86330a7dd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#LookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#LookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="9fd57c6f-de80-4f68-85a1-75f463be4a2a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="f8af56b6-6324-4e5e-b3b7-984360fce7f4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#LookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

<data:simpleAttribute name="code_atr">
 <data:stringValue>${#TestCase#randomData1}</data:stringValue>  
 </data:simpleAttribute>
   <data:simpleAttribute name="string_attr">
 <data:stringValue>2</data:stringValue>  
 </data:simpleAttribute>
  <data:simpleAttribute name="int_atr" xmlns:nil="true"/>
 
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#LookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="63aa4f1d-ff12-4c80-8190-68e14de5effd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#LookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert str_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr absence"><con:configuration><path>@name='int_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>LookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>randomData1</con:name><con:value>223295</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:47.106</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute><data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> <data:simpleAttribute name="spr_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="118ea6de-fb6d-413a-b8b7-3234ac59478a" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="7. Partial upsert for all attribute types" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="7a043128-c5ea-42bb-8074-3ed3d4e1b79c"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="5845e919-1859-4c80-97c7-15af619bc34e"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Get current date for upsert" id="008b18c7-c06d-4547-b612-336f7b8bfac9"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer results to randomData1 and currDate" id="fb9fe137-10a0-44ea-8088-e46d739b10b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Upsert record1 for lookupEntity" id="c8379e1b-456d-495b-bff7-a481c0277c24"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Upsert record2 for lookupEntity" id="0336d452-033d-4026-8ae2-73998c0af4e8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record2 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record for Entity" id="443a5e31-1bce-48ce-8917-73431c143b08"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
 
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="8. Transfer etalon key to properties" id="1b104708-e18f-4cbd-8342-21d6e786940b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="9. Partial upsert for record" id="179b2626-07a3-4d72-a6b1-27963345facc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs_new}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Get upserted record" id="6efeab76-e574-4f95-bd15-3285d640742a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='num_atr']//*</path><content>2.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='boolean_atr']//*</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='date_atr']//*</path><content>*-*-*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='time_atr']//*</path><content>*:*:*.*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='datetime_atr']//*</path><content>2002-09-23T11:11:11.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">abb40376-3cda-4348-9d4d-4c0340ee71fc</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>103458</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>128745</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:47.788</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>1</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">    <data:stringValue>${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>false</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue>   </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_attrs_new</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">   <data:stringValue>2</data:stringValue>    </data:simpleAttribute>     <data:simpleAttribute name="spr_atr">    <data:stringValue>${#TestCase#randomData2}</data:stringValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>true</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2020-12-31T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T11:11:11.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2002-09-23T11:11:11.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>2</data:numberValue>   </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="cfad048b-83c9-433d-a299-a481b7898ff8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="7-2. Partial upsert for all attribute types lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="410c9aad-4bd2-4a4a-8ca6-5c6572a5dc2a"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="b21bcb95-b32c-44c7-a6f6-b79e0a4cef91"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Get current date for upsert" id="5984ba51-474f-49fc-9180-bcfee4c81564"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer results to randomData1 and currDate" id="32be0a26-d012-480d-8aca-b45d77fe5d35"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Upsert record1 for linked lookupEntity" id="c3275ff1-cfe6-412c-9339-d7ce55075a74"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record1 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Upsert record2 for linked lookupEntity" id="c8464fc6-fd13-4ed9-8cea-37877e1a85c5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record2 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record for lookup entity" id="30a30bbe-5fca-410c-a186-3fe43473b468"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record for lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}



<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="8. Transfer etalon key to properties" id="c6d88132-c3b9-49b8-aa23-df27feef8133"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Upsert record for lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="9. Partial upsert for record" id="8a387c19-07d5-41e9-9549-32392829dec7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

${#TestCase#lookup_attrs_new}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Get upserted record" id="c8815805-ad02-4bcb-8aa8-842c3f2b597e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='num_atr']//*</path><content>2.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='boolean_atr']//*</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='date_atr']//*</path><content>*-*-*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='time_atr']//*</path><content>11:11:11.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='datetime_atr']//*</path><content>2002-09-23T11:11:11.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>randomData1</con:name><con:value>237291</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>292947</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:48.668</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="code_atr"> <data:stringValue>${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>   </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">     <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">    <data:boolValue>false</data:boolValue>     </data:simpleAttribute>    <data:simpleAttribute name="date_atr">    <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>    </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>     </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue> </data:simpleAttribute>     ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_new</con:name><con:value><![CDATA[   <data:simpleAttribute name="code_atr">   <data:stringValue>${#TestCase#randomData1}</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="string_attr">   <data:stringValue>2</data:stringValue>    </data:simpleAttribute>     <data:simpleAttribute name="spr_atr">    <data:stringValue>${#TestCase#randomData2}</data:stringValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>true</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2020-12-31T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T11:11:11.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2002-09-23T11:11:11.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>2</data:numberValue>   </data:simpleAttribute>    ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="72ba7822-df96-47fe-86e7-4ea0c927d59d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="8. Partial upsert for one attribute type" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1271903a-38cd-4dec-b0fb-b69152cdef6b"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="d3fc40ac-38d9-47c4-8b34-2d1081b08b66"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="4b7fa2bf-08ce-4427-adf4-37a0946c2839"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for lookupEntity" id="e02cb68e-871a-4dd3-8dab-7f347b56de10"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Entity" id="fefa2a66-019a-4a1f-b05a-42c994c9c14f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
 
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="c198f1ca-cdd6-4bb8-baa8-72aa6b686a14"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="263d4292-1d59-4398-84c5-c68b90eaa9e6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  <data:simpleAttribute name="string_attr">
  <data:stringValue>2</data:stringValue> 
  </data:simpleAttribute> 
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="a993ee33-395c-417e-afdd-df2214a10a92"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='num_atr']//*</path><content>1.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='boolean_atr']//*</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='date_atr']//*</path><content>*-*-*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='time_atr']//*</path><content>12:12:12.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='datetime_atr']//*</path><content>2016-09-14T12:12:12.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">b764e0ba-4a66-4cde-9241-d0e8a740fbc9</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>191575</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>279351</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:49.461</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>1</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">    <data:stringValue>${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>false</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue>   </data:simpleAttribute>    ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="79b83dd1-a8d2-4e9d-af69-5fc3e2d80827" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="8-2. Partial upsert for one attribute type Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="f1268ba8-3726-4af4-9d78-401276fa15d5"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="6509e492-c1db-4545-b5ee-2d514a155c58"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="0d32e2cd-4202-49dd-a3d9-df1a00e10439"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for linked lookupEntity" id="d8e44085-9cc8-4609-9fac-e26951fc59fa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#linke_lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#linke_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Lookup entity" id="7492b21b-bcc4-4f08-8a9f-8857e04e0cc9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="e328ecaf-fa40-48d5-9d2f-c17d7c80bf78"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="8fd343aa-63ff-4a87-8a85-0b673a48c3f1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

   <data:simpleAttribute name="code_atr">
  <data:stringValue>${#TestCase#randomData1}</data:stringValue> 
  </data:simpleAttribute> 
  <data:simpleAttribute name="string_attr">
  <data:stringValue>2</data:stringValue> 
  </data:simpleAttribute> 
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="bc948a0a-24a8-4746-851b-94888aeb5e03"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='num_atr']//*</path><content>1.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='boolean_atr']//*</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='date_atr']//*</path><content>*-*-*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='time_atr']//*</path><content>12:12:12.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='datetime_atr']//*</path><content>2016-09-14T12:12:12.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>linke_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>randomData1</con:name><con:value>299638</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>279351</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:50.209</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="code_atr">   <data:stringValue>${#TestCase#randomData1}</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="string_attr">   <data:stringValue>1</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">    <data:stringValue>${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>false</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue>   </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="f41c381c-1d35-4f49-b84d-e6c14fa91263" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="9. Partial upsert for all attribute types - null values" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b4b6ca62-598a-415f-903d-1530a2622eda"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="ef715a5f-7013-470a-b409-5915be556f0f"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert 2" id="5cafadf5-f16d-4021-a9a8-dd1ada7b52d0"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="92899268-52db-4432-ab24-0504e202d0b6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for lookupEntity" id="33e98a27-bb33-473c-8716-eb8c539877c8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record2 for lookupEntity" id="53ebeed5-401a-424c-a068-c3c3d1422ad3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record2 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Upsert record for Entity" id="067bfe2e-ec65-4edc-824d-03972f916f13"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer etalon key to properties" id="99261cb0-1640-4a24-a92e-63c27d7c8f24"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Partial upsert for record" id="7b42fcf3-b061-4707-8cb2-47e3f1adbebb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  <data:simpleAttribute name="string_attr">
  <data:stringValue>2</data:stringValue> 
  </data:simpleAttribute> 
   <data:simpleAttribute name="spr_atr" xmlns:nil="true"/>> 
  <data:simpleAttribute name="boolean_atr" xmlns:nil="true"/>>
  <data:simpleAttribute name="date_atr" xmlns:nil="true"/>>
  <data:simpleAttribute name="time_atr" xmlns:nil="true"/>>
   <data:simpleAttribute name="datetime_atr" xmlns:nil="true"/>>
  <data:simpleAttribute name="num_atr" xmlns:nil="true"/>>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Get upserted record" id="89793278-3d2b-4cad-80ee-8a2f20558ec3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is null"><con:configuration><path>@name='spr_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is null"><con:configuration><path>@name='num_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is null"><con:configuration><path>@name='boolean_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is null"><con:configuration><path>@name='date_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is null"><con:configuration><path>@name='time_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is null"><con:configuration><path>@name='datetime_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">164c52b6-5198-4edd-be16-39e061d6fdf1</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>263306</con:value></con:property><con:property><con:name>randomData2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">263306</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:50.825</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> <data:simpleAttribute name="spr_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="2690c9f3-31f4-4c13-bb35-371a9fd3ea58" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="9-2. Partial upsert for all attribute types - null values Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="13e27c93-3fb1-4178-bf8b-5ed1a30a82c5"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="1a9a07f1-ddf4-476a-83bf-700452e0e0e3"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert 2" id="eb491176-382d-4588-b307-37988622fa9a"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="c378b365-50e5-4493-bf47-243297537033"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for linked lookupEntity" id="21c27a08-e5fd-49e7-82d6-2fa70e4dd76c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record2 for linked lookupEntity" id="223bbc57-280a-45d4-9c82-81bf091ae3fa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record2 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Upsert record for Lookup entity" id="fdb3bc36-6eb5-42a8-ad97-c23bf8737e8a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer etalon key to properties" id="9951de36-efe2-4013-86e3-da0bb79ba5e8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Partial upsert for record" id="625deef6-42d1-4327-b878-2f2a2e66b588"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

   <data:simpleAttribute name="code_atr">
  <data:stringValue>${#TestCase#randomData1}</data:stringValue> 
  </data:simpleAttribute> 
  <data:simpleAttribute name="string_attr">
  <data:stringValue>2</data:stringValue> 
  </data:simpleAttribute> 
   <data:simpleAttribute name="spr_atr" xmlns:nil="true"/>> 
  <data:simpleAttribute name="boolean_atr" xmlns:nil="true"/>>
  <data:simpleAttribute name="date_atr" xmlns:nil="true"/>>
  <data:simpleAttribute name="time_atr" xmlns:nil="true"/>>
   <data:simpleAttribute name="datetime_atr" xmlns:nil="true"/>>
  <data:simpleAttribute name="num_atr" xmlns:nil="true"/>>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Get upserted record" id="73255ada-9ec6-4351-987c-252c78340e5b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is null"><con:configuration><path>@name='spr_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is null"><con:configuration><path>@name='num_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is null"><con:configuration><path>@name='boolean_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is null"><con:configuration><path>@name='date_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is null"><con:configuration><path>@name='time_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is null"><con:configuration><path>@name='datetime_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>randomData1</con:name><con:value>105919</con:value></con:property><con:property><con:name>randomData2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">105919</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:51.778</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="code_atr">   <data:stringValue>${#TestCase#randomData1}</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="string_attr">   <data:stringValue>1</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">    <data:stringValue>${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>false</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue>   </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="129f22ca-6950-4696-9a23-61e1e4c587cf" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="10. Partial upsert of attribute for record with relation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="4e6d7947-0bd6-4ee6-8ead-e84ef6ba7862"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="b3081e24-5b3d-479b-8e8b-1374991bf4a2"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Get current date for upsert" id="1982d241-8939-42ed-8c55-beeed133a2c7"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer results to randomData1 and currDate" id="b6455307-7105-4353-b9ec-868c91d92fb4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for rigth-side Entity" id="8f8bff80-2643-4d87-97ae-9139cffc70cc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for rigth-side Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#relation_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer rel etalon id to props" id="43b366d8-15ec-422a-b856-d615c5a26708"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>relation etalon id to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for rigth-side Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKey_rel</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Upsert record for main Entity" id="b71955b5-e482-4d5e-8a3b-98b336f7a046"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record for main Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}

  
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

  <api:relations>
 ${#TestCase#referenceRelation}
  </api:relations>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>


    
]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="8. Transfer etalon id to props" id="efd1e811-ca87-4c8b-bdd5-d1aa58b7c721"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon i to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Upsert record for main Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="9. Partial upsert for record" id="2b7376ff-e3da-47c2-b992-5e36fbaf0595"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>2</data:stringValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Get upserted record" id="e974e988-b165-4b1a-9e33-4d9ce2c40b7b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert relation"><con:configuration><path>count(//*[@relName="link"])</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">f68e53d7-7022-4d16-b624-b0d7d06d7289</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>217161</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:52.526</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>888</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>relation_attrs</con:name><con:value>&lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>relation&lt;/data:stringValue>  &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>customData3</con:name><con:value/></con:property><con:property><con:name>randomData2</con:name><con:value>127708</con:value></con:property><con:property><con:name>etalonKey_rel</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">582558c1-77dd-44ea-ac35-ccdea44ad407</con:value></con:property><con:property><con:name>referenceRelation</con:name><con:value><![CDATA[  <api:relation name="link">   <api:record>   <api:relationTo relName="link">    <data:toEtalonKey id="${#TestCase#etalonKey_rel}"/>  </api:relationTo>      </api:record>                 </api:relation>]]></con:value></con:property><con:property><con:name>randomData3</con:name><con:value>249210</con:value></con:property></con:properties></con:testCase><con:testCase id="6e1a9139-a8e0-40ab-8426-6280245057ae" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="11. Partial upsert for relation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="d8e04fe2-9217-433e-9462-3a8f39364036"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="fadc119f-f120-4712-857d-b0cc110968df"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random data for upsert" id="40def3c3-2d9a-4210-b6e0-347a2c244c0a"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="4. Get current date for upsert" id="aa95c6e9-cf45-4174-ae66-7334dae9dbd7"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer results to randomData1 and currDate" id="d528fc10-bfb8-451a-a97d-62304c7b570c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>4. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to randomData3</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Generate random data for upsert</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>randomData3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record for rigth-side Entity" id="b184adfc-9108-4d19-a41a-65c28a7c70c5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record for rigth-side Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf" sslKeystore=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#relation_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer rel etalon id to props" id="7ed5c394-6aa1-4fb3-acda-45d0dc40aaf8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>relation etalon id to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record for rigth-side Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKey_rel</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Upsert record for main Entity" id="9f69d1f2-b93f-43bf-b26c-b5170faefef5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Upsert record for main Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}

  
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

  <api:relations>
 ${#TestCase#referenceRelation}
  </api:relations>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>


    
]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer etalon id to props" id="024ff295-c0fe-41a0-994f-9975563a9288"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon i to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Upsert record for main Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Upsert record for new rigth-side Entity" id="e79fcfc1-9d04-49a3-9986-760f7a3d1d6b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Upsert record for new rigth-side Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#relation_attrs_new}
  
<data:originKey externalId="${#TestCase#randomData3}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="11. Transfer rel etalon id to props" id="5bad6808-82f8-4599-9ac0-58e3af2a878e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>relation etalon id to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>10. Upsert record for new rigth-side Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKey_rel_new</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="12. Partial upsert for record" id="6478e63c-cac7-4258-bb7b-141834cbeaf6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert  entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>4</data:stringValue>  
 </data:simpleAttribute>
    
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    <api:relations>
    ${#TestCase#referenceRelation_new}
     
    </api:relations>
    
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="49c5b38b-e42c-43be-8919-b13f86fafa53" name="AssertIsUpdated"><con:configuration><path>//*:responseUpsert/@originAction</path><content>Update</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="13. Get upserted record" id="f16c58a2-4dce-4f7e-9655-cb30d444ce9e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="13. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert relation"><con:configuration><path>count(//*[@relName="link"])</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4972cc71-f15e-4a43-99d9-bcc2a7d3a78b" name="Assert relation is new"><con:configuration><path>//*[@relName="link"]/*[1]/@id</path><content>${#TestCase#etalonKey_rel_new}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">82c0a725-8680-4d61-bd74-a64fcccba865</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>182853</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>179396</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>128079</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:44:53.321</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>888</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>relation_attrs</con:name><con:value>&lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>relation&lt;/data:stringValue>  &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>relation_attrs_new</con:name><con:value> &lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>relation2&lt;/data:stringValue>  &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKey_rel</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">3f1d8a4b-1e9a-4932-bf62-429999583079</con:value></con:property><con:property><con:name>etalonKey_rel_new</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">cf9a9b23-3430-4274-911d-727a5a5f1132</con:value></con:property><con:property><con:name>referenceRelation</con:name><con:value><![CDATA[  <api:relation name="link">   <api:record>   <api:relationTo relName="link">    <data:toEtalonKey id="${#TestCase#etalonKey_rel}"/>  </api:relationTo>      </api:record>                 </api:relation>]]></con:value></con:property><con:property><con:name>referenceRelation_new</con:name><con:value><![CDATA[  <api:relation name="link">   <api:record>   <api:relationTo relName="link">    <data:toEtalonKey id="${#TestCase#etalonKey_rel_new}"/>  </api:relationTo>      </api:record>                 </api:relation>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="6c391089-8a00-40ab-b66a-1709aba9be60" name="requestRelationsUpsert"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="d1f4ceea-be06-4f61-a3e6-5e0467749943" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestRelationsUpsert with etalonKey for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="c9841a59-aa1b-49f7-9cce-f69c98fcdc3b"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="0a16bd3d-9757-4624-a0a7-691b2aba2660"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and randomData2" id="b0d544d7-6045-4186-8940-94df67ec2c6e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record with Unique attr to refEntity" id="78840365-4ed2-4896-8879-057ee7e02d81"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record with Unique attr to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer refEtalonKey to Upsert" id="20f499c6-f338-4be8-9918-4b14dcb419f9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record with Unique attr to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="7862a54e-6d9f-4626-819d-89c6cb2bc7c0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
        
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="85342e6b-efc8-4aca-914d-b7e7f7545873"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsUpsert with etalonKey for Entity" id="3a239133-39c1-4f71-be0a-954a68bce6d6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsUpsert with etalonKey for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRelationsUpsert lastUpdateDate="2016-07-19T16:54:00+04:00" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <api:relations>${#TestCase#refEnt_relation}</api:relations>\r
         </api:requestRelationsUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6800b217-a24c-43dc-8be7-eb5609e4b9aa" name="originAction = Update"><con:configuration><path>//@originAction</path><content>Update</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>63585083-077d-4eb5-90f8-95e7f3225366</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">816e64e6-9037-450f-accb-38671f70666c</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="63585083-077d-4eb5-90f8-95e7f3225366" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>272982</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>298679</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>608a1886-eaa4-4d39-b099-724532c854c4</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_UNIQUE_222</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_UNIQUE_UN_ATTR_222"> &lt;data:stringValue>${#TestCase#randomData2}&lt;/data:stringValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>refEnt_relation</con:name><con:value><![CDATA[<api:relation name="master_2_unique">                         <api:record>                             <api:relationTo relName="master_2_unique"></api:relationTo>                             <api:referenceAliasKey value="${#TestCase#randomData2}" entityAttributeName="R_UNIQUE_UN_ATTR_222"/>                         </api:record>                     </api:relation>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="b18d2496-f211-48d3-8eb3-c71b110b3195" name="requestBulkUpsert"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="1e4600e4-d26d-4bc5-aeb8-0d155ff995bb" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestBulkUpsert for Entity and Lookup Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="931a58fa-0d54-4aba-a2e3-96674ef28d22"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="7d9d4f06-c06c-4d26-bc74-a5f85ef3137a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Do requestBulkUpsert for Entity and Lookup Entity" id="38a70e64-1895-44ef-ba7e-86970d1b7172"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Do requestBulkUpsert for Entity and Lookup Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestBulkUpsert>

   <api:upsertRecordRequests entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">
     <api:originRecord>
        <data:simpleAttribute name="R_SIMP_ATTR">
               <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue>
        </data:simpleAttribute>
        <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

   <api:upsertRecordRequests entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">
     <api:originRecord>
        <data:simpleAttribute name="R_SIMP_ATTR">
               <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue>
        </data:simpleAttribute>
        <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

<!-- LOOKUP -->

     <api:upsertRecordRequests entityName="OKOPF"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">
     <api:originRecord>
        <data:simpleAttribute name="KOD">
               <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue>
        </data:simpleAttribute>
        <data:simpleAttribute name="NAME">
               <data:stringValue>${#TestCase#randomData1}_________${=(int)(Math.random()*1000)}</data:stringValue>
        </data:simpleAttribute>
        <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="OKOPF"/>
      </api:originRecord>
  </api:upsertRecordRequests>

     <api:upsertRecordRequests entityName="OKOPF"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">
     <api:originRecord>
        <data:simpleAttribute name="KOD">
               <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue>
        </data:simpleAttribute>
        <data:simpleAttribute name="NAME">
               <data:stringValue>${#TestCase#randomData1}_________${=(int)(Math.random()*1000)}</data:stringValue>
        </data:simpleAttribute>
        <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="OKOPF"/>
      </api:originRecord>
  </api:upsertRecordRequests>
  
  
</api:requestBulkUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value/></con:property><con:property><con:name>originKeyID</con:name><con:value>039ef230-c9ae-4a4d-b4ae-28a46c533398</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4f9ad7ae-9771-46e9-8e79-e483c93a52a5" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>274120</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property></con:properties></con:testCase><con:testCase id="b2fc2567-03c9-4cd5-8c85-d7828d9d3fed" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Partial Bulk Upsert for simple atributes" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random id for upsert-1" id="1b10fe35-a224-4f35-b6cf-22f0af9db78f"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random id for upsert-2" id="8e5a729c-a120-4f14-abb4-6d5adfe1f7f8"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random id for upsert-3" id="33e56bee-6065-481b-98cd-cc4b09385fbc"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="4. Generate random id for upsert-4" id="1751edb4-d6bf-4d55-aa58-3c5b9ead39bc"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="5. Get current date for upsert" id="be8e2096-93b2-42d6-b48f-0245708f514c"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer results to randomData1 and currDate" id="7a5408c5-7ab9-4de2-9aa5-9487ae1ac632"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to id1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random id for upsert-1</con:sourceStep><con:sourcePath/><con:targetType>ent_id_1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to id2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random id for upsert-2</con:sourceStep><con:sourcePath/><con:targetType>ent_id_2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to id3</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Generate random id for upsert-3</con:sourceStep><con:sourcePath/><con:targetType>lookup_id_1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to id4</con:name><con:sourceType>result</con:sourceType><con:sourceStep>4. Generate random id for upsert-4</con:sourceStep><con:sourcePath/><con:targetType>lookup_id_2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>currentDate to props</con:name><con:sourceType>result</con:sourceType><con:sourceStep>5. Get current date for upsert</con:sourceStep><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestBulkUpsert for Entity and Lookup Entity" id="ca1fa2be-e86e-46a0-93dc-f212c056fe32"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestBulkUpsert for Entity and Lookup Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestBulkUpsert>

   <api:upsertRecordRequests entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">
     <api:originRecord>
		${#TestCase#ent_attrs}
        <data:originKey externalId="${#TestCase#ent_id_1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

   <api:upsertRecordRequests entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">
     <api:originRecord>
       ${#TestCase#ent_attrs}
        <data:originKey externalId="${#TestCase#ent_id_2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

<!-- LOOKUP -->

     <api:upsertRecordRequests entityName="${#TestCase#lookupEntityName}"   skipCleanse="true" bypassExtensionPoints="false">
     <api:originRecord>
 		 ${#TestCase#lookup_attrs}
        <data:originKey externalId="${#TestCase#lookup_id_1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

     <api:upsertRecordRequests entityName="${#TestCase#lookupEntityName}"   skipCleanse="true" bypassExtensionPoints="false">
     <api:originRecord>
    		  ${#TestCase#lookup_attrs}
        <data:originKey externalId="${#TestCase#lookup_id_2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>
  
  
</api:requestBulkUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Do partial requestBulkUpsert for Entity and Lookup Entity" id="9d8ce95f-5fd4-4b33-b8e2-7d5a8b277a49"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do partial requestBulkUpsert for Entity and Lookup Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestBulkUpsert>

   <api:upsertRecordRequests mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">
     <api:originRecord>
		${#TestCase#ent_attrs_new}
        <data:originKey externalId="${#TestCase#ent_id_1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

   <api:upsertRecordRequests mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">
     <api:originRecord>
       ${#TestCase#ent_attrs_new}
        <data:originKey externalId="${#TestCase#ent_id_2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

<!-- LOOKUP -->

     <api:upsertRecordRequests mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"  skipCleanse="true" bypassExtensionPoints="false">
     <api:originRecord>
 		 ${#TestCase#lookup_attrs_new}
        <data:originKey externalId="${#TestCase#lookup_id_1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

     <api:upsertRecordRequests mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"   skipCleanse="true" bypassExtensionPoints="false">
     <api:originRecord>
    		  ${#TestCase#lookup_attrs_new}
        <data:originKey externalId="${#TestCase#lookup_id_2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>
  
  
</api:requestBulkUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer etalon keys to properties" id="1aeff930-c2ef-4fb9-a3b8-b0ebe98c11bd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Do requestBulkUpsert for Entity and Lookup Entity</con:sourceStep><con:sourcePath>(//*:etalonKey/@id)[1]</con:sourcePath><con:targetType>ent_EtalonKeyId_1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>etalon to prop2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Do requestBulkUpsert for Entity and Lookup Entity</con:sourceStep><con:sourcePath>(//*:etalonKey/@id)[2]</con:sourcePath><con:targetType>ent_EtalonKeyId_2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>etalon to prop3</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Do requestBulkUpsert for Entity and Lookup Entity</con:sourceStep><con:sourcePath>(//*:etalonKey/@id)[3]</con:sourcePath><con:targetType>lookup_EtalonKeyId_1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>etalon to prop4</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Do requestBulkUpsert for Entity and Lookup Entity</con:sourceStep><con:sourcePath>(//*:etalonKey/@id)[4]</con:sourcePath><con:targetType>lookup_EtalonKeyId_2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Get upserted record for entity 1" id="9e894d60-4546-490c-8edf-b632ab26a792"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Get upserted record for entity 1" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#lookup_EtalonKeyId_1}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>bulk2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Get upserted record for entity 2" id="fd37d136-e5ca-4ac7-b0b8-d3eab5854ebc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Get upserted record for entity 2" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#ent_EtalonKeyId_1}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>bulk2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Get upserted record for lookup entity 1" id="a9e336dd-3c65-433f-a030-476a713cd2e0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Get upserted record for lookup entity 1" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#ent_EtalonKeyId_1}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>bulk2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="13. Get upserted record for lookup entity 2" id="186ef5c1-6e46-4278-824d-3d03f29f2fcf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="13. Get upserted record for lookup entity 2" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#ent_EtalonKeyId_2}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>bulk2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>173563</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:46:13.333</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>bulk1-1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_id_1</con:name><con:value>118513</con:value></con:property><con:property><con:name>ent_id_2</con:name><con:value>213093</con:value></con:property><con:property><con:name>lookup_id_1</con:name><con:value>178932</con:value></con:property><con:property><con:name>lookup_id_2</con:name><con:value>254431</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="code_atr">bulk1<data:stringValue>bulk1-1</data:stringValue></data:simpleAttribute> <data:simpleAttribute name="string_attr">  <data:stringValue>bulk1-1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_EtalonKeyId_1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0554ae10-2981-4cdb-8887-3d215addc3e0</con:value></con:property><con:property><con:name>ent_EtalonKeyId_2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">878b46cf-28b5-44cb-9b50-b89d2bd307a6</con:value></con:property><con:property><con:name>lookup_EtalonKeyId_1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">bf2a87d0-6d9b-48ad-95b9-1a6aa6211067</con:value></con:property><con:property><con:name>lookup_EtalonKeyId_2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">fb98cc85-2dd0-4fc2-bc05-4c7d94f911a8</con:value></con:property><con:property><con:name>ent_attrs_new</con:name><con:value>&lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>bulk2&lt;/data:stringValue>  &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookup_attrs_new</con:name><con:value><![CDATA[  <data:simpleAttribute name="code_atr">bulk1<data:stringValue>bulk1-1</data:stringValue></data:simpleAttribute> <data:simpleAttribute name="string_attr">  <data:stringValue>bulk2</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="ae5bcb3c-2b30-499b-b51a-4c4bfe4d3305" name="requestMerge"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="4cd34848-da84-41c8-8ebe-f3de73f97e93" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestMerge with etalon keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="61c5a31b-1530-4e5f-aa8b-5fb91f55a9dc"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="493825d5-6cba-4df6-a102-b1c0c0674961"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="f587aa9c-1da0-41d3-bce4-f9bb7d8ec79b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="408412bb-6688-44d5-befb-4e393498c69f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="115d0177-5123-48b4-8a44-ff6c5b2c6e30"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon keys to etalonKeyID1, etalonKeyID2" id="feff7416-48f5-4dd0-a261-ea92f0f67132"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with etalon keys" id="04bbf6bf-a846-4115-ae9b-09fbad7302a8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">
  
         <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/> 
         <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>
 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>adc40845-b91b-4c2c-bd04-3491312e49a6</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>d84af3b8-7174-4825-a3bb-410cb970e52a</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>76dd8e2f-471b-47d9-8d83-9b0fb7300083</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="d84af3b8-7174-4825-a3bb-410cb970e52a" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>254187</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>251769</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:testCase id="9a7519e3-1690-4034-b2dc-7609384244b4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Do requestMerge with origin keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="fb87efee-f784-40bd-aa44-07edf2030d50"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="3592979f-15a2-47ec-9362-1cd73c1b9165"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="57f1d893-c9a3-42de-b1ab-fa24456ce231"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="3c827a43-a849-4ab3-9a98-f90d7e8eb3b7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="ea32d173-4094-47b2-91c6-1e8c678eb70c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="f4415f18-e42b-4bd9-a6c2-1b85c5cc1e24"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with origin keys" id="d66e9578-8c69-4641-8cb8-7850e1eacc57"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with origin keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">
 
           <api:masterOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
           <api:duplicateOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>

         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>9a35c8f7-1e9e-4d43-9724-24d91a9865d7</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>1c390516-ab37-4d52-8ea4-654e75c00c43</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value>d7b66c24-499d-467a-887f-b6dbddd7e647</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>a6ee33bb-2613-479b-86ac-25556cf782e2</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="1c390516-ab37-4d52-8ea4-654e75c00c43" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>293073</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>250759</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:testCase id="dda730e5-e7e4-46a8-ae7e-eb140a4503af" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3. Do requestMerge with etalon duplicate and origin master" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="ab14a5ba-a522-44fb-b38d-2a98ad152b4f"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="6d27ecfc-9a75-4a12-8f43-5ea5c7b49092"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="1bbe1870-c27d-464f-a2e1-cddd01d991be"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="e1fe885d-7cc0-4714-9fa5-63b627888c07"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="0b02dced-6737-4dfc-bb36-90b6eb624057"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="28b71f6b-2c00-4843-9eda-41fd4c924007"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with etalon duplicate and origin master" id="3c8adffc-0bd1-46c2-8e06-3a0f8f7bf9ad"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with etalon duplicate and origin master" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 		 <!-- <api:winnerEtalonKey id="${#TestCase#etalonKeyID1}"/> 
 		<api:looserOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
            -->
           <api:masterOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/> 
           		 <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>
                     
                 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>f9d35410-622f-4888-9e60-92cc834d9386</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>913f0bd4-95cd-464b-845b-f01abbe17e48</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value>179e2e27-bb9f-4e93-a027-79daaecd5e80</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>bd5368b2-b8b5-4750-8264-dd1c72b0f4ba</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="913f0bd4-95cd-464b-845b-f01abbe17e48" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>282360</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>137114</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:testCase id="8c79e495-0db7-46d2-b2bd-8b983f6c0dfe" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="4. Do requestMerge with etalon master and origin duplicate (+2 additional cases)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1501bf92-0452-46a6-ac69-c2a1154e2129"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="657e5059-3e3a-43fe-b950-cf22c1dac441"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="1cdf5e01-8fae-4fff-8806-565e5910542f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="d3415aef-9594-48f0-9c5e-724dd7091831"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="a8c5f6ab-4336-455a-8174-5bda17bcc09b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="c6c2a6d8-334b-4d97-a85c-b8c0fec551a7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with etalon master and origin duplicate" id="c821deec-47c0-479c-b921-7bb475c97d75"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with etalon master and origin duplicate" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 		  <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/> 
 		<api:duplicateOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
          <!--
           <api:winnerOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/> 
           		 <api:looserEtalonKey id="${#TestCase#etalonKeyID2}"/>
                      --> 
                 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Do requestMerge with non-existing master etalon" id="79e0a3d0-a742-4beb-8491-6f745620e3b6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestMerge with non-existing master etalon" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 		  <api:masterEtalonKey id="non-existing-${#TestCase#etalonKeyID1}"/> 
 		  	 <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>
 		<!--
 		<api:looserOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
           <api:winnerOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/> 
                 --> 
 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8595313d-921a-4fba-9788-183c0dee5e2e" name="errorCode = EX_DATA_MERGE_NOT_FOUND_BY_SUPPLIED_KEYS"><con:configuration><path>//@errorCode</path><content>EX_DATA_MERGE_NOT_FOUND_BY_SUPPLIED_KEYS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Do requestMerge with non-existing duplicate etalon" id="ad931c16-7a74-453e-ab0e-a96dec324aa4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Do requestMerge with non-existing duplicate etalon" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 		  <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/> 
 		  	 <api:duplicateEtalonKey id="non-existing-${#TestCase#etalonKeyID2}"/>
 		<!--
 		<api:looserOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
           <api:winnerOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/> 
                 --> 
 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8595313d-921a-4fba-9788-183c0dee5e2e" name="errorCode = EX_DATA_MERGE_DUPLICATES_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_DATA_MERGE_DUPLICATES_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>6d785d0a-3089-47de-8972-64ebe88aa238</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>d8d4781e-2815-4f2d-bd66-3b92aaed3df2</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value>c919edf0-3f6e-4050-b8c2-e645bf9c5d8d</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>a035ee7a-65c2-4d44-8420-ede0bb2e1e4a</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="d8d4781e-2815-4f2d-bd66-3b92aaed3df2" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>137419</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>148279</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="4dfb5c43-2c9f-40c7-a5d2-0d97c4c0446d" name="requestSoftDelete"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e528c79f-f114-4e2d-b848-adbd14c61f9f" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestSoftDelete with etalonKey for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="160d5b38-df7a-4c3b-ada9-4563af98d837"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="b930aa4d-70d8-4db1-9ddf-18c26ad3154c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>curr date to upsert</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath/><con:targetType xsi:nil="true"/><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="7c82c3bb-342e-4468-b5e2-91e9a43d4000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="d3b07f44-5909-4f61-95e6-e4fcd7bf08b1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestSoftDelete with etalonKey for Entity" id="8fafec44-39fe-4618-8df6-6594c1885ca3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestSoftDelete with etalonKey for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">
          
   
<api:etalonKey id="${#TestCase#etalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Repeat requestSoftDelete for deleted record" id="d40309f9-535e-49f7-83a2-1a84372b5516"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Repeat requestSoftDelete for deleted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">
          
   
<api:etalonKey id="${#TestCase#etalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Warning"><con:configuration><path>//@exitCode</path><content>Warning</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="85972637-154f-40c9-bf81-7c7b73ce8837" name="messageText = REQUEST_SEARCH: Service didn't return deleted key. No objects were deleted."><con:configuration><path>//@messageText</path><content>REQUEST_SEARCH: Service didn't return deleted key. No objects were deleted.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Do requestSoftDelete for non-existing record" id="ffb456ed-ac7a-4129-ada4-bd3be6a893d5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestSoftDelete for non-existing record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">
          
   
<api:etalonKey id="non-existing-id-1234567890"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4d799a57-9e1a-40a4-9bed-65217ca2fb93" name="errorCode = EX_DATA_INVALID_DELETE_INPUT"><con:configuration><path>//@errorCode</path><content>EX_DATA_INVALID_DELETE_INPUT</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>7d8152de-649c-4bb5-85a4-8f7fd3b3c7e5</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">b60c24b1-5fe1-45fc-a58f-abf72360f498</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="7d8152de-649c-4bb5-85a4-8f7fd3b3c7e5" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>246701</con:value></con:property></con:properties></con:testCase><con:testCase id="e27cc0c7-d048-448b-812c-19b23fc695bb" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Do requestSoftDelete with originKey for lookupEntity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="ebacd81c-b749-4835-9461-cdd094f9a17f"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="577b6518-d022-4089-ba75-d69eacf84fb6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to lookupEntity" id="5f04d391-e07d-4f0e-9920-022b3eaba189"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">

 <api:originRecord>
  
${#TestCase#lookup_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="6a40281e-de08-4f49-9e59-b0dee904afad"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to lookupEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to lookupEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestSoftDelete with originKey for lookupEntity" id="033d87ff-8da8-4c8c-a786-ad4fd2d1e99c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestSoftDelete with originKey for lookupEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false" actionType="SoftDeleteOrigin">
          
<api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="data_steward" entityName="${#TestCase#lookupEntityName}"/>

<!--    
<api:etalonKey id="${#TestCase#etalonKeyID}"/>  
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="KOD"><data:intValue>${#TestCase#randomData1}</data:intValue></data:simpleAttribute> <data:simpleAttribute name="NAME"><data:stringValue>Строковый атрибут ${#TestCase#randomData1}</data:stringValue></data:simpleAttribute>]]></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>80d4bf66-bc69-4eb0-8f01-c23ffdc54326</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">67803e08-3bca-4268-a9e3-62a08ce0adc1</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="80d4bf66-bc69-4eb0-8f01-c23ffdc54326" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>274829</con:value></con:property></con:properties></con:testCase><con:testCase id="7b532166-7d20-417c-a98a-e39d9803e7f0" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3. Check wipe parameter" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="request" name="Copy of 7. Get upserted record" id="d575c56c-d18a-4641-bbdc-05205531f8fe" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Copy of 7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="1. Generate random data for upsert" id="25e64802-5022-4466-9f50-8c144505f8e0"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="f48464a6-ad09-4c9b-b922-991b608897a1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="4280551b-724c-4913-9609-52c43e5bded1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="c3eabd9d-3828-45b7-b530-8cd672f01608"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestSoftDelete with wipe=true" id="30e1a772-82dd-4f9b-942b-26b65ab70327"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestSoftDelete with wipe=true" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="true">
          
   
<api:etalonKey id="${#TestCase#etalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>b232c168-701c-412d-a9b8-fc8efab21ec2</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">bcd19306-c188-4804-aa1d-24741b1b0226</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="b232c168-701c-412d-a9b8-fc8efab21ec2" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>135814</con:value></con:property></con:properties></con:testCase><con:testCase id="4d391107-b476-49c4-8fd0-994495a29c84" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="4. Delete record referenced" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1b2f17d8-4707-4b6a-9ce0-c37f1f963f60"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="3a551a54-650b-493c-872c-bc563dd045d7"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to properties randomData1 and randomData2" id="f6a8fdc6-ead0-49e1-9713-7a680195f496"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="c628f347-e029-4257-9787-5d3f710556f8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#refEnt_attrs}
 
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon to Upsert" id="274cc002-0432-4465-867f-3a294b19967c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="d7cc1ad8-455d-4d81-9643-c1895ce602bb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="3332301c-d165-406a-96d5-842fd7c542c2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestSoftDelete with refEtalonKeyID for refEntity" id="aa89f283-5b50-4925-bedf-bd0340259454"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestSoftDelete with refEtalonKeyID for refEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">
          
   
<api:etalonKey id="${#TestCase#refEtalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="ebc64fda-f96a-4ef6-9b32-f5dc4e2525b1" name="errorCode = EX_DATA_ETALON_CONTAINS_RELATIONS_TO_YOURSELF"><con:configuration><path>//@errorCode</path><content>EX_DATA_ETALON_CONTAINS_RELATIONS_TO_YOURSELF</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Repeat requestSoftDelete with wipe=true" id="3eb1a87e-9694-4657-9f17-ee12943395e6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Repeat requestSoftDelete with wipe=true" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="true">
          
   
<api:etalonKey id="${#TestCase#refEtalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d7e3d180-da5b-4f1f-a1cc-8c56f05efd4d" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>aba12126-c436-42d4-9202-8376299771aa</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1449dabd-cc86-4a2a-bc6a-6d112fcdb3d2</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="aba12126-c436-42d4-9202-8376299771aa" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>170171</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>211334</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>aa611997-709b-4696-a406-37a4a46f5039</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property></con:properties></con:testCase><con:testCase id="f2af69f5-9dcf-4993-bb6f-f124ad74b952" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="5. Check relevance periods" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="33c160f0-470b-487e-90ea-7f0b21250b9a"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="7f41a8c6-4cd1-402c-a77c-853f34175b2d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity with first period" id="6d565f15-1c64-4676-a4db-87c405e66237"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity with first period" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
 <api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_UPSERT" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to Entity with second period" id="7b9ab340-96a4-4a6e-a13a-85a170762bcc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to Entity with second period" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
 <api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_UPSERT" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record to Entity with third period" id="64435a3d-07be-414b-b873-fb246f96c918"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record to Entity with third period" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
 <api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_UPSERT" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="10391397-d1ca-4168-adf3-860c1d0f8176"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity with first period</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity with first period</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestSoftDelete to delete record with first period" id="59405c8e-199c-475a-9bad-1ca0ccfd4ccb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestSoftDelete to delete record with first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false">
          
   
<api:etalonKey id="${#TestCase#etalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->

${#TestCase#range1}
             
<!--  <api:range rangeFrom="2016-08-02" rangeTo="2016-08-13T23:59:59.999"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Do requestGet for record without first period" id="d8c80c3a-ee73-4328-9cf2-bab177404d33"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestGet for record without first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
 <!--        <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}"> -->
        <api:requestGet entityName="${#TestCase#entityName}" asOf="2016-08-15T00:00:00.000" originsAsOf="2016-02-16T00:00:00.000" etalonHistory="true" softDeleted="false">    
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          
<!--

            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#externalId}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
     -->       
         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/v3/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="5392bd33-b2f3-4837-8f49-767edf2f1bb7" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="88ff3cdc-49d8-4f99-8e37-22e20f8880db" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a42f205e-c4ed-4a6b-a5cc-6cbb287fa5ec</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>ba64efa3-b54d-47e2-abd6-949c33eb3acd</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="a42f205e-c4ed-4a6b-a5cc-6cbb287fa5ec" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>173401</con:value></con:property><con:property><con:name>range1</con:name><con:value>&lt;api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/></con:value></con:property><con:property><con:name>range2</con:name><con:value>&lt;api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/></con:value></con:property><con:property><con:name>range3</con:name><con:value>&lt;api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/></con:value></con:property></con:properties></con:testCase><con:testCase id="5d5e8da9-a0f3-4216-af65-63c2d5c24211" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="6. Do requestSoftDelete with externalId for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Get current date for upsert" id="49f72f36-9c88-4bd5-93b8-f22f11ef5b9e"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="43f6e323-5456-49e4-8982-f303997783dd"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer result to property randomData and currDate" id="880c2b8e-94e0-4988-8722-b4621141066c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>currentDate to prop</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Get current date for upsert</con:sourceStep><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to Entity" id="7f75b032-7a28-40ae-92b4-b7d06a258d7b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="00783375-7e53-43aa-a451-c5f3e9498200"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Get upserted record" id="07209eee-2862-407b-abaa-630ab42a9384"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Do requestSoftDelete with etalonKey for Entity" id="db9689fb-65fa-4dc5-b667-f323443ec01c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestSoftDelete with etalonKey for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
		  
<api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">
            <api:originKey externalId="${#TestCase#randomData1}"  sourceSystem="data_steward" entityName="${#TestCase#entityName}"/>
         </api:requestSoftDelete>

            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get deleted record" id="a20c1109-e1e7-4c7d-83f9-3e6e4ee90239"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get deleted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = INACTIVE"><con:configuration><path>//@status</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a280b629-26ce-4577-9db8-e628b4739c0d</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>dde36e4c-3b39-4d64-aac5-4f8b8084344c</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>189306</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:46:52.033</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="f09a6264-e929-4c95-9dd5-1aedcf44b127" name="requestRelationsSoftDelete"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="590ffc7f-422f-43b7-8170-d4bd0d323ba6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Do requestRelationsSoftDelete with etalon keys (+5 additional cases)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="e149c0e9-0fa2-420b-b1dc-834c50687b19"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="70822086-0886-4bb7-8f22-2b4311bb75d2"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, radomData2" id="c775d129-c98d-4a5f-9995-7060e7c9cb84"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="882f3ed6-7a8c-4683-a143-eee32d2b4902"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="8ed83906-a185-4f55-a297-26b97774801a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="a4559417-9167-4513-a011-aac241cbb444"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="189dbda1-d1fe-4af8-b77f-b5c12f9e1fb1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with etalon keys" id="eabaf320-908b-40d2-af69-b74a3dd90510"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="0ae2db5a-4000-453c-9852-7ed97c1beacf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with etalon keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check state of deleted relation at DB" id="fdc39520-87f0-49ee-b480-66203b917dbc" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsSoftDelete with non-existing relation name" id="283aec0a-9f3b-4c75-a22b-8a1c68f74744"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsSoftDelete with non-existing relation name" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRelationsSoftDelete>\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/>-->\r
            <api:relations>\r
               <api:relation name="abra-cadabra-${#TestCase#relName1}">\r
                  <api:key>\r
                     <!--<api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>-->\r
                     <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>\r
                     <!--<api:range rangeFrom="?" rangeTo="?"/>-->\r
                  </api:key>\r
               </api:relation>\r
            </api:relations>\r
         </api:requestRelationsSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="80bb4b9f-c359-466b-a7d9-b6795d8bbdd4" name="errorCode = EX_DATA_RELATIONS_DELETE_RELATION_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_DATA_RELATIONS_DELETE_RELATION_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Do requestRelationsSoftDelete with non-existing right end of relation" id="4d48b3ef-d53c-4d85-bbe9-8062105f2ec3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Do requestRelationsSoftDelete with non-existing right end of relation" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete>
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="non-existing-${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1d22a5f8-10bc-4321-a855-076a97f1ebd7" name="errorCode = EX_DATA_RELATIONS_DELETE_TO_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_DATA_RELATIONS_DELETE_TO_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="13. Do requestRelationsSoftDelete with non-existing left end of relation" id="e4bcfe00-52e5-4892-abda-f8b075682e54"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="13. Do requestRelationsSoftDelete with non-existing left end of relation" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete>
           
            <api:etalonKey id="non-existing-${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1d22a5f8-10bc-4321-a855-076a97f1ebd7" name="errorCode = EX_DATA_RELATIONS_DELETE_FROM_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_DATA_RELATIONS_DELETE_FROM_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="14. Do requestRelationsSoftDelete with etalon and ref origin keys" id="4236d686-c1c6-4ca8-a34d-a1692858359b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="14. Do requestRelationsSoftDelete with etalon and ref origin keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                        <api:originKey id="${#TestCase#refOriginKeyID}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>   
                      <!--  <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>  -->
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="15. Do requestRelationsSoftDelete with origin and ref etalon keys" id="f6b960ad-8cba-42df-8c46-8a1c27c135a2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="15. Do requestRelationsSoftDelete with origin and ref etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <!--   <api:etalonKey id="${#TestCase#etalonKeyID}"/>   -->
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#randomData1}" entityName="${#TestCase#entityName}"/> 
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--   <api:originKey id="${#TestCase#refOriginKeyID}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>      -->
                       <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0a0886f8-d39c-4e24-af59-dfe4becfdb93</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">689464a2-04b7-456c-ab78-c8fbffdb0831</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="f4a974c2-b31e-4069-b125-760e29cd059d" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>160833</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>197241</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>2ddb5d70-1852-4d4f-8028-f0dff1505699</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value>411d737c-6e9d-444a-b37d-abfc87be7235</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>f4a974c2-b31e-4069-b125-760e29cd059d</con:value></con:property></con:properties></con:testCase><con:testCase id="c53d758b-3c41-4f17-8059-a9db829a2082" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Do requestRelationsSoftDelete with origin keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b3515994-5464-4064-9a00-5e0f43405d19"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="0f789bf1-9593-4e36-a6a0-f4f3b63eff83"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and radomData2 properties" id="94db5b10-3909-4d08-809e-12d63ad27d7a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="1970298f-4537-4df9-84ef-d48570c67a2e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer data to refOriginKeyID and refEtalonKeyID" id="0ffd4a37-6e51-40d7-a3d9-94c0de5e899b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to refEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="a59883b1-e2d1-4e3e-85b5-761a132619db"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="add7997e-f48a-404a-b6d8-08819dfbde7b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with origin keys" id="6bae8b90-8c01-4310-84e8-1712e7452ca2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with origin keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <!--  <api:etalonKey id="${#TestCase#etalonKeyID}"/> -->
            <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                         <api:originKey id="${#TestCase#refOriginKeyID}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>  
                     <!-- <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>  -->
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="b5b39679-754d-4e76-b47f-afcdc0ab3837"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with origin keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check status of deleted relation at DB" id="f87029dc-253f-44da-b558-8521d0ec87a0" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>9ef804d4-fb71-41a2-9af6-4de2383d1519</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1a159c22-f3bd-4216-9678-e2012934e14b</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="5efdde20-7f9d-48b9-9087-dc9b93847661" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>123659</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>239124</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>6cfc7571-82f9-4f57-a989-dc51034844e2</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a9ce5021-0c13-4c49-84fb-31a95ea861d2</con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>5efdde20-7f9d-48b9-9087-dc9b93847661</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="c3fdde81-2a53-4a18-83a4-74f0588a7008" name="UpsertEnums"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="d9a0e863-d01f-43fa-8d3e-31d3c285adb4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Create record with enum" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="e98ac3de-876a-4fc3-8292-32578deca2ea"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="4927dd6b-85e1-4bad-988c-72c0d703b2f4"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="dd40c1bb-959a-40e9-b666-d484605d1a8e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="50f0ed08-9169-460b-84c8-d85084fb4eda"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ENUMS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>299295</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:47:37.754</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="b78b8cb7-f151-450f-8c91-07ae345c0f9b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Update record with null value for enum attr" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="601cb8ef-9b80-43c2-942d-c25d2a83cea6"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="99439687-1648-4295-9929-33541110c1e7"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="dd2da67d-9eda-4e1e-a53f-f00587bc1f51"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="884efec4-869e-4a06-beed-7b7e037969ab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ENUMS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>254758</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:47:37.948</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>тест перечислений ${#TestCase#randomData1}&lt;/data:stringValue>  &lt;/data:simpleAttribute>   &lt;data:simpleAttribute name="enum_attr" xmlns:nil="true"/></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="8c7d8c78-e251-4395-accf-209d2c8e7432" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3. Create record with non-existing value of enum" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="74f04e58-be52-4c2e-b10c-f27c60ebd014"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="e9a29a83-2989-40f9-a1fb-1d58eb97137a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="880d349f-653c-4378-9301-9cc89aa6898b"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="d462f21c-f7c4-45d2-b850-ff6361c3d40b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_UPSERT_ENUM_ATTRIBUTE_INCORRECT"><con:configuration><path>//@errorCode</path><content>EX_DATA_UPSERT_ENUM_ATTRIBUTE_INCORRECT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ENUMS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>215401</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>non-existing-value</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="c0dfb52c-d051-4f51-86f6-8a9ad19402f5" name="UpsertClassifiers"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="89f291f0-3daa-4c9b-bbc8-3d2d790d0f81" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Partial upsert for record with classifiers" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="8dd01166-f802-4316-b86a-cb325ca9d437"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="062e88b9-af66-45d3-980e-7ce259265109"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="b3944c92-5022-4f77-8fea-ba4f6baa03b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="0f47cf43-5996-4c88-81fd-171ca5970e76"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}

               ${#TestCase#ent_classifiers}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="39ef3052-5169-4724-b799-ee0e07d57a51"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Get upserted record" id="fd3ccc7e-09b7-4d9e-991b-46bd325cd70f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="e6517dc3-ca89-49e8-8e36-a1526495ff0f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>with classifiers2</data:stringValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="8261fe76-17d9-43ca-94b0-024adeb1b3b9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">13263adc-d344-4d34-b91b-c44ea903678b</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>148138</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:47:43.945</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="3047fa2a-87a4-4c3a-8928-4a1f69133438" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1.2. Partial upsert for record with classifiers Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="d7cb316a-bde3-443a-aca9-bce71ad9177a"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="48326999-ce8f-4ed3-ae7b-cbe73c7b61bb"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="a070f1e7-150d-40f3-a20f-e91c105850b4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="bb66b2ad-0ec3-4732-a750-5c9f4fa8f562"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}

${#TestCase#ent_classifiers}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 ${#TestCase#ent_classifier_pointers}

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="5e7a8917-a66f-4d28-9e36-7298ade7a2e4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Get upserted record" id="d0de843e-9780-4be5-a317-c440ed3d68e6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="3ba12667-758a-4fd2-a9df-48a04e66fe11"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  <data:simpleAttribute name="code_atr">
 <data:stringValue>${#TestCase#randomData1}</data:stringValue>  
 </data:simpleAttribute>
 <data:simpleAttribute name="string_attr">
 <data:stringValue>with classifiers2</data:stringValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="910791a0-0a23-4bb8-bfc1-db9e0a813319"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">cef59e5d-ebf7-480a-939f-6fe04504a18d</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>124824</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:47:44.685</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>    <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="ac69b710-adc4-4731-be96-ced942fefefc" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Partial upsert for classifiers" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1916b2f4-3d1d-434f-9a52-a4c874ea14ad"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="1506cd9b-53ce-4e19-a2d1-d7f08a8387ce"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="c51e735e-86a6-454d-b196-e35143687587"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="c12a2fb6-611f-4366-b23f-8cdf805876f5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}

${#TestCase#ent_classifiers}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 ${#TestCase#ent_classifier_pointers}

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="8acec139-14da-4a1e-93d7-2c71b60ebe65"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="93b36d24-70ef-481c-a187-871b6e1264ca"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@skip_soap_action">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>with classifiers2</data:stringValue>  
 </data:simpleAttribute>

 ${#TestCase#ent_classifiers_new}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

${#TestCase#ent_classifier_pointers}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="35266e54-8ddc-450a-baf8-fdbd4984176b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6c02b617-04a8-4170-9ea0-61d13de73ac0" name="Assert classifier cls4 is new"><con:configuration><path>//*[@classifierName="cls4"]//*[@name="atr1"]//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6c02b617-04a8-4170-9ea0-61d13de73ac0" name="Assert classifier cls3 is new"><con:configuration><path>//*[@classifierName="cls3"]//*[@name="atr1"]//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">33a9948f-8838-4884-aa59-937ae4ae11e6</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>172294</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:47:45.395</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>ent_classifiers_new</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="97acb7f5-c83e-4d8a-845e-73e8cd459617" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2.2. Partial upsert for classifiers Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="cbe11aa5-2014-4828-8218-e1ff368bec52"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="81e9fff3-ffde-45df-aed2-567213412f7b"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="f597fc39-f1fd-438e-b27f-6e5df46bffa6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="f05870bb-90f6-4e45-aa4c-b53a23212cc0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}

${#TestCase#ent_classifiers}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupName}"/>
 </api:originRecord>

 ${#TestCase#ent_classifier_pointers}

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="7ffa201f-b8eb-4861-b429-9318099a01b4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="3072f53c-8238-4017-99a0-5039823fcb02"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  <data:simpleAttribute name="code_atr">
 <data:stringValue>${#TestCase#randomData1}</data:stringValue>  
 </data:simpleAttribute>

 <data:simpleAttribute name="string_attr">
 <data:stringValue>with classifiers2</data:stringValue>  
 </data:simpleAttribute>

 ${#TestCase#ent_classifiers_new}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupName}"/>
 </api:originRecord>

${#TestCase#ent_classifier_pointers}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="f860fbfc-7edb-4519-b23e-962d86295cf2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6c02b617-04a8-4170-9ea0-61d13de73ac0" name="Assert classifier cls4 is new"><con:configuration><path>//*[@classifierName="cls4"]//*[@name="atr1"]//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6c02b617-04a8-4170-9ea0-61d13de73ac0" name="Assert classifier cls3 is new"><con:configuration><path>//*[@classifierName="cls3"]//*[@name="atr1"]//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ac00d20d-a962-43c2-90e9-52420c6cf585</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>151491</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:47:45.981</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute><data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>ent_classifiers_new</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>23</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="a6b2b951-623a-4ae5-b422-b844257a71e6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3. Partial delete for classifiers" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="3efffa6a-4376-4730-8609-fcbb2c2673b4"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="de807d58-6227-4e30-9508-d69b3bf679ae"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="ebaa50a2-c5b7-4232-9ed5-0c2b48382d1b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="736a26ab-89d0-4375-a2a2-5c6f399c7d56"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}

${#TestCase#ent_classifiers}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 ${#TestCase#ent_classifier_pointers}

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="203a238d-8f1a-4aa4-af31-ab90b9948bbe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="01c6ecf0-8a87-4e5e-aa14-372823f84155"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>with classifiers2</data:stringValue>\r
               </data:simpleAttribute>\r
               ${#TestCase#ent_classifiers_new}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="48353db5-15a8-4ae2-8dde-f7db57c1a8c2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">bfcfc4d6-2c5b-4b9c-991d-68c0e9410241</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>261909</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:47:46.599</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>ent_classifiers_new</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="INACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="INACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="89e1b12f-874f-4a16-b91a-959d007fa3ea" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3.2. Partial delete for classifiers lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b3f54cf4-4ad3-42fb-a1e4-e46fe7c5bd8d"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="0b574a7a-5253-419f-a4ef-063cdf063201"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="84ec31f1-d153-4ed2-9090-f6c230a29bfe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="dd8d8bda-8f50-453c-9b5c-5a25a9024898"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}

${#TestCase#ent_classifiers}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 ${#TestCase#ent_classifier_pointers}

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="f6507b52-a796-4b70-9043-e3d0a7617893"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="6d3e4231-9a78-4ae7-a367-641c42c8b0a9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="code_atr">
 <data:stringValue>${#TestCase#randomData1}</data:stringValue>  
 </data:simpleAttribute>
 <data:simpleAttribute name="string_attr">
 <data:stringValue>with classifiers2</data:stringValue>  
 </data:simpleAttribute>

 ${#TestCase#ent_classifiers_new}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

${#TestCase#ent_classifier_pointers}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="1af72d89-3842-46d1-be69-187e316a60f9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0ca21be1-b100-4a0d-ad5a-6d7d5dbebce4</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>8b26cf65-36e8-4dc4-85ac-73dc6d95e2fc</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>296928</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T15:47:47.194</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>ent_classifiers_new</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="INACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="INACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="815ad146-f747-4121-8783-9b4f7f023748" name="UpsertMeasurementUnits"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="763afacb-9db2-46ac-bd1c-83fd690a2750" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="1. Create record with MU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="f949c9ee-abac-4ad3-9d0b-cd803b2b2db2"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="da5a73c1-0921-4ce3-9702-af178f3e96d7"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="276475f2-9cbd-42f7-88e2-111d361880dd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="1dd8a4d5-49cc-4252-a2f4-80938777e775"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>226101</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:11.035</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Тест единиц измерения ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="55" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="39" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="214" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="98b377ce-a0d1-4e24-80a6-6c56fe77c4af" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="2. Create record with null value for MU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="4b1e1777-22da-464c-8798-aa77e3a754f8"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="90238289-aa51-4e2d-83c9-83c356dcf6df"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="53dad2a1-4ffd-4523-aa35-20975bc6f1a6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="46bdaf03-8330-4d4d-85ed-5da8802affaf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>273537</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:11.230</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Зануление 3-го атрибута ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="55" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="39" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr" xmlns:nil="true"/>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="428b22c9-aa37-4467-98dc-f5edbf8382b4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="3. Create record without measurementValueId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="41c4fd15-5675-49c1-be67-d558239b8860"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="8eb333e2-09f2-4ab1-a23c-a31a6c7f5f90"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="561343c9-0ca6-4ce2-a79b-2f47c2cebc39"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="8e5ef9f5-6986-49ab-964c-c23165486601"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>198595</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:11.445</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Без measurementValueId ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementUnitId="55" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementUnitId="39" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementUnitId="214" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="ad18dc52-418e-40ce-a6e7-660d43b8c023" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="4. Create record with incorrect measurementValueId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b2d373f7-f0fa-4e11-b7f2-8599746561ea"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="7ed3e7c2-557d-4776-9ae8-21a4879fc6b0"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="a7d72c81-36f0-4c1a-954b-3ff5d1c3944c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="8467835e-081a-4f19-88ae-1bb4300a5b56"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_ATTRIBUTE_MEASURED_VALUE_NOT_PRESENT"><con:configuration><path>//@errorCode</path><content>EX_DATA_ATTRIBUTE_MEASURED_VALUE_NOT_PRESENT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>139498</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:11.629</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Некорректный measurementValueId ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="incorrect-${#TestCase#randomData1}" measurementUnitId="55" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="incorrect-${#TestCase#randomData1}" measurementUnitId="39" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="incorrect-${#TestCase#randomData1}" measurementUnitId="214" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="a1adb271-5424-4c8d-bcd7-51a2e770bef7" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="5. Create record without measurementUnitId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="66c297e3-6542-42e0-bdf9-8bd10b025632"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="dd8086c8-2e72-4ff7-a6ea-f75e8ef8c63e"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="66e3fb64-3c33-4a43-b0d3-4aa50bb40150"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="23cddaf2-b21e-4870-a6d3-bd31681bfeba"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>250397</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:11.755</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Тест единиц измерения ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="8942694b-35ff-4bef-853b-9926dac865eb" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="6. Create record with incorrect measurementUnitId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="91792a7a-d5fc-413b-aa8c-ebb039a643b0"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="6b7d5e4c-5bdc-41d8-8b4f-280e273acd2d"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="0b57919f-0783-49e2-8e54-01db7a5e3a8b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="6d4f714a-3fea-4d07-ad7d-18e800c01ca1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT"><con:configuration><path>//@errorCode</path><content>EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>117384</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:11.942</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Тест единиц измерения ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="incorrect-${#TestCase#randomData1}" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="incorrect-${#TestCase#randomData1}" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="incorrect-${#TestCase#randomData1}" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="f836377d-0ef9-4623-b4f5-7a2ce2d7ce98" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="7. Create record without value" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="cfe6e257-da84-4fd0-9f4e-36ad0b01c56d"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="ab7288da-a233-4eee-ad3f-15c8bda6aade"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="942dc0e5-f371-4a3b-afb9-3a342893a7bc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="9a28e403-c4c6-4508-8e88-bebc8c874cf1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>164237</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:12.074</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Без value ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="55" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="39" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="214" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="52130c46-4e38-4038-8b6f-2595aa0f5b9c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="8. Create record with incorrect value" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="57219971-bcb0-479e-909d-a3d86084379e"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="6bf2c038-073f-4361-b774-44be7a5ef77b"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="9ee716a4-52e5-4f6b-a9ab-b41c474bbbde"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="c779e1dc-87a7-4b2b-9d0d-51f9cf280ded"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT"><con:configuration><path>//@errorCode</path><content>EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>278421</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:12.240</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Incorrect value ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="55" value="incorrect-${#TestCase#randomData1}" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="39" value="incorrect-${#TestCase#randomData1}" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="214" value="incorrect-${#TestCase#randomData1}" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="a974f27f-b25e-4ecc-bb99-71cd81302b57" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="9. Create record with not related measurementValueId and measurementUnitId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="9b31c59d-e98e-419a-af09-dff48d5194e1"><con:settings/><con:config><script>random = new Random().nextInt(299999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="e82c3905-a833-44d2-ba12-a7c3c09ab663"><con:settings/><con:config><script>def date = new Date()
def formattedDate = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS")
result = formattedDate
//result = date</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="67fb4eb0-b9f2-4bd3-b619-386b4daaa566"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="5670ab0d-d377-45de-b9a1-dcf2554316c7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/v3/" xmlns:data="http://data.mdm.unidata.com/v3/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT"><con:configuration><path>//@errorCode</path><content>EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:ns3="http://meta.mdm.unidata.com/v3/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>186202</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-07-04T16:03:12.252</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Тест единиц измерения ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="39" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="55" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="39" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>adminUsername</con:name><con:value>admin</con:value></con:property><con:property><con:name>adminPassword</con:name><con:value>admin1234</con:value></con:property><con:property><con:name>remoteHost</con:name><con:value>http://localhost:8080</con:value></con:property><con:property><con:name>dataBaseName</con:name><con:value>unidata</con:value></con:property><con:property><con:name>serviceEndpointSOAP</con:name><con:value>${#Project#remoteHost}/nsi-asoup-3-backend/api/public/${#Project#protoVer}/UnidataService</con:value></con:property><con:property><con:name>serviceEndpointREST</con:name><con:value>${#Project#remoteHost}/unidata-backend/api/internal</con:value></con:property><con:property><con:name>protoVer</con:name><con:value>v3</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:sensitiveInformation/></con:soapui-project>