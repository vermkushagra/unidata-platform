<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="3016e086-cc7e-4910-a4dc-98e2a66072ad" activeEnvironment="Default" name="SOAP Testing Automation Suites" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="requestRelationsSoftDelete"/>
  <con:entry key="Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="1. Do requestRelationsSoftDelete with etalon keys"/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:WsdlInterface" id="0a8ef921-628a-469a-8e18-c6c9216eaa90" wsaVersion="NONE" name="SOAP API" type="wsdl" bindingName="{http://api.mdm.unidata.com/wsdl/v4/}UnidataServiceBinding" soapVersion="1_1" anonymous="optional" definition="http://localhost:8080/unidata-backend/api/public/v4/UnidataService?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://localhost:8080/unidata-backend/api/public/v4/UnidataService?wsdl"><con:part><con:url>http://localhost:8080/unidata-backend/api/public/v4/UnidataService?wsdl</con:url><con:content><![CDATA[<definitions targetNamespace="http://api.mdm.unidata.com/wsdl/v4/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tdwsdl="http://api.mdm.unidata.com/wsdl/v4/" xmlns:tdapi="http://api.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <xs:schema>
      <xs:import namespace="http://api.mdm.unidata.com/v4/" schemaLocation="http://localhost:8080/unidata-backend/api/public/v4/UnidataService?xsd=unidata-api-4.0.xsd"/>
    </xs:schema>
  </types>
  <message name="UnidataMessageResponse">
    <part element="tdapi:apiResponseBody" name="apiResponseBody"></part>
  </message>
  <message name="UnidataMessageRequest">
    <part element="tdapi:apiRequestBody" name="apiRequestBody"></part>
  </message>
  <portType name="UnidataServicePortType">
    <operation name="apiCall">
      <input message="tdwsdl:UnidataMessageRequest"></input>
      <output message="tdwsdl:UnidataMessageResponse"></output>
    </operation>
  </portType>
  <binding name="UnidataServiceBinding" type="tdwsdl:UnidataServicePortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="apiCall">
      <soap:operation soapAction="apiCall"/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="UnidataService">
    <port binding="tdwsdl:UnidataServiceBinding" name="UnidataServicePort">
      <soap:address location="http://localhost:8080/unidata-backend/api/public/v4/UnidataService"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://localhost:8080/unidata-backend/api/public/v4/UnidataService?xsd=unidata-api-4.0.xsd</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" jaxb:extensionBindingPrefixes="xjc" jaxb:version="2.0" targetNamespace="http://api.mdm.unidata.com/v4/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" xmlns:tdapi="http://api.mdm.unidata.com/v4/" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:data="http://data.mdm.unidata.com/v4/">
  <xs:import namespace="http://data.mdm.unidata.com/v4/" schemaLocation="http://localhost:8080/unidata-backend/api/public/v4/UnidataService?xsd=unidata-data-4.0.xsd"/>
  <xs:element name="apiRequestBody" type="tdapi:UnidataRequestBody"/>
  <xs:element name="apiResponseBody" type="tdapi:UnidataResponseBody"/>
  <xs:annotation>
    <xs:documentation>Набор элементов и типов для Unidata Soap API;
Точкой входа во все запросы является структура UnidataRequestBody;
Все ответы приходят как структура UnidataResponseBody</xs:documentation>
  </xs:annotation>
  <!--Начало специальных типов данных для тестового XML-->
  <xs:complexType name="SampleDef">
    <xs:annotation>
      <xs:documentation>Дополнительный тип данных предназначенный для внутреннего тестирования SoapAPI.
Позволяет сформировать произвольный запрос ответ в любом редакторе, поддерживающим проверку XML файла на основе XML Schema</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="requestBody" type="tdapi:UnidataRequestBody"/>
      <xs:element maxOccurs="1" minOccurs="1" name="responseBody" type="tdapi:UnidataResponseBody"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="samples">
    <xs:annotation>
      <xs:documentation>Дополнительный элемент, предназначенный для внутреннего тестирования SoapAPI.
Позволяет сформировать произвольный набор запрос-ответов, а также событий платформы в любом редакторе, поддерживающим проверку XML файла на основе XML Schema</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:choice maxOccurs="unbounded" minOccurs="1">
        <xs:element name="sample" type="tdapi:SampleDef"/>
        <xs:element name="sampleJMSMessage" type="tdapi:UnidataMessageDef"/>
      </xs:choice>
    </xs:complexType>
  </xs:element>
  <!--Конец специальных типов данных для тестового XML-->
  <!--Начало специальных типов данных для точки входа в описание сообщений публикуемых платформой-->
  <xs:simpleType name="UnidataEventType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Upsert"/>
      <xs:enumeration value="Merge"/>
      <xs:enumeration value="SoftDelete"/>
      <xs:enumeration value="Restore"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="UpsertEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по изменению записи сущности. Всегда содержит исходную запись, которую затронуло событие, а также пересчитанную основную запись</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="originRecord" type="data:OriginRecord">
        <xs:annotation>
          <xs:documentation>Исходная запись, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonRecord" type="data:EtalonRecord">
        <xs:annotation>
          <xs:documentation>Основная запись, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="originKey" type="data:OriginKey"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="supplementaryKeys" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значения ключей, связанных с эталоном, который был завтронут в ходе данной операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="upsertActionType" type="tdapi:UpsertActionType" use="required">
      <xs:annotation>
        <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="UpsertEventClassifierDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по изменению записи классификатора. Всегда содержит исходный классификатор, который затронуло событие.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="originRecord" type="data:OriginClassifierRecord">
        <xs:annotation>
          <xs:documentation>Исходная запись классификатора, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonRecord" type="data:EtalonClassifierRecord">
        <xs:annotation>
          <xs:documentation>Основная запись классификатора, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="owningOriginKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа записи, идентифицирующего контролирующую классификатор</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="owningEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа основной записи, идентифицирующего контролирующую классификатор</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="originKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа классификатора</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа основной записи классификатора</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="upsertActionType" type="tdapi:UpsertActionType" use="required">
      <xs:annotation>
        <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="UpsertEventRelationDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по добавлению объекта связи к записи.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice maxOccurs="1">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="record"/>
          </xs:appinfo>
        </xs:annotation>
        <xs:element maxOccurs="1" minOccurs="1" name="integralEntity" type="data:IntegralRecord"/>
        <xs:element maxOccurs="1" minOccurs="1" name="relationTo" type="data:RelationTo"/>
      </xs:choice>
      <xs:element maxOccurs="1" minOccurs="0" name="fromOriginKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа записи 'от'</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="fromEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа основной записи 'от'</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="toOriginKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа записи 'к'</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="toEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа основной записи 'к'</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="relationType" type="xs:string">
        <xs:annotation>
          <xs:documentation>Тип связи</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="upsertActionType" type="tdapi:UpsertActionType" use="required">
      <xs:annotation>
        <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SoftDeleteEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по удалению записи сущности. Всегда содержит ключи удаленных записей.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа, идентифицирующего логически удалённую основную запись</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="originKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа, идентифицирующего логически удалённую исходную запись</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="etalonRecord" type="data:EtalonRecord">
        <xs:annotation>
          <xs:documentation>Основная запись, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="supplementaryKeys" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значения ключей, связанных с эталоном, который был завтронут в ходе данной операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="SoftDeleteActionType" type="tdapi:SoftDeleteActionType" use="required">
      <xs:annotation>
        <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SoftDeleteClassifierEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по удалению записи классификатора. Всегда содержит ключи удаленного классификатора и ключ соответствующей записи.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="owningOriginKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа записи, идентифицирующего контролирующую классификатор</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="owningEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа основной записи, идентифицирующего контролирующую классификатор</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="originKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа классификатора</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа основной записи классификатора</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="SoftDeleteActionType" type="tdapi:SoftDeleteActionType" use="required">
      <xs:annotation>
        <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SoftDeleteRelationEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по удалению связи.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="fromOriginKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа записи 'от'</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="fromEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа основной записи 'от'</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="toOriginKey" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значение ключа записи 'к'</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="toEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа основной записи 'к'</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="1" name="relationType" type="xs:string">
        <xs:annotation>
          <xs:documentation>Тип связи</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="SoftDeleteActionType" type="tdapi:SoftDeleteActionType" use="required">
      <xs:annotation>
        <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RestoreEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по востановлению записи сущности. Всегда содержит ключ востановленной записи и ее название.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключа, идентифицирующего востановленную запись</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="supplementaryKeys" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значения ключей, связанных с эталоном, который был завтронут в ходе данной операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="entityName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Название сущности востановленной записи</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="MergeEventDetailsDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая детали события по консолидации записей сущности. Всегда основную запись, в которую произошла консолидация, а также ключи всех проигравших записей</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="winningEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Основная запись, которую затронуло событие</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="1" name="looserEtalonKey" type="data:EtalonKey">
        <xs:annotation>
          <xs:documentation>Значение ключей, идентифицирующих проигравшые основные записи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="supplementaryKeys" type="data:OriginKey">
        <xs:annotation>
          <xs:documentation>Значения ключей, связанных с эталоном, который был завтронут в ходе данной операции</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TimeIntervalDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая временной интервал.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="rangeFrom" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Начало действия данной версии данных. null значит бесконечность в прошлом.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeTo" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Окончание действия данной версии данных. null значит бесконечность в будущем.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="UnidataMessageDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая произвольное событие генерируемое платформой на изменение данных.</xs:documentation>
    </xs:annotation>
    <xs:choice maxOccurs="1" minOccurs="1">
      <xs:element name="upsertEventDetails" type="tdapi:UpsertEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по изменению записи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="upsertEventClassifierDetails" type="tdapi:UpsertEventClassifierDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по изменению классификатора</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="UpsertEventRelationDetailsDef" type="tdapi:UpsertEventRelationDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по изменению связи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="mergeEventDetails" type="tdapi:MergeEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по консолидации записей</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="softDeleteEventDetails" type="tdapi:SoftDeleteEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по удалению записи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="softDeleteClassifierEventDetails" type="tdapi:SoftDeleteClassifierEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по удалению классификатора</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="softDeleteRelationEventDetails" type="tdapi:SoftDeleteRelationEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по удалению связи</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="restoreEventDetails" type="tdapi:RestoreEventDetailsDef">
        <xs:annotation>
          <xs:documentation>Детали события по востановлению записи</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:choice>
    <xs:attribute name="eventType" type="tdapi:UnidataEventType" use="required">
      <xs:annotation>
        <xs:documentation>На данный момент поддерживается два вида событий, в зависимости от которых, содержится один из нижеперечисленных элементов</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="eventDate" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Фактическая дата события</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="publishDate" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Дата публикации события в очередь</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string">
      <xs:annotation>
        <xs:documentation>ID бизнес операции</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <!--Конец  специальных типов данных для точки входа в описание сообщений публикуемых платформой-->
  <!--Начало специальных типов данных для точки входа в описания запросов-->
  <xs:complexType name="UnidataRequestBody">
    <xs:annotation>
      <xs:documentation>Структура любого API запроса. Состоит из
- обязательной секции 'common', содержащий стандартный набор общих параметров, таких как идентификатор хранилища, безопасность, итд
- одного из конкретных запросов</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="common" type="tdapi:CommonSectionDef"/>
      <xs:choice maxOccurs="1" minOccurs="1">
        <xs:element name="requestAuthenticate" type="tdapi:RequestAuthenticate"/>
        <xs:element name="requestGetLookupValues" type="tdapi:RequestGetLookupValues"/>
        <xs:element name="requestCleanse" type="tdapi:RequestCleanse"/>
        <xs:element name="requestUpsert" type="tdapi:RequestUpsert"/>
        <xs:element name="requestRelationsUpsert" type="tdapi:RequestRelationsUpsert"/>
        <xs:element name="requestMerge" type="tdapi:RequestMerge"/>
        <xs:element name="requestJoin" type="tdapi:RequestJoin"/>
        <xs:element name="requestSoftDelete" type="tdapi:RequestSoftDelete"/>
        <xs:element name="requestRelationsSoftDelete" type="tdapi:RequestRelationsSoftDelete"/>
        <xs:element name="requestGet" type="tdapi:RequestGet"/>
        <xs:element name="requestRelationsGet" type="tdapi:RequestRelationsGet"/>
        <xs:element name="requestSearch" type="tdapi:RequestSearch"/>
        <xs:element name="requestGetDataQualityErrors" type="tdapi:RequestGetDataQualityErrors"/>
        <!--<xs:element name="requestMetaGetCleanseFunctionDesc" type="tdapi:RequestMetaGetCleanseFunctionDesc"/>
                <xs:element name="requestMetaGetCleanseFunctionList" type="tdapi:RequestMetaGetCleanseFunctionList"/>-->
        <xs:element name="requestInfoGet" type="tdapi:RequestInfoGet"/>
        <xs:element name="requestBulkUpsert" type="tdapi:RequestBulkUpsert"/>
        <!--Jobs-->
        <xs:element name="requestFindAllJobs" type="tdapi:RequestFindAllJobs"/>
        <xs:element name="requestSaveJob" type="tdapi:RequestSaveJob"/>
        <xs:element name="requestRemoveJob" type="tdapi:RequestRemoveJob"/>
        <xs:element name="requestFindJob" type="tdapi:RequestFindJob"/>
        <xs:element name="requestRunJob" type="tdapi:RequestRunJob"/>
        <xs:element name="requestJobStatus" type="tdapi:RequestJobStatus"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UnidataResponseBody">
    <xs:annotation>
      <xs:documentation>Структура любого API ответа. Состоит из
- обязательной секции 'common', содержащий стандартный набор общих данных, таких как код ошибки, итд
- одного из конкретных ответов</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="common" type="tdapi:CommonResponseDef"/>
      <xs:choice maxOccurs="1" minOccurs="0">
        <xs:element name="responseAuthenticate" type="tdapi:ResponseAuthenticate"/>
        <xs:element name="responseGetLookupValues" type="tdapi:ResponseGetLookupValues"/>
        <xs:element name="responseCleanse" type="tdapi:ResponseCleanse"/>
        <xs:element name="responseUpsert" type="tdapi:ResponseUpsert"/>
        <xs:element name="responseRelationsUpsert" type="tdapi:ResponseRelationsUpsert"/>
        <xs:element name="responseMerge" type="tdapi:ResponseMerge"/>
        <xs:element name="responseJoin" type="tdapi:ResponseJoin"/>
        <xs:element name="responseSoftDelete" type="tdapi:ResponseSoftDelete"/>
        <xs:element name="responseRelationsSoftDelete" type="tdapi:ResponseRelationsSoftDelete"/>
        <xs:element name="responseGet" type="tdapi:ResponseGet"/>
        <xs:element name="responseRelationsGet" type="tdapi:ResponseRelationsGet"/>
        <xs:element name="responseSearch" type="tdapi:ResponseSearch"/>
        <xs:element name="responseGetDataQualityErrors" type="tdapi:ResponseGetDataQualityErrors"/>
        <!--<xs:element name="responseMetaGetCleanseFunctionDesc" type="tdapi:ResponseMetaGetCleanseFunctionDesc"/>
                <xs:element name="responseMetaGetCleanseFunctionList" type="tdapi:ResponseMetaGetCleanseFunctionList"/>-->
        <xs:element name="responseInfoGet" type="tdapi:ResponseInfoGet"/>
        <xs:element name="responseBulkUpsert" type="tdapi:ResponseBulkUpsert"/>
        <!--Jobs-->
        <xs:element name="responseFindAllJobs" type="tdapi:ResponseFindAllJobs"/>
        <xs:element name="responseSaveJob" type="tdapi:ResponseSaveJob"/>
        <xs:element name="responseRemoveJob" type="tdapi:ResponseRemoveJob"/>
        <xs:element name="responseFindJob" type="tdapi:ResponseFindJob"/>
        <xs:element name="responseRunJob" type="tdapi:ResponseRunJob"/>
        <xs:element name="responseJobStatus" type="tdapi:ResponseJobStatus"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <!--Конец специальных типов данных для точки входа в описания запросов-->
  <xs:complexType name="CredentialsDef">
    <xs:annotation>
      <xs:documentation>Составная часть любого API запроса. Позволяет задать пользователя и пароль.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="username" type="xs:string" use="required"/>
    <xs:attribute name="password" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="AsyncSectionDef">
    <xs:annotation>
      <xs:documentation>Составная часть любого API запроса. Позволяет задать параметры асинхронного вызова.</xs:documentation>
    </xs:annotation>
    <xs:attribute default="false" name="useJMS" type="xs:boolean">
      <xs:annotation>
        <xs:documentation>Указать, что ответ должен быть доставлен через JMS. В противном случае нужно воспользоваться запросом RequestGetAsyncResults</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="jmsReplyTo" type="xs:string">
      <xs:annotation>
        <xs:documentation>JNDI имя JMS очереди, в которую нужно опубликовать результат исполнения</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="jmsCorrelationId" type="xs:string">
      <xs:annotation>
        <xs:documentation>Идентификатор запроса по которому можно будет идентифицировать запрос в JMS очереди</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SecuritySectionDef">
    <xs:annotation>
      <xs:documentation>Общая часть любого API запроса. Содержащий данные для аутентификации пользователя. Есть возможность работать в двух режимах.
Первый всегда передавать имя пользователя и пароль (элемент 'credentials'). При этом серверная сторона будет всегда создавать новую сессию со всеми вытекающими издержками.
Второй способ передавать сессионый токен, который может быть получен после успешного исполнения сервиса RequestAuthenticate в режиме doLogin='true'. Это рекомендованный подход, когда вызывающая сторона заведомо знает о необходимости выполнить последовательность API запросов</xs:documentation>
    </xs:annotation>
    <xs:choice maxOccurs="1" minOccurs="1">
      <xs:element name="credentials" type="tdapi:CredentialsDef"/>
      <xs:element name="sessionToken" type="tdapi:SessionTokenDef"/>
    </xs:choice>
  </xs:complexType>
  <xs:complexType name="CommonSectionDef">
    <xs:annotation>
      <xs:documentation>Общая часть любого API запроса. Состоит из двух основных частей - параметры безопасности и параметры асинхронного вызова.
Помимо этого, содержит обязательный параметр 'storageId', идентифицирующий логическое хранилище.
Также, есть возможность предоставить опциональный параметр - идентификатор логической операции. Если идентификатор не предоставлен,
то платформа автоматически сгенерирует новое уникальное значение. Идентификатор логических операций используется для аудита, а также для контроля композитных операций</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="security" type="tdapi:SecuritySectionDef">
        <xs:annotation>
          <xs:documentation>Обязательный элемент, содержащий данные для аутентификации пользователя</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="asyncOptions" type="tdapi:AsyncSectionDef">
        <xs:annotation>
          <xs:documentation>Опциональный элемент, содержащий параметры асинхронного вызова</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="version" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр, версия API клиента</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="storageId" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр, идентифицирующий логическое хранилище</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр, идентифицирующий логическую операцию. Если идентификатор не предоставлен, то платформа автоматически сгенерирует новое уникальное значение. Данный идентификатор используется для аудита, а также для контроля композитных операций</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CommonResponseDef">
    <xs:annotation>
      <xs:documentation>Общая часть любого API ответа:
- Всегда содержит идентификатор логической операции, либо изначально переданный в запросе, либо авто-сгенерированный платформой.
- Всегда содержит 'exitCode', который должен использоваться вызывающей стороной для анализа ошибок
- Может содержать несколько элементов с сообщениями. В случае 'exitCode' отличного от 'Success', будет как минимум один такой элемент</xs:documentation>
    </xs:annotation>
    <xs:choice maxOccurs="1" minOccurs="0">
      <xs:element name="message" type="tdapi:ExecutionMessageDef">
        <xs:annotation>
          <xs:documentation>Опциональные сообщения, переданные вместе с ответом. В случае ошибок или предупреждений, содержат текст для отображения пользователю, а также технические детали</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:choice>
    <xs:attribute name="version" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр, версия API сервера</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="platform" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр, версия платформы</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="operationId" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>идентификатор логической операции, либо изначально переданный в запросе, либо авто-сгенерированный платформой</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="exitCode" type="tdapi:ExitCodeType" use="required">
      <xs:annotation>
        <xs:documentation>Результирующий код исполнения запроса</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="processingTime" type="xs:int" use="required">
      <xs:annotation>
        <xs:documentation>Время исполнения запроса на стороне сервера в миллисекундах.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ExecutionErrorDef">
    <xs:annotation>
      <xs:documentation>Детальное описание ошибки исполнения запроса - включает код ошибки, сообщение для пользователя, а также техническое сообщение для службы поддержки</xs:documentation>
    </xs:annotation>
    <xs:attribute name="errorCode" type="xs:string" use="required"/>
    <xs:attribute name="userMessage" type="xs:string" use="required"/>
    <xs:attribute name="internalMessage" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="ExecutionMessageDef">
    <xs:annotation>
      <xs:documentation>Структура любого сообщение возвращаемого вместе с ответом на запрос. Всегда содержит текст сообщения в поле 'messageText'. Также может содержать структуры,
описывающие ошибку, включая детальные сообщения от сервера</xs:documentation>
    </xs:annotation>
    <xs:choice>
      <xs:element maxOccurs="1" minOccurs="0" name="stackTrace" type="xs:string">
        <xs:annotation>
          <xs:documentation>Необязательный элемент содержащий Java stack-trace. Заполняется для службы поддержки</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="error" type="tdapi:ExecutionErrorDef">
        <xs:annotation>
          <xs:documentation>Необязательный элемент содержащий детальное описание ошибки</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="dqErrors" type="data:DataQualityError">
        <xs:annotation>
          <xs:documentation>Необязательный элемент содержащий описание ошибок правил качества.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:choice>
    <xs:attribute name="messageText" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:simpleType name="ExitCodeType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных кодов возврата. Нормальное исполнение запроса подразумевает код 'Success' или 'Warning'.
Все остальные относятся к ошибкам и требует соответствующей обработки со стороны вызывающей стороны</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Success"/>
      <xs:enumeration value="Error"/>
      <xs:enumeration value="Warning"/>
      <xs:enumeration value="AuthenticationError"/>
      <xs:enumeration value="AuthorizationError"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="UpsertActionType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных типов действия, совершённых 'upsert' API. Позволяет различить операции вставки, изменения как основной сущности, так и соответсвующих исходных записей</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Insert"/>
      <xs:enumeration value="Update"/>
      <xs:enumeration value="UpsertOrigin"/>
      <xs:enumeration value="NoAction"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="SoftDeleteActionType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных типов действия, совершённых 'SoftDelete'. Позволяет различить операции удаления записи, периода</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="SoftDeleteEtalon"/>
      <xs:enumeration value="SoftDeleteOrigin"/>
      <xs:enumeration value="SoftDeleteEtalonPeriod"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="SessionTokenDef">
    <xs:annotation>
      <xs:documentation>Структура описывающая сессионный токен. Представляет собой произвольный набор символов. Используется для передачи ключа сессии между запросами.
В типовом сценарии использования, данный ключ возвращается к ответе на запрос 'RequestAuthenticate' и потом передаётся во все последующие запросы.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="token" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="RoleRefDef">
    <xs:annotation>
      <xs:documentation>Структура описывающая роль из модели безопаснасти. На данный момент содержит только имя роли.
В типовом сценарии использования, список ролей пользователя возвращается к ответе на запрос 'RequestAuthenticate'.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="name" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательное имя роли</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:simpleType name="CompareOperatorType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных видов операторов сравнения. Используется для формирования условий поиска сущности в запросе 'RequestSearch'</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="EQUALS"/>
      <xs:enumeration value="NOT_EQUALS"/>
      <xs:enumeration value="GREATER"/>
      <xs:enumeration value="GREATER_OR_EQUALS"/>
      <xs:enumeration value="LESS"/>
      <xs:enumeration value="LESS_OR_EQUALS"/>
      <xs:enumeration value="LIKE"/>
      <xs:enumeration value="FUZZY_EQUALS"/>
    </xs:restriction>
  </xs:simpleType>
  <!--Base for search expressions.-->
  <xs:complexType name="SearchBaseDef"/>
  <xs:complexType name="SearchAndDef">
    <xs:annotation>
      <xs:documentation>And element.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:SearchBaseDef">
        <xs:sequence>
          <xs:choice maxOccurs="unbounded">
            <xs:annotation>
              <xs:appinfo>
                <jaxb:property name="expressions"/>
              </xs:appinfo>
            </xs:annotation>
            <xs:element name="and" type="tdapi:SearchAndDef"/>
            <xs:element name="or" type="tdapi:SearchOrDef"/>
            <xs:element name="atom" type="tdapi:SearchAtomDef"/>
          </xs:choice>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SearchOrDef">
    <xs:annotation>
      <xs:documentation>Or element.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:SearchBaseDef">
        <xs:sequence>
          <xs:choice maxOccurs="unbounded">
            <xs:annotation>
              <xs:appinfo>
                <jaxb:property name="expressions"/>
              </xs:appinfo>
            </xs:annotation>
            <xs:element name="and" type="tdapi:SearchAndDef"/>
            <xs:element name="or" type="tdapi:SearchOrDef"/>
            <xs:element name="atom" type="tdapi:SearchAtomDef"/>
          </xs:choice>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SearchAtomDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая условия поиска на конкретный атрибут сущности. Используется для формирования условий поиска сущности в запросе 'RequestSearch'.
Всегда состоит из имени атрибута, оператора сравнения и константы.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:SearchBaseDef">
        <xs:attribute name="attributeName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Обязательное имя атрибута</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="operator" type="tdapi:CompareOperatorType" use="required">
          <xs:annotation>
            <xs:documentation>Обязательный оператор сравнения</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="constant" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Обязательное значение константы</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SearchConditionDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая условия поиска сущностей. Используется для формирования условий поиска сущности в запросе 'RequestSearch'.
Является точкой входа при описании условий поиска - задаёт начальную группировку либо через логическое 'И', либо 'ИЛИ', либо как простой одиночный атом - условие</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice maxOccurs="1">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="expression"/>
          </xs:appinfo>
        </xs:annotation>
        <xs:element name="and" type="tdapi:SearchAndDef"/>
        <xs:element name="or" type="tdapi:SearchOrDef"/>
        <xs:element name="atom" type="tdapi:SearchAtomDef"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UpsertRelationOverrideDef">
    <xs:annotation>
      <xs:documentation>Элемент описывающий правила автоматического удаления неактуальных связей между сущностями.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UpsertRelationsDef">
    <xs:annotation>
      <xs:documentation>Вспомогательная структура содержащая информацию о связях данной сущности. Состоит из набора обычных связей к другим сущностям ('relationTo'), а также набора неотделимых сущностей ('integralEntity')</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="relation" type="tdapi:UpsertRelationDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UpsertRelationRecordDef">
    <xs:annotation>
      <xs:documentation>Контейнер для одиночных связей.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice maxOccurs="1">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="record"/>
          </xs:appinfo>
        </xs:annotation>
        <xs:element maxOccurs="1" minOccurs="1" name="integralEntity" type="data:IntegralRecord"/>
        <xs:element maxOccurs="1" minOccurs="1" name="relationTo" type="data:RelationTo"/>
      </xs:choice>
      <xs:element name="range" type="tdapi:TimeIntervalDef"/>
      <xs:element name="referenceAliasKey" nillable="true" type="tdapi:ReferenceAliasKey"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ReferenceAliasKey">
    <xs:annotation>
      <xs:documentation>Объет мапинга, необходимый для уведомления системы о том , что связь ссылается на альтернативный ключ в реестре.
                Используется в только с RelationTo объектами.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="value" type="xs:string"/>
    <xs:attribute name="entityAttributeName" type="xs:string"/>
  </xs:complexType>
  <xs:complexType name="UpsertRelationDef">
    <xs:annotation>
      <xs:documentation>Набор связей одного определенного типа.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="1" name="record" type="tdapi:UpsertRelationRecordDef">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="records"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="1" minOccurs="0" name="override" type="tdapi:UpsertRelationOverrideDef"/>
    </xs:sequence>
    <xs:attribute name="name" use="required"/>
  </xs:complexType>
  <xs:complexType name="DeleteRelationsDef">
    <xs:annotation>
      <xs:documentation>Вспомогательная структура содержащая информацию о связях данной сущности.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="relation" type="tdapi:DeleteRelationDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DeleteRelationDef">
    <xs:annotation>
      <xs:documentation>Набор ключей to (правая сторона) одного определенного типа (origin или etalon) для одной определенной связи.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="key" type="tdapi:DeleteRelationRecordDef">
        <xs:annotation>
          <xs:appinfo>
            <jaxb:property name="keys"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="name" use="required"/>
  </xs:complexType>
  <xs:complexType name="DeleteRelationRecordDef">
    <xs:annotation>
      <xs:documentation>Контейнер для одиночных связей.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice maxOccurs="1">
        <xs:element maxOccurs="1" minOccurs="1" name="originKey" type="data:OriginKey"/>
        <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey"/>
      </xs:choice>
      <xs:element name="range" type="tdapi:TimeIntervalDef"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="LookupEntityRefDef">
    <xs:annotation>
      <xs:documentation>Структура, описывающая ссылку на справочник. Используется в запросе 'RequestGetLookupValues'. Состоит из имени справочника и опционального значения конкретного кода. Если код не передан, то ссылка идентифицирует все основные справочника</xs:documentation>
    </xs:annotation>
    <xs:attribute name="entityName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательный параметр - имя справочника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="codeValue" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Опциональный параметр - значение кода справочника (поле ), для которого нужно вернуть все остальные поля. Если не передан, то возвращаются все значения справочника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="UnidataAbstractRequest"/>
  <xs:complexType name="UnidataAbstractResponse"/>
  <!--Аутентификация запрос-ответ-->
  <xs:complexType name="RequestAuthenticate">
    <xs:annotation>
      <xs:documentation>Запрос на аутентификацию пользователя.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Есть возможность идентифицировать пользователя двумя способами. Первый всегда по имени пользователя и паролю (элемент 'credentials' общей секции).
Второй способ передать сессионый токен, если данная сессия всё ещё активна, то сервер 'обновит' сессию и вернёт ответ как будто были переданы правильные имя и пароль пользователя.
По умолчанию сервер всегда создаёт новую сессию. Если нужно только проверить имя пользователя и пароль или получить список ролей пользователя, то можно использовать режим doLogin='false'. При этом новая сессия не создаётся.
Ответ сервера, при успешной аутентификации, всегда содержит список ролей пользователя. Также, в случае создании новой сессии, ответ содержит сессионный токен, который может быть использован для исполнения последующих запросов.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:attribute name="doLogin" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Указание серверу создать новую сессию. Значение по умолчанию - 'true'</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseAuthenticate">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на аутентификацию пользователя ('RequestAuthenticate').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Содержит список ролей пользователя. Признак администратора. Также может содержать сессионный токен, в случае если запрос был сформирован в режиме doLogin='true'</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="0" name="sessionToken" type="tdapi:SessionTokenDef">
            <xs:annotation>
              <xs:documentation>Опциональное значение сессионого токена</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="role" type="tdapi:RoleRefDef">
            <xs:annotation>
              <xs:documentation>Роль пользователя</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="isAdmin" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Признак того, что пользователь является администратором'</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Получить данные lookup сущностей запрос-ответ-->
  <xs:complexType name="RequestGetLookupValues">
    <xs:annotation>
      <xs:documentation>Запрос на получение деталей справочника.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Можно запрашивать как все записи справочника, так и конкретную запись идентифицированную значением кода.
Для всех справочников всегда определён кодовый атрибут, содержащий уникальные идентификаторы, например трёхбуквенный код странны для справочника стран</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="lookupEntity" type="tdapi:LookupEntityRefDef">
            <xs:annotation>
              <xs:documentation>Ссылка на справочник, для которого нужно вернуть значения</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseGetLookupValues">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение деталей справочника ('RequestGetLookupValues').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Содержит список либо всех записей справочника, либо конкретных если в запросе было указано значение кода</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:choice maxOccurs="unbounded" minOccurs="0">
          <xs:element name="etalonRecord" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Запись справочника</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Cleanse запрос-ответ-->
  <xs:complexType name="RequestCleanse">
    <xs:annotation>
      <xs:documentation>Запрос на исполнение функции очистки данных.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Запрос обязательно содержит полное имя функции очистки данных, включающее имена групп разделённые точкой. Например 'Строковые.УбратьПробелы'
Помимо этого требуется указать значение всех 'входных' портов функции.
Ответ будет содержать значение всех 'выходных' портов функции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="port" type="data:SimpleAttribute">
            <xs:annotation>
              <xs:documentation>Значение 'входного' порта функции</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="cleanseName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Обязательный параметр - полное имя функции очистки данных, включающее имена групп разделённые точкой. Например 'Строковые.УбратьПробелы'</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseCleanse">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на исполнение функции очистки данных ('RequestCleanse').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Ответ содержит значение всех 'выходных' портов функции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:choice maxOccurs="unbounded" minOccurs="1">
          <xs:element maxOccurs="unbounded" minOccurs="1" name="port" type="data:SimpleAttribute">
            <xs:annotation>
              <xs:documentation>Значение 'выходного' порта функции</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Upsert запрос-ответ-->
  <xs:complexType name="RequestUpsert">
    <xs:annotation>
      <xs:documentation>Запрос на вставку или модификацию основной или исходной записи сущности.
                Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из
                структуры 'UnidataRequestBody').

                'upsert' означает комбинацию слов 'update' и 'insert'.

                Все операции по модификации данных производятся над исходными записями сущностей из конкретной системы
                источника, включая служебную систему источник.
                При этом основная запись сущности вычисляется заново как результат консолидации всех исходных записей.

                Имеется возможность передать либо основную запись сущности (элемент 'etalonRecord'), либо исходную
                запись (элемент 'originRecord').
                При передаче основной записи, платформа подберёт соответствующую исходную запись из служебной системы
                источника и
                обеспечит выигрыш соответствующих значений атрибутов при консолидации.
                Любая из переданных записей содержит ключ, на основе значения которого принимается решение будет ли это
                операция вставки или изменения.

                По умолчанию, к любой основной записи применяются все имеющиеся правила контроля качества данных.
                Вызывающая сторона может принудительно отказаться от применения правил, передав skipCleanse='true'
                В случае операции изменения записи, есть возможность передать выборочный набор атрибутов. Все
                непереданные атрибуты остаются без изменений.

                Поле range указывает границы действия версии данных. Отсутствующие значения означают бесконечность в
                прошлом или будущем или их комбинацию. Отсутствующий элемент означает бесконечность с обоих концов.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonRecord" type="data:EtalonRecord">
              <xs:annotation>
                <xs:documentation>Запись основной сущности, включая идентифицирующий ключ</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originRecord" type="data:OriginRecord">
              <xs:annotation>
                <xs:documentation>Запись исходной сущности, включая идентифицирующий ключ</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="0" name="relations" type="tdapi:UpsertRelationsDef"/>
          <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="aliasCodeAttributePointers" type="tdapi:AliasCodeAttributePointerDef"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="classifierPointers" type="tdapi:ClassifierPointerDef"/>
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="optional">
          <xs:annotation>
            <xs:documentation>Имя сущности, в которую приизводится вставка.
                            В случае, если вставляется НОВАЯ эталонная запись (от имени специальной системы источника) и параметр не указан, вставка будет отклонена.
                            Для ориджин записей должен быть указан полный ключ!</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="lastUpdateDate" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Опциональный параметр задающий дату последнего изменения исходной записи.
                            Если не передан, то платформа будет использовать текущую дату</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="skipCleanse" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Принудительно отказаться от применения правил контроля качества</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="mergeWithPreviousVersion" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Обоготить данные записи, данными преведущей версии от этой же системы источника</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="bypassExtensionPoints" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Пропустить вызовы пользовательского кода, назначенного на различные точки расширения функционала</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseUpsert">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на вставку или модификацию основной или исходной записи сущности ('RequestUpsert').
                Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
                В случае успешного исполнения всегда содержит два ключа, один идентифицирующий исходную запись, фактически изменённую, второй идентифицирующий основную запись сущности.
                Помимо этого возращается тип действия, фактически выполненного платформой - 'action'.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="originKey" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Обязательное значение ключа идентифицирующего исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Обязательное значение ключа идентифицирующего основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="originAction" type="tdapi:UpsertActionType" use="required">
          <xs:annotation>
            <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Upsert запрос-ответ-->
  <xs:complexType name="RequestBulkUpsert">
    <xs:annotation>
      <xs:documentation>Запрос на множественную вставку или модификацию основной или исходной записи сущности.
                Документацию о единичной вставке в ('RequestUpsert')</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="upsertRecordRequests" type="tdapi:RequestUpsert"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseBulkUpsert">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на множественную вставку или модификацию основной или исходной записи сущности ('BulkRequestUpsert').
                Документацию об ответе при единичной вставке в ('ResponseUpsert')</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="upsertRecordResponses" type="tdapi:ResponseUpsert"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Upsert запрос-ответ-->
  <xs:complexType name="RequestRelationsUpsert">
    <xs:annotation>
      <xs:documentation>Запрос на вставку или модификацию основной или исходной записи сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

'upsert' означает комбинацию слов 'update' и 'insert'.

Все операции по модификации данных производятся над исходными записями сущностей из конкретной системы источника, включая служебную систему источник.
При этом основная запись сущности вычисляется заново как результат консолидации всех исходных записей.

Имеется возможность передать либо основную запись сущности (элемент 'etalonRecord'), либо исходную запись (элемент 'originRecord'). 
При передаче основной записи, платформа подберёт соответствующую исходную запись из служебной системы источника и
обеспечит выигрыш соответствующих значений атрибутов при консолидации. 
Любая из переданных записей содержит ключ, на основе значения которого принимается решение будет ли это операция вставки или изменения.

По умолчанию, к любой основной записи применяются все имеющиеся правила контроля качества данных. Вызывающая сторона может принудительно отказаться от применения правил, передав skipCleanse='true'
В случае операции изменения записи, есть возможность передать выборочный набор атрибутов. Все непереданные атрибуты остаются без изменений.

Поле range указывает границы действия версии данных. Отсутствующие значения означают бесконечность в прошлом или будущем или их комбинацию. Отсутствующий элемент означает бесконечность с обоих концов.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element maxOccurs="1" minOccurs="1" name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Обязательное значение ключа идентифицирующего исходную запись (левый конец связи)</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Обязательное значение ключа идентифицирующего основную запись (левый конец связи)</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="1" name="relations" type="tdapi:UpsertRelationsDef">
            <xs:annotation>
              <xs:documentation>Правые концы связей и временные интервалы.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
        </xs:sequence>
        <xs:attribute name="lastUpdateDate" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Опциональный параметр задающий дату последнего изменения исходной записи. Если не передан, то платформа будет использовать текущую дату</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="skipCleanse" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Принудительно отказаться от применения правил контроля качества</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="bypassExtensionPoints" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Пропустить вызовы пользовательского кода, назначенного на различные точки расширения функционала</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseRelationsUpsert">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на вставку или модификацию основной или исходной записи сущности ('RequestRelationsUpsert').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
В случае успешного исполнения всегда содержит два ключа, один идентифицирующий исходную запись, фактически изменённую, второй идентифицирующий основную запись сущности.
Помимо этого возращается тип действия, фактически выполненного платформой - 'action'.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="upsertCount" type="xs:int">
            <xs:annotation>
              <xs:documentation>Количество вставленных записей</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="originAction" type="tdapi:UpsertActionType" use="required">
          <xs:annotation>
            <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Upsert запрос-ответ-->
  <xs:complexType name="RequestUpsertList">
    <xs:annotation>
      <xs:documentation>Запрос на вставку или модификацию основной или исходной записи сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

'upsert' означает комбинацию слов 'update' и 'insert'.

Все операции по модификации данных производятся над исходными записями сущностей из конкретной системы источника, включая служебную систему источник.
При этом основная запись сущности вычисляется заново как результат консолидации всех исходных записей.

Имеется возможность передать либо основную запись сущности (элемент 'etalonRecord'), либо исходную запись (элемент 'originRecord'). 
При передаче основной записи, платформа подберёт соответствующую исходную запись из служебной системы источника и
обеспечит выигрыш соответствующих значений атрибутов при консолидации. 
Любая из переданных записей содержит ключ, на основе значения которого принимается решение будет ли это операция вставки или изменения.

По умолчанию, к любой основной записи применяются все имеющиеся правила контроля качества данных. Вызывающая сторона может принудительно отказаться от применения правил, передав skipCleanse='true'
В случае операции изменения записи, есть возможность передать выборочный набор атрибутов. Все непереданные атрибуты остаются без изменений.

Поле range указывает границы действия версии данных. Отсутствующие значения означают бесконечность в прошлом или будущем или их комбинацию. Отсутствующий элемент означает бесконечность с обоих концов.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1">
            <xs:element maxOccurs="unbounded" minOccurs="1" name="etalonRecords" type="data:EtalonRecord">
              <xs:annotation>
                <xs:documentation>Запись основной сущности, включая идентифицирующий ключ</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="originRecords" type="data:OriginRecord">
              <xs:annotation>
                <xs:documentation>Запись исходной сущности, включая идентифицирующий ключ</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
        </xs:sequence>
        <xs:attribute name="lastUpdateDate" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Опциональный параметр задающий дату последнего изменения исходной записи. Если не передан, то платформа будет использовать текущую дату</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="skipCleanse" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Принудительно отказаться от применения правил контроля качества</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="bypassExtensionPoints" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Пропустить вызовы пользовательского кода, назначенного на различные точки расширения функционала</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseUpsertList">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на вставку или модификацию основной или исходной записи сущности ('RequestUpsert').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
В случае успешного исполнения всегда содержит два ключа, один идентифицирующий исходную запись, фактически изменённую, второй идентифицирующий основную запись сущности.
Помимо этого возращается тип действия, фактически выполненного платформой - 'action'.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:choice maxOccurs="1">
            <xs:element maxOccurs="unbounded" minOccurs="1" name="originKeys" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Обязательное значение ключа идентифицирующего исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="etalonKeys" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Обязательное значение ключа идентифицирующего основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="originActions" type="tdapi:UpsertActionType">
            <xs:annotation>
              <xs:documentation>Тип действия, фактически выполненного платформой</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Merge запрос-ответ-->
  <xs:complexType name="RequestMerge">
    <xs:annotation>
      <xs:documentation>Запрос на консолидацию нескольких основных записей сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

Любая консолидация всегда производится над основными записями сущности, но при этом у пользователя есть возможность идентификации основной записи ключом от исходной записи из системы источника
Запрос всегда содержит один ключ, идентифицирующий выигрывающую запись и несколько ключей проигравших записей.

По умолчанию, к консолидированной записи применяются все имеющиеся правила контроля качества данных. Вызывающая сторона может принудительно отказаться от применения правил, передав skipCleanse='true'</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="masterEtalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего выигрывшую основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="masterOriginKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего выигрывшую исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:choice maxOccurs="unbounded" minOccurs="1">
            <xs:element name="duplicateEtalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего проигравшую основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="duplicateOriginKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего проигравшую исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности, для записей которой производится консолидации</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="skipCleanse" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Принудительно отказаться от применения правил контроля качества</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="bypassExtensionPoints" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Пропустить вызовы пользовательского кода, назначенного на различные точки расширения функционала</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseMerge">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на консолидацию нескольких основных записей сущности ('RequestMerge').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Ответ не содержит никаких специфических параметров. Вызывающая сторона должна ориентироваться на код возврата из общей секции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse"/>
    </xs:complexContent>
  </xs:complexType>
  <!--Merge запрос-ответ-->
  <xs:complexType name="RequestJoin">
    <xs:annotation>
      <xs:documentation>Запрос на добавление внешнего ID к cуществующему etalonId.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element name="etalonKey" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего существующую запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="originKey" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Значение внешнего ключа, который должен быть добавлен</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseJoin">
    <xs:annotation>
      <xs:documentation>Ответ на Запрос на добавление внешнего ID к cуществующему etalonId.
Ответ не содержит никаких специфических полей. Вызывающая сторона должна ориентироваться на код возврата из общей секции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse"/>
    </xs:complexContent>
  </xs:complexType>
  <!--SoftDeleteEntity запрос-ответ-->
  <xs:complexType name="RequestSoftDelete">
    <xs:annotation>
      <xs:documentation>Запрос на логическое удаление основной записи сущности, исходной записи сущности или ее отдельного
                периода.
                Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из
                структуры 'UnidataRequestBody').
                Логическое удаление позволяет пометить либо исходную запись из конкретной системы источника, либо
                основную запись, как логически удалённую, при этом такие записи выпадают из обычных операции, таких как
                поиск.
                При логическом удалении одной исходной записи из конкретной системы источника, основная запись может
                продолжать оставаться активной, если в её составе есть другие активные исходные записи.

                Поле range указывает границы действия НЕАКТИВНОЙ (удаленной) версии данных для указанного источника,
                которая будет создана в результате запроса, если речь идет о деактивации периода.
                Отсутствующие значения означают бесконечность в прошлом или будущем или их комбинацию.
                Тип удаления указывается в поле actionType.
                При наличии прав запрос может содержать значение true в поле wipe. В этом случае запись будет ФИЗИЧЕСКИ
                и БЕЗВОЗВРАТНО удалена из хранилищи (hard delete).</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего основную запись, для которой
                                    приизводится логическое удаление</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего исходную запись, для которой
                                    приизводится логическое удаление</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="0" name="range" type="tdapi:TimeIntervalDef"/>
        </xs:sequence>
        <xs:attribute name="actionType" type="tdapi:SoftDeleteActionType" use="required"/>
        <xs:attribute name="wipe" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Логический параметр, при значении false запись удаляется логически, при значении true запись
                            удаляется из системы.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseSoftDelete">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на логическое удаление основной или исходной записи сущности ('RequestSoftDelete').
                Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках
                (смотри элемент 'common' из структуры 'UnidataResponseBody').

                В случае успешного исполнения содержит список ключей логически удалённых записей, а также
                соответствующих исходных записей.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="etalonKeys" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего логически удалённую основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="originKeys" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего логически удалённую исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--SoftDeleteEntity запрос-ответ-->
  <xs:complexType name="RequestRelationsSoftDelete">
    <xs:annotation>
      <xs:documentation>Запрос на логическое удаление связи основной записи, исходной записи или деактивация отдельного периода.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Логическое удаление позволяет пометить связь либо исходной запись из конкретной системы источника, либо основной записи как логически удалённую.
При логическом удалении связи одной исходной записи из конкретной системы источника, связь на основная запись может продолжать оставаться активной, если в её составе есть другие активные исходные записи.
Тип удаления указывается в поле actionType.
При наличии прав запрос может содержать значение true в поле wipe. В этом случае запись будет ФИЗИЧЕСКИ и БЕЗВОЗВРАТНО удалена из хранилищи (hard delete).</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего основную запись, для которой приизводится логическое удаление</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего исходную запись, для которой приизводится логическое удаление</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="1" minOccurs="1" name="relations" type="tdapi:DeleteRelationsDef"/>
        </xs:sequence>
        <xs:attribute name="actionType" type="tdapi:SoftDeleteActionType" use="required"/>
        <xs:attribute name="wipe" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Логический параметр, при значении false запись удаляется логически, при значении true запись удаляется из системы.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseRelationsSoftDelete">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на логическое удаление основной или исходной записи сущности ('RequestSoftDelete').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').

В случае успешного исполнения содержит список ключей логически удалённых записей, а также соответствующих исходных записей.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="etalonKeys" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего логически удалённую основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="originKeys" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего логически удалённую исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Get запрос-ответ-->
  <xs:complexType name="RequestGet">
    <xs:annotation>
      <xs:documentation>Запрос на получение основных и исходных записей для конкретной сущности, а также исторических деталей.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Запрос всегда содержит имя сущности, ключ идентифицирующий либо основную либо исходную запись, а также ряд параметров, указывающих что именно нужно вернуть.
По умолчанию запрос всегда возвращает текущее значение основной записи, но вызывающая сторона может указать значение даты ('forDate'), на которое нужно вернуть основную запись. Данный функционал полезен при работе с временными диапазонами.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="asOf" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Дата, на которую нужно вернуть основную запись</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="originsAsOf" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Возвращать все исходные записи на дату</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="etalonHistory" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Возвращать историю изменений основной записи</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="softDeleted" type="xs:boolean" use="required">
          <xs:annotation>
            <xs:documentation>Возвращать логически удалённые основные и исходные записи</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseGet">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение основных и исходных записей для конкретной сущности, а также исторических деталей ('RequestGet').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').

В зависимости от выбранных параметров в запросе, содержит различный набор исходных, а также исторических записей для конкретной основной записи.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element name="etalonRecord" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Основная запись либо на данный момент, либо на определённую дату, переданную в запросе</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="etalonHistoryRecords" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Исторические записи</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="originRecords" type="data:OriginRecord">
            <xs:annotation>
              <xs:documentation>Исходные записи</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="rangeFromMin" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Минимальное значение всех временных диапозонов</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="rangeToMax" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Максимальное значение всех временных диапозонов</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestRelationsGet">
    <xs:annotation>
      <xs:documentation>Запрос на получение связей записи конкретной сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Запрос всегда содержит имя сущности, ключ идентифицирующий либо основную либо исходную запись, список имен связей, а также ряд параметров, указывающих что именно нужно вернуть.
По умолчанию запрос всегда возвращает текущее значение основной записи, но вызывающая сторона может указать значение даты ('asOf'), на которое нужно вернуть основную запись. Данный функционал полезен при работе с временными диапазонами.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="etalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего основную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="originKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Значение ключа, идентифицирующего исходную запись</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="relations" type="xs:string">
            <xs:annotation>
              <xs:documentation>Список имен связей сущности, по которым необходимо вернуть информацию.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="asOf" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Дата, на которую нужно вернуть основную запись</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseRelationsGet">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение основных и исходных записей связей для конкретной сущности.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element name="relations" type="data:EntityRelations">
            <xs:annotation>
              <xs:documentation>Контейнер связей</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestInfoGet">
    <xs:annotation>
      <xs:documentation>Запрос на получение общей информации для конкретного типа сущностей.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="from" type="xs:dateTime" use="required"/>
        <xs:attribute name="to" type="xs:dateTime" use="required"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseInfoGet">
    <xs:annotation>
      <xs:documentation>Ответ на Запрос на получение общей информации для
				конкретного типа
				сущностей ('RequestInfoGet').
				Общая часть ответа
				содержит код возврата, идентификатор логической
				операции и сообщения
				об ошибках (смотри элемент 'common' из
				структуры
				'UnidataResponseBody').</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="1" name="statistic" type="tdapi:Statistic"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Search запрос-ответ-->
  <xs:complexType name="RequestSearch">
    <xs:annotation>
      <xs:documentation>Запрос на поиск основных записей сущности.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').
Вызывающая сторона должна задать условия поиска и сортировки ('searchCondition' и 'sortCondition'), а также параметры постраничного вывода результатов</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element name="searchCondition" type="tdapi:SearchConditionDef">
            <xs:annotation>
              <xs:documentation>Критерий, на основе которого осуществляется поиск</xs:documentation>
            </xs:annotation>
          </xs:element>
          <!--<xs:element name="sortCondition" type="tdapi:SortConditionDef" minOccurs="0" maxOccurs="1"/>-->
        </xs:sequence>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности, для которой осуществляется поиск</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="true" name="returnCount" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Возвращать общее количество записей, подпадающих по критерий поиска</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="false" name="doCountOnly" type="xs:boolean" use="optional">
          <xs:annotation>
            <xs:documentation>Не возвращать данные, а только подсчитать количество записей, подпадающих по критерий поиска</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="10" name="pageSize" type="xs:integer" use="optional">
          <xs:annotation>
            <xs:documentation>Размер страницы - количество сущностей, возвращаемых за один раз</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute default="0" name="pageNumber" type="xs:integer" use="optional">
          <xs:annotation>
            <xs:documentation>Номер страницы, начиная с которого выдавать результаты</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="asOf" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Дата, на которую нужно искать</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseSearch">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на поиск основных записей сущности ('RequestSearch').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="etalonRecord" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Найденные основные записи</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="pageSize" type="xs:integer" use="required">
          <xs:annotation>
            <xs:documentation>Размер страницы - количество сущностей, возвращаемых за один раз</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="pageNumber" type="xs:integer" use="required">
          <xs:annotation>
            <xs:documentation>Номер страницы, начиная с которой выданы результаты</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="count" type="xs:integer" use="optional">
          <xs:annotation>
            <xs:documentation>Опциональное значение - количество записей, подпадающих по критерий поиска</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--MetaGetCleanseFunctionDesc запрос-ответ. Получить описание функции очистки данных-->
  <!--<xs:complexType name="RequestMetaGetCleanseFunctionDesc">
        <xs:annotation>
            <xs:documentation>
Запрос на получение метаданных, описывающих конкретную функцию очистки данных
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

Запрос всегда содержит имя полное имя функции очистки данных.
            </xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="tdapi:UnidataAbstractRequest">
                <xs:attribute name="cleanseFunctionName" type="xs:string" use="required"><xs:annotation><xs:documentation>Полное имя функции очистки данных, включающее имена групп разделённые точкой. Например 'Строковые.УбратьПробелы'</xs:documentation></xs:annotation></xs:attribute>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>

    <xs:complexType name="ResponseMetaGetCleanseFunctionDesc">
        <xs:annotation>
            <xs:documentation>
Ответ на запрос на получение метаданных, описывающих конкретную функцию очистки данных.
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Содержит полное описание семантики одной функции очистки данных
            </xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="tdapi:UnidataAbstractResponse">
                <xs:sequence>
                    <xs:element name="cleanseFunction" type="meta:CleanseFunctionExtendedDef" minOccurs="1" maxOccurs="1"><xs:annotation><xs:documentation>Полное описание семинтики одной функции очистки данных</xs:documentation></xs:annotation></xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>-->
  <!--MetaGetCleanseFunctionList запрос-ответ. Получить список всех функций очистки данных-->
  <!--<xs:complexType name="RequestMetaGetCleanseFunctionList">
        <xs:annotation>
            <xs:documentation>
                Запрос на получение метаданных, описывающих список всех функций очистки данных
                Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

                Запрос всегда содержит имя полное имя функции очистки данных.
            </xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="tdapi:UnidataAbstractRequest"/>
        </xs:complexContent>
    </xs:complexType>

    <xs:complexType name="ResponseMetaGetCleanseFunctionList">
        <xs:annotation>
            <xs:documentation>
                Ответ на запрос на получение метаданных, описывающих список всех функций очистки данных.
                Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
                Содержит полный список всех функций очистки данных
            </xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="tdapi:UnidataAbstractResponse">
                <xs:sequence>
                    <xs:element name="cleanseFunctions" type="meta:ListOfCleanseFunctions" minOccurs="1" maxOccurs="1"><xs:annotation><xs:documentation>Полный список всех функций очистки данных</xs:documentation></xs:annotation></xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>-->
  <!--GetDataQualityErrors запрос-ответ. Получить ошибки для данной сущности-->
  <xs:complexType name="RequestGetDataQualityErrors">
    <xs:annotation>
      <xs:documentation>Запрос на получение списка ошибок основной сущoности, созданных в результате применения правил контроля качества данных.
Общая часть запроса должна содержать данные для аутентификации пользователя (смотри элемент 'common' из структуры 'UnidataRequestBody').

Запрос всегда содержит имя сущности, ключ идентифицирующий либо основную либо исходную запись, а также опциональный параметр 'forDate', позволяющий вернуть актуальные ошибки на указанную дату.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:choice maxOccurs="1" minOccurs="1">
          <xs:element name="etalonKey" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="originKey" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Значение ключа, идентифицирующего исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:choice>
        <xs:attribute name="entityName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя сущности</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="forDate" type="xs:dateTime" use="optional">
          <xs:annotation>
            <xs:documentation>Момент времени, на который нужно вернуть все актуальные ошибки. Если не указан, то возвращаются ошибки на текущий момент</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseGetDataQualityErrors">
    <xs:annotation>
      <xs:documentation>Ответ на запрос на получение списка ошибок основной сущности, созданных в результате применения правил контроля качества данных ('RequestGetDataQualityErrors').
Общая часть ответа содержит код возврата, идентификатор логической операции и сообщения об ошибках (смотри элемент 'common' из структуры 'UnidataResponseBody').
Содержит список ошибок качества данных</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="dqError" type="data:DataQualityError">
            <xs:annotation>
              <xs:documentation>Ошибка, сфорированная в результате применения правил качества данных</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="AliasCodeAttributePointerDef">
    <xs:annotation>
      <xs:documentation>Объет мапинга, необходимый для уведомления системы о том , что запись ссылается на альтернативный кодовый атрибут в справочнике.
                'recordAttributeName' - имя атрибута ссылающегося на справочник. (если это вложенный атрибут, то имя должно разделяться точками)
                'aliasCodeAttributeName' - имя альтернативного кодового атрибута справочника.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="aliasCodeAttributeName" type="xs:string"/>
    <xs:attribute name="recordAttributeName" type="xs:string"/>
  </xs:complexType>
  <xs:simpleType name="ClassifierPointerType">
    <xs:annotation>
      <xs:documentation>Типы указателей для нод.
                NODE_NAME - нода классификатора будет найдена из полного имени ноды разделенного точкой.
                NODE_CODE - нода классификатора будет найдена из кода ноды.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="NODE_NAME"/>
      <xs:enumeration value="NODE_CODE"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="ClassifierPointerDef">
    <xs:annotation>
      <xs:documentation>Объет мапинга, необходимый для уведомления системы о том , что запись классификатора принадлежит определенной ноде.
                classifierName - имя классификатора, которым проклассифицированна запись.
                classifierPointer - значение указателя.
                pointerType - тип указателя.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="pointerType" nillable="false" type="tdapi:ClassifierPointerType"/>
    </xs:sequence>
    <xs:attribute name="classifierName" type="xs:string" use="required"/>
    <xs:attribute name="classifierPointer" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="Statistic">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="type" type="tdapi:StatisticEnum"/>
      <xs:element maxOccurs="unbounded" minOccurs="1" name="series" type="tdapi:TimeSerie"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="TimeSerie">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="1" name="time" type="xs:dateTime"/>
      <xs:element maxOccurs="1" minOccurs="1" name="value" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType final="restriction" name="StatisticEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="NEW"/>
      <xs:enumeration value="ERRORS"/>
      <xs:enumeration value="UPDATED"/>
      <xs:enumeration value="TOTAL"/>
      <xs:enumeration value="MERGED"/>
      <xs:enumeration value="DUPLICATES"/>
      <xs:enumeration value="CLUSTERS"/>
    </xs:restriction>
  </xs:simpleType>
  <!--Jobs Types-->
  <xs:complexType name="RequestFindAllJobs">
    <xs:annotation>
      <xs:documentation>Запрос списка операций.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestSaveJob">
    <xs:annotation>
      <xs:documentation>Сохранение операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element name="job" type="tdapi:Job"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestRemoveJob">
    <xs:annotation>
      <xs:documentation>Удаление операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:attribute name="id" type="xs:long" use="required"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestFindJob">
    <xs:annotation>
      <xs:documentation>Загрузка операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:attribute name="id" type="xs:long" use="required"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestRunJob">
    <xs:annotation>
      <xs:documentation>Запуск операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractRequest">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="parameters" type="tdapi:JobParameter"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:long" use="required"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RequestJobStatus">
    <xs:annotation>
      <xs:documentation>Запрос состояния запуска операции.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="id" type="xs:long" use="required"/>
  </xs:complexType>
  <xs:complexType name="Job">
    <xs:annotation>
      <xs:documentation>Задача.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="parameters" type="tdapi:JobParameter"/>
    </xs:sequence>
    <xs:attribute name="id" type="xs:long"/>
    <xs:attribute name="enabled" type="xs:boolean" use="required"/>
    <xs:attribute name="error" type="xs:boolean" use="required"/>
    <xs:attribute name="cronExpression" type="xs:string" use="required"/>
    <xs:attribute name="description" type="xs:string"/>
    <xs:attribute name="skipCronWarnings" type="xs:boolean" use="required"/>
    <xs:attribute name="name" type="xs:string" use="required"/>
    <xs:attribute name="jobNameReference" type="xs:string"/>
  </xs:complexType>
  <xs:complexType name="JobParameter">
    <xs:annotation>
      <xs:documentation>Параметр операции.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="value" type="tdapi:JobParameterValue"/>
    </xs:sequence>
    <xs:attribute name="id" type="xs:long"/>
    <xs:attribute name="type" type="tdapi:JobParameterType" use="required"/>
    <xs:attribute name="name" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:simpleType name="JobParameterType">
    <xs:annotation>
      <xs:documentation>Тип параметра операции.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="STRING"/>
      <xs:enumeration value="LONG"/>
      <xs:enumeration value="DOUBLE"/>
      <xs:enumeration value="DATE"/>
      <xs:enumeration value="BOOLEAN"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="JobParameterValue">
    <xs:annotation>
      <xs:documentation>Значение парамертра операции.
                В Java это Object, по этому может быть значение одного из типов представленных в JobParameterType.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="stringValue" type="xs:string"/>
        <xs:element name="longValue" type="xs:long"/>
        <xs:element name="doubleValue" type="xs:double"/>
        <xs:element name="dateValue" type="xs:dateTime"/>
        <xs:element name="booleanValue" type="xs:boolean"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ResponseFindAllJobs">
    <xs:annotation>
      <xs:documentation>Ответ на запрос списка операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence maxOccurs="unbounded" minOccurs="0">
          <xs:element name="jobs" type="tdapi:Job"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseSaveJob">
    <xs:annotation>
      <xs:documentation>Ответ на запрос сохранения операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element name="job" type="tdapi:Job"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseRemoveJob">
    <xs:annotation>
      <xs:documentation>Ответ на запрос удаления операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseFindJob">
    <xs:annotation>
      <xs:documentation>Ответ на запрос получения информации о запуске операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element name="job" type="tdapi:Job"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseRunJob">
    <xs:annotation>
      <xs:documentation>Ответ на запрос запуска операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element name="jobExecution" type="tdapi:JobExecution"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ResponseJobStatus">
    <xs:annotation>
      <xs:documentation>Ответ на запрос статуса операции.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="tdapi:UnidataAbstractResponse">
        <xs:sequence>
          <xs:element name="jobExecution" type="tdapi:JobExecution"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="JobExecution">
    <xs:annotation>
      <xs:documentation>Результат запроса на выполнения операции.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="job" type="tdapi:Job"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="parameters" type="tdapi:JobParameter"/>
      <xs:element name="exitStatus" type="tdapi:JobExecutionExitStatus"/>
    </xs:sequence>
    <xs:attribute name="status" type="tdapi:JobExecutionStatus" use="required"/>
    <xs:attribute name="startTime" type="xs:dateTime"/>
    <xs:attribute name="createTime" type="xs:dateTime"/>
    <xs:attribute name="endTime" type="xs:dateTime"/>
    <xs:attribute name="lastUpdated" type="xs:dateTime"/>
  </xs:complexType>
  <xs:simpleType name="JobExecutionStatus">
    <xs:annotation>
      <xs:documentation>Сатус выполнения операции.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="COMPLETED"/>
      <xs:enumeration value="STARTING"/>
      <xs:enumeration value="STARTED"/>
      <xs:enumeration value="STOPPING"/>
      <xs:enumeration value="STOPPED"/>
      <xs:enumeration value="FAILED"/>
      <xs:enumeration value="ABANDONED"/>
      <xs:enumeration value="UNKNOWN"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="JobExecutionExitStatus">
    <xs:annotation>
      <xs:documentation>Статус завершения операции.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="code" type="xs:string" use="required"/>
    <xs:attribute name="description" type="xs:string"/>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>http://localhost:8080/unidata-backend/api/public/v4/UnidataService?xsd=unidata-data-4.0.xsd</con:url><con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" jaxb:extensionBindingPrefixes="xjc" jaxb:version="2.1" targetNamespace="http://data.mdm.unidata.com/v4/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:data="http://data.mdm.unidata.com/v4/">
  <xs:annotation>
    <xs:documentation>Набор элементов и типов для данных платформы Unidata;</xs:documentation>
    <xs:appinfo>
      <!--generateElementProperty="true"-->
      <jaxb:globalBindings>
        <xjc:serializable uid="12345"/>
      </jaxb:globalBindings>
    </xs:appinfo>
  </xs:annotation>
  <!--Elements-->
  <xs:element name="etalonRecord" type="data:EtalonRecord"/>
  <xs:element name="originRecord" type="data:OriginRecord"/>
  <xs:element name="relationTo" type="data:RelationTo"/>
  <xs:element name="originClassifierRecord" type="data:OriginClassifierRecord"/>
  <xs:element name="etalonClassifierRecord" type="data:EtalonClassifierRecord"/>
  <!--Do not remove! This enumeration is used internally.-->
  <xs:simpleType name="ValueDataType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Date"/>
      <xs:enumeration value="Time"/>
      <xs:enumeration value="Timestamp"/>
      <xs:enumeration value="String"/>
      <xs:enumeration value="Integer"/>
      <xs:enumeration value="Number"/>
      <xs:enumeration value="Boolean"/>
      <xs:enumeration value="Blob"/>
      <xs:enumeration value="Clob"/>
      <xs:enumeration value="Measured"/>
      <!--<xs:enumeration value="Enum"/>
            <xs:enumeration value="Link"/>
            <xs:enumeration value="Code"/>-->
    </xs:restriction>
  </xs:simpleType>
  <!--Do not remove! This enumeration is used internally.-->
  <xs:simpleType name="ArrayDataType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Date"/>
      <xs:enumeration value="Time"/>
      <xs:enumeration value="Timestamp"/>
      <xs:enumeration value="String"/>
      <xs:enumeration value="Integer"/>
      <xs:enumeration value="Number"/>
    </xs:restriction>
  </xs:simpleType>
  <!--Do not remove! This enumeration is used internally.-->
  <xs:simpleType name="CodeDataType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="String"/>
      <xs:enumeration value="Integer"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="RecordStatus">
    <xs:restriction base="xs:string">
      <xs:enumeration value="ACTIVE"/>
      <xs:enumeration value="INACTIVE"/>
      <xs:enumeration value="MERGED"/>
      <xs:enumeration value="PENDING"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DataShift">
    <xs:restriction base="xs:string">
      <xs:enumeration value="PRISTINE"/>
      <xs:enumeration value="REVISED"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ApprovalState">
    <xs:restriction base="xs:string">
      <xs:enumeration value="PENDING"/>
      <xs:enumeration value="APPROVED"/>
      <xs:enumeration value="DECLINED"/>
    </xs:restriction>
  </xs:simpleType>
  <!--Base for search expressions.-->
  <xs:complexType name="BaseValue"/>
  <!--BLOB-->
  <xs:complexType name="BlobValue">
    <xs:complexContent>
      <xs:extension base="data:BaseValue">
        <xs:sequence>
          <xs:element maxOccurs="1" name="data" nillable="true" type="xs:base64Binary"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:string" use="optional"/>
        <xs:attribute name="fileName" type="xs:string" use="optional"/>
        <xs:attribute name="mimeType" type="xs:string" use="optional"/>
        <xs:attribute default="0" name="size" type="xs:long" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--CLOB-->
  <xs:complexType name="ClobValue">
    <xs:complexContent>
      <xs:extension base="data:BaseValue">
        <xs:sequence>
          <xs:element maxOccurs="1" name="data" nillable="true" type="xs:string"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:string" use="optional"/>
        <xs:attribute name="fileName" type="xs:string" use="optional"/>
        <xs:attribute name="mimeType" type="xs:string" use="optional"/>
        <xs:attribute default="0" name="size" type="xs:long" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Link to a value in a enumeration (EnumerationDataType code value)-->
  <!--<xs:complexType name="EnumValue">
        <xs:complexContent>
            <xs:extension base="data:BaseValue">
                <xs:sequence>
                    <xs:element name="value" type="xs:string" maxOccurs="1" nillable="true"/>
                    <xs:element name="displayName" type="xs:string" minOccurs="0" maxOccurs="1" nillable="true"/>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>-->
  <!--Special type, containing a template, where attribute names can be replaced with their current values.-->
  <!--<xs:complexType name="LinkValue">
        <xs:complexContent>
            <xs:extension base="data:BaseValue">        
                <xs:sequence>
                    <xs:element name="value" type="xs:string" maxOccurs="1" nillable="true"/>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>-->
  <!--Link to a code/alias attribute(s) value in a lookup entity (LookupEntityDef code/alias attribute(s))-->
  <!--<xs:complexType name="CodeValue">
        <xs:complexContent>
            <xs:extension base="data:BaseValue">        
                <xs:sequence>
                    <xs:element name="value" type="xs:string" maxOccurs="1" nillable="true"/>
                    <xs:element name="displayName" type="xs:string" minOccurs="0" maxOccurs="1" nillable="true"/>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>-->
  <xs:complexType name="MeasuredValue">
    <xs:complexContent>
      <xs:extension base="data:BaseValue">
        <xs:attribute name="value" type="xs:double" use="optional"/>
        <xs:attribute name="measurementValueId" type="xs:string" use="required"/>
        <xs:attribute name="measurementUnitId" type="xs:string" use="optional"/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <!--Base for all attributes types.-->
  <xs:complexType name="AbstractAttribute">
    <xs:attribute name="name" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="AbstractSingleValueAttribute">
    <xs:annotation>
      <xs:documentation>Базовая структура, описывающая значение атрибута сущности. Всегда содержит только одно значение в зависимости от типа данных</xs:documentation>
      <xs:appinfo>
        <jaxb:class implClass="com.unidata.mdm.api.wsdl.v4.SingleValueAttributeImpl"/>
      </xs:appinfo>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractAttribute">
        <xs:sequence>
          <xs:choice maxOccurs="1">
            <xs:element name="blobValue" nillable="true" type="data:BlobValue"/>
            <xs:element name="clobValue" nillable="true" type="data:ClobValue"/>
            <xs:element name="intValue" nillable="true" type="xs:long"/>
            <xs:element name="dateValue" nillable="true" type="xs:date"/>
            <xs:element name="timeValue" nillable="true" type="xs:time"/>
            <xs:element name="timestampValue" nillable="true" type="xs:dateTime"/>
            <xs:element name="stringValue" nillable="true" type="xs:string"/>
            <xs:element name="numberValue" nillable="true" type="xs:double"/>
            <xs:element name="boolValue" nillable="true" type="xs:boolean"/>
            <xs:element name="measuredValue" nillable="true" type="data:MeasuredValue"/>
            <!--<xs:element name="enumValue" type="data:EnumValue" nillable="true"/>
                        <xs:element name="linkValue" type="data:LinkValue" nillable="true"/>
                        <xs:element name="codeValue" type="data:CodeValue" nillable="true"/>-->
          </xs:choice>
        </xs:sequence>
        <xs:attribute name="displayValue" type="xs:string" use="optional"/>
        <xs:attribute name="linkEtalonId" type="xs:string" use="optional"/>
        <!--Взаимо-исключающий набор. Конец объявления-->
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="SimpleAttribute">
    <xs:annotation>
      <xs:documentation>Базовая структура, описывающая простой атрибут сущности. Состоит из обязательного имени и только одного значения в зависимости от типа данных</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractSingleValueAttribute"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="AbstractArrayAttribute">
    <xs:annotation>
      <xs:documentation>Базовая структура, описывающая простой атрибут сущности. Состоит из обязательного имени и массива значений в зависимости от типа данных</xs:documentation>
      <xs:appinfo>
        <jaxb:class implClass="com.unidata.mdm.api.wsdl.v4.ArrayAttributeImpl"/>
      </xs:appinfo>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractAttribute">
        <xs:sequence>
          <xs:choice maxOccurs="1">
            <xs:element maxOccurs="unbounded" minOccurs="1" name="intValue" nillable="false" type="xs:long"/>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="dateValue" nillable="false" type="xs:date"/>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="timeValue" nillable="false" type="xs:time"/>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="timestampValue" nillable="false" type="xs:dateTime"/>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="stringValue" nillable="false" type="xs:string"/>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="numberValue" nillable="false" type="xs:double"/>
          </xs:choice>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ArrayAttribute">
    <xs:annotation>
      <xs:documentation>Массив.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractArrayAttribute"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="AbstractCodeAttribute">
    <xs:annotation>
      <xs:documentation>Базовая структура, описывающая кодовый атрибут справочника. Состоит из обязательного имени, кодового значения и массива значений в зависимости от типа данных</xs:documentation>
      <xs:appinfo>
        <jaxb:class implClass="com.unidata.mdm.api.wsdl.v4.CodeAttributeImpl"/>
      </xs:appinfo>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractAttribute">
        <xs:sequence>
          <xs:choice maxOccurs="1">
            <xs:element name="intValue" nillable="false" type="xs:long"/>
            <xs:element name="stringValue" nillable="false" type="xs:string"/>
          </xs:choice>
          <xs:choice maxOccurs="1">
            <xs:element maxOccurs="unbounded" minOccurs="0" name="supplementaryIntValues" type="xs:long"/>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="supplementaryStringValues" type="xs:string"/>
          </xs:choice>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="CodeAttribute">
    <xs:annotation>
      <xs:documentation>Кодовый атрибут.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractCodeAttribute"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ComplexAttribute">
    <xs:annotation>
      <xs:documentation>Базовая структура, описывающая сложный атрибут сущности. Состоит из обязательного имени и неограниченного набора вложенных сущностей</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:AbstractAttribute">
        <xs:choice maxOccurs="unbounded" minOccurs="0">
          <xs:element name="nestedRecord" type="data:NestedRecord"/>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="EtalonKey">
    <xs:annotation>
      <xs:documentation>Структура, представляющая собой значение ключа для идентификации 'EtalonRecord' сущности.
                Состоит из суррогатного идентификатора основной записи</xs:documentation>
    </xs:annotation>
    <xs:attribute name="id" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="OriginKey">
    <xs:annotation>
      <xs:documentation>Структура, представляющая собой значение ключа для идентификации исходной записи сущности.
                Представляет собой композитный ключ, всегда состоящий из трёх частей - обязательный идентификатор системы источника, непосредственно строкового ключа.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="id" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Ключ записи в системе UniData</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="externalId" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Натуральный ключ исходной записи в системе источника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="sourceSystem" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Код системы источника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="entityName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательное имя сущности для идентификации по натуральный ключ исходной записи в системе источника</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="NestedRecord">
    <xs:annotation>
      <xs:documentation>Рекурсивная структура, описывающая запись произвольной вложенной сущности. Состоит из произвольного количества простых атрибутов, а также сложных атрибутов, обеспечивающих рекурсивного погружение.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="id" type="xs:string">
        <xs:annotation>
          <xs:documentation>ИД сущности</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="simpleAttribute" type="data:SimpleAttribute">
        <xs:annotation>
          <xs:documentation>Простой атрибут записи - имя плюс значение</xs:documentation>
          <xs:appinfo>
            <jaxb:property name="simpleAttributes"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="codeAttribute" type="data:CodeAttribute">
        <xs:annotation>
          <xs:documentation>Кодовый атрибут записи - имя плюс значение</xs:documentation>
          <xs:appinfo>
            <jaxb:property name="codeAttributes"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="arrayAttribute" type="data:ArrayAttribute">
        <xs:annotation>
          <xs:documentation>Массив значений</xs:documentation>
          <xs:appinfo>
            <jaxb:property name="arrayAttributes"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="complexAttribute" type="data:ComplexAttribute">
        <xs:annotation>
          <xs:documentation>Сложный атрибут записи - имя плюс вложенная
					сущность</xs:documentation>
          <xs:appinfo>
            <jaxb:property name="complexAttributes"/>
          </xs:appinfo>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <!--Just a merking base type-->
  <xs:complexType name="RelationBase">
    <xs:attribute name="relName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Обязательное имя связи</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="IntegralRecord">
    <xs:annotation>
      <xs:documentation>Структура, описывающая неотделимую сущность. Используется для представления записи в композитных объектах. Состоит из обязательного имени связи, а также либо основной, либо исходной записи сущности.
Примером такой связанной сущности может служить информация о банковском счёте, неотделимой от сущности 'сотрудник'</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:RelationBase">
        <xs:choice maxOccurs="1" minOccurs="1">
          <xs:element name="etalonRecord" type="data:EtalonRecord">
            <xs:annotation>
              <xs:documentation>Основаня запись связанной сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="originRecord" type="data:OriginRecord">
            <xs:annotation>
              <xs:documentation>Исходная запись связанной сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:choice>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="RelationToInfoSection">
    <xs:attribute name="createdBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем создан</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updatedBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем последний раз обновлен</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата создания записи эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updateDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата последнего обновления эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="status" type="data:RecordStatus" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий общий статус эталонной записи. 
                Запись может быть: 
                - ACTIVE - активна, 
                - INACTIVE - неакитвна из-за удаления, 
                - MERGED - неактивна после слияния с другим объектом в результате слияния дубликатов</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="approval" type="data:ApprovalState" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий состояние изменений эталонной записи. 
                Запись может быть: 
                - PENDING - некие изменения ожидают подтверждений, 
                - APPROVED - неподтвержденные изменения отсутствуют, 
                - DECLINED -  изменения отклонены (Состояние невозможное для инфо-секции эталонной записи)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeFrom" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Начало действия данной версии эталонных данных. null значит бесконечность в прошлом.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeTo" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Окончание действия данной версии эталонных данных. null значит бесконечность в будущем.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RelationTo">
    <xs:annotation>
      <xs:documentation>Структура, описывающая связь между сущностями. Используется для представления связи в композитных сущностях. Состоит из обязательного имени связи, а также ключа для идентификации либо основной, либо исходной записи сущности.
Помимо этого, сама связь может содержать, как простые так и сложные атрибуты.
Примером такой связи между сущностями может служить связь, сущностями 'сотрудник' и 'отдел', каждая из которых имеет свой жизненный цикл.</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:RelationBase">
        <xs:sequence>
          <xs:choice maxOccurs="1" minOccurs="1">
            <xs:element name="toEtalonKey" type="data:EtalonKey">
              <xs:annotation>
                <xs:documentation>Ключ основной записи сущности</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="toOriginKey" type="data:OriginKey">
              <xs:annotation>
                <xs:documentation>Ключ исходной записи сущности</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="simpleAttributes" type="data:SimpleAttribute">
              <xs:annotation>
                <xs:documentation>Простые аттрибуты связи</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="complexAttributes" type="data:ComplexAttribute">
              <xs:annotation>
                <xs:documentation>Сложные аттрибуты связи</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="0" name="infoSection" type="data:RelationToInfoSection">
              <xs:annotation>
                <xs:documentation>Опциональная секция описывающая состояние объекта. Заполняется системой при отдаче записи.</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="EntityRelations">
    <xs:annotation>
      <xs:documentation>Вспомогательная структура содержащая информацию о связях данной сущности. Состоит из набора обычных связей к другим сущностям ('relationTo'), а также набора неотделимых сущностей ('integralEntity')</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="integralEntities" type="data:IntegralRecord"/>
      <xs:element maxOccurs="unbounded" minOccurs="0" name="relationsTo" type="data:RelationTo"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="EtalonRecordInfoSection">
    <xs:attribute name="entityName" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Имя сущности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createdBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем создан</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updatedBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем последний раз обновлен</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="status" type="data:RecordStatus" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий общий статус эталонной записи. 
                Запись может быть: 
                - ACTIVE - активна, 
                - INACTIVE - неакитвна из-за удаления, 
                - MERGED - неактивна после слияния с другим объектом в результате слияния дубликатов</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="approval" type="data:ApprovalState" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий статус подтверждения эталонной записи. 
                Запись может быть: 
                - PENDING - активна, но ожидает подтверждения,
                - APPROVED - активна и подтверждена, 
                - DECLINED - неактивна после отклонения изменений.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeFrom" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Начало действия данной версии эталонных данных. null значит бесконечность в прошлом.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeTo" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Окончание действия данной версии эталонных данных. null значит бесконечность в будущем.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата создания записи эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updateDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата последнего обновления эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="EtalonRecord">
    <xs:annotation>
      <xs:documentation>Структура полностью описывающая основную запись сущности. Является логическим расширением структуры 'NestedRecord'. Всегда содержит
- имя сущности, такое как 'Банк', 'Сотдрудник' итд.
- набор простых и сложных атрибутов
- значение ключа идентифицирующего основную запись
- список связей данной сущности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:NestedRecord">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="etalonKey" type="data:EtalonKey">
            <xs:annotation>
              <xs:documentation>Обязательное значение ключа идентифицирующего основную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="relations" type="data:EntityRelations">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая связи сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="classifiers" type="data:EtalonClassifierRecord">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая классификаторы сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="infoSection" type="data:EtalonRecordInfoSection">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая состояние объекта. Заполняется системой при отдаче записи.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="OriginRecordInfoSection">
    <xs:attribute name="entityName" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Имя сущности</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createdBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем создан</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updatedBy" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Кем последний раз обновлен</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="status" type="data:RecordStatus" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий статус эталонной записи. 
                 Запись может быть: 
                 - ACTIVE - активна, 
                 - INACTIVE - неакитвна из-за удаления, 
                 - MERGED - неактивна после слияния с другим объектом в результате слияния дубликатов</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="approval" type="data:ApprovalState" use="optional">
      <xs:annotation>
        <xs:documentation>Служебный аттрибут, описывающий статус эталонной записи. 
                 Запись может быть: 
                 - PENDING - активна, но ожидает подтверждения,
                 - APPROVED - активна и подтверждена, 
                 - DECLINED - неактивна после отклонения изменений.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeFrom" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Начало действия данной версии эталонных данных. null значит бесконечность в прошлом.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="rangeTo" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Окончание действия данной версии эталонных данных. null значит бесконечность в будущем.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата создания записи эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updateDate" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation>Дата последнего обновления эталонной записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="revision" type="xs:int" use="optional">
      <xs:annotation>
        <xs:documentation>Ревизия ориджин записи.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="OriginRecord">
    <xs:annotation>
      <xs:documentation>Структура полностю аналогичная 'EtalonRecord' с той лишь разницей, что описывает исходную запись сущности. Также является логическим расширением структуры 'NestedRecord'. Всегда содержит
- имя сущности, такое как 'Банк', 'Сотдрудник' итд.
- набор простых и сложных атрибутов
- значение ключа идентифицирующего исходную запись
- список связей данной сущности</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:NestedRecord">
        <xs:sequence>
          <xs:element maxOccurs="1" minOccurs="1" name="originKey" type="data:OriginKey">
            <xs:annotation>
              <xs:documentation>Обязательное значение ключа идентифицирующего исходную запись</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="relations" type="data:EntityRelations">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая связи сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="classifiers" type="data:OriginClassifierRecord">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая классификаторы сущности</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="1" minOccurs="0" name="infoSection" type="data:OriginRecordInfoSection">
            <xs:annotation>
              <xs:documentation>Опциональная секция описывающая состояние сущности.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="OriginClassifierRecord">
    <xs:complexContent>
      <xs:extension base="data:ClassifierRecord"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="EtalonClassifierRecord">
    <xs:complexContent>
      <xs:extension base="data:ClassifierRecord"/>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="ClassifierRecord">
    <xs:annotation>
      <xs:documentation>Структура полностю аналогичная 'EtalonRecord' и 'OriginRecord' с той лишь разницей, что описывает
                класиффицируемую часть данных.
                Также является логическим расширением структуры 'NestedRecord'. Всегда содержит
                - имя классификатора, такое как 'Человек', 'Горила' итд.
                - индитификатор ноды классификатора.
                - набор простых атрибутов</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="data:NestedRecord">
        <xs:attribute name="classifierNodeId" type="xs:string">
          <xs:annotation>
            <xs:documentation>Индетификатор ноды классификатора</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="classifierName" type="xs:string" use="required">
          <xs:annotation>
            <xs:documentation>Имя классификатора</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="status" type="data:RecordStatus" use="required">
          <xs:annotation>
            <xs:documentation>Состояние классификатора</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:simpleType name="DataQualityStatusType">
    <xs:annotation>
      <xs:documentation>Перечисление возможных состояний ошибок данных, ассоциированных с основной записью сущности. Используется в ответе на запрос 'RequestGetDataQualityErrors'</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="new"/>
      <xs:enumeration value="resolved"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="DataQualityError">
    <xs:annotation>
      <xs:documentation>Структура, описывающая ошибоку данных, ассоциированную с основной записью сущности. Используется в ответе на запрос 'RequestGetDataQualityErrors'</xs:documentation>
    </xs:annotation>
    <xs:attribute name="errorId" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Уникальный идентификатор ошибки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="createDate" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Дата создания ошибки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="updateDate" type="xs:dateTime" use="required">
      <xs:annotation>
        <xs:documentation>Дата последненго обновления информации об ошибке</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="status" type="data:DataQualityStatusType" use="required">
      <xs:annotation>
        <xs:documentation>Состояние данной ошибки - новая, исправленная итд</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ruleName" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Имя правила качества данных, на основе которого была сформирована ошибка</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="message" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Текст сообщения ошибки</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="severity" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Уровень критичности, используется для группировки в отчётах</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="category" type="xs:string" use="required">
      <xs:annotation>
        <xs:documentation>Имя категории ошибки, используется для группировки в отчётах</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint></con:endpoints><con:operation id="e25a0c94-bc51-44c4-8deb-8b2f512e02c8" isOneWay="false" action="apiCall" name="apiCall" bindingOperationName="apiCall" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="b455cd9c-f9a4-449a-a385-209744c56f57" name="dummy"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v4="http://api.mdm.unidata.com/v4/" xmlns:v41="http://data.mdm.unidata.com/v4/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <v4:apiRequestBody>\r
         <v4:common version="?" storageId="?" operationId="?">\r
            <v4:security>\r
               <!--You have a CHOICE of the next 2 items at this level-->\r
               <v4:credentials username="?" password="?"/>\r
               <v4:sessionToken token="?"/>\r
            </v4:security>\r
            <!--Optional:-->\r
            <v4:asyncOptions useJMS="false" jmsReplyTo="?" jmsCorrelationId="?"/>\r
         </v4:common>\r
         <!--You have a CHOICE of the next 21 items at this level-->\r
         <v4:requestAuthenticate doLogin="?"/>\r
         <v4:requestGetLookupValues>\r
            <!--1 or more repetitions:-->\r
            <v4:lookupEntity entityName="?" codeValue="?"/>\r
         </v4:requestGetLookupValues>\r
         <v4:requestCleanse cleanseName="?">\r
            <!--1 or more repetitions:-->\r
            <v4:port name="?" displayValue="?" linkEtalonId="?">\r
               <!--You have a CHOICE of the next 10 items at this level-->\r
               <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                  <v41:data>cid:764161837864</v41:data>\r
               </v41:blobValue>\r
               <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                  <v41:data>?</v41:data>\r
               </v41:clobValue>\r
               <v41:intValue>?</v41:intValue>\r
               <v41:dateValue>?</v41:dateValue>\r
               <v41:timeValue>?</v41:timeValue>\r
               <v41:timestampValue>?</v41:timestampValue>\r
               <v41:stringValue>?</v41:stringValue>\r
               <v41:numberValue>?</v41:numberValue>\r
               <v41:boolValue>?</v41:boolValue>\r
               <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
            </v4:port>\r
         </v4:requestCleanse>\r
         <v4:requestUpsert entityName="?" lastUpdateDate="?" skipCleanse="false" mergeWithPreviousVersion="false" bypassExtensionPoints="false">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:etalonRecord>\r
               <!--Optional:-->\r
               <v41:id>?</v41:id>\r
               <!--Zero or more repetitions:-->\r
               <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                  <!--You have a CHOICE of the next 10 items at this level-->\r
                  <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                     <v41:data>cid:836385635012</v41:data>\r
                  </v41:blobValue>\r
                  <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                     <v41:data>?</v41:data>\r
                  </v41:clobValue>\r
                  <v41:intValue>?</v41:intValue>\r
                  <v41:dateValue>?</v41:dateValue>\r
                  <v41:timeValue>?</v41:timeValue>\r
                  <v41:timestampValue>?</v41:timestampValue>\r
                  <v41:stringValue>?</v41:stringValue>\r
                  <v41:numberValue>?</v41:numberValue>\r
                  <v41:boolValue>?</v41:boolValue>\r
                  <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
               </v41:simpleAttribute>\r
               <!--Zero or more repetitions:-->\r
               <v41:codeAttribute name="?">\r
                  <!--You have a CHOICE of the next 2 items at this level-->\r
                  <v41:intValue>?</v41:intValue>\r
                  <v41:stringValue>?</v41:stringValue>\r
                  <!--You have a CHOICE of the next 2 items at this level-->\r
                  <!--Zero or more repetitions:-->\r
                  <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
               </v41:codeAttribute>\r
               <!--Zero or more repetitions:-->\r
               <v41:arrayAttribute name="?">\r
                  <!--You have a CHOICE of the next 6 items at this level-->\r
                  <!--1 or more repetitions:-->\r
                  <v41:intValue>?</v41:intValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:dateValue>?</v41:dateValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:timeValue>?</v41:timeValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:timestampValue>?</v41:timestampValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:stringValue>?</v41:stringValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:numberValue>?</v41:numberValue>\r
               </v41:arrayAttribute>\r
               <!--Zero or more repetitions:-->\r
               <v41:complexAttribute name="?">\r
                  <!--You have a CHOICE of the next 1 items at this level-->\r
                  <v41:nestedRecord>\r
                     <!--Optional:-->\r
                     <v41:id>?</v41:id>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                        <!--You have a CHOICE of the next 10 items at this level-->\r
                        <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>cid:1436643475591</v41:data>\r
                        </v41:blobValue>\r
                        <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>?</v41:data>\r
                        </v41:clobValue>\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <v41:numberValue>?</v41:numberValue>\r
                        <v41:boolValue>?</v41:boolValue>\r
                        <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                     </v41:simpleAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:codeAttribute name="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <!--Zero or more repetitions:-->\r
                        <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                     </v41:codeAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:arrayAttribute name="?">\r
                        <!--You have a CHOICE of the next 6 items at this level-->\r
                        <!--1 or more repetitions:-->\r
                        <v41:intValue>?</v41:intValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:numberValue>?</v41:numberValue>\r
                     </v41:arrayAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:complexAttribute/>\r
                  </v41:nestedRecord>\r
               </v41:complexAttribute>\r
               <v41:etalonKey id="?"/>\r
               <!--Optional:-->\r
               <v41:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:integralEntities relName="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v41:etalonRecord/>\r
                     <v41:originRecord>\r
                        <!--Optional:-->\r
                        <v41:id>?</v41:id>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:1323896947103</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:codeAttribute name="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                        </v41:codeAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:arrayAttribute name="?">\r
                           <!--You have a CHOICE of the next 6 items at this level-->\r
                           <!--1 or more repetitions:-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:numberValue>?</v41:numberValue>\r
                        </v41:arrayAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttribute name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <v41:nestedRecord>\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:939859838371</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute/>\r
                           </v41:nestedRecord>\r
                        </v41:complexAttribute>\r
                        <v41:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Optional:-->\r
                        <v41:relations/>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:416260572303</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:513409306454</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttribute>\r
                        </v41:classifiers>\r
                        <!--Optional:-->\r
                        <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                     </v41:originRecord>\r
                  </v41:integralEntities>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:relationsTo relName="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v41:toEtalonKey id="?"/>\r
                     <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                        <!--You have a CHOICE of the next 10 items at this level-->\r
                        <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>cid:643801843968</v41:data>\r
                        </v41:blobValue>\r
                        <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>?</v41:data>\r
                        </v41:clobValue>\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <v41:numberValue>?</v41:numberValue>\r
                        <v41:boolValue>?</v41:boolValue>\r
                        <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                     </v41:simpleAttributes>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:complexAttributes name="?">\r
                        <!--You have a CHOICE of the next 1 items at this level-->\r
                        <v41:nestedRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:1444245503221</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute/>\r
                        </v41:nestedRecord>\r
                     </v41:complexAttributes>\r
                     <!--Optional:-->\r
                     <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                  </v41:relationsTo>\r
               </v41:relations>\r
               <!--Zero or more repetitions:-->\r
               <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                  <!--Optional:-->\r
                  <v41:id>?</v41:id>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                     <!--You have a CHOICE of the next 10 items at this level-->\r
                     <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <v41:data>cid:1020617508346</v41:data>\r
                     </v41:blobValue>\r
                     <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <v41:data>?</v41:data>\r
                     </v41:clobValue>\r
                     <v41:intValue>?</v41:intValue>\r
                     <v41:dateValue>?</v41:dateValue>\r
                     <v41:timeValue>?</v41:timeValue>\r
                     <v41:timestampValue>?</v41:timestampValue>\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <v41:numberValue>?</v41:numberValue>\r
                     <v41:boolValue>?</v41:boolValue>\r
                     <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                  </v41:simpleAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:codeAttribute name="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v41:intValue>?</v41:intValue>\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <!--Zero or more repetitions:-->\r
                     <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                  </v41:codeAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:arrayAttribute name="?">\r
                     <!--You have a CHOICE of the next 6 items at this level-->\r
                     <!--1 or more repetitions:-->\r
                     <v41:intValue>?</v41:intValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:dateValue>?</v41:dateValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:timeValue>?</v41:timeValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:timestampValue>?</v41:timestampValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:numberValue>?</v41:numberValue>\r
                  </v41:arrayAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:complexAttribute name="?">\r
                     <!--You have a CHOICE of the next 1 items at this level-->\r
                     <v41:nestedRecord>\r
                        <!--Optional:-->\r
                        <v41:id>?</v41:id>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:142129310727</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:codeAttribute name="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                        </v41:codeAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:arrayAttribute name="?">\r
                           <!--You have a CHOICE of the next 6 items at this level-->\r
                           <!--1 or more repetitions:-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:numberValue>?</v41:numberValue>\r
                        </v41:arrayAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttribute/>\r
                     </v41:nestedRecord>\r
                  </v41:complexAttribute>\r
               </v41:classifiers>\r
               <!--Optional:-->\r
               <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
            </v4:etalonRecord>\r
            <v4:originRecord>\r
               <!--Optional:-->\r
               <v41:id>?</v41:id>\r
               <!--Zero or more repetitions:-->\r
               <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                  <!--You have a CHOICE of the next 10 items at this level-->\r
                  <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                     <v41:data>cid:1458198169225</v41:data>\r
                  </v41:blobValue>\r
                  <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                     <v41:data>?</v41:data>\r
                  </v41:clobValue>\r
                  <v41:intValue>?</v41:intValue>\r
                  <v41:dateValue>?</v41:dateValue>\r
                  <v41:timeValue>?</v41:timeValue>\r
                  <v41:timestampValue>?</v41:timestampValue>\r
                  <v41:stringValue>?</v41:stringValue>\r
                  <v41:numberValue>?</v41:numberValue>\r
                  <v41:boolValue>?</v41:boolValue>\r
                  <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
               </v41:simpleAttribute>\r
               <!--Zero or more repetitions:-->\r
               <v41:codeAttribute name="?">\r
                  <!--You have a CHOICE of the next 2 items at this level-->\r
                  <v41:intValue>?</v41:intValue>\r
                  <v41:stringValue>?</v41:stringValue>\r
                  <!--You have a CHOICE of the next 2 items at this level-->\r
                  <!--Zero or more repetitions:-->\r
                  <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
               </v41:codeAttribute>\r
               <!--Zero or more repetitions:-->\r
               <v41:arrayAttribute name="?">\r
                  <!--You have a CHOICE of the next 6 items at this level-->\r
                  <!--1 or more repetitions:-->\r
                  <v41:intValue>?</v41:intValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:dateValue>?</v41:dateValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:timeValue>?</v41:timeValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:timestampValue>?</v41:timestampValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:stringValue>?</v41:stringValue>\r
                  <!--1 or more repetitions:-->\r
                  <v41:numberValue>?</v41:numberValue>\r
               </v41:arrayAttribute>\r
               <!--Zero or more repetitions:-->\r
               <v41:complexAttribute name="?">\r
                  <!--You have a CHOICE of the next 1 items at this level-->\r
                  <v41:nestedRecord>\r
                     <!--Optional:-->\r
                     <v41:id>?</v41:id>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                        <!--You have a CHOICE of the next 10 items at this level-->\r
                        <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>cid:276789663169</v41:data>\r
                        </v41:blobValue>\r
                        <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>?</v41:data>\r
                        </v41:clobValue>\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <v41:numberValue>?</v41:numberValue>\r
                        <v41:boolValue>?</v41:boolValue>\r
                        <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                     </v41:simpleAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:codeAttribute name="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <!--Zero or more repetitions:-->\r
                        <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                     </v41:codeAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:arrayAttribute name="?">\r
                        <!--You have a CHOICE of the next 6 items at this level-->\r
                        <!--1 or more repetitions:-->\r
                        <v41:intValue>?</v41:intValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:numberValue>?</v41:numberValue>\r
                     </v41:arrayAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:complexAttribute/>\r
                  </v41:nestedRecord>\r
               </v41:complexAttribute>\r
               <v41:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
               <!--Optional:-->\r
               <v41:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:integralEntities relName="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v41:etalonRecord>\r
                        <!--Optional:-->\r
                        <v41:id>?</v41:id>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:476257210966</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:codeAttribute name="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                        </v41:codeAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:arrayAttribute name="?">\r
                           <!--You have a CHOICE of the next 6 items at this level-->\r
                           <!--1 or more repetitions:-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:numberValue>?</v41:numberValue>\r
                        </v41:arrayAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttribute name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <v41:nestedRecord>\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:759882833676</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute/>\r
                           </v41:nestedRecord>\r
                        </v41:complexAttribute>\r
                        <v41:etalonKey id="?"/>\r
                        <!--Optional:-->\r
                        <v41:relations/>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:1448122924083</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:878301149867</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttribute>\r
                        </v41:classifiers>\r
                        <!--Optional:-->\r
                        <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                     </v41:etalonRecord>\r
                     <v41:originRecord/>\r
                  </v41:integralEntities>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:relationsTo relName="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v41:toEtalonKey id="?"/>\r
                     <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                        <!--You have a CHOICE of the next 10 items at this level-->\r
                        <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>cid:938665939541</v41:data>\r
                        </v41:blobValue>\r
                        <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>?</v41:data>\r
                        </v41:clobValue>\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <v41:numberValue>?</v41:numberValue>\r
                        <v41:boolValue>?</v41:boolValue>\r
                        <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                     </v41:simpleAttributes>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:complexAttributes name="?">\r
                        <!--You have a CHOICE of the next 1 items at this level-->\r
                        <v41:nestedRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:1438829446501</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute/>\r
                        </v41:nestedRecord>\r
                     </v41:complexAttributes>\r
                     <!--Optional:-->\r
                     <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                  </v41:relationsTo>\r
               </v41:relations>\r
               <!--Zero or more repetitions:-->\r
               <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                  <!--Optional:-->\r
                  <v41:id>?</v41:id>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                     <!--You have a CHOICE of the next 10 items at this level-->\r
                     <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <v41:data>cid:670142539595</v41:data>\r
                     </v41:blobValue>\r
                     <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <v41:data>?</v41:data>\r
                     </v41:clobValue>\r
                     <v41:intValue>?</v41:intValue>\r
                     <v41:dateValue>?</v41:dateValue>\r
                     <v41:timeValue>?</v41:timeValue>\r
                     <v41:timestampValue>?</v41:timestampValue>\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <v41:numberValue>?</v41:numberValue>\r
                     <v41:boolValue>?</v41:boolValue>\r
                     <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                  </v41:simpleAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:codeAttribute name="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v41:intValue>?</v41:intValue>\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <!--Zero or more repetitions:-->\r
                     <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                  </v41:codeAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:arrayAttribute name="?">\r
                     <!--You have a CHOICE of the next 6 items at this level-->\r
                     <!--1 or more repetitions:-->\r
                     <v41:intValue>?</v41:intValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:dateValue>?</v41:dateValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:timeValue>?</v41:timeValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:timestampValue>?</v41:timestampValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:numberValue>?</v41:numberValue>\r
                  </v41:arrayAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:complexAttribute name="?">\r
                     <!--You have a CHOICE of the next 1 items at this level-->\r
                     <v41:nestedRecord>\r
                        <!--Optional:-->\r
                        <v41:id>?</v41:id>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:749597479042</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:codeAttribute name="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                        </v41:codeAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:arrayAttribute name="?">\r
                           <!--You have a CHOICE of the next 6 items at this level-->\r
                           <!--1 or more repetitions:-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:numberValue>?</v41:numberValue>\r
                        </v41:arrayAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttribute/>\r
                     </v41:nestedRecord>\r
                  </v41:complexAttribute>\r
               </v41:classifiers>\r
               <!--Optional:-->\r
               <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
            </v4:originRecord>\r
            <!--Optional:-->\r
            <v4:relations>\r
               <!--Zero or more repetitions:-->\r
               <v4:relation name="?">\r
                  <!--1 or more repetitions:-->\r
                  <v4:record>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v4:integralEntity relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:etalonRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:737001167525</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:1425024448313</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttribute>\r
                           <v41:etalonKey id="?"/>\r
                           <!--Optional:-->\r
                           <v41:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:integralEntities/>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:relationsTo relName="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:toEtalonKey id="?"/>\r
                                 <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:1033660899275</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttributes>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttributes name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <v41:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <v41:id>?</v41:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                          <!--You have a CHOICE of the next 10 items at this level-->\r
                                          <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>cid:1414276436419</v41:data>\r
                                          </v41:blobValue>\r
                                          <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>?</v41:data>\r
                                          </v41:clobValue>\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                          <v41:boolValue>?</v41:boolValue>\r
                                          <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                       </v41:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:codeAttribute name="?">\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                       </v41:codeAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:arrayAttribute name="?">\r
                                          <!--You have a CHOICE of the next 6 items at this level-->\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                       </v41:arrayAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:complexAttribute/>\r
                                    </v41:nestedRecord>\r
                                 </v41:complexAttributes>\r
                                 <!--Optional:-->\r
                                 <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                              </v41:relationsTo>\r
                           </v41:relations>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:1217979506491</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <v41:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <v41:id>?</v41:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:350468090543</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:codeAttribute name="?">\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                    </v41:codeAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:arrayAttribute name="?">\r
                                       <!--You have a CHOICE of the next 6 items at this level-->\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                    </v41:arrayAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttribute/>\r
                                 </v41:nestedRecord>\r
                              </v41:complexAttribute>\r
                           </v41:classifiers>\r
                           <!--Optional:-->\r
                           <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                        </v41:etalonRecord>\r
                        <v41:originRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:1442618571044</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:104635723406</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttribute>\r
                           <v41:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                           <!--Optional:-->\r
                           <v41:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:integralEntities/>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:relationsTo relName="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:toEtalonKey id="?"/>\r
                                 <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:951818726745</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttributes>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttributes name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <v41:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <v41:id>?</v41:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                          <!--You have a CHOICE of the next 10 items at this level-->\r
                                          <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>cid:112897600927</v41:data>\r
                                          </v41:blobValue>\r
                                          <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>?</v41:data>\r
                                          </v41:clobValue>\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                          <v41:boolValue>?</v41:boolValue>\r
                                          <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                       </v41:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:codeAttribute name="?">\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                       </v41:codeAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:arrayAttribute name="?">\r
                                          <!--You have a CHOICE of the next 6 items at this level-->\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                       </v41:arrayAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:complexAttribute/>\r
                                    </v41:nestedRecord>\r
                                 </v41:complexAttributes>\r
                                 <!--Optional:-->\r
                                 <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                              </v41:relationsTo>\r
                           </v41:relations>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:502237650711</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <v41:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <v41:id>?</v41:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:411958384654</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:codeAttribute name="?">\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                    </v41:codeAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:arrayAttribute name="?">\r
                                       <!--You have a CHOICE of the next 6 items at this level-->\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                    </v41:arrayAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttribute/>\r
                                 </v41:nestedRecord>\r
                              </v41:complexAttribute>\r
                           </v41:classifiers>\r
                           <!--Optional:-->\r
                           <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                        </v41:originRecord>\r
                     </v4:integralEntity>\r
                     <v4:relationTo relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:toEtalonKey id="?"/>\r
                        <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:1254510623904</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttributes>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttributes name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <v41:nestedRecord>\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:920107054244</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute/>\r
                           </v41:nestedRecord>\r
                        </v41:complexAttributes>\r
                        <!--Optional:-->\r
                        <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                     </v4:relationTo>\r
                     <v4:range rangeFrom="?" rangeTo="?"/>\r
                     <v4:referenceAliasKey value="?" entityAttributeName="?"/>\r
                  </v4:record>\r
                  <!--Optional:-->\r
                  <v4:override>\r
                     <!--Optional:-->\r
                     <v4:range rangeFrom="?" rangeTo="?"/>\r
                  </v4:override>\r
               </v4:relation>\r
            </v4:relations>\r
            <!--Optional:-->\r
            <v4:range rangeFrom="?" rangeTo="?"/>\r
            <!--Zero or more repetitions:-->\r
            <v4:aliasCodeAttributePointers aliasCodeAttributeName="?" recordAttributeName="?"/>\r
            <!--Zero or more repetitions:-->\r
            <v4:classifierPointers classifierName="?" classifierPointer="?">\r
               <v4:pointerType>?</v4:pointerType>\r
            </v4:classifierPointers>\r
         </v4:requestUpsert>\r
         <v4:requestRelationsUpsert lastUpdateDate="?" skipCleanse="false" bypassExtensionPoints="false">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <v4:etalonKey id="?"/>\r
            <v4:relations>\r
               <!--Zero or more repetitions:-->\r
               <v4:relation name="?">\r
                  <!--1 or more repetitions:-->\r
                  <v4:record>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v4:integralEntity relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:etalonRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:437049703332</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:1247358192405</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttribute>\r
                           <v41:etalonKey id="?"/>\r
                           <!--Optional:-->\r
                           <v41:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:integralEntities/>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:relationsTo relName="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:toEtalonKey id="?"/>\r
                                 <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:1442503673945</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttributes>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttributes name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <v41:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <v41:id>?</v41:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                          <!--You have a CHOICE of the next 10 items at this level-->\r
                                          <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>cid:287281992596</v41:data>\r
                                          </v41:blobValue>\r
                                          <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>?</v41:data>\r
                                          </v41:clobValue>\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                          <v41:boolValue>?</v41:boolValue>\r
                                          <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                       </v41:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:codeAttribute name="?">\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                       </v41:codeAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:arrayAttribute name="?">\r
                                          <!--You have a CHOICE of the next 6 items at this level-->\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                       </v41:arrayAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:complexAttribute/>\r
                                    </v41:nestedRecord>\r
                                 </v41:complexAttributes>\r
                                 <!--Optional:-->\r
                                 <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                              </v41:relationsTo>\r
                           </v41:relations>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:1218609765800</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <v41:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <v41:id>?</v41:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:1169019358356</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:codeAttribute name="?">\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                    </v41:codeAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:arrayAttribute name="?">\r
                                       <!--You have a CHOICE of the next 6 items at this level-->\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                    </v41:arrayAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttribute/>\r
                                 </v41:nestedRecord>\r
                              </v41:complexAttribute>\r
                           </v41:classifiers>\r
                           <!--Optional:-->\r
                           <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                        </v41:etalonRecord>\r
                        <v41:originRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:361664378321</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:152025333965</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttribute>\r
                           <v41:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                           <!--Optional:-->\r
                           <v41:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:integralEntities/>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:relationsTo relName="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:toEtalonKey id="?"/>\r
                                 <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:939372930870</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttributes>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttributes name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <v41:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <v41:id>?</v41:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                          <!--You have a CHOICE of the next 10 items at this level-->\r
                                          <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>cid:683273595240</v41:data>\r
                                          </v41:blobValue>\r
                                          <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>?</v41:data>\r
                                          </v41:clobValue>\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                          <v41:boolValue>?</v41:boolValue>\r
                                          <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                       </v41:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:codeAttribute name="?">\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                       </v41:codeAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:arrayAttribute name="?">\r
                                          <!--You have a CHOICE of the next 6 items at this level-->\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                       </v41:arrayAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:complexAttribute/>\r
                                    </v41:nestedRecord>\r
                                 </v41:complexAttributes>\r
                                 <!--Optional:-->\r
                                 <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                              </v41:relationsTo>\r
                           </v41:relations>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:900737181799</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <v41:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <v41:id>?</v41:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:719203037403</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:codeAttribute name="?">\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                    </v41:codeAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:arrayAttribute name="?">\r
                                       <!--You have a CHOICE of the next 6 items at this level-->\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                    </v41:arrayAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttribute/>\r
                                 </v41:nestedRecord>\r
                              </v41:complexAttribute>\r
                           </v41:classifiers>\r
                           <!--Optional:-->\r
                           <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                        </v41:originRecord>\r
                     </v4:integralEntity>\r
                     <v4:relationTo relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:toEtalonKey id="?"/>\r
                        <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:356040951216</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttributes>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttributes name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <v41:nestedRecord>\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:406407123534</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute/>\r
                           </v41:nestedRecord>\r
                        </v41:complexAttributes>\r
                        <!--Optional:-->\r
                        <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                     </v4:relationTo>\r
                     <v4:range rangeFrom="?" rangeTo="?"/>\r
                     <v4:referenceAliasKey value="?" entityAttributeName="?"/>\r
                  </v4:record>\r
                  <!--Optional:-->\r
                  <v4:override>\r
                     <!--Optional:-->\r
                     <v4:range rangeFrom="?" rangeTo="?"/>\r
                  </v4:override>\r
               </v4:relation>\r
            </v4:relations>\r
            <!--Optional:-->\r
            <v4:range rangeFrom="?" rangeTo="?"/>\r
         </v4:requestRelationsUpsert>\r
         <v4:requestMerge entityName="?" skipCleanse="false" bypassExtensionPoints="false">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:masterEtalonKey id="?"/>\r
            <v4:masterOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:duplicateEtalonKey id="?"/>\r
            <v4:duplicateOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
         </v4:requestMerge>\r
         <v4:requestJoin>\r
            <v4:etalonKey id="?"/>\r
            <v4:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
         </v4:requestJoin>\r
         <v4:requestSoftDelete actionType="?" wipe="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:etalonKey id="?"/>\r
            <v4:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <!--Optional:-->\r
            <v4:range rangeFrom="?" rangeTo="?"/>\r
         </v4:requestSoftDelete>\r
         <v4:requestRelationsSoftDelete actionType="?" wipe="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:etalonKey id="?"/>\r
            <v4:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <v4:relations>\r
               <!--Zero or more repetitions:-->\r
               <v4:relation name="?">\r
                  <!--Zero or more repetitions:-->\r
                  <v4:key>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v4:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                     <v4:etalonKey id="?"/>\r
                     <v4:range rangeFrom="?" rangeTo="?"/>\r
                  </v4:key>\r
               </v4:relation>\r
            </v4:relations>\r
         </v4:requestRelationsSoftDelete>\r
         <v4:requestGet entityName="?" asOf="?" originsAsOf="?" etalonHistory="?" softDeleted="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:etalonKey id="?"/>\r
            <v4:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
         </v4:requestGet>\r
         <v4:requestRelationsGet entityName="?" asOf="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:etalonKey id="?"/>\r
            <v4:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
            <!--1 or more repetitions:-->\r
            <v4:relations>?</v4:relations>\r
         </v4:requestRelationsGet>\r
         <v4:requestSearch entityName="?" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="?">\r
            <v4:searchCondition>\r
               <!--You have a CHOICE of the next 3 items at this level-->\r
               <v4:and>\r
                  <!--You have a CHOICE of the next 3 items at this level-->\r
                  <v4:and/>\r
                  <v4:or>\r
                     <!--You have a CHOICE of the next 3 items at this level-->\r
                     <v4:and/>\r
                     <v4:or/>\r
                     <v4:atom attributeName="?" operator="?" constant="?"/>\r
                  </v4:or>\r
                  <v4:atom attributeName="?" operator="?" constant="?"/>\r
               </v4:and>\r
               <v4:or>\r
                  <!--You have a CHOICE of the next 3 items at this level-->\r
                  <v4:and>\r
                     <!--You have a CHOICE of the next 3 items at this level-->\r
                     <v4:and/>\r
                     <v4:or/>\r
                     <v4:atom attributeName="?" operator="?" constant="?"/>\r
                  </v4:and>\r
                  <v4:or/>\r
                  <v4:atom attributeName="?" operator="?" constant="?"/>\r
               </v4:or>\r
               <v4:atom attributeName="?" operator="?" constant="?"/>\r
            </v4:searchCondition>\r
         </v4:requestSearch>\r
         <v4:requestGetDataQualityErrors entityName="?" forDate="?">\r
            <!--You have a CHOICE of the next 2 items at this level-->\r
            <v4:etalonKey id="?"/>\r
            <v4:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
         </v4:requestGetDataQualityErrors>\r
         <v4:requestInfoGet entityName="?" from="?" to="?"/>\r
         <v4:requestBulkUpsert>\r
            <!--1 or more repetitions:-->\r
            <v4:upsertRecordRequests entityName="?" lastUpdateDate="?" skipCleanse="false" mergeWithPreviousVersion="false" bypassExtensionPoints="false">\r
               <!--You have a CHOICE of the next 2 items at this level-->\r
               <v4:etalonRecord>\r
                  <!--Optional:-->\r
                  <v41:id>?</v41:id>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                     <!--You have a CHOICE of the next 10 items at this level-->\r
                     <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <v41:data>cid:1194704072546</v41:data>\r
                     </v41:blobValue>\r
                     <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <v41:data>?</v41:data>\r
                     </v41:clobValue>\r
                     <v41:intValue>?</v41:intValue>\r
                     <v41:dateValue>?</v41:dateValue>\r
                     <v41:timeValue>?</v41:timeValue>\r
                     <v41:timestampValue>?</v41:timestampValue>\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <v41:numberValue>?</v41:numberValue>\r
                     <v41:boolValue>?</v41:boolValue>\r
                     <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                  </v41:simpleAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:codeAttribute name="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v41:intValue>?</v41:intValue>\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <!--Zero or more repetitions:-->\r
                     <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                  </v41:codeAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:arrayAttribute name="?">\r
                     <!--You have a CHOICE of the next 6 items at this level-->\r
                     <!--1 or more repetitions:-->\r
                     <v41:intValue>?</v41:intValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:dateValue>?</v41:dateValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:timeValue>?</v41:timeValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:timestampValue>?</v41:timestampValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:numberValue>?</v41:numberValue>\r
                  </v41:arrayAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:complexAttribute name="?">\r
                     <!--You have a CHOICE of the next 1 items at this level-->\r
                     <v41:nestedRecord>\r
                        <!--Optional:-->\r
                        <v41:id>?</v41:id>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:563114480514</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:codeAttribute name="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                        </v41:codeAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:arrayAttribute name="?">\r
                           <!--You have a CHOICE of the next 6 items at this level-->\r
                           <!--1 or more repetitions:-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:numberValue>?</v41:numberValue>\r
                        </v41:arrayAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttribute/>\r
                     </v41:nestedRecord>\r
                  </v41:complexAttribute>\r
                  <v41:etalonKey id="?"/>\r
                  <!--Optional:-->\r
                  <v41:relations>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:integralEntities relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:etalonRecord/>\r
                        <v41:originRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:499260396323</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:1144215965033</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttribute>\r
                           <v41:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                           <!--Optional:-->\r
                           <v41:relations/>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:1270229639282</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <v41:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <v41:id>?</v41:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:1329246053237</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:codeAttribute name="?">\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                    </v41:codeAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:arrayAttribute name="?">\r
                                       <!--You have a CHOICE of the next 6 items at this level-->\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                    </v41:arrayAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttribute/>\r
                                 </v41:nestedRecord>\r
                              </v41:complexAttribute>\r
                           </v41:classifiers>\r
                           <!--Optional:-->\r
                           <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                        </v41:originRecord>\r
                     </v41:integralEntities>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:relationsTo relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:toEtalonKey id="?"/>\r
                        <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:386209984829</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttributes>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttributes name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <v41:nestedRecord>\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:954249076362</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute/>\r
                           </v41:nestedRecord>\r
                        </v41:complexAttributes>\r
                        <!--Optional:-->\r
                        <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                     </v41:relationsTo>\r
                  </v41:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                     <!--Optional:-->\r
                     <v41:id>?</v41:id>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                        <!--You have a CHOICE of the next 10 items at this level-->\r
                        <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>cid:296226462757</v41:data>\r
                        </v41:blobValue>\r
                        <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>?</v41:data>\r
                        </v41:clobValue>\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <v41:numberValue>?</v41:numberValue>\r
                        <v41:boolValue>?</v41:boolValue>\r
                        <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                     </v41:simpleAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:codeAttribute name="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <!--Zero or more repetitions:-->\r
                        <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                     </v41:codeAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:arrayAttribute name="?">\r
                        <!--You have a CHOICE of the next 6 items at this level-->\r
                        <!--1 or more repetitions:-->\r
                        <v41:intValue>?</v41:intValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:numberValue>?</v41:numberValue>\r
                     </v41:arrayAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:complexAttribute name="?">\r
                        <!--You have a CHOICE of the next 1 items at this level-->\r
                        <v41:nestedRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:1396105433304</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute/>\r
                        </v41:nestedRecord>\r
                     </v41:complexAttribute>\r
                  </v41:classifiers>\r
                  <!--Optional:-->\r
                  <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
               </v4:etalonRecord>\r
               <v4:originRecord>\r
                  <!--Optional:-->\r
                  <v41:id>?</v41:id>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                     <!--You have a CHOICE of the next 10 items at this level-->\r
                     <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <v41:data>cid:473407735406</v41:data>\r
                     </v41:blobValue>\r
                     <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                        <v41:data>?</v41:data>\r
                     </v41:clobValue>\r
                     <v41:intValue>?</v41:intValue>\r
                     <v41:dateValue>?</v41:dateValue>\r
                     <v41:timeValue>?</v41:timeValue>\r
                     <v41:timestampValue>?</v41:timestampValue>\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <v41:numberValue>?</v41:numberValue>\r
                     <v41:boolValue>?</v41:boolValue>\r
                     <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                  </v41:simpleAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:codeAttribute name="?">\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <v41:intValue>?</v41:intValue>\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <!--You have a CHOICE of the next 2 items at this level-->\r
                     <!--Zero or more repetitions:-->\r
                     <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                  </v41:codeAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:arrayAttribute name="?">\r
                     <!--You have a CHOICE of the next 6 items at this level-->\r
                     <!--1 or more repetitions:-->\r
                     <v41:intValue>?</v41:intValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:dateValue>?</v41:dateValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:timeValue>?</v41:timeValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:timestampValue>?</v41:timestampValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:stringValue>?</v41:stringValue>\r
                     <!--1 or more repetitions:-->\r
                     <v41:numberValue>?</v41:numberValue>\r
                  </v41:arrayAttribute>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:complexAttribute name="?">\r
                     <!--You have a CHOICE of the next 1 items at this level-->\r
                     <v41:nestedRecord>\r
                        <!--Optional:-->\r
                        <v41:id>?</v41:id>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:806328314466</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:codeAttribute name="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                        </v41:codeAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:arrayAttribute name="?">\r
                           <!--You have a CHOICE of the next 6 items at this level-->\r
                           <!--1 or more repetitions:-->\r
                           <v41:intValue>?</v41:intValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <!--1 or more repetitions:-->\r
                           <v41:numberValue>?</v41:numberValue>\r
                        </v41:arrayAttribute>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttribute/>\r
                     </v41:nestedRecord>\r
                  </v41:complexAttribute>\r
                  <v41:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                  <!--Optional:-->\r
                  <v41:relations>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:integralEntities relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:etalonRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:223690565297</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:1277684441690</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttribute>\r
                           <v41:etalonKey id="?"/>\r
                           <!--Optional:-->\r
                           <v41:relations/>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:1068835390313</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <v41:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <v41:id>?</v41:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:726381586680</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:codeAttribute name="?">\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                    </v41:codeAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:arrayAttribute name="?">\r
                                       <!--You have a CHOICE of the next 6 items at this level-->\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                    </v41:arrayAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttribute/>\r
                                 </v41:nestedRecord>\r
                              </v41:complexAttribute>\r
                           </v41:classifiers>\r
                           <!--Optional:-->\r
                           <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                        </v41:etalonRecord>\r
                        <v41:originRecord/>\r
                     </v41:integralEntities>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:relationsTo relName="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:toEtalonKey id="?"/>\r
                        <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                           <!--You have a CHOICE of the next 10 items at this level-->\r
                           <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>cid:703133042533</v41:data>\r
                           </v41:blobValue>\r
                           <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                              <v41:data>?</v41:data>\r
                           </v41:clobValue>\r
                           <v41:intValue>?</v41:intValue>\r
                           <v41:dateValue>?</v41:dateValue>\r
                           <v41:timeValue>?</v41:timeValue>\r
                           <v41:timestampValue>?</v41:timestampValue>\r
                           <v41:stringValue>?</v41:stringValue>\r
                           <v41:numberValue>?</v41:numberValue>\r
                           <v41:boolValue>?</v41:boolValue>\r
                           <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                        </v41:simpleAttributes>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:complexAttributes name="?">\r
                           <!--You have a CHOICE of the next 1 items at this level-->\r
                           <v41:nestedRecord>\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:280586834367</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute/>\r
                           </v41:nestedRecord>\r
                        </v41:complexAttributes>\r
                        <!--Optional:-->\r
                        <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                     </v41:relationsTo>\r
                  </v41:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                     <!--Optional:-->\r
                     <v41:id>?</v41:id>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                        <!--You have a CHOICE of the next 10 items at this level-->\r
                        <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>cid:190153870887</v41:data>\r
                        </v41:blobValue>\r
                        <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                           <v41:data>?</v41:data>\r
                        </v41:clobValue>\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <v41:numberValue>?</v41:numberValue>\r
                        <v41:boolValue>?</v41:boolValue>\r
                        <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                     </v41:simpleAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:codeAttribute name="?">\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v41:intValue>?</v41:intValue>\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <!--Zero or more repetitions:-->\r
                        <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                        <!--Zero or more repetitions:-->\r
                        <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                     </v41:codeAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:arrayAttribute name="?">\r
                        <!--You have a CHOICE of the next 6 items at this level-->\r
                        <!--1 or more repetitions:-->\r
                        <v41:intValue>?</v41:intValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:dateValue>?</v41:dateValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:timeValue>?</v41:timeValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:timestampValue>?</v41:timestampValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:stringValue>?</v41:stringValue>\r
                        <!--1 or more repetitions:-->\r
                        <v41:numberValue>?</v41:numberValue>\r
                     </v41:arrayAttribute>\r
                     <!--Zero or more repetitions:-->\r
                     <v41:complexAttribute name="?">\r
                        <!--You have a CHOICE of the next 1 items at this level-->\r
                        <v41:nestedRecord>\r
                           <!--Optional:-->\r
                           <v41:id>?</v41:id>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:772853113633</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:codeAttribute name="?">\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--You have a CHOICE of the next 2 items at this level-->\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                           </v41:codeAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:arrayAttribute name="?">\r
                              <!--You have a CHOICE of the next 6 items at this level-->\r
                              <!--1 or more repetitions:-->\r
                              <v41:intValue>?</v41:intValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <!--1 or more repetitions:-->\r
                              <v41:numberValue>?</v41:numberValue>\r
                           </v41:arrayAttribute>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttribute/>\r
                        </v41:nestedRecord>\r
                     </v41:complexAttribute>\r
                  </v41:classifiers>\r
                  <!--Optional:-->\r
                  <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
               </v4:originRecord>\r
               <!--Optional:-->\r
               <v4:relations>\r
                  <!--Zero or more repetitions:-->\r
                  <v4:relation name="?">\r
                     <!--1 or more repetitions:-->\r
                     <v4:record>\r
                        <!--You have a CHOICE of the next 2 items at this level-->\r
                        <v4:integralEntity relName="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <v41:etalonRecord>\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:336935712024</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <v41:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <v41:id>?</v41:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:184153781889</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:codeAttribute name="?">\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                    </v41:codeAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:arrayAttribute name="?">\r
                                       <!--You have a CHOICE of the next 6 items at this level-->\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                    </v41:arrayAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttribute/>\r
                                 </v41:nestedRecord>\r
                              </v41:complexAttribute>\r
                              <v41:etalonKey id="?"/>\r
                              <!--Optional:-->\r
                              <v41:relations>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:integralEntities/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:relationsTo relName="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:toEtalonKey id="?"/>\r
                                    <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:124267965866</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttributes>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttributes name="?">\r
                                       <!--You have a CHOICE of the next 1 items at this level-->\r
                                       <v41:nestedRecord>\r
                                          <!--Optional:-->\r
                                          <v41:id>?</v41:id>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                             <!--You have a CHOICE of the next 10 items at this level-->\r
                                             <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                                <v41:data>cid:1351536149950</v41:data>\r
                                             </v41:blobValue>\r
                                             <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                                <v41:data>?</v41:data>\r
                                             </v41:clobValue>\r
                                             <v41:intValue>?</v41:intValue>\r
                                             <v41:dateValue>?</v41:dateValue>\r
                                             <v41:timeValue>?</v41:timeValue>\r
                                             <v41:timestampValue>?</v41:timestampValue>\r
                                             <v41:stringValue>?</v41:stringValue>\r
                                             <v41:numberValue>?</v41:numberValue>\r
                                             <v41:boolValue>?</v41:boolValue>\r
                                             <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                          </v41:simpleAttribute>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:codeAttribute name="?">\r
                                             <!--You have a CHOICE of the next 2 items at this level-->\r
                                             <v41:intValue>?</v41:intValue>\r
                                             <v41:stringValue>?</v41:stringValue>\r
                                             <!--You have a CHOICE of the next 2 items at this level-->\r
                                             <!--Zero or more repetitions:-->\r
                                             <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                             <!--Zero or more repetitions:-->\r
                                             <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                          </v41:codeAttribute>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:arrayAttribute name="?">\r
                                             <!--You have a CHOICE of the next 6 items at this level-->\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:intValue>?</v41:intValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:dateValue>?</v41:dateValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:timeValue>?</v41:timeValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:timestampValue>?</v41:timestampValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:stringValue>?</v41:stringValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:numberValue>?</v41:numberValue>\r
                                          </v41:arrayAttribute>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:complexAttribute/>\r
                                       </v41:nestedRecord>\r
                                    </v41:complexAttributes>\r
                                    <!--Optional:-->\r
                                    <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                                 </v41:relationsTo>\r
                              </v41:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:575185546797</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <v41:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <v41:id>?</v41:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                          <!--You have a CHOICE of the next 10 items at this level-->\r
                                          <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>cid:1345764937511</v41:data>\r
                                          </v41:blobValue>\r
                                          <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>?</v41:data>\r
                                          </v41:clobValue>\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                          <v41:boolValue>?</v41:boolValue>\r
                                          <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                       </v41:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:codeAttribute name="?">\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                       </v41:codeAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:arrayAttribute name="?">\r
                                          <!--You have a CHOICE of the next 6 items at this level-->\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                       </v41:arrayAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:complexAttribute/>\r
                                    </v41:nestedRecord>\r
                                 </v41:complexAttribute>\r
                              </v41:classifiers>\r
                              <!--Optional:-->\r
                              <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?"/>\r
                           </v41:etalonRecord>\r
                           <v41:originRecord>\r
                              <!--Optional:-->\r
                              <v41:id>?</v41:id>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                 <!--You have a CHOICE of the next 10 items at this level-->\r
                                 <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>cid:600397700024</v41:data>\r
                                 </v41:blobValue>\r
                                 <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                    <v41:data>?</v41:data>\r
                                 </v41:clobValue>\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <v41:numberValue>?</v41:numberValue>\r
                                 <v41:boolValue>?</v41:boolValue>\r
                                 <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                              </v41:simpleAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:codeAttribute name="?">\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--You have a CHOICE of the next 2 items at this level-->\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                              </v41:codeAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:arrayAttribute name="?">\r
                                 <!--You have a CHOICE of the next 6 items at this level-->\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:intValue>?</v41:intValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:dateValue>?</v41:dateValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timeValue>?</v41:timeValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:timestampValue>?</v41:timestampValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:stringValue>?</v41:stringValue>\r
                                 <!--1 or more repetitions:-->\r
                                 <v41:numberValue>?</v41:numberValue>\r
                              </v41:arrayAttribute>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:complexAttribute name="?">\r
                                 <!--You have a CHOICE of the next 1 items at this level-->\r
                                 <v41:nestedRecord>\r
                                    <!--Optional:-->\r
                                    <v41:id>?</v41:id>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:554151590107</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:codeAttribute name="?">\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--You have a CHOICE of the next 2 items at this level-->\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                    </v41:codeAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:arrayAttribute name="?">\r
                                       <!--You have a CHOICE of the next 6 items at this level-->\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <!--1 or more repetitions:-->\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                    </v41:arrayAttribute>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttribute/>\r
                                 </v41:nestedRecord>\r
                              </v41:complexAttribute>\r
                              <v41:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                              <!--Optional:-->\r
                              <v41:relations>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:integralEntities/>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:relationsTo relName="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:toEtalonKey id="?"/>\r
                                    <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                                       <!--You have a CHOICE of the next 10 items at this level-->\r
                                       <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>cid:1161433580757</v41:data>\r
                                       </v41:blobValue>\r
                                       <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                          <v41:data>?</v41:data>\r
                                       </v41:clobValue>\r
                                       <v41:intValue>?</v41:intValue>\r
                                       <v41:dateValue>?</v41:dateValue>\r
                                       <v41:timeValue>?</v41:timeValue>\r
                                       <v41:timestampValue>?</v41:timestampValue>\r
                                       <v41:stringValue>?</v41:stringValue>\r
                                       <v41:numberValue>?</v41:numberValue>\r
                                       <v41:boolValue>?</v41:boolValue>\r
                                       <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                    </v41:simpleAttributes>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:complexAttributes name="?">\r
                                       <!--You have a CHOICE of the next 1 items at this level-->\r
                                       <v41:nestedRecord>\r
                                          <!--Optional:-->\r
                                          <v41:id>?</v41:id>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                             <!--You have a CHOICE of the next 10 items at this level-->\r
                                             <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                                <v41:data>cid:175760270847</v41:data>\r
                                             </v41:blobValue>\r
                                             <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                                <v41:data>?</v41:data>\r
                                             </v41:clobValue>\r
                                             <v41:intValue>?</v41:intValue>\r
                                             <v41:dateValue>?</v41:dateValue>\r
                                             <v41:timeValue>?</v41:timeValue>\r
                                             <v41:timestampValue>?</v41:timestampValue>\r
                                             <v41:stringValue>?</v41:stringValue>\r
                                             <v41:numberValue>?</v41:numberValue>\r
                                             <v41:boolValue>?</v41:boolValue>\r
                                             <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                          </v41:simpleAttribute>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:codeAttribute name="?">\r
                                             <!--You have a CHOICE of the next 2 items at this level-->\r
                                             <v41:intValue>?</v41:intValue>\r
                                             <v41:stringValue>?</v41:stringValue>\r
                                             <!--You have a CHOICE of the next 2 items at this level-->\r
                                             <!--Zero or more repetitions:-->\r
                                             <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                             <!--Zero or more repetitions:-->\r
                                             <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                          </v41:codeAttribute>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:arrayAttribute name="?">\r
                                             <!--You have a CHOICE of the next 6 items at this level-->\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:intValue>?</v41:intValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:dateValue>?</v41:dateValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:timeValue>?</v41:timeValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:timestampValue>?</v41:timestampValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:stringValue>?</v41:stringValue>\r
                                             <!--1 or more repetitions:-->\r
                                             <v41:numberValue>?</v41:numberValue>\r
                                          </v41:arrayAttribute>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:complexAttribute/>\r
                                       </v41:nestedRecord>\r
                                    </v41:complexAttributes>\r
                                    <!--Optional:-->\r
                                    <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                                 </v41:relationsTo>\r
                              </v41:relations>\r
                              <!--Zero or more repetitions:-->\r
                              <v41:classifiers classifierNodeId="?" classifierName="?" status="?">\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:523345607770</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute name="?">\r
                                    <!--You have a CHOICE of the next 1 items at this level-->\r
                                    <v41:nestedRecord>\r
                                       <!--Optional:-->\r
                                       <v41:id>?</v41:id>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                          <!--You have a CHOICE of the next 10 items at this level-->\r
                                          <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>cid:355485975895</v41:data>\r
                                          </v41:blobValue>\r
                                          <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                             <v41:data>?</v41:data>\r
                                          </v41:clobValue>\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                          <v41:boolValue>?</v41:boolValue>\r
                                          <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                       </v41:simpleAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:codeAttribute name="?">\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--You have a CHOICE of the next 2 items at this level-->\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                          <!--Zero or more repetitions:-->\r
                                          <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                       </v41:codeAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:arrayAttribute name="?">\r
                                          <!--You have a CHOICE of the next 6 items at this level-->\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:intValue>?</v41:intValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:dateValue>?</v41:dateValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timeValue>?</v41:timeValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:timestampValue>?</v41:timestampValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:stringValue>?</v41:stringValue>\r
                                          <!--1 or more repetitions:-->\r
                                          <v41:numberValue>?</v41:numberValue>\r
                                       </v41:arrayAttribute>\r
                                       <!--Zero or more repetitions:-->\r
                                       <v41:complexAttribute/>\r
                                    </v41:nestedRecord>\r
                                 </v41:complexAttribute>\r
                              </v41:classifiers>\r
                              <!--Optional:-->\r
                              <v41:infoSection entityName="?" createdBy="?" updatedBy="?" status="?" approval="?" rangeFrom="?" rangeTo="?" createDate="?" updateDate="?" revision="?"/>\r
                           </v41:originRecord>\r
                        </v4:integralEntity>\r
                        <v4:relationTo relName="?">\r
                           <!--You have a CHOICE of the next 2 items at this level-->\r
                           <v41:toEtalonKey id="?"/>\r
                           <v41:toOriginKey id="?" externalId="?" sourceSystem="?" entityName="?"/>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:simpleAttributes name="?" displayValue="?" linkEtalonId="?">\r
                              <!--You have a CHOICE of the next 10 items at this level-->\r
                              <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>cid:1071932520185</v41:data>\r
                              </v41:blobValue>\r
                              <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                 <v41:data>?</v41:data>\r
                              </v41:clobValue>\r
                              <v41:intValue>?</v41:intValue>\r
                              <v41:dateValue>?</v41:dateValue>\r
                              <v41:timeValue>?</v41:timeValue>\r
                              <v41:timestampValue>?</v41:timestampValue>\r
                              <v41:stringValue>?</v41:stringValue>\r
                              <v41:numberValue>?</v41:numberValue>\r
                              <v41:boolValue>?</v41:boolValue>\r
                              <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                           </v41:simpleAttributes>\r
                           <!--Zero or more repetitions:-->\r
                           <v41:complexAttributes name="?">\r
                              <!--You have a CHOICE of the next 1 items at this level-->\r
                              <v41:nestedRecord>\r
                                 <!--Optional:-->\r
                                 <v41:id>?</v41:id>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:simpleAttribute name="?" displayValue="?" linkEtalonId="?">\r
                                    <!--You have a CHOICE of the next 10 items at this level-->\r
                                    <v41:blobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>cid:553181194244</v41:data>\r
                                    </v41:blobValue>\r
                                    <v41:clobValue id="?" fileName="?" mimeType="?" size="0">\r
                                       <v41:data>?</v41:data>\r
                                    </v41:clobValue>\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                    <v41:boolValue>?</v41:boolValue>\r
                                    <v41:measuredValue value="?" measurementValueId="?" measurementUnitId="?"/>\r
                                 </v41:simpleAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:codeAttribute name="?">\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--You have a CHOICE of the next 2 items at this level-->\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryIntValues>?</v41:supplementaryIntValues>\r
                                    <!--Zero or more repetitions:-->\r
                                    <v41:supplementaryStringValues>?</v41:supplementaryStringValues>\r
                                 </v41:codeAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:arrayAttribute name="?">\r
                                    <!--You have a CHOICE of the next 6 items at this level-->\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:intValue>?</v41:intValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:dateValue>?</v41:dateValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timeValue>?</v41:timeValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:timestampValue>?</v41:timestampValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:stringValue>?</v41:stringValue>\r
                                    <!--1 or more repetitions:-->\r
                                    <v41:numberValue>?</v41:numberValue>\r
                                 </v41:arrayAttribute>\r
                                 <!--Zero or more repetitions:-->\r
                                 <v41:complexAttribute/>\r
                              </v41:nestedRecord>\r
                           </v41:complexAttributes>\r
                           <!--Optional:-->\r
                           <v41:infoSection createdBy="?" updatedBy="?" createDate="?" updateDate="?" status="?" approval="?" rangeFrom="?" rangeTo="?"/>\r
                        </v4:relationTo>\r
                        <v4:range rangeFrom="?" rangeTo="?"/>\r
                        <v4:referenceAliasKey value="?" entityAttributeName="?"/>\r
                     </v4:record>\r
                     <!--Optional:-->\r
                     <v4:override>\r
                        <!--Optional:-->\r
                        <v4:range rangeFrom="?" rangeTo="?"/>\r
                     </v4:override>\r
                  </v4:relation>\r
               </v4:relations>\r
               <!--Optional:-->\r
               <v4:range rangeFrom="?" rangeTo="?"/>\r
               <!--Zero or more repetitions:-->\r
               <v4:aliasCodeAttributePointers aliasCodeAttributeName="?" recordAttributeName="?"/>\r
               <!--Zero or more repetitions:-->\r
               <v4:classifierPointers classifierName="?" classifierPointer="?">\r
                  <v4:pointerType>?</v4:pointerType>\r
               </v4:classifierPointers>\r
            </v4:upsertRecordRequests>\r
         </v4:requestBulkUpsert>\r
         <v4:requestFindAllJobs/>\r
         <v4:requestSaveJob>\r
            <v4:job id="?" enabled="?" error="?" cronExpression="?" description="?" skipCronWarnings="?" name="?" jobNameReference="?">\r
               <!--Zero or more repetitions:-->\r
               <v4:parameters id="?" type="?" name="?">\r
                  <v4:value>\r
                     <!--You have a CHOICE of the next 5 items at this level-->\r
                     <v4:stringValue>?</v4:stringValue>\r
                     <v4:longValue>?</v4:longValue>\r
                     <v4:doubleValue>?</v4:doubleValue>\r
                     <v4:dateValue>?</v4:dateValue>\r
                     <v4:booleanValue>?</v4:booleanValue>\r
                  </v4:value>\r
               </v4:parameters>\r
            </v4:job>\r
         </v4:requestSaveJob>\r
         <v4:requestRemoveJob id="?"/>\r
         <v4:requestFindJob id="?"/>\r
         <v4:requestRunJob id="?">\r
            <!--Zero or more repetitions:-->\r
            <v4:parameters id="?" type="?" name="?">\r
               <v4:value>\r
                  <!--You have a CHOICE of the next 5 items at this level-->\r
                  <v4:stringValue>?</v4:stringValue>\r
                  <v4:longValue>?</v4:longValue>\r
                  <v4:doubleValue>?</v4:doubleValue>\r
                  <v4:dateValue>?</v4:dateValue>\r
                  <v4:booleanValue>?</v4:booleanValue>\r
               </v4:value>\r
            </v4:parameters>\r
         </v4:requestRunJob>\r
         <v4:requestJobStatus id="?"/>\r
      </v4:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="apiCall"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" id="8c057321-b813-49ee-8cf7-3e55242cce4b" wadlVersion="http://wadl.dev.java.net/2009/02" name="REST API" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint></con:endpoints><con:resource name="login" path="/authentication/login" id="f4dc1513-1cc4-4902-8327-7189e5b1c1f6"><con:settings/><con:parameters/><con:method name="POST" id="08005e13-d6b1-4a07-a278-5e682e7d7ce3" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="http://localhost/unidata-backend/api/internal/authentication/login">log:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:request name="doLogin" id="32af7288-df74-491c-bb14-e12eb6b4231e" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "userName": "admin",
  "password": "admin1234"
}</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/authentication/login</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="get-current-user" path="/authentication/get-current-user" id="fb295624-d863-4d8f-8f12-1c35d8188bd6"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="be559a8e-7ae9-4740-8ccb-dbdbcb474566" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://localhost/unidata-backend/api/internal/authentication/get-current-user">get:Response</con:element></con:representation><con:request name="getCurrentUser" id="179c6542-16a3-444a-b488-6a8addda01f1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/authentication/get-current-user</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="d1348b57-3623-4c86-b5a9-bae8c9d95d18" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="security" path="/security/user" id="10536f6b-b0f0-49ce-aa80-6a9ab6cd23fa"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="POST" id="0773fea9-19ba-44e4-9af4-5040a9bd927c" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403 500</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:user="http://localhost/unidata-backend/api/internal/security/user">user:Response</con:element></con:representation><con:request name="createUser" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser77@testuser77.com",
  "firstName": "New-testuser77",
  "lastName": "User-testuser77",
  "login": "testuser77",
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [
    {
      "id": -4,
      "name": "department",
      "displayName": "",
      "value": ""
    },
	{
      "id": -5,
      "name": "phone",
      "displayName": "",
      "value": ""
    },
	{
      "id": -6,
      "name": "city",
      "displayName": "",
      "value": ""
    }
  ],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/security/user</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="d1348b57-3623-4c86-b5a9-bae8c9d95d18" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="lookup-entities" path="/meta/lookup-entities" id="53ad2517-a60a-4df2-8922-2d77ee51875f"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>page</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>size</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sort</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="e8509125-7e2e-4f08-bac5-23c24b8059d7" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:look="http://localhost/unidata-backend/api/internal/meta/lookup-entities">look:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="getLookupEntitiesList" id="d2fb8a38-2e1b-43e9-93e2-cba7d45f1172" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/meta/lookup-entities</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="996ca041-e060-455b-b77a-ed386ba6a070"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="entities" path="/meta/entities" id="38d445d8-ef58-4f07-a26f-cdf878cdce8d"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>page</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>size</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sort</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="8908430a-8857-4645-b8dd-7b8855c84f92" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ent="http://localhost/unidata-backend/api/internal/meta/entities">ent:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="getEntitiesList" id="0f158123-b81f-4e0e-b9c0-dbeed1210cf1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/meta/entities</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="996ca041-e060-455b-b77a-ed386ba6a070"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="source-systems" path="/meta/source-systems" id="ea8ec5e8-3b17-4b5b-a11f-47f00e66440c"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="7bdc03cf-ccd8-4239-a510-41099f65355f" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sour="http://localhost/unidata-backend/api/internal/meta/source-systems">sour:Response</con:element></con:representation><con:request name="getSourceSystemsList" id="44513107-decf-41ff-b70f-57ec56eda6d8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="simple" path="/search/simple" id="90d9c2c8-68a1-416e-bf9b-228d39bdc3d6"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="POST" id="4fb79326-f2d7-40fc-a39b-f1a4938a484f" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sim="http://localhost/unidata-backend/api/internal/search/simple">sim:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>401</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="searchOnlySoftDeletedRecords" id="babb7dc0-812f-4d04-b01c-2b1dbebc405a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
	"searchFields": ["R_SIMP_ATTR"],
	"returnFields": ["R_SIMP_ATTR"],
	"sortFields": [],
	"facets": ["inactive_only"],
	"entity": "R_MASTER",
	"fetchAll": true,
	"operator": "AND",
	"qtype": "FUZZY",
	"formFields": [],
	"text": "",
	"@type": "SIMPLE",
	"source": false,
	"totalCount": true,
	"countOnly": false,
	"page": 1,
	"start": 0,
	"count": 30
}
</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="notifications" path="/user/notifications" id="905ead20-21bc-4133-8114-934c65d7d88b"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="aacee0af-5022-4a42-be9e-5d525ee7b74b" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>;charset=UTF-8</con:mediaType><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:not="http://localhost/unidata-backend/api/internal/user/notifications">not:Response</con:element></con:representation><con:request name="getNotifications" id="53ad1fcf-a5bb-4e49-9834-c0ed022f97d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method><con:method name="DELETE" id="e44a91a0-00b9-4862-9f8b-0975a3939455" method="DELETE"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:not="http://localhost/unidata-backend/api/internal/user/notifications">not:Response</con:element></con:representation><con:request name="deleteAllNotifications" id="867a48bd-1efc-4f55-9070-577504d26743" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="27168e1c-4c5f-45cf-be5a-dda607da389f" name="requestAuthenticate"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="846a5f34-ccfc-4029-9800-e39bf9a5fbe3" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Login as admin user" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="delay" name="Delay" id="7b988c20-de6f-4bcf-b2a8-a5aa911d37f5"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="request" name="1. Login as admin" id="d6f4de7b-bf6e-4103-a450-0c9230949f9f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="805cbfee-427a-45c6-b47d-7ca2511927aa" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Login as non-admin user" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="1. Login as admin" id="bcc81324-04dc-40b9-92b9-2667cad73e98"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer sessionToken to createUser request" id="76737bf5-1a83-4c88-b971-abf2fee0783a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to 4 step</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>1. Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>4. Create non-admin user</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random append for non-admin username" id="6472ed9c-43a6-472c-a860-1317804437b9"><con:settings/><con:config><script>random = new Random().nextInt(199999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="restrequest" name="4. Create non-admin user" id="455448c1-1658-4cda-b9f4-ff4509b6d443"><con:settings/><con:config service="REST API" resourcePath="/security/user" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Create non-admin user" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser${3. Generate random append for non-admin username#result}@testuser${3. Generate random append for non-admin username#result}.com",
  "firstName": "FirstName${3. Generate random append for non-admin username#result}",
  "lastName": "LastName${3. Generate random append for non-admin username#result}",
  "login": "testuser${3. Generate random append for non-admin username#result}",

  "endpoints": [
  {
  		"name": "SOAP",
  		"displayName": "SOAP \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441",
  		"description": "SOAP \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441"
  },
{
  		"name": "REST",
  		"displayName": "WEB \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441",
  		"description": "WEB \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441"
  }  
  ],
 
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [ ],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/security/user</con:originalUri><con:assertion type="JsonPath Match" id="bac2b501-edb8-4705-98a4-f10cdbff7997" name="JsonPath Match"><con:configuration><path>success</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="c1f703fa-8a5b-422a-b703-fa8a5bc22a88" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="5. Login as non-admin user" id="620d0635-76b9-45aa-8975-2f12784e9ca2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Login as non-admin user" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="testuser${3. Generate random append for non-admin username#result}" password="password32"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin=false"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:responseAuthenticate[@isAdmin='false']</path><content>&lt;responseAuthenticate isAdmin="false" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;sessionToken token="*"/>
&lt;/responseAuthenticate></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="2b120589-f893-4bef-8ce0-02dceafc017d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Login as non-existent user" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="1. Login as admin" id="694475cf-345b-4332-8ac7-54ca52fe8f94"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137" useWsAddressing="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer sessionToken to createUser request" id="85eec5aa-d191-41c4-9ef4-490f1b36f6b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to 4 step</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>1. Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>4. Create non-admin user</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random append for non-admin username" id="1f20f835-656a-4025-8565-0721e86fb2ab"><con:settings/><con:config><script>random = new Random().nextInt(199999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="restrequest" name="4. Create non-admin user" id="1cadc4da-a547-479a-b667-6865d878cecc"><con:settings/><con:config service="REST API" resourcePath="/security/user" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Create non-admin user" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser${3. Generate random append for non-admin username#result}@testuser${3. Generate random append for non-admin username#result}.com",
  "firstName": "FirstName${3. Generate random append for non-admin username#result}",
  "lastName": "LastName${3. Generate random append for non-admin username#result}",
  "login": "testuser${3. Generate random append for non-admin username#result}",
 
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/security/user</con:originalUri><con:assertion type="JsonPath Match" id="bac2b501-edb8-4705-98a4-f10cdbff7997" name="JsonPath Match"><con:configuration><path>success</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="50906e36-e65c-4c4a-906e-36e65cbc4a30" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="5. Login as non-existent user" id="673f6736-6f2c-40c1-993d-2093e831b0b2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Login as non-existent user" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="blablabla${3. Generate random append for non-admin username#result}" password="password32"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="exitCode=AuthenticationError"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='AuthenticationError']</path><content>&lt;common exitCode="AuthenticationError" processingTime="0" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="Authentication with supplied credentials failed. Please, verify user and password."/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="3ff6fc30-63f4-462f-ae55-2a1bd8f63e3c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Login with wrong password" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="1. Login as admin" id="5c8d0003-ae77-4ef4-bb69-9c686916b791"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer sessionToken to createUser request" id="8f501b9b-fe74-4ac8-866f-928ce69ebbd7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to 4 step</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>1. Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>4. Create non-admin user</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random append for non-admin username" id="1980c48a-8cee-422a-9416-337812e912aa"><con:settings/><con:config><script>random = new Random().nextInt(199999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="restrequest" name="4. Create non-admin user" id="c38f9ff6-999c-410c-a119-cff1ad716139"><con:settings/><con:config service="REST API" resourcePath="/security/user" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Create non-admin user" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser${3. Generate random append for non-admin username#result}@testuser${3. Generate random append for non-admin username#result}.com",
  "firstName": "FirstName${3. Generate random append for non-admin username#result}",
  "lastName": "LastName${3. Generate random append for non-admin username#result}",
  "login": "testuser${3. Generate random append for non-admin username#result}",
 
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/security/user</con:originalUri><con:assertion type="JsonPath Match" id="bac2b501-edb8-4705-98a4-f10cdbff7997" name="JsonPath Match"><con:configuration><path>success</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="cc955d5b-68a8-4cb0-955d-5b68a87cb09f" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="5. Login with wrong password" id="28f36e1d-7605-49da-96d1-360424e655ab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Login with wrong password" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="testuser${3. Generate random append for non-admin username#result}" password="wrongpassword32"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="exitCode=AuthenticationError"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='AuthenticationError']</path><content>&lt;common exitCode="AuthenticationError" processingTime="0" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="Authentication with supplied credentials failed. Please, verify user and password."/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="bdca7953-a079-4082-8ee6-cd8db0a77d34" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Login with empty values of username and password" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="1. Login as admin" id="f3602d8b-b171-461b-86e6-a57c38bab60b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer sessionToken to createUser request" id="d167756b-38bd-4213-8b38-273eec7db076"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to 4 step</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>1. Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>4. Create non-admin user</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random append for non-admin username" id="332e300e-5443-417c-bb44-e9bdf4c9afd1"><con:settings/><con:config><script>random = new Random().nextInt(199999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="restrequest" name="4. Create non-admin user" id="182ce40b-46e9-446a-a1c0-adb2c2ab5d21"><con:settings/><con:config service="REST API" resourcePath="/security/user" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Create non-admin user" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser${3. Generate random append for non-admin username#result}@testuser${3. Generate random append for non-admin username#result}.com",
  "firstName": "FirstName${3. Generate random append for non-admin username#result}",
  "lastName": "LastName${3. Generate random append for non-admin username#result}",
  "login": "testuser${3. Generate random append for non-admin username#result}",
 
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/security/user</con:originalUri><con:assertion type="JsonPath Match" id="bac2b501-edb8-4705-98a4-f10cdbff7997" name="JsonPath Match"><con:configuration><path>success</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="062aebae-165c-4a80-aaeb-ae165c8a803d" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="5. Login with empty values of username and password" id="65fb71e9-783f-4ab2-98af-deaec3916872"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Login with empty values of username and password" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="" password=""/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="exitCode=AuthenticationError"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='AuthenticationError']</path><content>&lt;common exitCode="AuthenticationError" processingTime="0" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="Authentication with supplied credentials failed. Please, verify user and password."/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="23ecdeef-7be6-4b12-9e36-ae55d904e640" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Login as admin user with doLogin=false" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="1. Login as admin" id="1cbccf26-1f5a-4ae5-a5ae-0262330388da"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer sessionToken to createUser request" id="b16bd3da-bba0-40f7-b9a5-bfff40094080"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to 4 step</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>1. Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>4. Create non-admin user</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random append for non-admin username" id="b3dc494b-d088-4a5b-8108-1a177d62f02a"><con:settings/><con:config><script>random = new Random().nextInt(199999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="restrequest" name="4. Create non-admin user" id="5cc12b15-cfe2-4eb6-9839-26a9e06b3138"><con:settings/><con:config service="REST API" resourcePath="/security/user" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Create non-admin user" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser${3. Generate random append for non-admin username#result}@testuser${3. Generate random append for non-admin username#result}.com",
  "firstName": "FirstName${3. Generate random append for non-admin username#result}",
  "lastName": "LastName${3. Generate random append for non-admin username#result}",
  "login": "testuser${3. Generate random append for non-admin username#result}",
 
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/security/user</con:originalUri><con:assertion type="JsonPath Match" id="bac2b501-edb8-4705-98a4-f10cdbff7997" name="JsonPath Match"><con:configuration><path>success</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="33fc68eb-924a-4537-bc68-eb924a053778" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="5. Login as admin with doLogin=false" id="253bf83b-c861-4e68-bb78-fc224c576743"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Login as admin with doLogin=false" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="false"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="43caac6f-544a-4839-9412-5f46862b9733" name="List of admin's roles"><con:configuration><token>&lt;role name="ADMIN_SYSTEM_MANAGEMENT"/>
            &lt;role name="ADMIN_CLASSIFIER_MANAGEMENT"/>
            &lt;role name="ADMIN_MATCHING_MANAGEMENT"/>
            &lt;role name="ADMIN_DATA_MANAGEMENT"/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="29f728b1-39e6-4161-998b-c202b8cc2561" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Login as non-admin user with doLogin=false" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="1. Login as admin" id="d298073a-469d-4e76-bc14-da2f21c65da1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer sessionToken to createUser request" id="b9d2a339-4cef-43f4-88b7-4ae51218805b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to 4 step</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>1. Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>4. Create non-admin user</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random append for non-admin username" id="0e17b1e5-bc39-49ac-a3a1-7a2bf706a063"><con:settings/><con:config><script>random = new Random().nextInt(199999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="restrequest" name="4. Create non-admin user" id="0ae3c1f9-576a-4c19-81e3-6f9bd5ec72f4"><con:settings/><con:config service="REST API" resourcePath="/security/user" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Create non-admin user" id="3b6e0b61-2bb5-4507-adaa-40a15de86df3" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
  "password": "password32",
  "active": true,
  "admin": false,
  "email": "testuser${3. Generate random append for non-admin username#result}@testuser${3. Generate random append for non-admin username#result}.com",
  "firstName": "FirstName${3. Generate random append for non-admin username#result}",
  "lastName": "LastName${3. Generate random append for non-admin username#result}",
  "login": "testuser${3. Generate random append for non-admin username#result}",
 
  "endpoints": [
  {
  		"name": "SOAP",
  		"displayName": "SOAP \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441",
  		"description": "SOAP \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441"
  },
{
  		"name": "REST",
  		"displayName": "WEB \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441",
  		"description": "WEB \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441"
  }  
  ],
  
  "securityLabels": [
  
  ],
  "external": false,
  "roles": [
    ""
  ],
  "fullName": "",
  "properties": [],
  "createdBy": "",
  "updatedAt": "",
  "updatedBy": "",
  "createdAt": ""
}</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/security/user</con:originalUri><con:assertion type="JsonPath Match" id="bac2b501-edb8-4705-98a4-f10cdbff7997" name="JsonPath Match"><con:configuration><path>success</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="214de808-edd4-44ed-8de8-08edd484ed0d" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="5. Login as non-admin user with doLogin=false" id="e31a0bc2-5277-4115-a6c5-9d437baf90f0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Login as non-admin user with doLogin=false" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                <api:credentials username="testuser${3. Generate random append for non-admin username#result}" password="password32"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="false"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin = False"><con:configuration><path>//@isAdmin</path><content>false</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="43caac6f-544a-4839-9412-5f46862b9733" name="List of user's roles" disabled="true"><con:configuration><token>&lt;role name="ADMIN_SYSTEM_MANAGEMENT"/>
            &lt;role name="ADMIN_DATA_MANAGEMENT"/>

</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="bbba6f1c-6914-476e-b384-0d9404aab36a" name="requestInfoGet"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e49aab3a-d0bb-4c5f-b307-af33fbefb919" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="InfoGet for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="0. Get admin sessionToken" id="7b8a8510-f047-4e1f-8965-9f096167aa3e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="0. Get admin sessionToken" id="7a4df614-6112-4a0e-904d-e4e77feb9875"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f799e3b8-6275-4cbb-8171-78b49dc8c7f5"/><con:assertion type="XPath Match" id="34fe31c8-9608-4204-acca-85621287eeeb" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4a4f8f47-6938-4c43-920e-ed575184b480" name="isAdmin = true"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="1. Transfer adminSessionToken to Auth Header" id="b1cf2ab4-c8ef-42e6-9859-75ab57309812"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>adminSessionToken to Get ent list</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>0. Get admin sessionToken</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>2. Get entities list</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get entities list" id="2bd76365-133f-4d7b-b686-c2b542c7a899"><con:settings/><con:config service="REST API" resourcePath="/meta/entities" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get entities list" id="0f158123-b81f-4e0e-b9c0-dbeed1210cf1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/meta/entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c51d1a68-224f-4903-8f74-cc53d5a1c7d1" name="Check Auth on HTTP status"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="dba3061c-0ff3-4310-a306-1c0ff3a3100e"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer entity name of 0 element to prop commonEntityName" id="795c9c0a-5d86-41ba-84e5-bbd5a9cc6b30"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>all content to commonEntName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Get entities list</con:sourceStep><con:sourcePath>content[0].name</con:sourcePath><con:targetType>commonEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do InfoGet request for Entity" id="3191f020-9172-4120-b7d4-454615cb62bd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do InfoGet request for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="${#TestCase#rangeFrom}" to="${#TestCase#rangeTo}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bc079a2b-4312-452e-86c3-a4b75b528c92" name="UPDATED"><con:configuration><token>UPDATED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8196d8f-107f-4579-8141-770a9106767b" name="NEW"><con:configuration><token>NEW</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11b3c833-adf2-443d-973b-b1bb50f10621" name="ERRORS"><con:configuration><token>ERRORS</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="afe368c6-036c-454c-8657-a8ff2068b214" name="MERGED"><con:configuration><token>MERGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b4b167ca-1984-4d7c-a7dd-4544673572df" name="TOTAL"><con:configuration><token>TOTAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cc5dbfb3-05ec-4362-ae7e-a41b4df6b7ae" name="DUPLICATES"><con:configuration><token>DUPLICATES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>commonEntityName</con:name><con:value>R_UNIQUE_222</con:value></con:property></con:properties></con:testCase><con:testCase id="a0eb548d-0ce4-472f-89e4-e01a3824ce55" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="InfoGet for lookupEntity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="0. Get admin sessionToken" id="7125b1bc-2670-4d4b-bbda-2871edca16a1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="0. Get admin sessionToken" id="7a4df614-6112-4a0e-904d-e4e77feb9875"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f799e3b8-6275-4cbb-8171-78b49dc8c7f5"/><con:assertion type="XPath Match" id="34fe31c8-9608-4204-acca-85621287eeeb" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4a4f8f47-6938-4c43-920e-ed575184b480" name="isAdmin = true"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="1. Transfer adminSessionToken to Auth Header" id="569567c9-3f71-4ca9-bb9a-615379e9dee1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>adminSessionToken to Get lookup ent</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>0. Get admin sessionToken</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>2. Get lookup entities list</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get lookup entities list" id="f934bcbb-422b-41d4-a08c-2322ef076809"><con:settings/><con:config service="REST API" resourcePath="/meta/lookup-entities" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get lookup entities list" id="d2fb8a38-2e1b-43e9-93e2-cba7d45f1172" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/meta/lookup-entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cffccf0d-2647-4181-b34c-17e8c07a541e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="20565123-5d53-4b54-9651-235d53ab541a"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer lookup entity name of 0 element to prop commonEntityName" id="5313553e-d569-483a-afc9-dbeb9b07451b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>lookup name to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Get lookup entities list</con:sourceStep><con:sourcePath>content[0].name</con:sourcePath><con:targetType>commonEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do InfoGet request for lookupEntity" id="92b2f343-8e33-47b7-8466-16eb74266c52"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do InfoGet request for lookupEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="${#TestCase#rangeFrom}" to="${#TestCase#rangeTo}"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bc079a2b-4312-452e-86c3-a4b75b528c92" name="UPDATED"><con:configuration><token>UPDATED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8196d8f-107f-4579-8141-770a9106767b" name="NEW"><con:configuration><token>NEW</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11b3c833-adf2-443d-973b-b1bb50f10621" name="ERRORS"><con:configuration><token>ERRORS</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="afe368c6-036c-454c-8657-a8ff2068b214" name="MERGED"><con:configuration><token>MERGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b4b167ca-1984-4d7c-a7dd-4544673572df" name="TOTAL"><con:configuration><token>TOTAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cc5dbfb3-05ec-4362-ae7e-a41b4df6b7ae" name="DUPLICATES"><con:configuration><token>DUPLICATES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>commonEntityName</con:name><con:value>REST_S_LINK</con:value></con:property></con:properties></con:testCase><con:testCase id="2f9f0778-64a9-41fd-8bf2-217138944e62" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="InfoGet for non-existent Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="1. Do InfoGet request for non-existent Entity" id="29080057-e766-4788-8c34-2b98d7df1a6d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Do InfoGet request for non-existent Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestInfoGet entityName="blablabla789078907890" from="${#TestCase#rangeFrom}" to="${#TestCase#rangeTo}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="efbae329-f1a0-49fb-b64a-142d9c0881a4" name="errorCode = EX_META_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_META_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>commonEntityName</con:name><con:value>REST_S_LINK</con:value></con:property></con:properties></con:testCase><con:testCase id="2ba7db1a-3f15-4c27-9f53-c125042d2d0b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="InfoGet without time in Ranges" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="0. Get admin sessionToken" id="c5b4b033-4778-497e-8c26-a649e97eec45"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="0. Get admin sessionToken" id="7a4df614-6112-4a0e-904d-e4e77feb9875"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f799e3b8-6275-4cbb-8171-78b49dc8c7f5"/><con:assertion type="XPath Match" id="34fe31c8-9608-4204-acca-85621287eeeb" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4a4f8f47-6938-4c43-920e-ed575184b480" name="isAdmin = true"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="1. Transfer adminSessionToken to Auth Header" id="a6b86657-282e-4c66-948f-3cd499e63791"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>adminSessionToken to Get ent list</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>0. Get admin sessionToken</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>2. Get entities list</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get entities list" id="8950687c-bfa8-4162-93e2-d8a12832298a"><con:settings/><con:config service="REST API" resourcePath="/meta/entities" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get entities list" id="0f158123-b81f-4e0e-b9c0-dbeed1210cf1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/meta/entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c51d1a68-224f-4903-8f74-cc53d5a1c7d1" name="Check Auth on HTTP status"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="ad3eaa60-8295-42f2-beaa-608295a2f25f"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer entity name of 0 element to prop commonEntityName" id="cb467297-2c27-419f-9149-6fc5b442993b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>all content to commonEntName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Get entities list</con:sourceStep><con:sourcePath>content[0].name</con:sourcePath><con:targetType>commonEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do InfoGet request without time in Ranges" id="a5ef5cfa-1e62-4216-acd6-8f7bc9e9aa97"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do InfoGet request without time in Ranges" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="1900-01-01" to="9999-12-31"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bc079a2b-4312-452e-86c3-a4b75b528c92" name="UPDATED"><con:configuration><token>UPDATED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8196d8f-107f-4579-8141-770a9106767b" name="NEW"><con:configuration><token>NEW</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11b3c833-adf2-443d-973b-b1bb50f10621" name="ERRORS"><con:configuration><token>ERRORS</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="afe368c6-036c-454c-8657-a8ff2068b214" name="MERGED"><con:configuration><token>MERGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b4b167ca-1984-4d7c-a7dd-4544673572df" name="TOTAL"><con:configuration><token>TOTAL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cc5dbfb3-05ec-4362-ae7e-a41b4df6b7ae" name="DUPLICATES"><con:configuration><token>DUPLICATES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>commonEntityName</con:name><con:value>R_UNIQUE_222</con:value></con:property></con:properties></con:testCase><con:testCase id="f1b368ad-cc38-4f3a-9cfe-1c2a6942b670" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="InfoGet request: from > to" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="0. Get admin sessionToken" id="b121428c-8d6d-476d-ae08-2fb2cfd70e58"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="0. Get admin sessionToken" id="7a4df614-6112-4a0e-904d-e4e77feb9875"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f799e3b8-6275-4cbb-8171-78b49dc8c7f5"/><con:assertion type="XPath Match" id="34fe31c8-9608-4204-acca-85621287eeeb" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4a4f8f47-6938-4c43-920e-ed575184b480" name="isAdmin = true"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="1. Transfer adminSessionToken to Auth Header" id="9374e8b6-d5a1-4d25-a1cf-fb3040724a1b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>adminSessionToken to Get ent list</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>0. Get admin sessionToken</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>2. Get entities list</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get entities list" id="215ed3c1-388a-4b72-ab42-a097e3fdec83"><con:settings/><con:config service="REST API" resourcePath="/meta/entities" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get entities list" id="0f158123-b81f-4e0e-b9c0-dbeed1210cf1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/meta/entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c51d1a68-224f-4903-8f74-cc53d5a1c7d1" name="Check Auth on HTTP status"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="6d8301e3-0252-473e-8301-e30252e73e53"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer entity name of 0 element to prop commonEntityName" id="534a8384-4ac6-4545-8de8-ee94e7be1cf0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>all content to commonEntName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Get entities list</con:sourceStep><con:sourcePath>content[0].name</con:sourcePath><con:targetType>commonEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do InfoGet request: from > to" id="fb0dd935-40b9-4ac2-8f47-58ae1516871c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do InfoGet request: from > to" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="${#TestCase#rangeTo}" to="${#TestCase#rangeFrom}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="errorCode = EX_SOAP_INCORRECT_REQUEST_INFO_GET_FROM_AFTER_TO"><con:configuration><path>//@errorCode</path><content>EX_SOAP_INCORRECT_REQUEST_INFO_GET_FROM_AFTER_TO</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>commonEntityName</con:name><con:value>R_UNIQUE_222</con:value></con:property></con:properties></con:testCase><con:testCase id="d2a80f22-1993-401c-b046-d17a49051af6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="InfoGet request: from = to" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="request" name="0. Get admin sessionToken" id="65c59380-28e3-4014-8569-0974a4a96670"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="0. Get admin sessionToken" id="7a4df614-6112-4a0e-904d-e4e77feb9875"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="f799e3b8-6275-4cbb-8171-78b49dc8c7f5"/><con:assertion type="XPath Match" id="34fe31c8-9608-4204-acca-85621287eeeb" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4a4f8f47-6938-4c43-920e-ed575184b480" name="isAdmin = true"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="1. Transfer adminSessionToken to Auth Header" id="cf2afe36-4afb-4810-aab2-05994c57b65c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>adminSessionToken to Get ent list</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>0. Get admin sessionToken</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>2. Get entities list</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get entities list" id="04c7e308-6355-465e-9149-d8ad433191df"><con:settings/><con:config service="REST API" resourcePath="/meta/entities" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get entities list" id="0f158123-b81f-4e0e-b9c0-dbeed1210cf1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/meta/entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c51d1a68-224f-4903-8f74-cc53d5a1c7d1" name="Check Auth on HTTP status"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="0073a152-4ec6-43d6-b3a1-524ec6b3d692"/>
  <con:entry key="page" value="1"/>
  <con:entry key="size" value="100"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>page</con:entry><con:entry>size</con:entry><con:entry>sort</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer entity name of 0 element to prop commonEntityName" id="3400730e-8c1e-402d-8933-c5c135d867e5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>all content to commonEntName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Get entities list</con:sourceStep><con:sourcePath>content[0].name</con:sourcePath><con:targetType>commonEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do InfoGet request: from = to" id="d5d9f2d7-507a-4470-a417-75f49e096222"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do InfoGet request: from = to" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestInfoGet entityName="${#TestCase#commonEntityName}" from="${#TestCase#rangeFrom}" to="${#TestCase#rangeFrom}"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="1419be84-8d02-49eb-89d3-67e780c9507e" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f5c3d124-e30d-4155-90ef-3e0bdfbf95a3" name="Contains &lt;responseInfoGet>" disabled="true"><con:configuration><token>&lt;responseInfoGet></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="1419be84-8d02-49eb-89d3-67e780c9507e" name="errorCode = EX_SOAP_INCORRECT_REQUEST_INFO_GET_FROM_AFTER_TO"><con:configuration><path>//@errorCode</path><content>EX_SOAP_INCORRECT_REQUEST_INFO_GET_FROM_AFTER_TO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>commonEntityName</con:name><con:value>R_UNIQUE_222</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="7b0f3968-7018-4d8c-b935-b917850c37eb" name="requestGet"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="bcad3845-f43a-4513-b19d-d4e903afdf13" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with origin key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="7917933b-d678-4a0b-80a7-e1ac4074827c"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="608205b5-2a18-4bfa-94e9-cf2e74502cd0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="a5b866f8-39a7-4bdc-a5af-babdf64cdfc1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="69c1d087-ffbc-4619-8dff-ea3845b2d7b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with origin key for Entity" id="ac0e7342-70e4-4781-aba7-28889abf268e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with origin key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            <!--<api:etalonKey id="?"/>
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>accc7cd4-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">accccaf5-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="accc7cd4-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>989582</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="f477fbe2-0593-44c8-a833-7a779b6714c6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with non-existing origin key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="3b7ac7b7-2ca7-4e06-bf83-1b8ab4e2171b"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="803e6c93-d60e-481a-a0ef-3fb6ae245b2b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="88dba10f-b54e-4833-9465-ce2efca68792"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="e84ff134-e6db-490e-a4b8-5f1ec52f585e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with non-existing origin key" id="64d527b1-de44-432d-a789-5a45dafc3ef0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with non-existing origin key" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:originKey id="non-existing-${#TestCase#originKeyID}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            <!--<api:originKey id="non-existing-${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="86281228-95e5-4ae3-8444-5efaff7db468" name="errorCode = EX_DATA_V4_ORIGIN_ID_UUID_INVALID"><con:configuration><path>//@errorCode</path><content>EX_DATA_V4_ORIGIN_ID_UUID_INVALID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>acfbca3b-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">acfbf14c-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="acfbca3b-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>800790</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="e501afab-7c33-4877-8eeb-a2363f7f9924" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with etalon key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="308faf2d-29ee-4ef6-a9b7-4dd00cf73a27"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="782d41b6-9cc4-4bb9-8647-e8732be3dfb6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="7552317d-df07-4c63-af79-734def31d725"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="843f2799-3edc-45f4-9fff-b4c859b01e3e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with etalon key for Entity" id="aa449bf8-b658-4e2c-bb60-7dcacdf82be0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with etalon key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="2016-12-12T18:14:50.632">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="5392bd33-b2f3-4837-8f49-767edf2f1bb7" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="88ff3cdc-49d8-4f99-8e37-22e20f8880db" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>ad24af02-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ad24d613-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="ad24af02-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>711230</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="aa3ca1e6-9c0c-4d08-b708-ecc22725a319" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with non-existing etalon key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="6d3acc6b-8b7d-4567-b2f2-d02fff26876c"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="6e213d61-85bc-4a6a-89d1-de0a37cb3f33"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="ee6cdcbd-5e41-4f11-b694-0f7561cfa2bf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="5ab4bbaa-f821-4e5e-8a45-3047118fa639"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with non-existing etalon key" id="7e6805b4-45a3-441d-9192-56962beed613"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with non-existing etalon key" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:etalonKey id="non-existing-${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6e5642cd-4fe2-4d42-a8f2-e52dd807042e" name="errorCode = EX_DATA_V4_ETALON_ID_UUID_INVALID"><con:configuration><path>//@errorCode</path><content>EX_DATA_V4_ETALON_ID_UUID_INVALID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>ad5ada39-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ad5b767a-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="ad5ada39-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>111654</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="8ad7a3df-287f-4bd3-bfc9-59ff928980af" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with non-existing Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="96b9831e-c89e-4cce-85d9-5cca4eefb275"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="dabc080f-ac3d-421f-8432-6a95f81e0403"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="e77e0519-2c49-4f4a-9c1d-2a04bf7dfc6b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="723921f3-d30b-4d41-9cc5-febb8403f72c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with non-existing Entity" id="cd88cd01-19da-4a1c-83cd-e0671c37603e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with non-existing Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="non-existing-${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">
            
            <api:originKey id="${#TestCase#originKeyID}" sourceSystem="${#TestCase#sourceSystem}" entityName="non-existing-${#TestCase#entityName}"/>
<!--
<api:etalonKey id="?"/>
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
     -->       
         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>ada2dfc0-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ada3a311-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="ada2dfc0-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>932828</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="a0b9a77d-4327-4981-aba4-d592216c6992" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with etalon key for lookupEntity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="a8ed8df1-9842-42bf-9844-ed7033c5a19f"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="3539dbbd-404c-4d22-a496-08fc4b3609c7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="c6d90e44-94be-4110-a921-907f76da1d8c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">\r
            <!--<api:etalonRecord>-->\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
            <!--<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>-->\r
            <!--<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>-->\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="dd9250d6-97b7-4f80-94ed-a311e1fca3b0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with etalon key for lookupEntity" id="ab1bd2d3-ea26-4fcb-ae5c-dddb8a7bc701"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with etalon key for lookupEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="5392bd33-b2f3-4837-8f49-767edf2f1bb7" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="88ff3cdc-49d8-4f99-8e37-22e20f8880db" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>addb7bf7-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">addba308-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="addb7bf7-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>128523</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="KOD"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:codeAttribute> <data:simpleAttribute name="NAME"> <data:stringValue>test string ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="e19487d0-c292-4cd8-9e45-82b9207ffd69" name="requestGetDataQualityErrors___IN_PROGRESS" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="08c1982b-9624-41a4-9c48-4e0ae0b8c88b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGetDataQualityErrors with origin key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="e5d6d863-899a-4c97-8464-78a048f88f6b"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="139274aa-8d10-45da-bf0a-5039e0445447"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="b183724e-6968-43b9-a18b-ad2bc48a4833"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="1e190e9a-3ffa-4b9b-b910-f5b76e47c076"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. GetDataQualityErrors with origin key for Entity" id="02c8d572-9ad2-4c58-82f6-fa0e7df24763"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. GetDataQualityErrors with origin key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGetDataQualityErrors entityName="R_DQ" forDate="${#TestCase#asOf}">\r
            <api:etalonKey id="11302f69-6bc1-11e7-abb3-87ba01ce01e0"/>\r
            <!--<api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGetDataQualityErrors>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>971efc2e-72d5-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">971f4a4f-72d5-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="971efc2e-72d5-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>502691</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="a928c006-e9e2-4e38-81a1-7ecae4c9ab25" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with non-existing origin key___UN-5331" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="4f9ee6ca-97de-41bc-8bc6-0a708cd098b6"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="d05da664-ddbf-4715-92ff-a05f54f32afe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="a51900c2-d80d-4109-b16e-8ab28a8af19e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="650369a4-d113-4cc0-9c7b-a5c5e8284fb5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with non-existing origin key" id="be6c44a4-1a90-43e4-9309-e7f5d9d02cfd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with non-existing origin key" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:originKey id="non-existing-${#TestCase#originKeyID}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            <!--<api:originKey id="non-existing-${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="86281228-95e5-4ae3-8444-5efaff7db468" name="errorCode = EX_DATA_GET_NOT_FOUND_BY_SUPPLIED_KEYS"><con:configuration><path>//@errorCode</path><content>EX_DATA_GET_NOT_FOUND_BY_SUPPLIED_KEYS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a959a1f0-3871-4de8-91da-ab41c4e6dfeb</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">d593c00e-f417-4984-98c0-a336d3b248b7</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="a959a1f0-3871-4de8-91da-ab41c4e6dfeb" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>258273</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="0ecab5bb-7b23-4587-9ea0-54ecf584cf72" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with etalon key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="2e79ef98-be39-4bd9-825a-ef1c44a0900b"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="24e6340d-1993-433d-859b-42f17b0e6163"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="c44d76c6-52f6-4181-b569-362d9db0ee63"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="fb752e8a-ac4e-4a8a-b4c9-4ff627cf23eb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with etalon key for Entity" id="cfc27a41-5c86-4848-9515-670074cdd1c0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with etalon key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="2016-12-12T18:14:50.632">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="5392bd33-b2f3-4837-8f49-767edf2f1bb7" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="88ff3cdc-49d8-4f99-8e37-22e20f8880db" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>14764676-61ac-4191-bde9-c8f79687a00f</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">3f3675ae-3962-472b-b14c-bc12e262caf7</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="14764676-61ac-4191-bde9-c8f79687a00f" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>666133</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="a0718f11-40d5-413b-97ef-2c1101cc3b4b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with non-existing etalon key___UN-5331" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="40107dfe-4672-4e01-b5cf-2b72147f4725"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="447914e8-b7e0-4a95-af5c-768201d21723"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="654a403e-8732-4408-92d5-732462ff1519"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="20028e19-c215-42b1-8fc8-5aa83c0932f6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with non-existing etalon key" id="fbdd9502-2ad4-4d54-b1a3-8e17be49a246"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with non-existing etalon key" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">
            
             <api:etalonKey id="non-existing-${#TestCase#etalonKeyID}"/>          
<!--

            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
     -->       
         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6e5642cd-4fe2-4d42-a8f2-e52dd807042e" name="errorCode = EX_DATA_GET_NOT_FOUND_BY_SUPPLIED_KEYS"><con:configuration><path>//@errorCode</path><content>EX_DATA_GET_NOT_FOUND_BY_SUPPLIED_KEYS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>6cf12f3e-89cf-44ef-b888-5d721313dd43</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1a046d20-0251-4455-91f5-0b26d5da82fc</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="6cf12f3e-89cf-44ef-b888-5d721313dd43" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>464503</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="e780a5e1-0546-4d29-89e6-f34a0c50bbf0" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with non-existing Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="a0e4dce2-a8ee-419c-bd3f-91923b359b60"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="4f05d982-f026-4a42-bc06-866557521712"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="cba8a53f-282e-40d2-aa8b-ff2448021f7d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

<!--
 <api:etalonRecord>
 -->
 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
<!--
<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>
-->


<!--
<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>
-->
 
 
   </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="bcfadaae-0218-4267-a901-2f7364c56f6f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with non-existing Entity" id="50fa0aed-31b2-47e5-8a55-e66576b6a69f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with non-existing Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="non-existing-${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">
            
            <api:originKey id="${#TestCase#originKeyID}" sourceSystem="${#TestCase#sourceSystem}" entityName="non-existing-${#TestCase#entityName}"/>
<!--
<api:etalonKey id="?"/>
            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
     -->       
         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>2839791b-32dc-4a47-8241-bebc84c2204a</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">d7a25966-97ae-450c-8d3a-6ab7630cbbdc</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="2839791b-32dc-4a47-8241-bebc84c2204a" xmlns="http://api.mdm.unidata.com/v3/" xmlns:ns2="http://data.mdm.unidata.com/v3/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>706247</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="17312485-0d26-41ce-bd15-a0767c3bcd46" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestGet with etalon key for lookupEntity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="4e4e48ea-5b52-4ded-8e38-8a0081d249ee"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="891ef07c-c24c-43a1-b3d8-d5be4f96b9ff"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="df599c3e-e400-4ced-89d7-2d9a03de1d17"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">\r
            <!--<api:etalonRecord>-->\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
            <!--<data:etalonKey id="be707a26-4c16-421d-865b-90b2169aa127"/>
 </api:etalonRecord>-->\r
            <!--<api:originRecord>
<data:simpleAttribute name="LAST_NAME">
<data:stringValue>Василидзе</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="FIRST_NAME">
<data:stringValue>123пАнКрАТ</data:stringValue>
</data:simpleAttribute>
<data:simpleAttribute name="num_passp_attr2">
<data:intValue>1130965</data:intValue>
</data:simpleAttribute>
<data:originKey externalId="110sdfsdf11" sourceSystem="data_steward" entityName="R_IMP"/>
 </api:originRecord>-->\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="a41c0a44-c655-4b23-be35-6e4bb151cc93"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestGet with etalon key for lookupEntity" id="7bc6ff11-4149-4238-96e9-42230ebbc257"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestGet with etalon key for lookupEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>-->\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="5392bd33-b2f3-4837-8f49-767edf2f1bb7" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="88ff3cdc-49d8-4f99-8e37-22e20f8880db" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>rangeFrom</con:name><con:value>1900-01-01T00:00:00.000</con:value></con:property><con:property><con:name>rangeTo</con:name><con:value>9999-12-31T00:00:00.000</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-15T00:00:00.000</con:value></con:property><con:property><con:name>originAsOf</con:name><con:value>2016-02-16T00:00:00.000</con:value></con:property><con:property><con:name>etalonHistory</con:name><con:value>true</con:value></con:property><con:property><con:name>softDeleted</con:name><con:value>false</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>2620e7fd-5812-4455-ad94-e4b61d7fb7fa</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>buff</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>randomData1</con:name><con:value>699175</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>string_${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>соап тест автоматизьен ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="KOD"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:codeAttribute> <data:simpleAttribute name="NAME"> <data:stringValue>test string ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="f6674e3a-8ef6-4fc9-86ad-3cd64323b672" name="requestRelationsGet"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="61f3cfff-bfd1-44fc-a537-793b0c9453df" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsGet with etalon key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b6751a7b-88ef-47dd-89eb-7c01a0ae16e2"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random
asdf =  random +1</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="ed4306fd-aabf-4e1c-b548-cc3aa85e6972"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="b3b8f67b-9cc5-4903-8ad3-2d647e6e6ed4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="4494b062-f48a-4bc4-a820-6120e1f2b351"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer refEtalonKey to Upsert" id="f5bb07df-a68f-41e6-b7ab-b85dd4c3325c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="aed6b5d4-abf8-43bd-af71-c903c751c123"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="53137806-e5cf-45b1-b824-a7d5746c379b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsGet with etalon key for Entity" id="70470051-f4e1-4a15-8bd9-778c094dab60"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsGet with etalon key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="2016-11-29T00:00:00.000">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/>-->\r
            <!--1 or more repetitions:-->\r
            <api:relations>${#TestCase#relName1}</api:relations>\r
            <!--<api:relations>${#TestCase#relName2}</api:relations>-->\r
         </api:requestRelationsGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a4f7ca20-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a4f7f131-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="a4f7ca20-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>949933</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>725815</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>a4e0e6ba-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-21T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="7e79aa9a-f364-47e2-896f-01e530409bf3" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsGet with origin key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="04cc0d4e-698b-4bf4-81c8-4ca11c736ab6"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random
asdf =  random +1</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="6256e9e3-9199-4a29-838e-4a5811e92279"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="b9799975-b81d-4d85-aa8d-6e3b91b87724"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="0ab25ca8-447c-45ca-8b49-282ac1ad9c67"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer refEtalonKey to Upsert" id="c6e52f74-9c61-4cbc-ab5f-34a20691bc68"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="b2b651c6-03f1-4cac-a8a9-6ed070aadff3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="27a36829-12a6-4e74-aaff-0702830a5082"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsGet with origin key for Entity" id="a736df4c-628d-4a42-9bd2-c9f53c315fd4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsGet with origin key for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}">
            
            <!-- <api:etalonKey id="${#TestCase#etalonKeyID}"/> -->
            <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a5496ca1-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a54993b2-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="a5496ca1-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>287333</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>972958</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>a53129ab-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-21T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="285684bb-c6bd-4b03-97d5-7e8ca15cc48f" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsGet from record without relation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="c60316c1-4176-4531-9756-f07fc1f1132d"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random
asdf =  random +1</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="05e1d16d-6625-4bd8-87aa-99a9c1273c35"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="4fa19c60-6e57-4b9b-a91c-8b2cc84a9e25"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="81dac634-bc5d-48da-ad4b-2f174710d7fd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer refEtalonKey to Upsert" id="1c3e6643-e815-41f5-a5a3-605a973259dc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="47bef034-8e23-40b3-966e-c2c144d6bbda"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="b0ee998d-26f6-4124-ab86-89eab009928a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsGet with etalon without relation" id="63382c35-5e4a-4670-8ad7-eefa01e60876"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsGet with etalon without relation" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}">
            
            <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>

            <!--1 or more repetitions:   -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="Simple Contains" id="79124381-fc32-4599-bc74-82df1a38dbc0" name="Contains empty response"><con:configuration><token> &lt;responseRelationsGet>
            &lt;relations/>
         &lt;/responseRelationsGet>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a59828f2-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a5985003-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="a59828f2-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>180147</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>912207</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>a57f70cc-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-21T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="87035270-b641-4b6d-9444-656c6520e369" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsGet with non-existing relation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="3b6e4d49-3a32-42d6-b99e-3dbed69e90f6"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random
asdf =  random +1</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="90467551-cb83-4c4b-9a0a-dc2c8401753e"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="c1697b38-df88-4bea-8ae8-af7093699a03"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="5f3bbfce-feb7-4a98-99c3-bf5de1d76304"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer refEtalonKey to Upsert" id="01e4b065-08fd-452b-bfb8-60fccb191af0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="7bd482e9-58f9-435a-98f4-7167bec3260a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="a0a6b2d2-ce43-4d3f-9f6d-e374f724dc89"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsGet with non-existing relation" id="f6222b42-73fc-4cd9-8183-5962b8a218b6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsGet with non-existing relation" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>

            <!--1 or more repetitions:   -->
            <api:relations>non-existing-${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="01b00878-e4ff-4692-9364-fefd4df7a0c8" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="ca83a43f-854c-4546-814a-7134a8a015de" name="errorCode = EX_DATA_RELATIONS_GET_RELATION_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_DATA_RELATIONS_GET_RELATION_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a5e7f5b3-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a5e81cc4-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="a5e7f5b3-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>423463</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>826454</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>a5d1616d-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>asOf</con:name><con:value>2016-07-21T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="fd61eede-606f-4f8f-b16e-427644fae5e8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check asOf parameter (many-to-many)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="3da8943f-8b4f-4380-9111-b9aadda83a37"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
rand3 = new Random().nextInt(999999 - 100000) + 100000
rand4 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData11", rand2.toString())
testRunner.testCase.setPropertyValue("randomData12", rand3.toString())
testRunner.testCase.setPropertyValue("randomData13", rand4.toString())</script></con:config></con:testStep><con:testStep type="request" name="2. Upsert first record to refEntity" id="f0c67a58-71a9-44e0-b1b6-38054228b8ce"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="2. Upsert first record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs1}

<data:originKey externalId="${#TestCase#randomData11}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="3. Upsert second record to refEntity" id="389ef55e-3f90-4082-9ed7-2c0838035c90"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert second record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs2}

<data:originKey externalId="${#TestCase#randomData12}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="4. Upsert third record to refEntity" id="9ac012ed-26f4-4346-beac-da1c941661e2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert third record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs3}

<data:originKey externalId="${#TestCase#randomData13}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="6bbd8bdb-b2b4-4762-a573-b559caceb58b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. buff to refEtalonKeyID1</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to refOriginKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. buff to refEtalonKeyID2</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to refOriginKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. buff to refEtalonKeyID3</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to refOriginKeyID3</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="1515e648-8de3-4d4d-8a82-94b702c24b77"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

   		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID1}"/>
                        </api:relationTo>
                        ${#TestCase#range1}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range1}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="ec6b6804-3c90-4dc3-9744-c0479270bc20"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID2}"/>
                        </api:relationTo>
                        ${#TestCase#range2}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range2}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="601a3ec6-1242-494f-811c-b72cbf9cd3de"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID3}"/>
                        </api:relationTo>
                         ${#TestCase#range3}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range3}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer origin and etalon keys to properties" id="34963e62-399f-4634-938e-8d0d087ce62d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to etalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Do requestRelationsGet for record with asOf from first period" id="891efe2e-0927-40b2-aa99-45322066dc59"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Do requestRelationsGet for record with asOf from first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf1}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/>-->\r
            <!--1 or more repetitions:-->\r
            <api:relations>${#TestCase#relName1}</api:relations>\r
            <!--<api:relations>${#TestCase#relName2}</api:relations>-->\r
         </api:requestRelationsGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID1"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsGet for record with asOf from second period" id="fe818f7b-b152-45f2-b704-fdb731438211"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsGet for record with asOf from second period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf2}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID2"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID2}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Do requestRelationsGet for record with asOf from third period" id="1a65398c-7181-40c2-a67c-18994ac065f3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Do requestRelationsGet for record with asOf from third period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf3}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID3"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID3}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MNOGIE</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="attr_simp_mnogie">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a66ae170-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a66b0881-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="a66ae170-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>488671</con:value></con:property><con:property><con:name>randomData11</con:name><con:value>851360</con:value></con:property><con:property><con:name>randomData12</con:name><con:value>984208</con:value></con:property><con:property><con:name>randomData13</con:name><con:value>617411</con:value></con:property><con:property><con:name>range1</con:name><con:value>&lt;api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/></con:value></con:property><con:property><con:name>range2</con:name><con:value>&lt;api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/></con:value></con:property><con:property><con:name>range3</con:name><con:value>&lt;api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/></con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs1</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData11}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs2</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData12}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs3</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData13}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID1</con:name><con:value>a6212e2e-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEtalonKeyID2</con:name><con:value>a63ca574-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEtalonKeyID3</con:name><con:value>a6533aba-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID1</con:name><con:value>a621553f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID2</con:name><con:value>a63ccc85-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID3</con:name><con:value>a65361cb-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>relName1</con:name><con:value>MNOG_2_MNOG</con:value></con:property><con:property><con:name>asOf1</con:name><con:value>2016-07-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf2</con:name><con:value>2016-08-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf3</con:name><con:value>2016-09-11T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="f8a0784d-d756-43fc-8710-3a31e6e00ecf" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check asOf parameter (reference)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="5453682a-d001-47ef-8cad-d70e1ef8f802"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
rand3 = new Random().nextInt(999999 - 100000) + 100000
rand4 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData11", rand2.toString())
testRunner.testCase.setPropertyValue("randomData12", rand3.toString())
testRunner.testCase.setPropertyValue("randomData13", rand4.toString())</script></con:config></con:testStep><con:testStep type="request" name="2. Upsert first record to refEntity" id="4e98b35d-d6da-4024-82ae-ac124278a820"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="2. Upsert first record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs1}

<data:originKey externalId="${#TestCase#randomData11}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="3. Upsert second record to refEntity" id="1560b504-5829-4581-b463-d92d4cf5093e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert second record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs2}

<data:originKey externalId="${#TestCase#randomData12}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="4. Upsert third record to refEntity" id="eea9bab2-33a5-4d59-b03b-38ac413bc7d8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert third record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs3}

<data:originKey externalId="${#TestCase#randomData13}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="ebaecdcd-3ba1-47fb-aa7b-6e48108a45f3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. buff to refEtalonKeyID1</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to refOriginKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. buff to refEtalonKeyID2</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to refOriginKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. buff to refEtalonKeyID3</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to refOriginKeyID3</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="1dbffb69-f9f8-4a9b-8356-cdeb15c2c3bf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

   		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID1}"/>
                        </api:relationTo>
                        ${#TestCase#range1}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range1}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="10ef6eb2-ad38-4d34-a433-143ab6e29863"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID2}"/>
                        </api:relationTo>
                        ${#TestCase#range2}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range2}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="309fe8cd-75db-4a05-9f9b-ed8bb43fb1c4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID3}"/>
                        </api:relationTo>
                         ${#TestCase#range3}
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range3}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer origin and etalon keys to properties" id="3333e720-55fe-4346-9be2-713312107343"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to etalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Do requestRelationsGet for record with asOf from first period" id="1c05e800-a640-4ffc-9cf5-9d2096898654"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Do requestRelationsGet for record with asOf from first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf1}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID1"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsGet for record with asOf from second period" id="cdc9e6f1-f58a-4bc2-893d-a97db340fc6c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsGet for record with asOf from second period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf2}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID2"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID2}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Do requestRelationsGet for record with asOf from third period" id="f7f896fc-df88-4332-9bf2-9af55b408449"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Do requestRelationsGet for record with asOf from third period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf3}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID3"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID3}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a761016b-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a761287c-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="a761016b-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>557968</con:value></con:property><con:property><con:name>randomData11</con:name><con:value>959510</con:value></con:property><con:property><con:name>randomData12</con:name><con:value>847594</con:value></con:property><con:property><con:name>randomData13</con:name><con:value>684972</con:value></con:property><con:property><con:name>range1</con:name><con:value>&lt;api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/></con:value></con:property><con:property><con:name>range2</con:name><con:value>&lt;api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/></con:value></con:property><con:property><con:name>range3</con:name><con:value>&lt;api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/></con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs1</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData11}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs2</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData12}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs3</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData13}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID1</con:name><con:value>a71b6cd9-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEtalonKeyID2</con:name><con:value>a731b3ff-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEtalonKeyID3</con:name><con:value>a7487055-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID1</con:name><con:value>a71bbafa-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID2</con:name><con:value>a731db10-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID3</con:name><con:value>a7489766-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>asOf1</con:name><con:value>2016-07-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf2</con:name><con:value>2016-08-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf3</con:name><con:value>2016-09-11T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:testCase id="96e714db-a0a5-4b2a-93dd-da6eb87e2fd2" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check asOf parameter (reference status)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="88ab151a-32b7-4af5-aeeb-4572f49a8712"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
rand3 = new Random().nextInt(999999 - 100000) + 100000
rand4 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData11", rand2.toString())
testRunner.testCase.setPropertyValue("randomData12", rand3.toString())
testRunner.testCase.setPropertyValue("randomData13", rand4.toString())</script></con:config></con:testStep><con:testStep type="request" name="2. Upsert first record to refEntity" id="51794671-8ba8-4469-ab88-02b72de69aab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="2. Upsert first record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs1}

<data:originKey externalId="${#TestCase#randomData11}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="3. Upsert second record to refEntity" id="2177f99b-9e0c-435a-bfdd-45c2f0e34563"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert second record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs2}

<data:originKey externalId="${#TestCase#randomData12}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="4. Upsert third record to refEntity" id="ec7f0a1f-2576-4b60-87f2-a7f5153c5c93"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert third record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs3}

<data:originKey externalId="${#TestCase#randomData13}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="f578e8e9-b360-41a0-8bdd-27b4db7ec497"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. buff to refEtalonKeyID1</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1. data to refOriginKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Upsert first record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. buff to refEtalonKeyID2</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2. data to refOriginKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert second record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. buff to refEtalonKeyID3</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3. data to refOriginKeyID3</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert third record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="4ea3df36-5a96-40cd-ad0a-c82a153322f9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity with first period and relation to first record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

   		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID1}"/>
                        </api:relationTo>
                        
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range1}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="a2c0193f-c823-49f4-96c2-7563f07f8a16"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record to Entity with second period and relation to second record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID2}"/>
                        </api:relationTo>
                        
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range2}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="168f8ad2-f951-4c16-9fda-cc208dfdd65f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Upsert record to Entity with third period and relation to third record of refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID3}"/>
                        </api:relationTo>
                         
                  </api:record>
               </api:relation>
            </api:relations>

${#TestCase#range3}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer origin and etalon keys to properties" id="5b3498fe-7f64-4eff-9899-b0aab6e24cf7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity with first period and relation to first record of refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to etalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Do requestRelationsGet for record with asOf from first period" id="c9bfb9b6-728f-4e30-82de-18e44942a39e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Do requestRelationsGet for record with asOf from first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf1}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = LAST refEtalonKeyID1"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsGet for record with asOf from second period" id="ea6abc1f-66f0-4d7e-b41c-614dcc339b28" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsGet for record with asOf from second period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf2}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = LAST refEtalonKeyID1"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Do requestRelationsGet for record with asOf from third period" id="257a6fe1-fdea-4cda-8f46-0fee38675e40" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Do requestRelationsGet for record with asOf from third period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
         <api:requestRelationsGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf3}">
            
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="481c3856-9875-4c61-9c7a-8ec03b7783ef" externalId="10bc08eb-6372-401a-8e6c-5ded173ee778" sourceSystem="data_steward" entityName="R_MASTER"/> -->
            
            <!--1 or more repetitions:  -->
            <api:relations>${#TestCase#relName1}</api:relations>
            <!-- <api:relations>${#TestCase#relName2}</api:relations>   -->
            
         </api:requestRelationsGet>
	  </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success" disabled="true"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED" disabled="true"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:toEtalonKey[@id]</path><content>&lt;ns2:toEtalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="toOriginKey" disabled="true"><con:configuration><path>//*:toOriginKey[@id]</path><content>&lt;ns2:toOriginKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ac8ff30-74d5-4e42-9919-6dd5a21690f0" name="toEtalonKey = refEtalonKeyID3"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="jdbc" name="13. Check status of first relation at DB" id="658b9407-8583-4421-8600-ad7fa080801c" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where etalon_id_to = '${#TestCase#refEtalonKeyID1}';
</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="14. Check status of second relation at DB" id="485889fd-20ca-4145-bc00-9baf71a0b2f9" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where etalon_id_to = '${#TestCase#refEtalonKeyID2}';
</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="15. Check status of third relation at DB" id="8fd6f441-e95d-4d93-b233-5220b84c111a" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where etalon_id_to = '${#TestCase#refEtalonKeyID3}';
</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = ACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>5c1961c8-6719-11e7-b2b6-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5c1988d9-6719-11e7-b2b6-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="5bf38a42-6719-11e7-b2b6-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>239871</con:value></con:property><con:property><con:name>randomData11</con:name><con:value>896198</con:value></con:property><con:property><con:name>randomData12</con:name><con:value>286652</con:value></con:property><con:property><con:name>randomData13</con:name><con:value>780256</con:value></con:property><con:property><con:name>range1</con:name><con:value>&lt;api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/></con:value></con:property><con:property><con:name>range2</con:name><con:value>&lt;api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/></con:value></con:property><con:property><con:name>range3</con:name><con:value>&lt;api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/></con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs1</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData11}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs2</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData12}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEnt_attrs3</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData13}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID1</con:name><con:value>5b7be936-6719-11e7-b2b6-87ba01ce01e0</con:value></con:property><con:property><con:name>refEtalonKeyID2</con:name><con:value>5bd1834c-6719-11e7-b2b6-87ba01ce01e0</con:value></con:property><con:property><con:name>refEtalonKeyID3</con:name><con:value>5bf38a42-6719-11e7-b2b6-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID1</con:name><con:value>5b8510f7-6719-11e7-b2b6-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID2</con:name><con:value>5bd1aa5d-6719-11e7-b2b6-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID3</con:name><con:value>5bf3d863-6719-11e7-b2b6-87ba01ce01e0</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>asOf1</con:name><con:value>2016-07-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf2</con:name><con:value>2016-08-11T00:00:00.000</con:value></con:property><con:property><con:name>asOf3</con:name><con:value>2016-09-11T00:00:00.000</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="c4af1628-6b2f-4aa4-acad-a19fdefda017" name="requestSearch"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="aa0150fb-7a02-4655-a92e-c0b74906534e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestSearch for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="d0e853f4-5780-4793-9cb5-1925a0eaf0f5"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="ddc41962-9210-41b9-b1ac-3e95eaf80630"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="43a706e9-2ec6-4703-b450-237d8b201f02"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to Entity" id="eae08bc4-5cba-45c1-812b-8a161811bc9a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer origin and etalon keys to properties" id="e1b3016a-5dc3-4e29-a6f4-ceae430163c8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Do requestSearch for Entity" id="9f7e7617-513c-4aeb-987d-61bdf297346e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Do requestSearch for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">\r
            <api:searchCondition>${#TestCase#search_condition}</api:searchCondition>\r
         </api:requestSearch>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 1" disabled="true"><con:configuration><path>//@count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>9ea6d04f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9ea71e70-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="9ea6d04f-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>731577</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:35.229</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="45c03bc1-a33e-464d-947c-d6ffb97b0be8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestSearch for Entity with string attributes" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="5221dd53-345a-4328-aee3-a3fa505fcfaa"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="4a35704f-d3f9-4714-bc26-292c8a5997ad"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="a8af4f4c-c337-4fc5-843e-b59caf61f4e9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to Entity" id="8fd02033-f277-4598-95b4-6bcd05bc8392"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer origin and etalon keys to properties" id="46a568f4-d5a4-4997-a077-78757bd2b65b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Do requestSearch for Entity" id="00f5541c-a0c1-4beb-a00a-34c6b4348e50"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Do requestSearch for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">
            <api:searchCondition>${#TestCase#search_condition}</api:searchCondition>
         </api:requestSearch>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 1" disabled="true"><con:configuration><path>//@count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>9ed9ee47-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9eda1558-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="9ed9ee47-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>806768</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:35.656</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"><data:intValue>${#TestCase#randomData1}</data:intValue></data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"><data:stringValue>Земля в иллюминаторе видна</data:stringValue></data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"><data:stringValue>А звезды тем не менее</data:stringValue></data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value>&lt;api:atom attributeName="r_cons_atr1" operator="EQUALS" constant="Земля в иллюминаторе видна"/></con:value></con:property></con:properties></con:testCase><con:testCase id="86fc7db0-bbf4-4848-9e45-bea1626c48d3" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search three records with OR condition" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="6bfcb4bb-9066-4071-876d-b605dae2b847"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
rand3 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())
testRunner.testCase.setPropertyValue("randomData3", rand3.toString())</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="2794fcfd-837e-4b68-a97b-13bab323db44"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="3. Bulk Upsert records to Entity" id="80721f5c-64a4-4a8e-94d9-8809ac201e61"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Bulk Upsert records to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestBulkUpsert>\r
            <!--1 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs1}\r
                  <data:originKey externalId="${#TestCase#randomData1}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--2 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs2}\r
                  <data:originKey externalId="${#TestCase#randomData2}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--3 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs3}\r
                  <data:originKey externalId="${#TestCase#randomData3}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
         </api:requestBulkUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="f2e3c529-a02f-45e4-9cab-30d7c8358910"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[1]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[2]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[3]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. requestSearch for two records" id="e17bc20d-d12f-4029-bf3a-cbe3255f52dd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. requestSearch for two records" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">\r
            <api:searchCondition>${#TestCase#search_condition_2}</api:searchCondition>\r
         </api:requestSearch>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 2"><con:configuration><path>//@count</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. requestSearch for three records" id="f96277aa-4429-43e6-a7a4-1cb940d80af4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. requestSearch for three records" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">\r
            <api:searchCondition>${#TestCase#search_condition_3}</api:searchCondition>\r
         </api:requestSearch>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 2"><con:configuration><path>//@count</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>9f0d5a5f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>9f145f44-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID3</con:name><con:value>9f1b1609-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9f0dcf90-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>9f148655-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID3</con:name><con:value>9f1b3d1a-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="9f1b1609-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>552320</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>534317</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>304176</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:35.976</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs3</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData3}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>search_condition_2</con:name><con:value>&lt;api:or>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData2}"/>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/>&lt;/api:or></con:value></con:property><con:property><con:name>search_condition_3</con:name><con:value>&lt;api:or>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData2}"/>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData3}"/>&lt;/api:or></con:value></con:property></con:properties></con:testCase><con:testCase id="d0cb79ee-adae-48f4-85aa-e3f96449ca7b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search two equals records with OR condition" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1acda3e2-8603-40dd-88df-6efdc78127e3"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
rand3 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())
testRunner.testCase.setPropertyValue("randomData3", rand3.toString())</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="7dccbd13-2fd9-401b-8891-460513bd6b94"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="3. Bulk Upsert records to Entity" id="d8ab4cd5-321a-46c7-a9f7-c45803233001"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Bulk Upsert records to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestBulkUpsert>\r
            <!--1 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs1}\r
                  <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--2 record, same on first-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                <!--  ${#TestCase#ent_attrs2}\r -->
                  ${#TestCase#ent_attrs1}

                  <data:originKey externalId="${#TestCase#randomData2}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--3 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs3}\r
                  <data:originKey externalId="${#TestCase#randomData3}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
         </api:requestBulkUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="9d6df8c6-5eb9-454e-ae7a-76132c0e11bd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[1]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[2]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[3]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. requestSearch for two records" id="43c58e27-3c60-41af-970e-0b4a95a5d881"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. requestSearch for two records" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">\r
            <api:searchCondition>${#TestCase#search_condition}</api:searchCondition>\r
         </api:requestSearch>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 3"><con:configuration><path>//@count</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>9f7e1da3-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>9f87e1a8-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID3</con:name><con:value>9f94d9fd-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9f7e44b4-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>9f8808b9-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID3</con:name><con:value>9f954f2e-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="9f94d9fd-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>303376</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>607803</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>620532</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:36.729</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs3</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData3}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>search_condition</con:name><con:value>&lt;api:or>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData3}"/>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/>&lt;/api:or></con:value></con:property></con:properties></con:testCase><con:testCase id="dc992636-0c06-4198-85e5-654f94894a3d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search condition (a OR b)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="d8f005ae-af3c-4730-93ef-14a97019b3e2"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
//rand3 = new Random().nextInt(999999 - 100000) + 100000
//rand4 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())
testRunner.testCase.setPropertyValue("randomData3", rand1.toString())
testRunner.testCase.setPropertyValue("randomData4", rand2.toString())</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="b1739e47-8183-4bfb-9d06-356f194aeae0"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="3. Bulk Upsert records to Entity" id="d7f8fd41-419c-4550-8fbf-3c7f56dcfd09"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Bulk Upsert records to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestBulkUpsert>\r
            <!--1 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs1}\r
                  <data:originKey externalId="${#TestCase#randomData1}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--2 record, same on first-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  <!--${#TestCase#ent_attrs2}-->\r
                  ${#TestCase#ent_attrs2}\r
                  <data:originKey externalId="${#TestCase#randomData2}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--3 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs3}\r
                  <data:originKey externalId="${#TestCase#randomData3}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--4 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs4}\r
                  <data:originKey externalId="${#TestCase#randomData4}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
         </api:requestBulkUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="3c17810b-cd88-4d20-b86b-aa0edced8ecd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[1]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[2]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[3]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[4]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>clear buff</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Get data with search condition (a OR b)" id="72ea4daf-72b1-4584-9a1a-fe0cb007c0b6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Get data with search condition (a OR b)" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">
            <api:searchCondition>${#TestCase#search_condition}</api:searchCondition>
         </api:requestSearch>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 3" disabled="true"><con:configuration><path>//@count</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>237090</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>785702</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>237090</con:value></con:property><con:property><con:name>randomData4</con:name><con:value>785702</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:37.223</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>9fc95785-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>9fd2a65a-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID3</con:name><con:value>9fd73a3f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID4</con:name><con:value>9fdc1c44-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>originKeyID1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9fc97e96-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>9fd2f47b-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID3</con:name><con:value>9fd76150-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID4</con:name><con:value>9fdc4355-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Строка ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Строка ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs3</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData3}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue></data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs4</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData4}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue></data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value>&lt;api:or> 	&lt;api:atom attributeName="r_cons_c_attr" operator="EQUALS" constant="${#TestCase#randomData1}"/> 	&lt;api:atom attributeName="r_cons_c_attr" operator="EQUALS" constant="${#TestCase#randomData2}"/> &lt;/api:or></con:value></con:property></con:properties></con:testCase><con:testCase id="bc9e3ed0-18ab-4f91-b2f7-e498b4ad94fd" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search condition (a OR b) AND x" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="0f1fadfc-6c68-495b-a55f-c85b2ba6e59e"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
//rand3 = new Random().nextInt(999999 - 100000) + 100000
//rand4 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())
testRunner.testCase.setPropertyValue("randomData3", rand1.toString())
testRunner.testCase.setPropertyValue("randomData4", rand2.toString())</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="60bf816c-4d57-4431-87c4-8b0d0a10d795"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="3. Bulk Upsert records to Entity" id="38de9547-fa47-493d-8218-c6817dec2a3a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Bulk Upsert records to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestBulkUpsert>\r
            <!--1 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs1}\r
                  <data:originKey externalId="${#TestCase#randomData1}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--2 record, same on first-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  <!--${#TestCase#ent_attrs2}-->\r
                  ${#TestCase#ent_attrs2}\r
                  <data:originKey externalId="${#TestCase#randomData2}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--3 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs3}\r
                  <data:originKey externalId="${#TestCase#randomData3}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--4 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs4}\r
                  <data:originKey externalId="${#TestCase#randomData4}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
         </api:requestBulkUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="ff28fedc-0493-4a18-bc12-733e3b298833"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[1]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[2]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[3]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[4]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>clear buff</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Get data with search condition (a OR b) AND x" id="fef9905b-d759-48f4-a151-a6f1bf4cf12b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Get data with search condition (a OR b) AND x" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">\r
            <api:searchCondition>${#TestCase#search_condition}</api:searchCondition>\r
         </api:requestSearch>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 3" disabled="true"><con:configuration><path>//@count</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>106306</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>830525</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>106306</con:value></con:property><con:property><con:name>randomData4</con:name><con:value>830525</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:37.714</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>a0141c3c-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>a0188911-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID3</con:name><con:value>a0202a36-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID4</con:name><con:value>a0255a5b-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>originKeyID1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a014434d-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>a018d732-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID3</con:name><con:value>a0205147-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID4</con:name><con:value>a025816c-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Строка ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Строка ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs3</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData3}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue></data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs4</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData4}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue></data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value><![CDATA[<api:and> 	<api:or> 		<api:atom attributeName="r_cons_c_attr" operator="EQUALS" constant="${#TestCase#randomData1}"/> 		<api:atom attributeName="r_cons_c_attr" operator="EQUALS" constant="${#TestCase#randomData2}"/> 	</api:or> 	<api:atom attributeName="r_cons_atr1" operator="EQUALS" constant="Строка ${#TestCase#randomData1}"/> </api:and>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="52b55d7c-bacf-4c86-8e7b-887d43ccbf89" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search condition (a OR b) AND (x OR y)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="6aa643ff-3c36-4aae-bdfd-79299291ed46"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
//rand3 = new Random().nextInt(999999 - 100000) + 100000
//rand4 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())
testRunner.testCase.setPropertyValue("randomData3", rand1.toString())
testRunner.testCase.setPropertyValue("randomData4", rand2.toString())</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="360acfeb-caa0-4759-a0ef-eeea3b8a8851"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="3. Bulk Upsert records to Entity" id="fa6d80ae-2cd0-445e-8af1-17153052a9de"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Bulk Upsert records to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestBulkUpsert>\r
            <!--1 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs1}\r
                  <data:originKey externalId="${#TestCase#randomData1}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--2 record, same on first-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  <!--${#TestCase#ent_attrs2}-->\r
                  ${#TestCase#ent_attrs2}\r
                  <data:originKey externalId="${#TestCase#randomData2}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--3 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs3}\r
                  <data:originKey externalId="${#TestCase#randomData3}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--4 record-->\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs4}\r
                  <data:originKey externalId="${#TestCase#randomData4}-${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
         </api:requestBulkUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="6b6af879-cd73-4c94-8b5a-b3e2dee15398"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>1 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[1]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>1 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[2]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>2 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[3]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>3 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 resp to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Bulk Upsert records to Entity</con:sourceStep><con:sourcePath>//*:upsertRecordResponses[4]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 origin to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 etalon to buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>4 id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>clear buff</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Get data with search condition (a OR b) AND (x OR y)" id="552f73ac-23da-428c-be4f-3959f5a60676"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Get data with search condition (a OR b) AND (x OR y)" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">
            <api:searchCondition>${#TestCase#search_condition}</api:searchCondition>
         </api:requestSearch>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 3" disabled="true"><con:configuration><path>//@count</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>903618</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>109601</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>903618</con:value></con:property><con:property><con:name>randomData4</con:name><con:value>109601</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:38.220</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>a06151f3-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>a070e258-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID3</con:name><con:value>a07a312d-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID4</con:name><con:value>a0815d22-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>originKeyID1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">a0617904-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>a0713079-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID3</con:name><con:value>a07a7f4e-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID4</con:name><con:value>a0818433-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Строка ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Строка ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs3</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData3}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue></data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_attrs4</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData4}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue></data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Значение не востребовано</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value><![CDATA[<api:and> 	<api:or> 		<api:atom attributeName="r_cons_atr1" operator="EQUALS" constant="Строка ${#TestCase#randomData1}"/> 		<api:atom attributeName="r_cons_atr1" operator="EQUALS" constant="Строка ${#TestCase#randomData2}"/> 	</api:or> 	<api:or> 		<api:atom attributeName="r_cons_c_attr" operator="EQUALS" constant="${#TestCase#randomData1}"/> 		<api:atom attributeName="r_cons_c_attr" operator="EQUALS" constant="${#TestCase#randomData2}"/> 	</api:or> </api:and>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="e68b047e-ab42-496c-bf0a-536b15a45555" name="requestUpsert"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="3c5e1b21-d712-4843-9b8b-3d679ce85245" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestUpsert for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="acd036c6-e0e9-4af2-a698-8cd5dd31562c"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="281b7ef5-45e4-436b-8f25-8e8c0d934f6f"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="6b36afd8-cbf1-47c0-94b4-a77ce3bf4ef3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="5a1d880a-a474-4224-b2dc-9742122345ce"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="d96d13b1-6638-4103-bd02-673c725c7478" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Do requestUpsert for Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Do requestUpsert for Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Search for upserted record" id="f4a3900d-3776-4d96-9d23-a9d28c6c0b99" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Search for upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestSearch entityName="${#TestCase#entityName}" returnCount="true" doCountOnly="false" pageSize="10" pageNumber="0" asOf="${#TestCase#currDate}">
         <api:searchCondition>
             
              ${#TestCase#search_condition}
            
            </api:searchCondition>
         </api:requestSearch>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="24fda1d1-452b-4c37-91fb-813cc8645992" name="Count = 1"><con:configuration><path>//@count</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>447020</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:15.379</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="3802cb1f-ec14-4489-aa46-1efa217a134b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for simple attribute" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="787faa47-34b9-4d60-879d-9bc6e575b6e0"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="399d5cbf-bb9b-4ea2-82ad-6885ac13864d"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="79b60dc6-738f-4016-8b13-7db9419214d3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for lookupEntity" id="f243e9d9-349d-4e80-a66e-78edd44c77cd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs_1}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Entity" id="56e75d53-8a33-4241-95bb-acef85a19239"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}
			${#TestCase#ent_complex_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="22e2804c-669e-4e90-bfad-31849764e3c7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="8e910aa3-5a51-4d18-b6c0-4bb19a9a1be2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>2</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="de2cbfe8-c830-4682-a68e-20d447a56d4c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert nested attribute is old"><con:configuration><path>//*:etalonRecord//*[@name='inner_atr_1']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">92fe0acd-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>924997</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:15.583</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr"><data:stringValue>1</data:stringValue></data:simpleAttribute><data:simpleAttribute name="int_atr"><data:intValue>1</data:intValue></data:simpleAttribute><data:simpleAttribute name="spr_atr"><data:intValue>${#TestCase#randomData1}</data:intValue></data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[<data:complexAttribute name="complex_atr"><data:nestedRecord><data:simpleAttribute name="inner_atr_1"><data:stringValue>1</data:stringValue></data:simpleAttribute></data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[<data:codeAttribute name="KOD"><data:intValue>${#TestCase#randomData1}</data:intValue></data:codeAttribute><data:simpleAttribute name="NAME"><data:stringValue>${#TestCase#randomData1}</data:stringValue></data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="98bc0985-64cf-4c72-b507-217e5c550046" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for simple attribute Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b47fd398-45a2-40bc-8c42-5a2c39a6ce98"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="26cb69f2-3c09-4186-bb40-a01acd3b6888"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="b68b9cb8-3bd9-4f7d-9e2b-5a007b29b194"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for linked Lookup entity" id="fe82b2e6-62fc-404d-a44a-f8c5beb89d65"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for linked Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#link_lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#link_lookup_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Lookup entity" id="8b126932-9df6-452a-8695-b04ec3d08fd1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="05810b7a-3317-46ef-bc74-2247b6a1bee2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="1c81b35d-af9f-48e2-b0d0-36e97c38cc13"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs_new}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="93f2dfa0-db45-454f-af07-0be1bab60f34"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">93786afc-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>575974</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:16.376</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="code_atr"><data:stringValue>${#TestCase#randomData1}</data:stringValue></data:codeAttribute><data:simpleAttribute name="string_attr"><data:stringValue>1</data:stringValue></data:simpleAttribute><data:simpleAttribute name="int_atr"><data:intValue>1</data:intValue></data:simpleAttribute><data:simpleAttribute name="spr_atr"><data:intValue>${#TestCase#randomData1}</data:intValue></data:simpleAttribute>]]></con:value></con:property><con:property><con:name>link_lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="KOD"><data:intValue>${#TestCase#randomData1}</data:intValue></data:codeAttribute><data:simpleAttribute name="NAME"><data:stringValue>${#TestCase#randomData1}</data:stringValue></data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_new</con:name><con:value><![CDATA[<data:codeAttribute name="code_atr"><data:stringValue>${#TestCase#randomData1}</data:stringValue></data:codeAttribute><data:simpleAttribute name="string_attr"><data:stringValue>2</data:stringValue></data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="c76824a8-200d-4b0d-b046-33dbcec5ce20" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for complex attribute" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="36b0a751-f92b-4075-9826-946cb82b30bf"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="8cc0cf3a-d07f-4072-b2bc-1fbd34c62044"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="d3de0ea7-5c6a-459a-b0da-852a4ebb6eb9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="f1fc4fbe-1ec8-4b86-91cf-21e62730b8e9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="5f6855f9-86cf-4ff6-bc70-b336d5b2a3aa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="8a08f950-58e2-40eb-84d1-b0be8e7ff45c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

  <data:simpleAttribute name="string_attr">
 <data:stringValue>2</data:stringValue>  
 </data:simpleAttribute>

${#TestCase#ent_complex_attrs_upsert}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="ae9599f2-c1cc-4f28-bde7-51ce7a340fec"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="53d4abe4-c6d2-49eb-9c09-522578af9832" name="Assert count of nested records"><con:configuration><path>count(//*:etalonRecord//*:nestedRecord)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert nested attribute is new"><con:configuration><path>//*:etalonRecord//*[@name='inner_atr_1']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">93d33535-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>818286</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>randomData3</con:name><con:value/></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:17.158</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[  <data:complexAttribute name="complex_atr">    <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>1-1</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>1-1</data:stringValue>  </data:simpleAttribute> </data:nestedRecord>  <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>1-2</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>1-2</data:stringValue>  </data:simpleAttribute> </data:nestedRecord> </data:complexAttribute>   ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>ent_cls_pointer</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs_upsert</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">    <data:nestedRecord>   <data:simpleAttribute name="inner_atr_1">   <data:stringValue>2</data:stringValue>    </data:simpleAttribute>   <data:simpleAttribute name="inner_atr_2"> 	 <data:stringValue>2</data:stringValue>  </data:simpleAttribute> </data:nestedRecord> </data:complexAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="9c3d420f-0f7d-4a5a-81df-4798026ce377" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for non-existing record" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="e96a84f0-be0d-4d2a-ac44-490a0bfaf04d"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="9125bf40-f20d-4b06-96aa-f029cef6644e"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="07d0b680-1785-4326-8a2a-69e5ca54d584"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="18b865f1-0929-4ed7-b685-d56a4c61d4ea"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>844f9de6-c37e-416d-850a-7246f0e68246</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>768263</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:17.680</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="0111f83f-869a-4cfd-9d21-d0c42d612cfa" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for non-existing record Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="c4373d7e-c6bd-4d64-8fe2-f94e31e192e0"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="43dd978a-33dc-46ee-9488-4a3bd6e8e6e3"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="7cad13c2-7385-47b0-904a-8eacdd7c66a5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Lookup entity" id="0b8579d9-4a43-4921-a213-52c3437a19c8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>844f9de6-c37e-416d-850a-7246f0e68246</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>413086</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>randomData3</con:name><con:value/></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:17.891</con:value></con:property><con:property><con:name>lookup_ent_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="code_atr"><data:stringValue>${#TestCase#randomData1}</data:stringValue></data:codeAttribute><data:simpleAttribute name="string_attr"><data:stringValue>1</data:stringValue></data:simpleAttribute><data:simpleAttribute name="int_atr"><data:intValue>1</data:intValue></data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="cb989c2d-adea-45cf-90ab-76841f50bfc1" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for simple attribute - null value" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="045dad97-93b7-4e98-bb47-79f9f6a5e616"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="7dab1cc8-127a-4cfa-b382-38c9abfad7fe"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="c3bfe08a-9c29-4625-9a04-1d7c2885eea4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for lookupEntity" id="363f17ca-4ca1-4c44-b537-8811a7876fdf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs_1}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Entity" id="7ba3be74-6e0f-4733-bcf3-9f3cf80d3434"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="65761a1e-a4db-4a29-b852-eb7bd587a953"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="bdf10f8c-fd83-431b-8049-b038d044f545"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>2</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="int_atr" xmlns:nil="true"/>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="5c324e74-d99a-4312-8fdd-d31d20f118cc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert str_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr absence"><con:configuration><path>@name='int_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert nested attribute is old"><con:configuration><path>//*:etalonRecord//*[@name='inner_atr_1']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">94812890-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>329066</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:18.103</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> <data:simpleAttribute name="spr_atr">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="87e4a90d-bb17-4be7-b92b-9c29ce7053ed" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for simple attribute - null value Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="a8559caa-ae84-4849-90a8-d3463f52e4e2"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="e618cee7-c526-44c7-9439-113fafd5769b"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="d4183570-5172-4863-abcf-70e878d61966"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for linked lookupEntity" id="ac839209-3aee-490e-a449-03c5a9d8b551"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#link_lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs_1}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Lookup entity" id="bd20d605-eb37-4e9c-847d-efd86330a7dd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#LookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#LookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="9fd57c6f-de80-4f68-85a1-75f463be4a2a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="f8af56b6-6324-4e5e-b3b7-984360fce7f4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#LookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="code_atr">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>2</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="int_atr" xmlns:nil="true"/>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#LookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="63aa4f1d-ff12-4c80-8190-68e14de5effd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#LookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert str_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr absence"><con:configuration><path>@name='int_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>LookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">94ef059f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>775982</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:18.845</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[  <data:codeAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:codeAttribute><data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> <data:simpleAttribute name="spr_atr">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="118ea6de-fb6d-413a-b8b7-3234ac59478a" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for all attribute types" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="7a043128-c5ea-42bb-8074-3ed3d4e1b79c"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="5845e919-1859-4c80-97c7-15af619bc34e"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Get current date for upsert" id="008b18c7-c06d-4547-b612-336f7b8bfac9"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer results to randomData1 and currDate" id="fb9fe137-10a0-44ea-8088-e46d739b10b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Upsert record1 for lookupEntity" id="c8379e1b-456d-495b-bff7-a481c0277c24"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs_1}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Upsert record2 for lookupEntity" id="0336d452-033d-4026-8ae2-73998c0af4e8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record2 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record for Entity" id="443a5e31-1bce-48ce-8917-73431c143b08"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
 
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="8. Transfer etalon key to properties" id="1b104708-e18f-4cbd-8342-21d6e786940b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="9. Partial upsert for record" id="179b2626-07a3-4d72-a6b1-27963345facc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs_new}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Get upserted record" id="6efeab76-e574-4f95-bd15-3285d640742a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='num_atr']//*</path><content>2.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='boolean_atr']//*</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='date_atr']//*</path><content>*-*-*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='time_atr']//*</path><content>*:*:*.*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='datetime_atr']//*</path><content>2002-09-23T11:11:11.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">95761004-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>914469</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>960980</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:19.515</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>1</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">    <data:intValue>${#TestCase#randomData1}</data:intValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>false</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue>   </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_attrs_new</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">   <data:stringValue>2</data:stringValue>    </data:simpleAttribute>     <data:simpleAttribute name="spr_atr">    <data:intValue>${#TestCase#randomData2}</data:intValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>true</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2020-12-31T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T11:11:11.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2002-09-23T11:11:11.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>2</data:numberValue>   </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="cfad048b-83c9-433d-a299-a481b7898ff8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for all attribute types lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="410c9aad-4bd2-4a4a-8ca6-5c6572a5dc2a"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="b21bcb95-b32c-44c7-a6f6-b79e0a4cef91"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Get current date for upsert" id="5984ba51-474f-49fc-9180-bcfee4c81564"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer results to randomData1 and currDate" id="32be0a26-d012-480d-8aca-b45d77fe5d35"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Upsert record1 for linked lookupEntity" id="c3275ff1-cfe6-412c-9339-d7ce55075a74"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record1 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Upsert record2 for linked lookupEntity" id="c8464fc6-fd13-4ed9-8cea-37877e1a85c5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record2 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Upsert record for lookup entity" id="30a30bbe-5fca-410c-a186-3fe43473b468"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record for lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}



<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="8. Transfer etalon key to properties" id="c6d88132-c3b9-49b8-aa23-df27feef8133"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Upsert record for lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="9. Partial upsert for record" id="8a387c19-07d5-41e9-9549-32392829dec7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

${#TestCase#lookup_attrs_new}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Get upserted record" id="c8815805-ad02-4bcb-8aa8-842c3f2b597e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='num_atr']//*</path><content>2.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='boolean_atr']//*</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='date_atr']//*</path><content>*-*-*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='time_atr']//*</path><content>11:11:11.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='datetime_atr']//*</path><content>2002-09-23T11:11:11.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">960c83b9-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>593165</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>672228</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:20.509</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="code_atr"> <data:stringValue>${#TestCase#randomData1}</data:stringValue> </data:codeAttribute>  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>   </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">     <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">    <data:boolValue>false</data:boolValue>     </data:simpleAttribute>    <data:simpleAttribute name="date_atr">    <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>    </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>     </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue> </data:simpleAttribute>     ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_new</con:name><con:value><![CDATA[   <data:codeAttribute name="code_atr">   <data:stringValue>${#TestCase#randomData1}</data:stringValue>    </data:codeAttribute>    <data:simpleAttribute name="string_attr">   <data:stringValue>2</data:stringValue>    </data:simpleAttribute>     <data:simpleAttribute name="spr_atr">    <data:intValue>${#TestCase#randomData2}</data:intValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>true</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2020-12-31T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T11:11:11.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2002-09-23T11:11:11.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>2</data:numberValue>   </data:simpleAttribute>    ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="72ba7822-df96-47fe-86e7-4ea0c927d59d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for one attribute type" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1271903a-38cd-4dec-b0fb-b69152cdef6b"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="d3fc40ac-38d9-47c4-8b34-2d1081b08b66"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="4b7fa2bf-08ce-4427-adf4-37a0946c2839"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for lookupEntity" id="e02cb68e-871a-4dd3-8dab-7f347b56de10"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Entity" id="fefa2a66-019a-4a1f-b05a-42c994c9c14f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
 
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="c198f1ca-cdd6-4bb8-baa8-72aa6b686a14"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="263d4292-1d59-4398-84c5-c68b90eaa9e6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
  <data:simpleAttribute name="string_attr">
  <data:stringValue>2</data:stringValue> 
  </data:simpleAttribute> 
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="a993ee33-395c-417e-afdd-df2214a10a92"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='num_atr']//*</path><content>1.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='boolean_atr']//*</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='date_atr']//*</path><content>*-*-*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='time_atr']//*</path><content>12:12:12.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='datetime_atr']//*</path><content>2016-09-14T12:12:12.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">96735be8-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>339030</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>279351</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:21.385</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>1</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">    <data:intValue>${#TestCase#randomData1}</data:intValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>false</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue>   </data:simpleAttribute>    ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="79b83dd1-a8d2-4e9d-af69-5fc3e2d80827" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for one attribute type Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="f1268ba8-3726-4af4-9d78-401276fa15d5"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="6509e492-c1db-4545-b5ee-2d514a155c58"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="0d32e2cd-4202-49dd-a3d9-df1a00e10439"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for linked lookupEntity" id="d8e44085-9cc8-4609-9fac-e26951fc59fa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#linke_lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#linke_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for Lookup entity" id="7492b21b-bcc4-4f08-8a9f-8857e04e0cc9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon key to properties" id="e328ecaf-fa40-48d5-9d2f-c17d7c80bf78"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="8fd343aa-63ff-4a87-8a85-0b673a48c3f1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="code_atr">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>2</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="bc948a0a-24a8-4746-851b-94888aeb5e03"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='spr_atr']//*</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='num_atr']//*</path><content>1.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='boolean_atr']//*</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='date_atr']//*</path><content>*-*-*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='time_atr']//*</path><content>12:12:12.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='datetime_atr']//*</path><content>2016-09-14T12:12:12.000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>linke_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">96e0ead7-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>227348</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>279351</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:22.102</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[ <data:codeAttribute name="code_atr">   <data:stringValue>${#TestCase#randomData1}</data:stringValue>    </data:codeAttribute>    <data:simpleAttribute name="string_attr">   <data:stringValue>1</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">    <data:intValue>${#TestCase#randomData1}</data:intValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>false</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue>   </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="f41c381c-1d35-4f49-b84d-e6c14fa91263" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for all attribute types - null values" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b4b6ca62-598a-415f-903d-1530a2622eda"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="ef715a5f-7013-470a-b409-5915be556f0f"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert 2" id="5cafadf5-f16d-4021-a9a8-dd1ada7b52d0"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="92899268-52db-4432-ab24-0504e202d0b6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for lookupEntity" id="33e98a27-bb33-473c-8716-eb8c539877c8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record2 for lookupEntity" id="53ebeed5-401a-424c-a068-c3c3d1422ad3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record2 for lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Upsert record for Entity" id="067bfe2e-ec65-4edc-824d-03972f916f13"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer etalon key to properties" id="99261cb0-1640-4a24-a92e-63c27d7c8f24"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Partial upsert for record" id="7b42fcf3-b061-4707-8cb2-47e3f1adbebb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>2</data:stringValue>\r
               </data:simpleAttribute>\r
               <!-- <data:simpleAttribute name="spr_atr" xmlns:nil="true"/>\r -->
               <data:simpleAttribute name="spr_atr"><intValue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/></data:simpleAttribute>
               <data:simpleAttribute name="boolean_atr" xmlns:nil="true"/>\r
               <data:simpleAttribute name="date_atr" xmlns:nil="true"/>\r
               <data:simpleAttribute name="time_atr" xmlns:nil="true"/>\r
               <data:simpleAttribute name="datetime_atr" xmlns:nil="true"/>\r
               <data:simpleAttribute name="num_atr" xmlns:nil="true"/>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Get upserted record" id="89793278-3d2b-4cad-80ee-8a2f20558ec3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is null"><con:configuration><path>@name='spr_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is null"><con:configuration><path>@name='num_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is null"><con:configuration><path>@name='boolean_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is null"><con:configuration><path>@name='date_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is null"><con:configuration><path>@name='time_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is null"><con:configuration><path>@name='datetime_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9773b508-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>436476</con:value></con:property><con:property><con:name>randomData2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">436476</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:22.811</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> <data:simpleAttribute name="spr_atr">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="2690c9f3-31f4-4c13-bb35-371a9fd3ea58" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for all attribute types - null values Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="13e27c93-3fb1-4178-bf8b-5ed1a30a82c5"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="1a9a07f1-ddf4-476a-83bf-700452e0e0e3"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert 2" id="eb491176-382d-4588-b307-37988622fa9a"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="c378b365-50e5-4493-bf47-243297537033"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record1 for linked lookupEntity" id="21c27a08-e5fd-49e7-82d6-2fa70e4dd76c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record1 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record2 for linked lookupEntity" id="223bbc57-280a-45d4-9c82-81bf091ae3fa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record2 for linked lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#link_lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#lookup_attrs_2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#link_lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Upsert record for Lookup entity" id="fdb3bc36-6eb5-42a8-ad97-c23bf8737e8a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record for Lookup entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#lookup_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer etalon key to properties" id="9951de36-efe2-4013-86e3-da0bb79ba5e8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record for Lookup entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Partial upsert for record" id="625deef6-42d1-4327-b878-2f2a2e66b588"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="code_atr">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>2</data:stringValue>\r
               </data:simpleAttribute>\r
               <!--<data:simpleAttribute name="spr_atr" xmlns:nil="true"/>-->\r
               <data:simpleAttribute name="spr_atr">\r
                  <intValue xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="boolean_atr" xmlns:nil="true"/>\r
               <data:simpleAttribute name="date_atr" xmlns:nil="true"/>\r
               <data:simpleAttribute name="time_atr" xmlns:nil="true"/>\r
               <data:simpleAttribute name="datetime_atr" xmlns:nil="true"/>\r
               <data:simpleAttribute name="num_atr" xmlns:nil="true"/>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Get upserted record" id="73255ada-9ec6-4351-987c-252c78340e5b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert spr_atr is null"><con:configuration><path>@name='spr_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert num_atr is null"><con:configuration><path>@name='num_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert boolean_atr is null"><con:configuration><path>@name='boolean_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert date_atr is null"><con:configuration><path>@name='date_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert time_atr is null"><con:configuration><path>@name='time_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert datetime_atr is null"><con:configuration><path>@name='datetime_atr'</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9801ea59-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>248144</con:value></con:property><con:property><con:name>randomData2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">248144</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:23.736</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="code_atr">   <data:stringValue>${#TestCase#randomData1}</data:stringValue>    </data:codeAttribute>    <data:simpleAttribute name="string_attr">   <data:stringValue>1</data:stringValue>    </data:simpleAttribute>    <data:simpleAttribute name="int_atr">    <data:intValue>1</data:intValue>   </data:simpleAttribute>    <data:simpleAttribute name="spr_atr">    <data:intValue>${#TestCase#randomData1}</data:intValue>   </data:simpleAttribute>   <data:simpleAttribute name="boolean_atr">   <data:boolValue>false</data:boolValue>    </data:simpleAttribute>    <data:simpleAttribute name="date_atr">   <data:dateValue>2000-01-01T00:00:00.000</data:dateValue>   </data:simpleAttribute>    <data:simpleAttribute name="time_atr">    <data:timeValue>1970-01-01T12:12:12.000</data:timeValue>   </data:simpleAttribute>    <data:simpleAttribute name="datetime_atr">  <data:timestampValue>2016-09-14T12:12:12.000</data:timestampValue>    </data:simpleAttribute>    <data:simpleAttribute name="num_atr"> <data:numberValue>1</data:numberValue>   </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>lookup_attrs_2</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData2}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData2}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:testCase id="129f22ca-6950-4696-9a23-61e1e4c587cf" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert of attribute for record with relation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="4e6d7947-0bd6-4ee6-8ead-e84ef6ba7862"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="b3081e24-5b3d-479b-8e8b-1374991bf4a2"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Get current date for upsert" id="1982d241-8939-42ed-8c55-beeed133a2c7"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer results to randomData1 and currDate" id="b6455307-7105-4353-b9ec-868c91d92fb4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Upsert record for rigth-side Entity" id="8f8bff80-2643-4d87-97ae-9139cffc70cc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record for rigth-side Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#relation_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer rel etalon id to props" id="43b366d8-15ec-422a-b856-d615c5a26708"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>relation etalon id to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert record for rigth-side Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKey_rel</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Upsert record for main Entity" id="b71955b5-e482-4d5e-8a3b-98b336f7a046"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Upsert record for main Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}

  
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

  <api:relations>
 ${#TestCase#referenceRelation}
  </api:relations>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>


    
]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="8. Transfer etalon id to props" id="efd1e811-ca87-4c8b-bdd5-d1aa58b7c721"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon i to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Upsert record for main Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="9. Partial upsert for record" id="2b7376ff-e3da-47c2-b992-5e36fbaf0595"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>2</data:stringValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="10. Get upserted record" id="e974e988-b165-4b1a-9e33-4d9ce2c40b7b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert relation"><con:configuration><path>count(//*[@relName="link"])</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">991de1b8-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>647998</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:25.817</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>888</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>relation_attrs</con:name><con:value>&lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>relation&lt;/data:stringValue>  &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>customData3</con:name><con:value/></con:property><con:property><con:name>randomData2</con:name><con:value>796717</con:value></con:property><con:property><con:name>etalonKey_rel</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">98ff8442-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>referenceRelation</con:name><con:value><![CDATA[  <api:relation name="link">   <api:record>   <api:relationTo relName="link">    <data:toEtalonKey id="${#TestCase#etalonKey_rel}"/>  </api:relationTo>      </api:record>                 </api:relation>]]></con:value></con:property><con:property><con:name>randomData3</con:name><con:value>249210</con:value></con:property></con:properties></con:testCase><con:testCase id="6e1a9139-a8e0-40ab-8426-6280245057ae" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for relation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="d8e04fe2-9217-433e-9462-3a8f39364036"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="fadc119f-f120-4712-857d-b0cc110968df"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random data for upsert" id="40def3c3-2d9a-4210-b6e0-347a2c244c0a"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="4. Get current date for upsert" id="aa95c6e9-cf45-4174-ae66-7334dae9dbd7"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer results to randomData1 and currDate" id="d528fc10-bfb8-451a-a97d-62304c7b570c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>4. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to randomData3</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Generate random data for upsert</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>randomData3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record for rigth-side Entity" id="b184adfc-9108-4d19-a41a-65c28a7c70c5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record for rigth-side Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf" sslKeystore=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#relation_attrs}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer rel etalon id to props" id="7ed5c394-6aa1-4fb3-acda-45d0dc40aaf8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>relation etalon id to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record for rigth-side Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKey_rel</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Upsert record for main Entity" id="9f69d1f2-b93f-43bf-b26c-b5170faefef5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Upsert record for main Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}
${#TestCase#ent_complex_attrs}

  
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

  <api:relations>
 ${#TestCase#referenceRelation}
  </api:relations>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>


    
]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer etalon id to props" id="024ff295-c0fe-41a0-994f-9975563a9288"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon i to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Upsert record for main Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Upsert record for new rigth-side Entity" id="e79fcfc1-9d04-49a3-9986-760f7a3d1d6b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Upsert record for new rigth-side Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#relation_attrs_new}
  
<data:originKey externalId="${#TestCase#randomData3}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="11. Transfer rel etalon id to props" id="5bad6808-82f8-4599-9ac0-58e3af2a878e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>relation etalon id to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>10. Upsert record for new rigth-side Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKey_rel_new</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="12. Partial upsert for record" id="6478e63c-cac7-4258-bb7b-141834cbeaf6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert  entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>4</data:stringValue>  
 </data:simpleAttribute>
    
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

    <api:relations>
    ${#TestCase#referenceRelation_new}
     
    </api:relations>
    
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="49c5b38b-e42c-43be-8919-b13f86fafa53" name="AssertIsUpdated"><con:configuration><path>//*:responseUpsert/@originAction</path><content>Update</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="13. Get upserted record" id="f16c58a2-4dce-4f7e-9655-cb30d444ce9e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="13. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert relation"><con:configuration><path>count(//*[@relName="link"])</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4972cc71-f15e-4a43-99d9-bcc2a7d3a78b" name="Assert relation is new"><con:configuration><path>//*[@relName="link"]/*[1]/@id</path><content>${#TestCase#etalonKey_rel_new}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">99a8206b-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>994832</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>737606</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>832446</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:26.799</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>888</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_complex_attrs</con:name><con:value><![CDATA[ <data:complexAttribute name="complex_atr">                 	<data:nestedRecord> 		<data:simpleAttribute name="inner_atr_1"> 			<data:stringValue>1</data:stringValue>           </data:simpleAttribute> 	</data:nestedRecord></data:complexAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>relation_attrs</con:name><con:value>&lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>relation&lt;/data:stringValue>  &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>relation_attrs_new</con:name><con:value> &lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>relation2&lt;/data:stringValue>  &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKey_rel</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">99927585-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKey_rel_new</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">99c76845-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>referenceRelation</con:name><con:value><![CDATA[  <api:relation name="link">   <api:record>   <api:relationTo relName="link">    <data:toEtalonKey id="${#TestCase#etalonKey_rel}"/>  </api:relationTo>      </api:record>                 </api:relation>]]></con:value></con:property><con:property><con:name>referenceRelation_new</con:name><con:value><![CDATA[  <api:relation name="link">   <api:record>   <api:relationTo relName="link">    <data:toEtalonKey id="${#TestCase#etalonKey_rel_new}"/>  </api:relationTo>      </api:record>                 </api:relation>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="39fda8b6-16ef-4b5e-a351-a5bd5bc4703b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Upsert ref to handbook with alternate attribute" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate data and get date for upsert" id="9eec0bc5-88b2-4d09-bd3e-8684e5b3ad9e"><con:settings/><con:config><script>rand11 = new Random().nextInt(999999 - 100000) + 100000
rand12 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData11", rand11.toString())
testRunner.testCase.setPropertyValue("randomData12", rand12.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="2. Upsert record to lookupEntity" id="e1051e51-d11e-411f-94ae-deabc3e19ab2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="2. Upsert record to lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs}\r
               <data:originKey externalId="${#TestCase#randomData12}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="ee6ae53f-97ef-470a-8153-d5d362eadd6e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData11}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
            <api:aliasCodeAttributePointers aliasCodeAttributeName="alter_code_attr" recordAttributeName="ref2h_attr"/>
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_REF2H</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>H_FOR_REFS</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1b0026c6-72d3-11e7-8669-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData11</con:name><con:value>186914</con:value></con:property><con:property><con:name>randomData12</con:name><con:value>784383</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>414304</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:27.739</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">    	<data:stringValue>value: ${#TestCase#randomData11}, upsert_time: ${#TestCase#currDate}</data:stringValue>     </data:simpleAttribute>      <data:simpleAttribute name="ref2h_attr"> 	<data:intValue>${#TestCase#randomData2}</data:intValue>    </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="code_attr">   	<data:intValue>${#TestCase#randomData12}</data:intValue>   </data:codeAttribute>     <data:codeAttribute name="alter_code_attr">   <data:intValue>${#TestCase#randomData2}</data:intValue>   </data:codeAttribute>  <data:simpleAttribute name="string_attr">   <data:stringValue>value: ${#TestCase#randomData2}, upsert_time: ${#TestCase#currDate}</data:stringValue> </data:simpleAttribute> ]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="6c391089-8a00-40ab-b66a-1709aba9be60" name="requestRelationsUpsert"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="d1f4ceea-be06-4f61-a3e6-5e0467749943" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Upsert relation with etalon key" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="c9841a59-aa1b-49f7-9cce-f69c98fcdc3b"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="0a16bd3d-9757-4624-a0a7-691b2aba2660"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and randomData2" id="b0d544d7-6045-4186-8940-94df67ec2c6e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record with Unique attr to refEntity" id="78840365-4ed2-4896-8879-057ee7e02d81"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record with Unique attr to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer refEtalonKey to Upsert" id="20f499c6-f338-4be8-9918-4b14dcb419f9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record with Unique attr to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="7862a54e-6d9f-4626-819d-89c6cb2bc7c0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
        
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="85342e6b-efc8-4aca-914d-b7e7f7545873"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsUpsert with etalonKey for Entity" id="3a239133-39c1-4f71-be0a-954a68bce6d6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsUpsert with etalonKey for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRelationsUpsert lastUpdateDate="2016-07-19T16:54:00+04:00" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <api:relations>${#TestCase#refEnt_relation}</api:relations>\r
         </api:requestRelationsUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6800b217-a24c-43dc-8be7-eb5609e4b9aa" name="originAction = Update"><con:configuration><path>//@originAction</path><content>Update</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>8d8b8a86-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">8d8bb197-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="8d8b8a86-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>866291</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>599551</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>8d69aaa0-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_UNIQUE_222</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_UNIQUE_UN_ATTR_222"> &lt;data:stringValue>${#TestCase#randomData2}&lt;/data:stringValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>refEnt_relation</con:name><con:value><![CDATA[<api:relation name="master_2_unique">                         <api:record>                             <api:relationTo relName="master_2_unique"></api:relationTo>                             <api:referenceAliasKey value="${#TestCase#randomData2}" entityAttributeName="R_UNIQUE_UN_ATTR_222"/>                         </api:record>                     </api:relation>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="b18d2496-f211-48d3-8eb3-c71b110b3195" name="requestBulkUpsert"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="1e4600e4-d26d-4bc5-aeb8-0d155ff995bb" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Bulk Upsert for Entity and Lookup Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="931a58fa-0d54-4aba-a2e3-96674ef28d22"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to randomData1" id="7d9d4f06-c06c-4d26-bc74-a5f85ef3137a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Do requestBulkUpsert for Entity and Lookup Entity" id="38a70e64-1895-44ef-ba7e-86970d1b7172"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Do requestBulkUpsert for Entity and Lookup Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestBulkUpsert>\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  <data:simpleAttribute name="R_SIMP_ATTR">\r
                     <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue>\r
                  </data:simpleAttribute>\r
                  <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  <data:simpleAttribute name="R_SIMP_ATTR">\r
                     <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue>\r
                  </data:simpleAttribute>\r
                  <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--LOOKUP-->\r
            <api:upsertRecordRequests entityName="OKOPF" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  <data:codeAttribute name="KOD">\r
                     <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue>\r
                  </data:codeAttribute>\r
                  <data:simpleAttribute name="NAME">\r
                     <data:stringValue>${#TestCase#randomData1}_________${=(int)(Math.random()*1000)}</data:stringValue>\r
                  </data:simpleAttribute>\r
                  <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="OKOPF"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <api:upsertRecordRequests entityName="OKOPF" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  <data:codeAttribute name="KOD">\r
                     <data:intValue>${#TestCase#randomData1}${=(int)(Math.random()*1000)}</data:intValue>\r
                  </data:codeAttribute>\r
                  <data:simpleAttribute name="NAME">\r
                     <data:stringValue>${#TestCase#randomData1}_________${=(int)(Math.random()*1000)}</data:stringValue>\r
                  </data:simpleAttribute>\r
                  <data:originKey externalId="${#TestCase#randomData1}${=(int)(Math.random()*1000)}" sourceSystem="${#TestCase#sourceSystem}" entityName="OKOPF"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
         </api:requestBulkUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value/></con:property><con:property><con:name>originKeyID</con:name><con:value>039ef230-c9ae-4a4d-b4ae-28a46c533398</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4f9ad7ae-9771-46e9-8e79-e483c93a52a5" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>781192</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property></con:properties></con:testCase><con:testCase id="b2fc2567-03c9-4cd5-8c85-d7828d9d3fed" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial Bulk Upsert for simple attributes" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random id for upsert-1" id="1b10fe35-a224-4f35-b6cf-22f0af9db78f"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random id for upsert-2" id="8e5a729c-a120-4f14-abb4-6d5adfe1f7f8"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="3. Generate random id for upsert-3" id="33e56bee-6065-481b-98cd-cc4b09385fbc"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="4. Generate random id for upsert-4" id="1751edb4-d6bf-4d55-aa58-3c5b9ead39bc"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="5. Get current date for upsert" id="be8e2096-93b2-42d6-b48f-0245708f514c"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer results to randomData1 and currDate" id="7a5408c5-7ab9-4de2-9aa5-9487ae1ac632"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to id1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random id for upsert-1</con:sourceStep><con:sourcePath/><con:targetType>ent_id_1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to id2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random id for upsert-2</con:sourceStep><con:sourcePath/><con:targetType>ent_id_2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to id3</con:name><con:sourceType>result</con:sourceType><con:sourceStep>3. Generate random id for upsert-3</con:sourceStep><con:sourcePath/><con:targetType>lookup_id_1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>result to id4</con:name><con:sourceType>result</con:sourceType><con:sourceStep>4. Generate random id for upsert-4</con:sourceStep><con:sourcePath/><con:targetType>lookup_id_2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>currentDate to props</con:name><con:sourceType>result</con:sourceType><con:sourceStep>5. Get current date for upsert</con:sourceStep><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestBulkUpsert for Entity and Lookup Entity" id="ca1fa2be-e86e-46a0-93dc-f212c056fe32"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestBulkUpsert for Entity and Lookup Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestBulkUpsert>\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs}\r
                  <data:originKey externalId="${#TestCase#ent_id_1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <api:upsertRecordRequests entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#ent_attrs}\r
                  <data:originKey externalId="${#TestCase#ent_id_2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <!--LOOKUP-->\r
            <api:upsertRecordRequests entityName="${#TestCase#lookupEntityName}" skipCleanse="true" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#lookup_attrs}\r
                  <data:originKey externalId="${#TestCase#lookup_id_1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
            <api:upsertRecordRequests entityName="${#TestCase#lookupEntityName}" skipCleanse="true" bypassExtensionPoints="false">\r
               <api:originRecord>\r
                  ${#TestCase#lookup_attrs}\r
                  <data:originKey externalId="${#TestCase#lookup_id_2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
               </api:originRecord>\r
            </api:upsertRecordRequests>\r
         </api:requestBulkUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Do partial requestBulkUpsert for Entity and Lookup Entity" id="9d8ce95f-5fd4-4b33-b8e2-7d5a8b277a49"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do partial requestBulkUpsert for Entity and Lookup Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestBulkUpsert>

   <api:upsertRecordRequests mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"   skipCleanse="false" bypassExtensionPoints="false">
     <api:originRecord>
		${#TestCase#ent_attrs_new}
        <data:originKey externalId="${#TestCase#ent_id_1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

   <api:upsertRecordRequests mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">
     <api:originRecord>
       ${#TestCase#ent_attrs_new}
        <data:originKey externalId="${#TestCase#ent_id_2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

<!-- LOOKUP -->

     <api:upsertRecordRequests mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"  skipCleanse="true" bypassExtensionPoints="false">
     <api:originRecord>
 		 ${#TestCase#lookup_attrs_new}
        <data:originKey externalId="${#TestCase#lookup_id_1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>

     <api:upsertRecordRequests mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}"   skipCleanse="true" bypassExtensionPoints="false">
     <api:originRecord>
    		  ${#TestCase#lookup_attrs_new}
        <data:originKey externalId="${#TestCase#lookup_id_2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
      </api:originRecord>
  </api:upsertRecordRequests>
  
  
</api:requestBulkUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer etalon keys to properties" id="1aeff930-c2ef-4fb9-a3b8-b0ebe98c11bd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Do requestBulkUpsert for Entity and Lookup Entity</con:sourceStep><con:sourcePath>(//*:etalonKey/@id)[1]</con:sourcePath><con:targetType>ent_EtalonKeyId_1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>etalon to prop2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Do requestBulkUpsert for Entity and Lookup Entity</con:sourceStep><con:sourcePath>(//*:etalonKey/@id)[2]</con:sourcePath><con:targetType>ent_EtalonKeyId_2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>etalon to prop3</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Do requestBulkUpsert for Entity and Lookup Entity</con:sourceStep><con:sourcePath>(//*:etalonKey/@id)[3]</con:sourcePath><con:targetType>lookup_EtalonKeyId_1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>etalon to prop4</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>7. Do requestBulkUpsert for Entity and Lookup Entity</con:sourceStep><con:sourcePath>(//*:etalonKey/@id)[4]</con:sourcePath><con:targetType>lookup_EtalonKeyId_2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="10. Get upserted record for entity 1" id="9e894d60-4546-490c-8edf-b632ab26a792"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="10. Get upserted record for entity 1" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#lookup_EtalonKeyId_1}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>bulk2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="11. Get upserted record for entity 2" id="fd37d136-e5ca-4ac7-b0b8-d3eab5854ebc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Get upserted record for entity 2" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#ent_EtalonKeyId_1}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>bulk2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="12. Get upserted record for lookup entity 1" id="a9e336dd-3c65-433f-a030-476a713cd2e0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="12. Get upserted record for lookup entity 1" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#ent_EtalonKeyId_1}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>bulk2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="13. Get upserted record for lookup entity 2" id="186ef5c1-6e46-4278-824d-3d03f29f2fcf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="13. Get upserted record for lookup entity 2" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#ent_EtalonKeyId_2}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>bulk2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>173563</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:04:00.583</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr"><data:stringValue>bulk1-1</data:stringValue></data:simpleAttribute><data:simpleAttribute name="int_atr"><data:intValue>1</data:intValue></data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_id_1</con:name><con:value>456880</con:value></con:property><con:property><con:name>ent_id_2</con:name><con:value>820128</con:value></con:property><con:property><con:name>lookup_id_1</con:name><con:value>860391</con:value></con:property><con:property><con:name>lookup_id_2</con:name><con:value>441453</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="code_atr"><data:stringValue>bulk1-1</data:stringValue></data:codeAttribute><data:simpleAttribute name="string_attr"><data:stringValue>bulk1-1</data:stringValue></data:simpleAttribute><data:simpleAttribute name="int_atr"><data:intValue>1</data:intValue></data:simpleAttribute>]]></con:value></con:property><con:property><con:name>ent_EtalonKeyId_1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">89f28522-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>ent_EtalonKeyId_2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">89f87897-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>lookup_EtalonKeyId_1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">89fdcfcc-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>lookup_EtalonKeyId_2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">8a032701-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>ent_attrs_new</con:name><con:value>&lt;data:simpleAttribute name="string_attr">&lt;data:stringValue>bulk2&lt;/data:stringValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookup_attrs_new</con:name><con:value><![CDATA[<data:codeAttribute name="code_atr"><data:stringValue>bulk1-1</data:stringValue></data:codeAttribute><data:simpleAttribute name="string_attr"><data:stringValue>bulk2</data:stringValue></data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="13fcef48-b675-4fba-8065-7ebfa6f82eab" name="requestJoin"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="7bd3a8c4-6eb1-4534-a87b-54879226a367" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Join external id to etalon" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Generate random data for upsert" id="f571c061-fd04-4737-9ed8-c225e12c5378"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())</script></con:config></con:testStep><con:testStep type="groovy" name="Get current date for upsert" id="e3f1bd6a-63cd-41bf-b676-f891ccc8e28e"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="request" name="Upsert main record" id="23590d5c-acfa-4358-9b8e-cf0c072e339e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert main record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer etalon and origin keys of first record to properties" id="ff2d8bc4-06f0-4bf0-ae47-5b7d272b060a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert main record</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert main record</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Join origin of first record to etalon of second record" id="5e810466-9d5a-4290-81cc-c126920c6dee"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Join origin of first record to etalon of second record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJoin>\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <api:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
         </api:requestJoin>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys" disabled="true"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys" disabled="true"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert second record" id="78d64b01-069a-46de-800a-97cb0363cb68"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert second record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#secondEntityName}" lastUpdateDate="${Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#secondEnt_attrs}\r
               <data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#secondEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="84951980-4e61-4757-a008-2288f969f984" name="Script Assertion" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства
def etalonKeyID = new Integer(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
//Integer result = new Integer(resp.getNodeValue('//*:intValue'))

log.info(etalonKeyID)

//Проверяем утверждение
//assert result == etalonKeyID</scriptText></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer origin and etalon keys of second record to properties" id="1afafb33-c30d-4908-b854-79074559da1a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert second record</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>secondOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert second record</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>secondEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Check main record" id="978faf7c-0383-4bb9-b51a-617437b47739"><con:settings/><con:config><script> def mainetalon = testRunner.testCase.getPropertyValue("etalonKeyID")
 def secondetalon = testRunner.testCase.getPropertyValue("secondEtalonKeyID")
assert mainetalon == secondetalon</script></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>860d3576-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">860d5c87-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="860d3576-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>805536</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>707937</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>860d3576-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>8627c25c-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="dd5c8b15-04e4-4fa0-9f13-1113b60c4cbe" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Join external id from exist record to etalon" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="6eb19bdd-3db0-48fc-a091-b9ca5849f196"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="1fa5dc68-28de-4cc4-9538-b64ce17f5004"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="request" name="3. Upsert first record" id="a051fd3e-292c-4a08-b7ae-19ceff44bfc6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert first record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer etalon and origin keys of first record to properties" id="2497b218-ba11-4ea2-99a6-31fd53ea1fc8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert first record</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert first record</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record" id="f650bbe2-e4cc-4b19-b62d-d8ed25851be7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#secondEntityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#secondEnt_attrs}\r
               <data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#secondEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys of second record to properties" id="004f7632-b2e4-4ae9-836d-479d5366b1b5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>secondOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>secondEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Join origin of first record to etalon of second record" id="33269195-32d2-4888-af1c-f4a8c1283bd6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Join origin of first record to etalon of second record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJoin>\r
            <api:etalonKey id="${#TestCase#secondEtalonKeyID}"/>\r
            <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
         </api:requestJoin>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="errorCode = EX_DATA_JOIN_KEY_IS_ALREADY_USED_BY_ANOTHER"><con:configuration><path>//@errorCode</path><content>EX_DATA_JOIN_KEY_IS_ALREADY_USED_BY_ANOTHER</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys" disabled="true"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys" disabled="true"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>865c17d0-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">865c3ee1-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="8675ba56-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>579873</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>651774</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>8675ba56-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>8675e167-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Etalon второй записи ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="ae5bcb3c-2b30-499b-b51a-4c4bfe4d3305" name="requestMerge"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="4cd34848-da84-41c8-8ebe-f3de73f97e93" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge records with etalon keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="61c5a31b-1530-4e5f-aa8b-5fb91f55a9dc"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="493825d5-6cba-4df6-a102-b1c0c0674961"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="f587aa9c-1da0-41d3-bce4-f9bb7d8ec79b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="408412bb-6688-44d5-befb-4e393498c69f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="115d0177-5123-48b4-8a44-ff6c5b2c6e30"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer etalon keys to etalonKeyID1, etalonKeyID2" id="feff7416-48f5-4dd0-a261-ea92f0f67132"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with etalon keys" id="04bbf6bf-a846-4115-ae9b-09fbad7302a8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/>\r
            <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>\r
         </api:requestMerge>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>80b9d5b0-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>80d9e0d6-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>76dd8e2f-471b-47d9-8d83-9b0fb7300083</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="80d9e0d6-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>408728</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>899891</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:testCase id="9a7519e3-1690-4034-b2dc-7609384244b4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge records with origin keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="fb87efee-f784-40bd-aa44-07edf2030d50"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="3592979f-15a2-47ec-9362-1cd73c1b9165"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="57f1d893-c9a3-42de-b1ab-fa24456ce231"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="3c827a43-a849-4ab3-9a98-f90d7e8eb3b7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="ea32d173-4094-47b2-91c6-1e8c678eb70c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="f4415f18-e42b-4bd9-a6c2-1b85c5cc1e24"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with origin keys" id="d66e9578-8c69-4641-8cb8-7850e1eacc57"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with origin keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">
 
           <api:masterOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
           <api:duplicateOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>

         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>811a453f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>8132d655-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value>811a6c50-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>8132fd66-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="8132d655-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>962264</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>208849</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:testCase id="dda730e5-e7e4-46a8-ae7e-eb140a4503af" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge records with etalon duplicate and origin master" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="ab14a5ba-a522-44fb-b38d-2a98ad152b4f"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="6d27ecfc-9a75-4a12-8f43-5ea5c7b49092"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="1bbe1870-c27d-464f-a2e1-cddd01d991be"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="e1fe885d-7cc0-4714-9fa5-63b627888c07"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="0b02dced-6737-4dfc-bb36-90b6eb624057"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="28b71f6b-2c00-4843-9eda-41fd4c924007"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with etalon duplicate and origin master" id="3c8adffc-0bd1-46c2-8e06-3a0f8f7bf9ad"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with etalon duplicate and origin master" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 		 <!-- <api:winnerEtalonKey id="${#TestCase#etalonKeyID1}"/> 
 		<api:looserOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
            -->
           <api:masterOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/> 
           		 <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>
                     
                 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>817584ae-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>818cdd44-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value>8175abbf-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>818d2b65-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="818cdd44-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>687215</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>518074</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:testCase id="8c79e495-0db7-46d2-b2bd-8b983f6c0dfe" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge records with etalon master and origin duplicate" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1501bf92-0452-46a6-ac69-c2a1154e2129"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="657e5059-3e3a-43fe-b950-cf22c1dac441"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="1cdf5e01-8fae-4fff-8806-565e5910542f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="d3415aef-9594-48f0-9c5e-724dd7091831"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="a8c5f6ab-4336-455a-8174-5bda17bcc09b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="c6c2a6d8-334b-4d97-a85c-b8c0fec551a7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with etalon master and origin duplicate" id="c821deec-47c0-479c-b921-7bb475c97d75"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with etalon master and origin duplicate" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 		  <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/> 
 		<api:duplicateOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
          <!--
           <api:winnerOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/> 
           		 <api:looserEtalonKey id="${#TestCase#etalonKeyID2}"/>
                      --> 
                 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>81cccc7d-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>81e3d6f3-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value>81ccf38e-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>81e3fe04-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="81e3d6f3-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>957556</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>624339</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:testCase id="12c169b2-c30b-4061-9452-40053808b5c5" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge records with non-existing master etalon" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="042b039b-9c01-4665-a9a5-76410082268b"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="019b30bc-f3c5-4374-a134-be551aba514b"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="9819bdd9-d1dc-4b96-a2c5-ae590839fa33"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="394fdcf9-f11e-4a5e-ad89-243d2efb24be"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="c52caecf-d259-4463-89b1-6c90682e24ac"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="e8df8541-49c8-49e9-a55d-d0b67b0a2501"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with non-existing master etalon" id="f057adba-a352-4ef6-bb9c-b01f39b65a7d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with non-existing master etalon" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 		  <api:masterEtalonKey id="non-existing-${#TestCase#etalonKeyID1}"/> 
 		  	 <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>
 		<!--
 		<api:looserOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
           <api:winnerOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/> 
                 --> 
 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8595313d-921a-4fba-9788-183c0dee5e2e" name="errorCode = EX_DATA_V4_ETALON_ID_UUID_INVALID"><con:configuration><path>//@errorCode</path><content>EX_DATA_V4_ETALON_ID_UUID_INVALID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>8221ca5c-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>8239bf32-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value>8221f16d-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>8239e643-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="8239bf32-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>320569</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>304147</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:testCase id="33a0bcc0-697d-4180-b4a4-4d81c95fce31" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge records with non-existing duplicate etalon" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="2a4c55c2-4230-4ca8-91f5-cb256e5968ea"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="7883cab1-9a8a-48ab-aab6-107cae230d13"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, randomData2" id="48c082d3-ed59-41f3-bd05-fd1982cc521c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>rand to externalId2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert first record to Entity" id="a474de11-b127-4471-8eda-adea713127ea"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs1}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert second record to Entity" id="41f01f7a-a113-45f0-8756-6e51c9c4475e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs2}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="b7ea5c81-443c-4ccd-a081-ec39165b8f55"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon1 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon2 from buff to Merge</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert first record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to originKeyID2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>5. Upsert second record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestMerge with non-existing duplicate etalon" id="84473e89-f5c2-4878-bd85-9b6c9ab56764"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestMerge with non-existing duplicate etalon" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">

 		  <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/> 
 		  	 <api:duplicateEtalonKey id="non-existing-${#TestCase#etalonKeyID2}"/>
 		<!--
 		<api:looserOriginKey id="${#TestCase#originKeyID2}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
           <api:winnerOriginKey id="${#TestCase#originKeyID1}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/> 
                 --> 
 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8595313d-921a-4fba-9788-183c0dee5e2e" name="errorCode = EX_DATA_V4_ETALON_ID_UUID_INVALID"><con:configuration><path>//@errorCode</path><content>EX_DATA_V4_ETALON_ID_UUID_INVALID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>8265b139-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>827c467f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID1</con:name><con:value>8265d84a-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID2</con:name><con:value>827c6d90-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="827c467f-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>626357</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>213276</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>  &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="4dfb5c43-2c9f-40c7-a5d2-0d97c4c0446d" name="requestSoftDelete"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e528c79f-f114-4e2d-b848-adbd14c61f9f" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestSoftDelete with etalon key for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="160d5b38-df7a-4c3b-ada9-4563af98d837"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="b930aa4d-70d8-4db1-9ddf-18c26ad3154c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>curr date to upsert</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath/><con:targetType xsi:nil="true"/><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="7c82c3bb-342e-4468-b5e2-91e9a43d4000"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="d3b07f44-5909-4f61-95e6-e4fcd7bf08b1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestSoftDelete with etalonKey for Entity" id="8fafec44-39fe-4618-8df6-6594c1885ca3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestSoftDelete with etalonKey for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>-->\r
            <!--<api:range rangeFrom="?" rangeTo="?"/>-->\r
         </api:requestSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>79177d00-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7917cb21-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="79177d00-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>937267</con:value></con:property></con:properties></con:testCase><con:testCase id="829f33a0-1670-4933-956e-f8fe10a73cb4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestSoftDelete for soft-deleted record___UN-6243" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="6c9defa3-f37a-4aa6-85a0-9198c7af659a"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="a0837727-5b40-45ba-9f2e-558af7e567c4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>entityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>lookup ent to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>content[0].name</con:sourcePath><con:targetType>lookupEntityName</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>source sys to prop</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath>$..sourceSystem[0].name</con:sourcePath><con:targetType>sourceSystem</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>curr date to upsert</con:name><con:sourceType xsi:nil="true"/><con:sourceStep xsi:nil="true"/><con:sourcePath/><con:targetType xsi:nil="true"/><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="a3506849-16c1-4386-9629-a354dfcba230"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="01a247ea-5979-42b8-bbbb-60ede11f0ac6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestSoftDelete with etalonKey for Entity" id="23e89fdb-973a-41ba-8faa-9478f963c655"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestSoftDelete with etalonKey for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="6. Repeat requestSoftDelete for deleted record" id="08ddb189-304a-431d-8150-8019623c781d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Repeat requestSoftDelete for deleted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Warning"><con:configuration><path>//@exitCode</path><content>Warning</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="85972637-154f-40c9-bf81-7c7b73ce8837" name="messageText = REQUEST_SEARCH: Service didn't return deleted key. No objects were deleted."><con:configuration><path>//@messageText</path><content>REQUEST_SEARCH: Service didn't return deleted key. No objects were deleted.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>07c90442-a8e9-11e7-9dab-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">07c97973-a8e9-11e7-9dab-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="07c90442-a8e9-11e7-9dab-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>263411</con:value></con:property></con:properties></con:testCase><con:testCase id="d9d4f702-5500-4242-94e8-87091ea68fe5" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestSoftDelete for non-existing record___UN-5331" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="request" name="1. Do requestSoftDelete for non-existing record" id="b05985c9-dec2-48d1-9ace-cfe5da487e3a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="1. Do requestSoftDelete for non-existing record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">\r
            <api:etalonKey id="non-existing-id-1234567890"/>\r
            <!--<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>-->\r
            <!--<api:range rangeFrom="?" rangeTo="?"/>-->\r
         </api:requestSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4d799a57-9e1a-40a4-9bed-65217ca2fb93" name="errorCode = EX_DATA_INVALID_DELETE_INPUT"><con:configuration><path>//@errorCode</path><content>EX_DATA_INVALID_DELETE_INPUT</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>bc94f215-9902-4de6-998b-4f16e9ea081e</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">8c1930e3-95b1-4346-9b39-3c8562646782</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="bc94f215-9902-4de6-998b-4f16e9ea081e" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>130812</con:value></con:property></con:properties></con:testCase><con:testCase id="e27cc0c7-d048-448b-812c-19b23fc695bb" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestSoftDelete with origin key for lookupEntity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="ebacd81c-b749-4835-9461-cdd094f9a17f"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="577b6518-d022-4089-ba75-d69eacf84fb6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to lookupEntity" id="5f04d391-e07d-4f0e-9920-022b3eaba189"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to lookupEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#lookupEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="true" bypassExtensionPoints="false">

 <api:originRecord>
  
${#TestCase#lookup_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>
 </api:originRecord>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="6a40281e-de08-4f49-9e59-b0dee904afad"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to lookupEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to lookupEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestSoftDelete with originKey for lookupEntity" id="033d87ff-8da8-4c8c-a786-ad4fd2d1e99c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestSoftDelete with originKey for lookupEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false" actionType="SoftDeleteOrigin">
          
<api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="data_steward" entityName="${#TestCase#lookupEntityName}"/>

<!--    
<api:etalonKey id="${#TestCase#etalonKeyID}"/>  
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>OKOPF</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="KOD"><data:intValue>${#TestCase#randomData1}</data:intValue></data:codeAttribute> <data:simpleAttribute name="NAME"><data:stringValue>Строковый атрибут ${#TestCase#randomData1}</data:stringValue></data:simpleAttribute>]]></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>79576c37-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">79579348-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="79576c37-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>519547</con:value></con:property></con:properties></con:testCase><con:testCase id="7b532166-7d20-417c-a98a-e39d9803e7f0" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check wipe parameter" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="25e64802-5022-4466-9f50-8c144505f8e0"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="f48464a6-ad09-4c9b-b922-991b608897a1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity" id="4280551b-724c-4913-9609-52c43e5bded1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="4. Transfer origin and etalon keys to properties" id="c3eabd9d-3828-45b7-b530-8cd672f01608"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="5. Do requestSoftDelete with wipe=true" id="30e1a772-82dd-4f9b-942b-26b65ab70327"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Do requestSoftDelete with wipe=true" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="true" actionType="SoftDeleteEtalon">
          
   
<api:etalonKey id="${#TestCase#etalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>79888e5e-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7988dc7f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="79888e5e-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>651930</con:value></con:property></con:properties></con:testCase><con:testCase id="4d391107-b476-49c4-8fd0-994495a29c84" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Delete record referenced" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1b2f17d8-4707-4b6a-9ce0-c37f1f963f60"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="3a551a54-650b-493c-872c-bc563dd045d7"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to properties randomData1 and randomData2" id="f6a8fdc6-ead0-49e1-9713-7a680195f496"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="c628f347-e029-4257-9787-5d3f710556f8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>

 ${#TestCase#refEnt_attrs}
 
<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon to Upsert" id="274cc002-0432-4465-867f-3a294b19967c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="d7cc1ad8-455d-4d81-9643-c1895ce602bb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="3332301c-d165-406a-96d5-842fd7c542c2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestSoftDelete with refEtalonKeyID for refEntity" id="aa89f283-5b50-4925-bedf-bd0340259454"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestSoftDelete with refEtalonKeyID for refEntity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">
          
   
<api:etalonKey id="${#TestCase#refEtalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->
             
             <!-- <api:range rangeFrom="?" rangeTo="?"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="ebc64fda-f96a-4ef6-9b32-f5dc4e2525b1" name="errorCode = EX_DATA_ETALON_CONTAINS_RELATIONS_TO_YOURSELF"><con:configuration><path>//@errorCode</path><content>EX_DATA_ETALON_CONTAINS_RELATIONS_TO_YOURSELF</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="9. Repeat requestSoftDelete with wipe=true" id="3eb1a87e-9694-4657-9f17-ee12943395e6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="9. Repeat requestSoftDelete with wipe=true" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSoftDelete wipe="true" actionType="SoftDeleteEtalon">\r
            <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>\r
            <!--<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>-->\r
            <!--<api:range rangeFrom="?" rangeTo="?"/>-->\r
         </api:requestSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="errorCode = EX_DATA_ETALON_CONTAINS_RELATIONS_TO_YOURSELF"><con:configuration><path>//@errorCode</path><content>EX_DATA_ETALON_CONTAINS_RELATIONS_TO_YOURSELF</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d7e3d180-da5b-4f1f-a1cc-8c56f05efd4d" name="etalonKey received = assigned" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#refEtalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>79dbb77b-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">79dbde8c-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="79dbb77b-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>878258</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>942932</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>79c1ede5-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property></con:properties></con:testCase><con:testCase id="f2af69f5-9dcf-4993-bb6f-f124ad74b952" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check relevance periods" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="33c160f0-470b-487e-90ea-7f0b21250b9a"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="2. Transfer result to property randomData1" id="7f41a8c6-4cd1-402c-a77c-853f34175b2d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="3. Upsert record to Entity with first period" id="6d565f15-1c64-4676-a4db-87c405e66237"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="3. Upsert record to Entity with first period" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
 <api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_UPSERT" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to Entity with second period" id="7b9ab340-96a4-4a6e-a13a-85a170762bcc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to Entity with second period" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
 <api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_UPSERT" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="5. Upsert record to Entity with third period" id="64435a3d-07be-414b-b873-fb246f96c918"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="5. Upsert record to Entity with third period" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
 <api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_UPSERT" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="6. Transfer origin and etalon keys to properties" id="10391397-d1ca-4168-adf3-860c1d0f8176"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity with first period</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity with first period</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="7. Do requestSoftDelete to delete record with first period" id="59405c8e-199c-475a-9bad-1ca0ccfd4ccb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestSoftDelete to delete record with first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
<api:requestSoftDelete wipe="false">
          
   
<api:etalonKey id="${#TestCase#etalonKeyID}"/>  
		  
<!-- 
<api:etalonKey id="c51c5fe4-7d97-4d1b-98e2-ef0e43697b33"/>   
<api:originKey id="431f14e7-f8f6-4ff2-b910-3bc98e3bd712" externalId="be61fb7b-6ae5-43c0-8112-38113cd2ebe5" sourceSystem="data_steward" entityName="R_MASTER"/>
<api:originKey id="09ffd51d-6246-40c2-b4bb-397b8e834826" externalId="eb8a1968-f33f-4fc6-b235-9a4d30e29c08" sourceSystem="data_steward" entityName="R_MASTER"/>
-->

${#TestCase#range1}
             
<!--  <api:range rangeFrom="2016-08-02" rangeTo="2016-08-13T23:59:59.999"/>  -->
             
</api:requestSoftDelete>



            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Do requestGet for record without first period" id="d8c80c3a-ee73-4328-9cf2-bab177404d33"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestGet for record without first period" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
 <!--        <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#asOf}" originsAsOf="${#TestCase#originAsOf}" etalonHistory="${#TestCase#etalonHistory}" softDeleted="${#TestCase#softDeleted}"> -->
        <api:requestGet entityName="${#TestCase#entityName}" asOf="2016-08-15T00:00:00.000" originsAsOf="2016-02-16T00:00:00.000" etalonHistory="true" softDeleted="false">    
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          
<!--

            <api:originKey id="?" externalId="?" sourceSystem="?" entityName="?"/>
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#externalId}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
     -->       
         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="REQUEST_GET" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#randomData1}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="5392bd33-b2f3-4837-8f49-767edf2f1bb7" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="88ff3cdc-49d8-4f99-8e37-22e20f8880db" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>a42f205e-c4ed-4a6b-a5cc-6cbb287fa5ec</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>ba64efa3-b54d-47e2-abd6-949c33eb3acd</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="a42f205e-c4ed-4a6b-a5cc-6cbb287fa5ec" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>173401</con:value></con:property><con:property><con:name>range1</con:name><con:value>&lt;api:range rangeFrom="2016-07-01" rangeTo="2016-07-31"/></con:value></con:property><con:property><con:name>range2</con:name><con:value>&lt;api:range rangeFrom="2016-08-01" rangeTo="2016-08-31"/></con:value></con:property><con:property><con:name>range3</con:name><con:value>&lt;api:range rangeFrom="2016-09-01" rangeTo="2016-09-30"/></con:value></con:property></con:properties></con:testCase><con:testCase id="5d5e8da9-a0f3-4216-af65-63c2d5c24211" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestSoftDelete with externalId for Entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Get current date for upsert" id="49f72f36-9c88-4bd5-93b8-f22f11ef5b9e"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for upsert" id="43f6e323-5456-49e4-8982-f303997783dd"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer result to property randomData and currDate" id="880c2b8e-94e0-4988-8722-b4621141066c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>result to randomData</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>currentDate to prop</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Get current date for upsert</con:sourceStep><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to Entity" id="7f75b032-7a28-40ae-92b4-b7d06a258d7b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
  
  ${#TestCase#ent_attrs}

  <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="00783375-7e53-43aa-a451-c5f3e9498200"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Get upserted record" id="07209eee-2862-407b-abaa-630ab42a9384"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Do requestSoftDelete with etalonKey for Entity" id="db9689fb-65fa-4dc5-b667-f323443ec01c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Do requestSoftDelete with etalonKey for Entity" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         
		  
<api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">
            <api:originKey externalId="${#TestCase#randomData1}"  sourceSystem="data_steward" entityName="${#TestCase#entityName}"/>
         </api:requestSoftDelete>

            
         
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get deleted record" id="a20c1109-e1e7-4c7d-83f9-3e6e4ee90239"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get deleted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = INACTIVE"><con:configuration><path>//@status</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7a2ce4c7-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>dde36e4c-3b39-4d64-aac5-4f8b8084344c</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>573031</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:03:34.091</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="f09a6264-e929-4c95-9dd5-1aedcf44b127" name="requestRelationsSoftDelete"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="c53d758b-3c41-4f17-8059-a9db829a2082" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsSoftDelete with origin keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b3515994-5464-4064-9a00-5e0f43405d19"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="0f789bf1-9593-4e36-a6a0-f4f3b63eff83"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and radomData2 properties" id="94db5b10-3909-4d08-809e-12d63ad27d7a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="1970298f-4537-4df9-84ef-d48570c67a2e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer data to refOriginKeyID and refEtalonKeyID" id="0ffd4a37-6e51-40d7-a3d9-94c0de5e899b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to refEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="a59883b1-e2d1-4e3e-85b5-761a132619db"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="add7997e-f48a-404a-b6d8-08819dfbde7b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with origin keys" id="6bae8b90-8c01-4310-84e8-1712e7452ca2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with origin keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">\r
            <!--<api:etalonKey id="${#TestCase#etalonKeyID}"/>-->\r
            <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            <api:relations>\r
               <api:relation name="${#TestCase#relName1}">\r
                  <api:key>\r
                     <api:originKey id="${#TestCase#refOriginKeyID}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>\r
                     <!--<api:etalonKey id="${#TestCase#refEtalonKeyID}"/>-->\r
                     <!--<api:range rangeFrom="?" rangeTo="?"/>-->\r
                  </api:key>\r
               </api:relation>\r
            </api:relations>\r
         </api:requestRelationsSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="b5b39679-754d-4e76-b47f-afcdc0ab3837"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with origin keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check status of deleted relation at DB" id="f87029dc-253f-44da-b558-8521d0ec87a0" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>6f3ff58a-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6f4043ab-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="6f4b8e4f-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>914995</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>927108</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>6f1c8f04-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6f1cb615-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>6f4b8e4f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property></con:properties></con:testCase><con:testCase id="590ffc7f-422f-43b7-8170-d4bd0d323ba6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsSoftDelete with etalon keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="e149c0e9-0fa2-420b-b1dc-834c50687b19"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="70822086-0886-4bb7-8f22-2b4311bb75d2"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, radomData2" id="c775d129-c98d-4a5f-9995-7060e7c9cb84"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="882f3ed6-7a8c-4683-a143-eee32d2b4902"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#refEntityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#refEnt_attrs}\r
               <data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="8ed83906-a185-4f55-a297-26b97774801a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="a4559417-9167-4513-a011-aac241cbb444"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
            <api:relations>\r
               <api:relation name="${#TestCase#relName1}">\r
                  <api:record>\r
                     <api:relationTo relName="${#TestCase#relName1}">\r
                        <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>\r
                     </api:relationTo>\r
                  </api:record>\r
               </api:relation>\r
            </api:relations>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="189dbda1-d1fe-4af8-b77f-b5c12f9e1fb1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with etalon keys" id="eabaf320-908b-40d2-af69-b74a3dd90510"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="0ae2db5a-4000-453c-9852-7ed97c1beacf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with etalon keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check state of deleted relation at DB" id="fdc39520-87f0-49ee-b480-66203b917dbc" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>6fa4a9db-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6fa4d0ec-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="6fa98be0-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>440281</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>286466</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>6f8a4405-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value>6f8a6b16-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>6fa98be0-16ee-11e8-8195-87ba01ce01e0</con:value></con:property></con:properties></con:testCase><con:testCase id="30a0ed73-6f87-470a-993d-7053bb553870" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsSoftDelete with non-existing relation name" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="20cdc261-3dd2-46c2-9960-512c6e5a40e3"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="75f6f1f8-a4c5-4065-8d44-f8497c2af14c"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, radomData2" id="b8369160-6dd6-4810-843c-8483e3dd41a4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="e31753ac-605d-4964-b973-15b3f5c66a4a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="e052ced7-6557-4c08-964c-3089c5abcdbd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="1f189eb3-a707-48af-ba09-de58b80e1fbd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="feac85de-2539-4e3b-886a-7337ee65c7c4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with etalon keys" id="b5e6c8a9-3927-46d8-b12d-b757388ea9f8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="d3dc597f-52b0-4c0b-9a77-4de1e29d3a7f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with etalon keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check state of deleted relation at DB" id="3cdb2d68-ae36-4274-8460-d3028670ddb7" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsSoftDelete with non-existing relation name" id="7fdfba2f-c85c-4e75-8177-cf9086f87f55"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsSoftDelete with non-existing relation name" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRelationsSoftDelete>\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            <!--<api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/>-->\r
            <api:relations>\r
               <api:relation name="abra-cadabra-${#TestCase#relName1}">\r
                  <api:key>\r
                     <!--<api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>-->\r
                     <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>\r
                     <!--<api:range rangeFrom="?" rangeTo="?"/>-->\r
                  </api:key>\r
               </api:relation>\r
            </api:relations>\r
         </api:requestRelationsSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="80bb4b9f-c359-466b-a7d9-b6795d8bbdd4" name="errorCode = EX_DATA_RELATIONS_DELETE_RELATION_NOT_FOUND"><con:configuration><path>//@errorCode</path><content>EX_DATA_RELATIONS_DELETE_RELATION_NOT_FOUND</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>6ff3db5c-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6ff4026d-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="6ff9ced1-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>557071</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>168686</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>6fdca9d6-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value>6fdcd0e7-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>6ff9ced1-16ee-11e8-8195-87ba01ce01e0</con:value></con:property></con:properties></con:testCase><con:testCase id="5471b380-e005-4dfe-a981-5c0f464256f6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsSoftDelete with non-existing right end of relation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="915cc005-f46b-40fc-8ae0-40d6bd3d7a0e"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="a76864d8-fda2-47fc-8b97-98cd1f35e50e"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, radomData2" id="8025e640-6485-439d-a966-0a2c88471881"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="5c817a98-d3ee-46e4-9821-42917ff59c9b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="3278dbb2-41a9-4e87-94b0-54265c3026f7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="329b19d1-6d78-4552-a9e0-d7561cacf8ca"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="141a3acd-2ccf-4348-ba2b-a34bb159dc33"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with etalon keys" id="67412893-b58c-4a19-aeba-ab9ba1ab4584"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="817925e1-2307-4861-a2ef-b8b597afa884"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with etalon keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check state of deleted relation at DB" id="bdc30b06-43cc-4821-ac94-c6d6d81b57b9" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsSoftDelete with non-existing right end of relation" id="abfacd60-1337-4eaa-a53d-66ea01817bc3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsSoftDelete with non-existing right end of relation" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete>
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="non-existing-${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1d22a5f8-10bc-4321-a855-076a97f1ebd7" name="errorCode = EX_DATA_V4_ETALON_ID_UUID_INVALID"><con:configuration><path>//@errorCode</path><content>EX_DATA_V4_ETALON_ID_UUID_INVALID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>705bec0e-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">705bec0f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="70614343-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>602995</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>601074</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>703fd888-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value>703fff99-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>70614343-16ee-11e8-8195-87ba01ce01e0</con:value></con:property></con:properties></con:testCase><con:testCase id="97b38290-c535-49d3-98aa-a0cadb58aab1" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsSoftDelete with non-existing left end of relation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="e82eb362-7300-4efb-ad06-7e573aa71133"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="660336d1-c48a-4743-91a8-6b718e2c6383"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, radomData2" id="6c29cd4e-96d6-4956-8f78-62b3285737b2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="e92d7ba2-7ecf-44d5-b723-6ab276a001d4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="b4620986-8082-4ea8-a7b9-79b7c57213ae"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="db05b23c-7b93-4783-b90c-878cf87f07ab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="521c74bc-81c0-46c6-9648-178244b768b0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with etalon keys" id="62c9daf7-8cb8-4732-8fdb-7d06b7ef66c6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="3c6f6fbe-a8e7-4196-953e-5e4b97ba7bd5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with etalon keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check state of deleted relation at DB" id="e31971d2-a56c-43bf-b138-91ef75c3dd6e" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsSoftDelete with non-existing left end of relation" id="831eb7d0-158c-4a95-b919-7c5830c0c08e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsSoftDelete with non-existing left end of relation" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete>
           
            <api:etalonKey id="non-existing-${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1d22a5f8-10bc-4321-a855-076a97f1ebd7" name="errorCode = EX_DATA_V4_ETALON_ID_UUID_INVALID"><con:configuration><path>//@errorCode</path><content>EX_DATA_V4_ETALON_ID_UUID_INVALID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>70ceab20-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">70ced231-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="70d3db45-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>788947</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>265096</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>70b0269a-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value>70b04dab-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>70d3db45-16ee-11e8-8195-87ba01ce01e0</con:value></con:property></con:properties></con:testCase><con:testCase id="c0449059-e230-4746-932d-3357efebca53" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsSoftDelete with etalon and ref origin keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="f816b0e4-4aaa-4490-b531-4d11c7da8900"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="afbda0ba-d95c-4bc5-8e8c-ffee07c5f14c"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, radomData2" id="c6ae21fb-0c08-4ec1-bfeb-5e13260e2488"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="1f1592c2-7457-442c-acdc-fed1ff75ae54"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="c8cddb46-3e0d-4e2a-be57-e3e1b3d67b06"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="4836dcd6-551e-4874-aa6e-9afe0f1285e6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="d4b6144d-0122-4939-acdf-4f9f73ea685b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with etalon keys" id="e7365ae8-eed3-454b-8cbf-69609c05fcc6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="d316d564-4bd0-4ae9-927a-f970f72afe92"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with etalon keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check state of deleted relation at DB" id="e284fd19-2e3a-47be-98ba-56e10febbf84" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsSoftDelete with etalon and ref origin keys" id="86978e0b-cb85-499a-bd2e-8480d703de33"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsSoftDelete with etalon and ref origin keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                        <api:originKey id="${#TestCase#refOriginKeyID}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>   
                      <!--  <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>  -->
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>7137a632-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7137cd43-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="713f9577-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>668397</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>471250</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>711773fc-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value>71179b0d-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>713f9577-16ee-11e8-8195-87ba01ce01e0</con:value></con:property></con:properties></con:testCase><con:testCase id="bc7972bd-f35d-4761-a40b-52a6f710034d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="requestRelationsSoftDelete with origin and ref etalon keys" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="8b8d3a52-54a4-4805-9f6b-003fb7c7abb4"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Generate random data for ref upsert" id="56829877-7efe-404c-94bc-2f097390b3ec"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1, radomData2" id="36e575ce-d947-4d68-a7f9-375d67fad71d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result1 to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result2 to randomData2</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Generate random data for ref upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record to refEntity" id="f013e9a1-17dd-43a3-ae57-c8ef454950db"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record to refEntity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#refEntityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#refEnt_attrs}

<data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>
 </api:originRecord>
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer ref etalon and origin keys to properties" id="98f7b40b-76d2-4c8b-88d8-901f0d9a0359"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon id from buff</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>refEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to refOriginKeyID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record to refEntity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>refOriginKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Upsert record to Entity" id="5c723f77-0477-489d-88a4-a99a10d174ac"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Upsert record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>
  		
  		<api:relations>
               <api:relation name="${#TestCase#relName1}">
                  <api:record>
                       <api:relationTo relName="${#TestCase#relName1}">
                          <data:toEtalonKey id="${#TestCase#refEtalonKeyID}"/>
                        </api:relationTo>
                  </api:record>
               </api:relation>
            </api:relations>
            
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="7. Transfer origin and etalon keys to properties" id="8de835ba-0ef5-4f09-a27a-150cbdec7d14"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>6. Upsert record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="8. Do requestRelationsSoftDelete with etalon keys" id="d0ac204d-d75e-4d47-9f0e-85ed2f0a75c1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Do requestRelationsSoftDelete with etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>
            <!-- <api:originKey id="94c2e7d9-318e-43b7-9f19-edd93c163a24" externalId="bf4244b3-bf81-4ad4-afeb-92c55f15d637" sourceSystem="data_steward" entityName="R_MASTER"/> -->
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--  <api:originKey id="48cdc164-424d-41f2-ac8a-08e588c4d38b" externalId="00f0cd3b-c6a5-45ec-aaf2-08af51efab4e" sourceSystem="data_steward" entityName="R_SLAVE"/>   -->
                      <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="9. Transfer data to relationEtalonKeyID" id="acc236de-2328-4f68-ae68-074be3c18eb2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>data to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>8. Do requestRelationsSoftDelete with etalon keys</con:sourceStep><con:sourcePath>//*:etalonKeys[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>buff to relationEtalonKeyID</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>relationEtalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="10. Check state of deleted relation at DB" id="73a7aea0-077d-46ab-b0e0-6ed69d2d4733" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>org.postgresql.Driver</con:driver><con:connectionString>jdbc:postgresql://localhost:5432/${#Project#dataBaseName}?user=postgres&amp;password=postgres</con:connectionString><con:query>select status from etalons_relations where id = '${#TestCase#relationEtalonKeyID}';

</con:query><con:assertion type="JDBC Status" id="9b3ed002-24f1-48bf-8c0a-39d9ff4bebe0" name="JDBC Status"/><con:assertion type="XPath Match" id="e72ba35e-b3e2-462d-a3ed-bba3edbd0056" name="relation status = INACTIVE"><con:configuration><path>//*:ETALONS_RELATIONS.STATUS</path><content>INACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="request" name="11. Do requestRelationsSoftDelete with origin and ref etalon keys" id="dacc49d6-36f9-426d-83e7-1b15ce9d7c57"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="11. Do requestRelationsSoftDelete with origin and ref etalon keys" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>

	<api:requestRelationsSoftDelete actionType="SoftDeleteEtalon">
           
            <!--   <api:etalonKey id="${#TestCase#etalonKeyID}"/>   -->
             <api:originKey id="${#TestCase#originKeyID}" externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#randomData1}" entityName="${#TestCase#entityName}"/> 
             
            <api:relations>
            
               <api:relation name="${#TestCase#relName1}">
                  <api:key>
                  
                       <!--   <api:originKey id="${#TestCase#refOriginKeyID}" externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#refEntityName}"/>      -->
                       <api:etalonKey id="${#TestCase#refEtalonKeyID}"/>
                     <!-- <api:range rangeFrom="?" rangeTo="?"/>   -->
                     
                  </api:key>
               </api:relation>

            </api:relations>
       </api:requestRelationsSoftDelete>

      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8184b150-3fdf-459a-8b7d-b5adde2156e1" name="externalId data == attr data from resp" disabled="true"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def extIdprop = new Integer(context.expand('${#TestCase#externalId}'))

//Считываем результат из ответа
Integer result = new Integer(resp.getNodeValue('//*:intValue'))

//Проверяем утверждение
assert result == extIdprop</scriptText></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="etalonKeys"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b0c871b-b1cb-4d07-9db6-76231567196d" name="originKeys"><con:configuration><path>//*:originKeys[@id]</path><content>&lt;originKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value> &lt;data:simpleAttribute name="R_SIMP_ATTR"> &lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue> &lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>719fddf4-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">71a00505-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKeys id="71a5d169-16ee-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>908947</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>363733</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>718a0bfe-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refOriginKeyID</con:name><con:value>718a330f-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>refEntityName</con:name><con:value>R_SLAVE</con:value></con:property><con:property><con:name>refEnt_attrs</con:name><con:value><![CDATA[ <data:simpleAttribute name="R_SIMP_SLAVE_ATTR"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute>  <data:simpleAttribute name="R_SLAVE_ATTR_UNI"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>relationEtalonKeyID</con:name><con:value>71a5d169-16ee-11e8-8195-87ba01ce01e0</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="c0dfb52c-d051-4f51-86f6-8a9ad19402f5" name="UpsertClassifiers"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="89f291f0-3daa-4c9b-bbc8-3d2d790d0f81" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for record with classifiers" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="8dd01166-f802-4316-b86a-cb325ca9d437"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="062e88b9-af66-45d3-980e-7ce259265109"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="b3944c92-5022-4f77-8fea-ba4f6baa03b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="0f47cf43-5996-4c88-81fd-171ca5970e76"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}

               ${#TestCase#ent_classifiers}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="39ef3052-5169-4724-b799-ee0e07d57a51"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Get upserted record" id="fd3ccc7e-09b7-4d9e-991b-46bd325cd70f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="e6517dc3-ca89-49e8-8e36-a1526495ff0f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>with classifiers2</data:stringValue>  
 </data:simpleAttribute>
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="8261fe76-17d9-43ca-94b0-024adeb1b3b9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">678d6ff7-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>330829</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:03:02.751</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="3047fa2a-87a4-4c3a-8928-4a1f69133438" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for record with classifiers Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="d7cb316a-bde3-443a-aca9-bce71ad9177a"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="48326999-ce8f-4ed3-ae7b-cbe73c7b61bb"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="a070f1e7-150d-40f3-a20f-e91c105850b4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="bb66b2ad-0ec3-4732-a750-5c9f4fa8f562"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs}
			${#TestCase#ent_classifiers}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="5e7a8917-a66f-4d28-9e36-7298ade7a2e4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Get upserted record" id="d0de843e-9780-4be5-a317-c440ed3d68e6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Partial upsert for record" id="3ba12667-758a-4fd2-a9df-48a04e66fe11"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="code_atr">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>with classifiers2</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="8. Get upserted record" id="910791a0-0a23-4bb8-bfc1-db9e0a813319"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="8. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">681a1fa9-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>375289</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:03:03.788</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[ <data:codeAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:codeAttribute>    <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="ac69b710-adc4-4731-be96-ced942fefefc" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for classifiers" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="1916b2f4-3d1d-434f-9a52-a4c874ea14ad"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="1506cd9b-53ce-4e19-a2d1-d7f08a8387ce"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="c51e735e-86a6-454d-b196-e35143687587"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="c12a2fb6-611f-4366-b23f-8cdf805876f5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}

${#TestCase#ent_classifiers}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 ${#TestCase#ent_classifier_pointers}

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="8acec139-14da-4a1e-93d7-2c71b60ebe65"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="93b36d24-70ef-481c-a187-871b6e1264ca"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@skip_soap_action">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 <data:simpleAttribute name="string_attr">
 <data:stringValue>with classifiers2</data:stringValue>  
 </data:simpleAttribute>

 ${#TestCase#ent_classifiers_new}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

${#TestCase#ent_classifier_pointers}
 
 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="35266e54-8ddc-450a-baf8-fdbd4984176b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6c02b617-04a8-4170-9ea0-61d13de73ac0" name="Assert classifier cls4 is new"><con:configuration><path>//*[@classifierName="cls4"]//*[@name="atr1"]//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6c02b617-04a8-4170-9ea0-61d13de73ac0" name="Assert classifier cls3 is new"><con:configuration><path>//*[@classifierName="cls3"]//*[@name="atr1"]//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6894f50b-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>431020</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:03:04.603</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>ent_classifiers_new</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="97acb7f5-c83e-4d8a-845e-73e8cd459617" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial upsert for classifiers Lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="cbe11aa5-2014-4828-8218-e1ff368bec52"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="81e9fff3-ffde-45df-aed2-567213412f7b"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="f597fc39-f1fd-438e-b27f-6e5df46bffa6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="f05870bb-90f6-4e45-aa4c-b53a23212cc0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs}
			${#TestCase#ent_classifiers}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="7ffa201f-b8eb-4861-b429-9318099a01b4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="3072f53c-8238-4017-99a0-5039823fcb02"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="code_atr">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>with classifiers2</data:stringValue>\r
               </data:simpleAttribute>\r
               ${#TestCase#ent_classifiers_new}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="f860fbfc-7edb-4519-b23e-962d86295cf2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6c02b617-04a8-4170-9ea0-61d13de73ac0" name="Assert classifier cls4 is new"><con:configuration><path>//*[@classifierName="cls4"]//*[@name="atr1"]//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="6c02b617-04a8-4170-9ea0-61d13de73ac0" name="Assert classifier cls3 is new"><con:configuration><path>//*[@classifierName="cls3"]//*[@name="atr1"]//*</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6900d64e-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>450512</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:03:05.305</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[<data:codeAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:codeAttribute><data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>ent_classifiers_new</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>23</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="a6b2b951-623a-4ae5-b422-b844257a71e6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial delete for classifiers" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="3efffa6a-4376-4730-8609-fcbb2c2673b4"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="de807d58-6227-4e30-9508-d69b3bf679ae"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="ebaa50a2-c5b7-4232-9ed5-0c2b48382d1b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="736a26ab-89d0-4375-a2a2-5c6f399c7d56"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
${#TestCase#ent_attrs}

${#TestCase#ent_classifiers}
  
<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 ${#TestCase#ent_classifier_pointers}

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>

]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="203a238d-8f1a-4aa4-af31-ab90b9948bbe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="01c6ecf0-8a87-4e5e-aa14-372823f84155"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>with classifiers2</data:stringValue>\r
               </data:simpleAttribute>\r
               ${#TestCase#ent_classifiers_new}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="48353db5-15a8-4ae2-8dde-f7db57c1a8c2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_COMPLICATED</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">69773ee1-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>292721</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:03:06.087</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[  <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:simpleAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:simpleAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>ent_classifiers_new</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="INACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="INACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property></con:properties></con:testCase><con:testCase id="89e1b12f-874f-4a16-b91a-959d007fa3ea" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Partial delete for classifiers lookup entity" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b3f54cf4-4ad3-42fb-a1e4-e46fe7c5bd8d"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="0b574a7a-5253-419f-a4ef-063cdf063201"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="84ec31f1-d153-4ed2-9090-f6c230a29bfe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Upsert record for Entity" id="dd8d8bda-8f50-453c-9b5c-5a25a9024898"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Upsert record for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#lookup_attrs}
               ${#TestCase#ent_classifiers}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="5. Transfer etalon key to properties" id="f6507b52-a796-4b70-9043-e3d0a7617893"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>4. Upsert record for Entity</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="6. Partial upsert for record" id="6d3e4231-9a78-4ae7-a367-641c42c8b0a9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="6. Partial upsert for record" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="code_atr">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>with classifiers2</data:stringValue>\r
               </data:simpleAttribute>\r
               ${#TestCase#ent_classifiers_new}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
            ${#TestCase#ent_classifier_pointers}\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="7. Get upserted record" id="1af72d89-3842-46d1-be69-187e316a60f9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="7. Get upserted record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                    <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestGet entityName="${#TestCase#lookupEntityName}" asOf="${#TestCase#currDate}">
            
             <api:etalonKey id="${#TestCase#etalonKeyID}"/>          

         </api:requestGet>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert string_atr is new"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>with classifiers2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="Assert int_atr is old"><con:configuration><path>//*:etalonRecord//*[@name='int_atr']//*</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3ca950b4-ccb5-4734-8764-fbf001d2921e" name="Check count of classifiers"><con:configuration><path>count(//*[@classifierName])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>link_lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">69e32022-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>8b26cf65-36e8-4dc4-85ac-73dc6d95e2fc</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>100921</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:03:06.787</con:value></con:property><con:property><con:name>lookup_attrs</con:name><con:value><![CDATA[ <data:codeAttribute name="code_atr">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:codeAttribute> <data:simpleAttribute name="string_attr">  <data:stringValue>with classifiers1</data:stringValue>  </data:simpleAttribute>  <data:simpleAttribute name="int_atr">  <data:intValue>1</data:intValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookup_attrs_1</con:name><con:value><![CDATA[ <data:codeAttribute name="KOD">  <data:intValue>${#TestCase#randomData1}</data:intValue>  </data:codeAttribute>   <data:simpleAttribute name="NAME">  <data:stringValue>${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute> ]]></con:value></con:property><con:property><con:name>ent_classifiers</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="ACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>1</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property><con:property><con:name>ent_classifier_pointers</con:name><con:value><![CDATA[<api:classifierPointers classifierName="cls3" classifierPointer="КЛС3.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers> <api:classifierPointers classifierName="cls4" classifierPointer="КЛС4.node1.node11"> 	<api:pointerType>NODE_NAME</api:pointerType> </api:classifierPointers>]]></con:value></con:property><con:property><con:name>ent_classifiers_new</con:name><con:value><![CDATA[ <data:classifiers classifierName="cls3" status="INACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>  <data:classifiers classifierName="cls4" status="INACTIVE">  	<data:simpleAttribute name="atr1"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  	<data:simpleAttribute name="atr2"> 		<data:stringValue>2</data:stringValue>  	</data:simpleAttribute>  </data:classifiers>]]></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="c3fdde81-2a53-4a18-83a4-74f0588a7008" name="UpsertEnums"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="d9a0e863-d01f-43fa-8d3e-31d3c285adb4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with enum" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="e98ac3de-876a-4fc3-8292-32578deca2ea"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="4927dd6b-85e1-4bad-988c-72c0d703b2f4"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="dd40c1bb-959a-40e9-b666-d484605d1a8e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="50f0ed08-9169-460b-84c8-d85084fb4eda"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ENUMS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>711818</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:56.532</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="b78b8cb7-f151-450f-8c91-07ae345c0f9b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update record with null value for enum attr" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="601cb8ef-9b80-43c2-942d-c25d2a83cea6"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="99439687-1648-4295-9929-33541110c1e7"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="dd2da67d-9eda-4e1e-a53f-f00587bc1f51"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="884efec4-869e-4a06-beed-7b7e037969ab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ENUMS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>136653</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:56.725</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value>&lt;data:simpleAttribute name="string_attr">  &lt;data:stringValue>тест перечислений ${#TestCase#randomData1}&lt;/data:stringValue>  &lt;/data:simpleAttribute>   &lt;data:simpleAttribute name="enum_attr" xmlns:nil="true"/></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="8c7d8c78-e251-4395-accf-209d2c8e7432" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with non-existing value of enum" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="74f04e58-be52-4c2e-b10c-f27c60ebd014"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="880d349f-653c-4378-9301-9cc89aa6898b"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="e9a29a83-2989-40f9-a1fb-1d58eb97137a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="d462f21c-f7c4-45d2-b850-ff6361c3d40b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
<soapenv:Header/>
<soapenv:Body>
<api:apiRequestBody>
<api:common storageId="1" operationId="1">
<api:security>
<api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
</api:security>
</api:common>
<api:requestUpsert entityName="${#TestCase#entityName}"  lastUpdateDate="2016-07-21T00:00:00.000" skipCleanse="false" bypassExtensionPoints="false">

 <api:originRecord>
 
 ${#TestCase#ent_attrs}

<data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>
 </api:originRecord>

 </api:requestUpsert>
</api:apiRequestBody>
</soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_UPSERT_ENUM_ATTRIBUTE_INCORRECT"><con:configuration><path>//@errorCode</path><content>EX_DATA_UPSERT_ENUM_ATTRIBUTE_INCORRECT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ENUMS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>864460</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2018-02-21T13:02:57.017</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>non-existing-value</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="815ad146-f747-4121-8783-9b4f7f023748" name="UpsertMeasurementUnits"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="763afacb-9db2-46ac-bd1c-83fd690a2750" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with MU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="f949c9ee-abac-4ad3-9d0b-cd803b2b2db2"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="da5a73c1-0921-4ce3-9702-af178f3e96d7"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="276475f2-9cbd-42f7-88e2-111d361880dd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="1dd8a4d5-49cc-4252-a2f4-80938777e775"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>832109</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:48.453</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Тест единиц измерения ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="55" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="39" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="214" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="98b377ce-a0d1-4e24-80a6-6c56fe77c4af" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with null value for MU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="4b1e1777-22da-464c-8798-aa77e3a754f8"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="90238289-aa51-4e2d-83c9-83c356dcf6df"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="53dad2a1-4ffd-4523-aa35-20975bc6f1a6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="46bdaf03-8330-4d4d-85ed-5da8802affaf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>638712</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:48.640</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Зануление 3-го атрибута ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="55" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="39" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr" xmlns:nil="true"/>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="428b22c9-aa37-4467-98dc-f5edbf8382b4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record without measurementValueId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="41c4fd15-5675-49c1-be67-d558239b8860"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="8eb333e2-09f2-4ab1-a23c-a31a6c7f5f90"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="561343c9-0ca6-4ce2-a79b-2f47c2cebc39"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="8e5ef9f5-6986-49ab-964c-c23165486601"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>653746</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:48.838</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Без measurementValueId ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementUnitId="55" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementUnitId="39" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementUnitId="214" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="ad18dc52-418e-40ce-a6e7-660d43b8c023" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with incorrect measurementValueId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="b2d373f7-f0fa-4e11-b7f2-8599746561ea"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="7ed3e7c2-557d-4776-9ae8-21a4879fc6b0"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="a7d72c81-36f0-4c1a-954b-3ff5d1c3944c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="8467835e-081a-4f19-88ae-1bb4300a5b56"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_ATTRIBUTE_MEASURED_VALUE_NOT_PRESENT"><con:configuration><path>//@errorCode</path><content>EX_DATA_ATTRIBUTE_MEASURED_VALUE_NOT_PRESENT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>568707</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:49.042</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Некорректный measurementValueId ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="incorrect-${#TestCase#randomData1}" measurementUnitId="55" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="incorrect-${#TestCase#randomData1}" measurementUnitId="39" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="incorrect-${#TestCase#randomData1}" measurementUnitId="214" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="a1adb271-5424-4c8d-bcd7-51a2e770bef7" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record without measurementUnitId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="66c297e3-6542-42e0-bdf9-8bd10b025632"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="dd8086c8-2e72-4ff7-a6ea-f75e8ef8c63e"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="66e3fb64-3c33-4a43-b0d3-4aa50bb40150"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="23cddaf2-b21e-4870-a6d3-bd31681bfeba"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>975585</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:49.177</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Тест единиц измерения ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="8942694b-35ff-4bef-853b-9926dac865eb" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with incorrect measurementUnitId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="91792a7a-d5fc-413b-aa8c-ebb039a643b0"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="6b7d5e4c-5bdc-41d8-8b4f-280e273acd2d"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="0b57919f-0783-49e2-8e54-01db7a5e3a8b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="6d4f714a-3fea-4d07-ad7d-18e800c01ca1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT"><con:configuration><path>//@errorCode</path><content>EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>284639</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:49.341</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Тест единиц измерения ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="incorrect-${#TestCase#randomData1}" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="incorrect-${#TestCase#randomData1}" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="incorrect-${#TestCase#randomData1}" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="f836377d-0ef9-4623-b4f5-7a2ce2d7ce98" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record without value" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="cfe6e257-da84-4fd0-9f4e-36ad0b01c56d"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="ab7288da-a233-4eee-ad3f-15c8bda6aade"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="942dc0e5-f371-4a3b-afb9-3a342893a7bc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="9a28e403-c4c6-4508-8e88-bebc8c874cf1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>614938</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:49.477</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Без value ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="55" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="39" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="214" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="52130c46-4e38-4038-8b6f-2595aa0f5b9c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with incorrect value" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="57219971-bcb0-479e-909d-a3d86084379e"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="6bf2c038-073f-4361-b774-44be7a5ef77b"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="9ee716a4-52e5-4f6b-a9ab-b41c474bbbde"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="c779e1dc-87a7-4b2b-9d0d-51f9cf280ded"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="Check faultstring"><con:configuration><path>declare namespace xmlns='http://schemas.xmlsoap.org/soap/envelope/';
//xmlns:Fault[1]</path><content><![CDATA[<soap:Fault xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <faultcode>*</faultcode>
  <faultstring>Значение [incorrect-*] должно быть численным.</faultstring>
</soap:Fault>]]></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT" disabled="true"><con:configuration><path>//@errorCode</path><content>EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>484157</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:49.650</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Incorrect value ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="55" value="incorrect-${#TestCase#randomData1}" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="39" value="incorrect-${#TestCase#randomData1}" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="214" value="incorrect-${#TestCase#randomData1}" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:testCase id="a974f27f-b25e-4ecc-bb99-71cd81302b57" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with not related measurementValueId and measurementUnitId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="1. Generate random data for upsert" id="9b31c59d-e98e-419a-af09-dff48d5194e1"><con:settings/><con:config><script>random = new Random().nextInt(999999 - 100000) + 100000
result = random</script></con:config></con:testStep><con:testStep type="groovy" name="2. Get current date for upsert" id="e82c3905-a833-44d2-ba12-a7c3c09ab663"><con:settings/><con:config><script>def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)</script></con:config></con:testStep><con:testStep type="transfer" name="3. Transfer results to randomData1 and currDate" id="67fb4eb0-b9f2-4bd3-b619-386b4daaa566"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to randomData1</con:name><con:sourceType>result</con:sourceType><con:sourceStep>1. Generate random data for upsert</con:sourceStep><con:sourcePath/><con:targetType>randomData1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>result to currDate</con:name><con:sourceType>result</con:sourceType><con:sourceStep>2. Get current date for upsert</con:sourceStep><con:sourcePath/><con:targetType>currDate</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="4. Do requestUpsert for Entity" id="5670ab0d-d377-45de-b9a1-dcf2554316c7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="4. Do requestUpsert for Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${2. Get current date for upsert#result}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT"><con:configuration><path>//@errorCode</path><content>EX_DATA_ATTRIBUTE_MEASURED_UNIT_NOT_PRESENT</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MU</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>653811</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:49.687</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">   <data:stringValue>Тест единиц измерения ${#TestCase#randomData1}</data:stringValue>   </data:simpleAttribute>     <data:simpleAttribute name="num1_attr">   <data:measuredValue measurementValueId="2" measurementUnitId="39" value="97" /> </data:simpleAttribute>  <data:simpleAttribute name="num2_attr">   <data:measuredValue measurementValueId="1" measurementUnitId="55" value="98" /> </data:simpleAttribute>  <data:simpleAttribute name="num3_attr">   <data:measuredValue measurementValueId="4" measurementUnitId="39" value="99" /> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="cb896f21-7a2f-418a-9db0-9fb42c46b5f6" name="UpsertArrayAttributes"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e38d574b-eb7b-4bbb-8162-729fd289e046" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create record with array of attributes for all types" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="bf20bffd-09dc-4656-81a2-024493d1d8b4"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert records to handbook" id="b027f81e-e276-4344-8059-555d8ef06edf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert records to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="KOD">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="NAME">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert record with array of attributes" id="24b5984a-ed79-4996-a76c-d9451738bdff"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert record with array of attributes" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert record with array of attributes ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:arrayAttribute name="array_str">\r
                  <data:stringValue>String 1 - ${#TestCase#randomData1}</data:stringValue>\r
                  <data:stringValue>String 2 - ${#TestCase#randomData1}</data:stringValue>\r
                  <data:stringValue>String 3 - ${#TestCase#randomData1}</data:stringValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_int">\r
                  <data:intValue>1${#TestCase#randomInt1}7</data:intValue>\r
                  <data:intValue>2${#TestCase#randomInt1}8</data:intValue>\r
                  <data:intValue>3${#TestCase#randomInt1}9</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_num">\r
                  <data:numberValue>1.2</data:numberValue>\r
                  <data:numberValue>3.4</data:numberValue>\r
                  <data:numberValue>5.6</data:numberValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_date">\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_datetime">\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_time">\r
                  <data:timeValue>10:10:10</data:timeValue>\r
                  <data:timeValue>11:11:11</data:timeValue>\r
                  <data:timeValue>12:12:12</data:timeValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_ref2handbook">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_str_masked">
                  <data:stringValue>S123s</data:stringValue>
                  <data:stringValue>S456s</data:stringValue>
                  <data:stringValue>S789s</data:stringValue>
               </data:arrayAttribute>
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>523327</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:37.291</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>66</con:value></con:property></con:properties></con:testCase><con:testCase id="7f853d6e-483f-4387-aec6-a861aaff90ed" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update values of array" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="059eb9c8-21a9-487f-a0ce-340ef800bf86"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert record to handbook" id="4651d8a9-7247-46f3-9183-2a9ccac29252"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert record to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="KOD">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="NAME">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert record with array of attributes" id="b3a42c71-b9f4-41ab-be16-3f43378007dc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert record with array of attributes" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert record with array of attributes ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:arrayAttribute name="array_str">\r
                  <data:stringValue>String 1 - ${#TestCase#randomData1}</data:stringValue>\r
                  <data:stringValue>String 2 - ${#TestCase#randomData1}</data:stringValue>\r
                  <data:stringValue>String 3 - ${#TestCase#randomData1}</data:stringValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_int">\r
                  <data:intValue>1${#TestCase#randomInt1}7</data:intValue>\r
                  <data:intValue>2${#TestCase#randomInt1}8</data:intValue>\r
                  <data:intValue>3${#TestCase#randomInt1}9</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_num">\r
                  <data:numberValue>1.2</data:numberValue>\r
                  <data:numberValue>3.4</data:numberValue>\r
                  <data:numberValue>5.6</data:numberValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_date">\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_datetime">\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_time">\r
                  <data:timeValue>10:10:10</data:timeValue>\r
                  <data:timeValue>11:11:11</data:timeValue>\r
                  <data:timeValue>12:12:12</data:timeValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_ref2handbook">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:arrayAttribute>\r
                 <data:arrayAttribute name="array_str_masked">
                  <data:stringValue>S123s</data:stringValue>
                  <data:stringValue>S456s</data:stringValue>
                  <data:stringValue>S789s</data:stringValue>
               </data:arrayAttribute>
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer etalon key to properties" id="db6c589c-4b04-49e0-b30e-285a71a6ad37"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert record with array of attributes</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Partial upsert for record with array of attributes" id="bea09bb0-7327-45ca-b6d4-5ed13dad3079"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Partial upsert for record with array of attributes" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>UPDATED Upsert record with array of attributes ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:arrayAttribute name="array_str">\r
                  <data:stringValue>String 1 - ${#TestCase#randomData1}</data:stringValue>\r
                  <data:stringValue>String 2 - ${#TestCase#randomData1}</data:stringValue>\r
                  <data:stringValue>String 3 - ${#TestCase#randomData1}</data:stringValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_int">\r
                  <data:intValue>4${#TestCase#randomInt1}7</data:intValue>\r
                  <data:intValue>5${#TestCase#randomInt1}8</data:intValue>\r
                  <data:intValue>6${#TestCase#randomInt1}9</data:intValue>\r
               </data:arrayAttribute>\r
                 <data:arrayAttribute name="array_str_masked">
                  <data:stringValue>S123s</data:stringValue>
                  <data:stringValue>S456s</data:stringValue>
                  <data:stringValue>S789s</data:stringValue>
               </data:arrayAttribute>
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get record with array of attributes" id="e6cc2d11-6748-4610-8d4e-f545407e5ccf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get record with array of attributes" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="string_attr has got a new value"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>UPDATED Upsert record with array of attributes *</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="array_int has got a new value"><con:configuration><path>//*:etalonRecord//*[@name='array_int']//*:intValue[1]</path><content>4${#TestCase#randomInt1}7</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">58bcdd38-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>623906</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:37.801</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>40</con:value></con:property></con:properties></con:testCase><con:testCase id="c7dc6f38-3d69-422a-8490-40f1164cfbbb" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Delete values from array" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="c25ebb43-8dd9-4b56-ad3a-0ac255d6ade4"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert record to handbook" id="e97e076f-8877-4b27-a342-72390763299b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert record to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="KOD">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="NAME">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert record with array of attributes" id="84f6926e-5625-4dc8-ba1c-2832f332699c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert record with array of attributes" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert record with array of attributes ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:arrayAttribute name="array_str">\r
                  <data:stringValue>String 1 - ${#TestCase#randomData1}</data:stringValue>\r
                  <data:stringValue>String 2 - ${#TestCase#randomData1}</data:stringValue>\r
                  <data:stringValue>String 3 - ${#TestCase#randomData1}</data:stringValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_int">\r
                  <data:intValue>1${#TestCase#randomInt1}7</data:intValue>\r
                  <data:intValue>2${#TestCase#randomInt1}8</data:intValue>\r
                  <data:intValue>3${#TestCase#randomInt1}9</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_num">\r
                  <data:numberValue>1.2</data:numberValue>\r
                  <data:numberValue>3.4</data:numberValue>\r
                  <data:numberValue>5.6</data:numberValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_date">\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_datetime">\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_time">\r
                  <data:timeValue>10:10:10</data:timeValue>\r
                  <data:timeValue>11:11:11</data:timeValue>\r
                  <data:timeValue>12:12:12</data:timeValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_ref2handbook">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_str_masked">
                  <data:stringValue>S123s</data:stringValue>
                  <data:stringValue>S456s</data:stringValue>
                  <data:stringValue>S789s</data:stringValue>
               </data:arrayAttribute>
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer etalon key to properties" id="22293c24-3594-4acb-b643-4772bd33995d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert record with array of attributes</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Update record with new array of attributes" id="2624576e-2533-4a16-a911-21a7b8eaaba4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Update record with new array of attributes" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert mergeWithPreviousVersion="true" entityName="${#TestCase#entityName}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>VALUE DELETED Upsert record with array of attributes ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:arrayAttribute name="array_str">
                  <data:stringValue>String 1 - ${#TestCase#randomData1}</data:stringValue>
                  <data:stringValue>String 2 - ${#TestCase#randomData1}</data:stringValue>
                  <data:stringValue>String 3 - ${#TestCase#randomData1}</data:stringValue>
               </data:arrayAttribute>
               <data:arrayAttribute name="array_int">\r
                  <data:intValue>2${#TestCase#randomInt1}8</data:intValue>
                  <data:intValue>3${#TestCase#randomInt1}9</data:intValue>
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_str_masked">
                  <data:stringValue>S123s</data:stringValue>
                  <data:stringValue>S456s</data:stringValue>
                  <data:stringValue>S789s</data:stringValue>
               </data:arrayAttribute>
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get record with array of attributes" id="10c89976-8ff7-491f-bd2c-1fffd3065857"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get record with array of attributes" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="string_attr has got a new value"><con:configuration><path>//*:etalonRecord//*[@name='string_attr']//*</path><content>VALUE DELETED *</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="array_int has got a new value"><con:configuration><path>//*:etalonRecord//*[@name='array_int']//*:intValue[1]</path><content>2${#TestCase#randomInt1}8</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5929f6f7-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>576550</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:38.538</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>13</con:value></con:property></con:properties></con:testCase><con:testCase id="e2709187-074c-43e0-9831-8327550b0c1d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Upsert record with array of attributes with incorrect values" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="be831ccf-cc5d-4a3a-a1de-85a22d35d52c"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert incorrect int values" id="cfbb94aa-8ecb-44a0-87dd-1789a2cb5a06"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert incorrect int values" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert incorrect int values ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               
               <data:arrayAttribute name="array_int">\r
                  <data:intValue>1.7</data:intValue>\r
                  <data:intValue>2.8</data:intValue>\r
                  <data:intValue>3.9</data:intValue>\r
               </data:arrayAttribute>\r
               
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success" disabled="true"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="28c5605a-ff7b-4d04-8640-e0d480c599e6" name="Unmarshalling Error: For input string: &quot;1.7&quot;"><con:configuration><path>//*:faultstring</path><content>Unmarshalling Error: For input string: "1.7"</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert incorrect num values" id="2aff04d5-ad8b-41ea-801a-0bbebcc668c1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert incorrect num values" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert incorrect num values ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               
               <data:arrayAttribute name="array_num">\r
                  <data:numberValue>string1</data:numberValue>\r
                  <data:numberValue>string2</data:numberValue>\r
                  <data:numberValue>string3</data:numberValue>\r
               </data:arrayAttribute>\r
               
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success" disabled="true"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c8fd88fb-ef6d-4efc-a9eb-ee038826bab7" name="Unmarshalling Error: string1"><con:configuration><path>//*:faultstring</path><content>Unmarshalling Error: string1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert incorrect date values" id="338a655f-4424-44d1-8af4-777956032574"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert incorrect date values" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert incorrect date values ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               
               <data:arrayAttribute name="array_date">
                  <data:dateValue>date1</data:dateValue>
                  <data:dateValue>date2</data:dateValue>
                  <data:dateValue>date3</data:dateValue>
               </data:arrayAttribute>
               
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success" disabled="true"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c8fd88fb-ef6d-4efc-a9eb-ee038826bab7" name="Unmarshalling Error: string1"><con:configuration><path>//*:faultstring</path><content>Unmarshalling Error: date1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert incorrect datetime values" id="06347f2a-60dd-402a-a4e3-6310d564ac26"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert incorrect datetime values" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert incorrect datetime values ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               
               <data:arrayAttribute name="array_date">
                  <data:dateValue>datetime1</data:dateValue>
                  <data:dateValue>datetime2</data:dateValue>
                  <data:dateValue>datetime3</data:dateValue>
               </data:arrayAttribute>
               
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success" disabled="true"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c8fd88fb-ef6d-4efc-a9eb-ee038826bab7" name="Unmarshalling Error: string1"><con:configuration><path>//*:faultstring</path><content>Unmarshalling Error: datetime1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert incorrect time values" id="7b44e43d-b290-4af1-a5b4-3f8e90adc6a8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert incorrect time values" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert incorrect time values ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               
               <data:arrayAttribute name="array_time">
                  <data:timeValue>time1</data:timeValue>
                  <data:timeValue>time2</data:timeValue>
                  <data:timeValue>time3</data:timeValue>
               </data:arrayAttribute>
               
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success" disabled="true"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c8fd88fb-ef6d-4efc-a9eb-ee038826bab7" name="Unmarshalling Error: string1"><con:configuration><path>//*:faultstring</path><content>Unmarshalling Error: time1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert non-existing ref2handbook values" id="52ad246b-3f0f-4010-8a66-80b69265ad1a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert non-existing ref2handbook values" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert non-existing ref2handbook values ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r

               <data:arrayAttribute name="array_str">
                  <data:stringValue>String 1 - ${#TestCase#randomData1}</data:stringValue>
                  <data:stringValue>String 2 - ${#TestCase#randomData1}</data:stringValue>
                  <data:stringValue>String 3 - ${#TestCase#randomData1}</data:stringValue>
               </data:arrayAttribute>

               
               <data:arrayAttribute name="array_ref2handbook">
                  <data:intValue>1234567890</data:intValue>
                  <data:intValue>1234567890</data:intValue>
                  <data:intValue>1234567890</data:intValue>
               </data:arrayAttribute>
               
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="dqErrors message"><con:configuration><path>//@message</path><content>Записи справочника не существует. Значения кодовых атрибутов:[1234567890].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>727580</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:39.286</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>63</con:value></con:property></con:properties></con:testCase><con:testCase id="295b5a8d-aac0-4d97-99d5-630b31ea8983" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Upsert record without required array of attributes" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="d84c0120-da69-47d9-a570-495dabd08ab1"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert record with array of attributes" id="15633737-dd1e-40c0-bd84-055b00d09b40"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert record with array of attributes" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert without required data ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
              
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = EX_DATA_UPSERT_REQUIRED_ATTRS_IS_NOT_PRESENTED"><con:configuration><path>//@errorCode</path><content>EX_DATA_UPSERT_REQUIRED_ATTRS_IS_NOT_PRESENTED</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>527602</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:39.549</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>68</con:value></con:property></con:properties></con:testCase><con:testCase id="2a527021-efde-4a61-86f7-fd4644760e94" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Upsert record with value which doesnt match the mask" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="6bfcfc7a-0cea-40e1-8672-7803dfd7e59d"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert record with array of attributes" id="0341db58-e8c5-4728-8f50-ad22a69de2f6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert record with array of attributes" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert values which doesn't match the mask ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:arrayAttribute name="array_str">
                  <data:stringValue>String 1 - ${#TestCase#randomData1}</data:stringValue>
                  <data:stringValue>String 2 - ${#TestCase#randomData1}</data:stringValue>
                  <data:stringValue>String 3 - ${#TestCase#randomData1}</data:stringValue>
               </data:arrayAttribute>

                 <data:arrayAttribute name="array_str_masked">
                  <data:stringValue>string1</data:stringValue>
                  <data:stringValue>string2</data:stringValue>
                  <data:stringValue>string3</data:stringValue>
               </data:arrayAttribute>
              
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="dqErrors message"><con:configuration><path>//@message</path><content>Значение [{string1,string2,string3}] атрибута [array_str_masked] не соответствует маске [L999l].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>580076</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:39.682</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>93</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="7484ded8-c240-4afa-b484-4ebbed5a42f4" name="MergeHandbookRecords"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="2f7f5a7a-3c86-4ec1-bb90-679fcb4335a4" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge two records in handbook (int)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="5112c59c-0788-4388-81e0-608cde498ad4"><con:settings/><con:config><script>// GENERATE RANDOM DATA
rand1 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", rand1.toString())

rand2 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert first record to handbook" id="f577df37-d4ed-4a10-a16b-dfec233c8c46"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert first record to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="KOD">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="NAME">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert second record to handbook" id="d5ed266b-1d77-420c-b614-e024acffdbd1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert second record to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="KOD">\r
                  <data:intValue>${#TestCase#randomData2}</data:intValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="NAME">\r
                  <data:stringValue>${#TestCase#randomData2}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer etalon keys to properties" id="4e781ecb-2ba7-40fb-8938-0c226f83f55d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>first etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert first record to handbook</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>second etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert second record to handbook</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Merge records" id="5a97226e-5f28-4022-a818-c3da8596f614"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Merge records" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">
  
         <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/> 
         <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>
 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5325bebb-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">534d1ce1-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>675866</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>102441</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:28.622</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>98</con:value></con:property></con:properties></con:testCase><con:testCase id="943e08a8-0d17-41b8-97ad-598640770cbd" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge two records in handbook (string)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="802d4c16-5945-4c42-a0fd-c845f5edfc4e"><con:settings/><con:config><script>// GENERATE RANDOM DATA
rand1 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", rand1.toString())

rand2 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert first record to handbook" id="5b397c5a-e1af-40bf-a78c-dc45ba5700c4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert first record to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="code_atr">\r
                  <data:stringValue>Code attribute - ${#TestCase#randomData1}</data:stringValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>First record ${#TestCase#randomData1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert second record to handbook" id="058c9b56-dfd0-48fb-9b8c-0f68e30c59e7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert second record to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="code_atr">
                  <data:stringValue>Code attribute - ${#TestCase#randomData2}</data:stringValue>
               </data:codeAttribute>
               <data:simpleAttribute name="string_attr">
                  <data:stringValue>Second record ${#TestCase#randomData2}</data:stringValue>
               </data:simpleAttribute>
               <data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer etalon keys to properties" id="8613c521-a400-44fd-9111-06a210cdaad4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>first etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert first record to handbook</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>second etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert second record to handbook</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Merge records" id="d44b5ec9-a5fe-4561-a1cb-7ca54e833b30"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Merge records" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">
  
         <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/> 
         <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>
 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>S_COMPLICATED</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">53a500ea-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">53c495e0-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>923045</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>575483</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:29.463</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>89</con:value></con:property></con:properties></con:testCase><con:testCase id="3d24e3f8-4c65-4ded-98b6-cf051131f0fd" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Merge two records in registry (int)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="64249dcf-a529-44d6-8be3-97b85d7901b1"><con:settings/><con:config><script>// GENERATE RANDOM DATA
rand1 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", rand1.toString())

rand2 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

rand3 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData3", rand3.toString())

rand4 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData4", rand4.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert first record to handbook" id="10e58fd4-bb96-40b6-8d17-c6ad56cc5f1c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert first record to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="KOD">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="NAME">\r
                  <data:stringValue>${#TestCase#randomData1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert second record to handbook" id="f3c60ee8-4827-4088-a40a-92e0a35626dd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert second record to handbook" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#lookupEntityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:codeAttribute name="KOD">\r
                  <data:intValue>${#TestCase#randomData2}</data:intValue>\r
               </data:codeAttribute>\r
               <data:simpleAttribute name="NAME">\r
                  <data:stringValue>${#TestCase#randomData2}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#lookupEntityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer handbook etalon keys to properties" id="bbb0e399-2aa9-4cc6-bb54-7496e5c1450e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>first etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert first record to handbook</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>second etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert second record to handbook</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Upsert first record to registry" id="7da340ca-5f86-41f2-baa3-f3d1bc5d5838"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert first record to registry" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert first record to registry ${#TestCase#randomData3}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:arrayAttribute name="array_str">\r
                  <data:stringValue>String 1 - ${#TestCase#randomData3}</data:stringValue>\r
                  <data:stringValue>String 2 - ${#TestCase#randomData3}</data:stringValue>\r
                  <data:stringValue>String 3 - ${#TestCase#randomData3}</data:stringValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_int">\r
                  <data:intValue>1${#TestCase#randomInt1}7</data:intValue>\r
                  <data:intValue>2${#TestCase#randomInt1}8</data:intValue>\r
                  <data:intValue>3${#TestCase#randomInt1}9</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_num">\r
                  <data:numberValue>1.2</data:numberValue>\r
                  <data:numberValue>3.4</data:numberValue>\r
                  <data:numberValue>5.6</data:numberValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_date">\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_datetime">\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_time">\r
                  <data:timeValue>10:10:10</data:timeValue>\r
                  <data:timeValue>11:11:11</data:timeValue>\r
                  <data:timeValue>12:12:12</data:timeValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_ref2handbook">\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData1}</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_str_masked">
                  <data:stringValue>S123s</data:stringValue>
                  <data:stringValue>S456s</data:stringValue>
                  <data:stringValue>S789s</data:stringValue>
               </data:arrayAttribute>
               <data:originKey externalId="${#TestCase#randomData3}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert second record to registry" id="f57d4a3a-c9fd-4de5-93e3-0873903ac448"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert second record to registry" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Upsert second record to registry ${#TestCase#randomData4}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:arrayAttribute name="array_str">\r
                  <data:stringValue>String 1 - ${#TestCase#randomData4}</data:stringValue>\r
                  <data:stringValue>String 2 - ${#TestCase#randomData4}</data:stringValue>\r
                  <data:stringValue>String 3 - ${#TestCase#randomData4}</data:stringValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_int">\r
                  <data:intValue>1${#TestCase#randomInt1}7</data:intValue>\r
                  <data:intValue>2${#TestCase#randomInt1}8</data:intValue>\r
                  <data:intValue>3${#TestCase#randomInt1}9</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_num">\r
                  <data:numberValue>1.2</data:numberValue>\r
                  <data:numberValue>3.4</data:numberValue>\r
                  <data:numberValue>5.6</data:numberValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_date">\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
                  <data:dateValue>${#TestCase#currDate}</data:dateValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_datetime">\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
                  <data:timestampValue>${#TestCase#currDate}</data:timestampValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_time">\r
                  <data:timeValue>10:10:10</data:timeValue>\r
                  <data:timeValue>11:11:11</data:timeValue>\r
                  <data:timeValue>12:12:12</data:timeValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_ref2handbook">\r
                  <data:intValue>${#TestCase#randomData2}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData2}</data:intValue>\r
                  <data:intValue>${#TestCase#randomData2}</data:intValue>\r
               </data:arrayAttribute>\r
               <data:arrayAttribute name="array_str_masked">
                  <data:stringValue>S123s</data:stringValue>
                  <data:stringValue>S456s</data:stringValue>
                  <data:stringValue>S789s</data:stringValue>
               </data:arrayAttribute>
               <data:originKey externalId="${#TestCase#randomData4}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer registry etalon keys to properties" id="5d7e2d30-c876-430e-83fe-d9139d2cc88b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>first etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert first record to registry</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>second etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert second record to registry</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Merge handbook records" id="1da551c2-dbfb-43d0-932d-f54489cf867f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Merge handbook records" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
                 <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
         </api:common>
         <api:requestMerge entityName="${#TestCase#lookupEntityName}" skipCleanse="false" bypassExtensionPoints="false">
  
         <api:masterEtalonKey id="${#TestCase#etalonKeyID1}"/> 
         <api:duplicateEtalonKey id="${#TestCase#etalonKeyID2}"/>
 
         </api:requestMerge>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get first record from registry" id="ef08a700-725e-43c6-bdc0-65f6d95a07d6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get first record from registry" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID3}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="array_ref2handbook hasn't been changed"><con:configuration><path>//*:etalonRecord//*[@name='array_ref2handbook']//*:intValue[1]</path><content>${#TestCase#randomData1}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get second record from registry" id="d12a5f35-a9fd-45e6-b38f-598bca6a717e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get second record from registry" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID4}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="array_ref2handbook hasn't been changed"><con:configuration><path>//*:etalonRecord//*[@name='array_ref2handbook']//*:intValue[1]</path><content>${#TestCase#randomData2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_ARRAY_ATTRS</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">540e4919-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">542aaabf-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID3</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5449f295-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID4</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">546f2ddb-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>985892</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>110413</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>507733</con:value></con:property><con:property><con:name>randomData4</con:name><con:value>632495</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:30.159</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>82</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="33454f5b-e6b3-495b-8e3d-99c1e7b7956f" name="CheckDQRules"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="255da00d-acb4-49e5-bcb0-6af16cee7e93" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check validation" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="76e0ea3f-3c95-4bae-b188-7e7a049c62f0"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert valid_attr with incorrect length" id="a4d87a5c-60ba-4537-824d-ee4194194c3e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert valid_attr with incorrect length" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Check validation: Incorrect length ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="valid_attr">\r
                  <data:stringValue>Check validation ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="dqError message"><con:configuration><path>//@message</path><content>Incorrect length value of valid_attr</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert valid_attr with correct length" id="9afa48f4-148d-46da-939c-27a03e7ca300"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert valid_attr with correct length" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Check validation: Correct length ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="valid_attr">\r
                  <data:stringValue>ROCK</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_DQ</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>544197</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:22.056</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>23</con:value></con:property></con:properties></con:testCase><con:testCase id="2acf44a1-99e8-46cd-851c-d22db9b7f16c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check enrichment" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="5b3fe14e-1726-421d-a405-1ccef799d4c4"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(9999 - 1000) + 1000
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Check enrich_attr value status" id="0511a129-8a19-4a79-b26d-b479bdad128f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Check enrich_attr value status" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Check enrichment ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="valid_attr">\r
                  <data:stringValue>${#TestCase#randomInt1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="enrich_attr">
                  <data:stringValue>широка страна моя родная</data:stringValue>
               </data:simpleAttribute>
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer etalon key to properties" id="998ef477-dfd9-48e6-8b84-4efc260151fc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Check enrich_attr value status</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Get record with enrich_attr" id="963787ea-964b-43da-af19-d2b402e64628"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get record with enrich_attr" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="enrich_attr has been changed"><con:configuration><path>//*:etalonRecord//*[@name='enrich_attr']//*</path><content>ШИРОКА СТРАНА МОЯ РОДНАЯ</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_DQ</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">4f714226-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>520381</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:22.419</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>2233</con:value></con:property></con:properties></con:testCase><con:testCase id="319ea2b2-ae32-434b-8293-bc5d34200d8b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check sourceSystem" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="3d053ff4-ff5a-4e43-bf45-ad18099e77da"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(99 - 10) + 10
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Upsert valid_attr from sourceSystem = unidata" id="560a4169-4fa3-4c09-9902-4297f7932433"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert valid_attr from sourceSystem = unidata" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Check sourceSystem: DQ apply ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="valid_attr">\r
                  <data:stringValue>Check validation ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="unidata" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert valid_attr from sourceSystem = data_steward" id="f9925c1a-d3b1-4043-bca3-0317b730ca18"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert valid_attr from sourceSystem = data_steward" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Check sourceSystem: DQ not apply ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="valid_attr">\r
                  <data:stringValue>Check validation ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey" disabled="true"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey" disabled="true"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert" disabled="true"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="dqError message"><con:configuration><path>//@message</path><content>Incorrect length value of valid_attr</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_DQ</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>4b21552d-5ec6-4e70-8559-99ec5915b667</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value>6d09dcd4-8485-485f-95f7-1e09a3e2d256</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>940125</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:22.755</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>66</con:value></con:property></con:properties></con:testCase><con:testCase id="0eaf1992-36c0-48fc-8ab1-b6bcd72c54a1" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check enrichment from etalon" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data for upsert" id="f4bc4d80-bd19-4de1-b413-799dd88797d3"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(9999 - 1000) + 1000
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Check enrich_attr value status" id="5fa852ca-3995-4bae-8dbd-a88c6c16c514"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Check enrich_attr value status" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Check enrichment ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="valid_attr">\r
                  <data:stringValue>${#TestCase#randomInt1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="enrich_attr">
                  <data:stringValue>широка страна моя родная</data:stringValue>
               </data:simpleAttribute>
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Insert"><con:configuration><path>//@originAction</path><content>Insert</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer etalon key to properties" id="360db41d-8849-41be-af5b-a39f83e0d755"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Check enrich_attr value status</con:sourceStep><con:sourcePath>//*:etalonKey/@id</con:sourcePath><con:targetType>etalonKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Delay" id="17750f1b-9c96-4de6-975d-a84bb4a6f274" disabled="true"><con:settings/><con:config><delay>2000</delay></con:config></con:testStep><con:testStep type="groovy" name="Prepare data for upsert enrich_attr" id="50900a77-6c13-4de5-b5a9-ebef258e846c"><con:settings/><con:config><script>// GENERATE RANDOM DATA
random = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", random.toString())

random1 = new Random().nextInt(9999 - 1000) + 1000
testRunner.testCase.setPropertyValue("randomInt1", random1.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Update enrich_attr value via etalon key" id="d0c54a2c-a82c-4bc0-bace-3efa2e624af6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Update enrich_attr value via etalon key" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:etalonRecord>\r
               <data:simpleAttribute name="string_attr">\r
                  <data:stringValue>Check enrichment via etalon key ${#TestCase#currDate}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="valid_attr">\r
                  <data:stringValue>${#TestCase#randomInt1}</data:stringValue>\r
               </data:simpleAttribute>\r
               <data:simpleAttribute name="enrich_attr">\r
                  <data:stringValue>Много в ней лесов, полей и рек!</data:stringValue>\r
               </data:simpleAttribute>\r
               <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r
            </api:etalonRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="originAction = Update"><con:configuration><path>//@originAction</path><content>Update</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer origin key to properties" id="52104401-1fb7-462e-8814-127375e959ad"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>etalon to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Update enrich_attr value via etalon key</con:sourceStep><con:sourcePath>//*:originKey/@id</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Get record with enrich_attr" id="e705258e-726a-45d4-82aa-ca0cd83eb99c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get record with enrich_attr" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@inline-response-attachments">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestGet entityName="${#TestCase#entityName}" asOf="${#TestCase#currDate}">\r
            <!-- <api:etalonKey id="${#TestCase#etalonKeyID}"/>\r -->
            <api:originKey id="${#TestCase#originKeyID}" externalId="cd90e168-adb8-47d8-8f68-ea2f835aeb2a" sourceSystem="data_steward" entityName="${#TestCase#entityName}"/>
         </api:requestGet>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//*:common[@exitCode='Success']</path><content>&lt;common version="*" platform="*" operationId="*" exitCode="Success" processingTime="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  &lt;message messageText="*"/>
&lt;/common></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e5eead70-d784-4d3a-8ecb-6e20c00c80b1" name="status = ACTIVE"><con:configuration><path>//@status</path><content>ACTIVE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4e5d6174-04a2-491b-be11-0993763020c5" name="approval = APPROVED"><con:configuration><path>//@approval</path><content>APPROVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;ns2:etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be4170-5d34-40bd-870d-17db445634b6" name="enrich_attr has been changed"><con:configuration><path>//*:etalonRecord//*[@name='enrich_attr']//*</path><content>МНОГО В НЕЙ ЛЕСОВ, ПОЛЕЙ И РЕК!</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_DQ</con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>COUNTRY</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">4fe539b2-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">4fe560c5-16ee-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value>&lt;etalonKey id="4b21552d-5ec6-4e70-8559-99ec5915b667" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns4="http://classifier.mdm.unidata.com/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>895391</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>117436</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>relName1</con:name><con:value>master_2_slave</con:value></con:property><con:property><con:name>relName2</con:name><con:value>master_2_unique</con:value></con:property><con:property><con:name>refEtalonKeyID</con:name><con:value>028c8e8f-5b61-4979-94a8-a77f1067ab14</con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:02:23.366</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="string_attr">  <data:stringValue>тест перечислений ${#TestCase#randomData1}</data:stringValue>  </data:simpleAttribute>   <data:simpleAttribute name="enum_attr">  <data:stringValue>Ash</data:stringValue>  </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>search_condition</con:name><con:value> &lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="${#TestCase#randomData1}"/></con:value></con:property><con:property><con:name>randomInt1</con:name><con:value>2795</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="21fddbbe-2931-4ae8-8795-48ed5c01f8a9" name="JobsManagement"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="488d6a07-b387-4f5f-a2ee-b2bdfa56a5bc" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="softDeleteCleanupJob" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="dbe727d4-d601-425e-8851-d63d1d2eedf7"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
rand3 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())
testRunner.testCase.setPropertyValue("randomData3", rand3.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Login as admin" id="c86845e9-426c-4a3b-85e4-29b93cf8aee4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer session token" id="b3ecebd4-ea58-41c3-b398-45c8f8af9cd7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to Find softdel recs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>Find soft-deleted records</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>sessionToken to Check softdel recs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>Check soft-deleted records after job finish</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Create softDeleteCleanupJob" id="47c7d5eb-ca55-4349-8b7d-1f1c148ba876"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create softDeleteCleanupJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#softDeleteCleanupJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#softDeleteCleanupJobName}">\r
               <api:parameters id="10001" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#softDeleteCleanupJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="10002" type="STRING" name="cleanType">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#softDeleteCleanupJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="10003" type="LONG" name="overdueDays">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#softDeleteCleanupJobOverdueDays}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = softDeleteCleanupJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#softDeleteCleanupJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="592d59fe-d235-4876-bb66-bcc2a60a29ff"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>softDelete JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create softDeleteCleanupJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>softDeleteCleanupJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find softDeleteCleanupJob" id="f2e6527c-6b97-4802-878d-5372f2952de0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find softDeleteCleanupJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#softDeleteCleanupJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = softDeleteCleanupJobId"><con:configuration><path>//@id</path><content>${#TestCase#softDeleteCleanupJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = softDeleteCleanupJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#softDeleteCleanupJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert first record to Entity" id="c0b68a95-22eb-44eb-aaa2-1c6108cb9545"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs1}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert second record to Entity" id="a8cd5cf3-125f-4d36-b7d8-7d921a624234"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs2}\r
               <data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert third record to Entity" id="6267c089-148d-4349-a425-bfc96192b657"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert third record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs3}\r
               <data:originKey externalId="${#TestCase#randomData3}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer origin and etalon keys to properties" id="570ac3ef-800e-47a5-b57f-3d5a06a96190"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>origin to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>3. Upsert record to Entity</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>originKeyID</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>first etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert first record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>second etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert second record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>third etalon to buff</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Upsert third record to Entity</con:sourceStep><con:sourcePath>//*:etalonKey[@id]</con:sourcePath><con:targetType>buff</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>id etalon from buff to prop</con:name><con:sourceType>buff</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:sourcePath>//@id[1]</con:sourcePath><con:targetType>etalonKeyID3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Soft delete first record" id="77f54cc1-6df4-4182-a03d-84001f5fe041"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Soft delete first record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">\r
            <api:etalonKey id="${#TestCase#etalonKeyID1}"/>\r
         </api:requestSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID1}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Soft delete second record" id="f24f0527-ef41-4501-90fa-f796bccb4fd4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Soft delete second record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">\r
            <api:etalonKey id="${#TestCase#etalonKeyID2}"/>\r
         </api:requestSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID2}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Soft delete third record" id="0c51ea13-6008-4829-91d9-c481f100805b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Soft delete third record" id="0852a740-0001-4f8b-918d-931ced33b852"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSoftDelete wipe="false" actionType="SoftDeleteEtalon">\r
            <api:etalonKey id="${#TestCase#etalonKeyID3}"/>\r
         </api:requestSoftDelete>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="7fcb8bbb-a003-4411-b0f6-ea729e70953e"/><con:assertion type="XPath Match" id="838a05c5-031b-4398-8175-9ec02f495655" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8ce4324a-439e-4a8d-bd18-76c1aa556d56" name="toEtalonKey"><con:configuration><path>//*:etalonKeys[@id]</path><content>&lt;etalonKeys id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="709c0dc4-ab9f-47e0-b997-fdf1fad60188" name="etalonKey received = assigned"><con:configuration><scriptText>import com.eviware.soapui.support.XmlHolder

//Данные ответа
def resp = new XmlHolder( messageExchange.responseContentAsXml )

//Переменная свойства externalId
def assignedEtalonKey = new String(context.expand('${#TestCase#etalonKeyID3}'))

//Считываем результат из ответа
result = new String(resp.getNodeValue('//@id'))

//Проверяем утверждение
assert result == assignedEtalonKey</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="Find soft-deleted records" id="22dca563-08a9-4e47-a9d5-1707d535409c"><con:settings/><con:config service="REST API" resourcePath="/search/simple" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Find soft-deleted records" id="babb7dc0-812f-4d04-b01c-2b1dbebc405a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
	"searchFields": ["R_SIMP_ATTR"],
	"returnFields": ["R_SIMP_ATTR"],
	"sortFields": [],
	"facets": ["inactive_only"],
	"entity": "R_MASTER",
	"fetchAll": true,
	"operator": "AND",
	"qtype": "FUZZY",
	"formFields": [],
	"text": "",
	"@type": "SIMPLE",
	"source": false,
	"totalCount": true,
	"countOnly": false,
	"page": 1,
	"start": 0,
	"count": 30
}
</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/search/simple</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="12b4d35f-8eff-47cc-b4d3-5f8efff7ccd9" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer total count before" id="cd349972-0c9b-4484-b675-4eb8db041525"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>total_count to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Find soft-deleted records</con:sourceStep><con:sourcePath>total_count</con:sourcePath><con:targetType>totalCountBefore</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Run softDeleteCleanupJob" id="c8b67485-2fb0-4e96-b591-6883cd4a52d4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run softDeleteCleanupJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#softDeleteCleanupJobId}">\r
            <!--<api:parameters id="10001" type="LONG" name="blockSize">
                  <api:value>
                     <api:longValue>${#TestCase#softDeleteCleanupJobBlockSize}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="10002" type="STRING" name="cleanType">
                  <api:value>
                     <api:stringValue>${#TestCase#softDeleteCleanupJobEntityName}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="10003" type="LONG" name="overdueDays">
                  <api:value>
                     <api:longValue>${#TestCase#softDeleteCleanupJobOverdueDays}</api:longValue>
                  </api:value>
               </api:parameters>-->\r
         </api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = softDeleteCleanupJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#softDeleteCleanupJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get status of softDeleteCleanupJob" id="2098d7de-4b15-455b-80c3-6e02508f3a13" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get status of softDeleteCleanupJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJobStatus id="${#TestCase#softDeleteCleanupJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = softDeleteCleanupJobId"><con:configuration><path>//@id</path><content>${#TestCase#softDeleteCleanupJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = softDeleteCleanupJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#softDeleteCleanupJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Wait for job to be completed" id="d9cc1c5c-d80b-4cab-883c-4b91f7c5041e"><con:settings/><con:config><script>import groovy.util.XmlSlurper

Boolean completed=false;
String f="1"

def jobTimeoutPart = testRunner.testCase.getPropertyValue("jobTimeoutPart").toInteger()
def jobTimeoutValue = testRunner.testCase.getPropertyValue("jobTimeoutValue").toInteger()
//log.info("jobTimeoutValue = " + jobTimeoutValue)

for(int i=1; i&lt;=jobTimeoutValue; i++){
	
	sleep(jobTimeoutValue * 1000)
	
	testRunner.runTestStepByName("Get status of softDeleteCleanupJob")
	
	responseContent = testRunner.testCase.getTestStepByName("Get status of softDeleteCleanupJob").getPropertyValue("response")
	XmlResponse = new XmlSlurper().parseText(responseContent)
	//log.info (XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status);
	
	if(XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status.toString()=="COMPLETED" || XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status.toString()=="STOPPED"){
		completed=true;
		break
	}
	
	
	
}
 
assert completed == true</script></con:config></con:testStep><con:testStep type="restrequest" name="Check soft-deleted records after job finish" id="3ac0f659-4393-4894-b7ed-f84a639fb535"><con:settings/><con:config service="REST API" resourcePath="/search/simple" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Check soft-deleted records after job finish" id="babb7dc0-812f-4d04-b01c-2b1dbebc405a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
	"searchFields": ["R_SIMP_ATTR"],
	"returnFields": ["R_SIMP_ATTR"],
	"sortFields": [],
	"facets": ["inactive_only"],
	"entity": "R_MASTER",
	"fetchAll": true,
	"operator": "AND",
	"qtype": "FUZZY",
	"formFields": [],
	"text": "",
	"@type": "SIMPLE",
	"source": false,
	"totalCount": true,
	"countOnly": false,
	"page": 1,
	"start": 0,
	"count": 30
}
</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/search/simple</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="12b4d35f-8eff-47cc-b4d3-5f8efff7ccd9" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer total count after" id="4d163759-3f2b-40ce-aff7-7bf83a793ce8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>total_count to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Check soft-deleted records after job finish</con:sourceStep><con:sourcePath>total_count</con:sourcePath><con:targetType>totalCountAfter</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Assert total count before and after" id="2b5ff305-f6c7-4202-8b45-4c973334c6fd"><con:settings/><con:config><script>
def totalCountBeforeStr = testRunner.testCase.getPropertyValue("totalCountBefore")
def totalCountAfterStr = testRunner.testCase.getPropertyValue("totalCountAfter")
totalCountBeforeInt = totalCountBeforeStr.toInteger()
totalCountAfterInt = totalCountAfterStr.toInteger()
/*
log.info("Value before = " + totalCountBeforeInt)
log.info("Value after = " + totalCountAfterInt)
*/

assert totalCountBeforeInt >= 3 
assert totalCountAfterInt == 0</script></con:config></con:testStep><con:testStep type="request" name="Remove softDeleteCleanupJob" id="76ed4adc-8deb-4933-9122-017f851d89b6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove softDeleteCleanupJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#softDeleteCleanupJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs3</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData3}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>search_condition</con:name><con:value>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="*"/></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T12:58:58.462</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>680879</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>389965</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>982614</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>d6202068-16ed-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>d63ef30e-16ed-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID3</con:name><con:value>d6573605-16ed-11e8-8195-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="d6573605-16ed-11e8-8195-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>softDeleteCleanupJobName</con:name><con:value>softDeleteCleanupJob</con:value></con:property><con:property><con:name>softDeleteCleanupJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>softDeleteCleanupJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>softDeleteCleanupJobOverdueDays</con:name><con:value>0</con:value></con:property><con:property><con:name>softDeleteCleanupJobId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">36</con:value></con:property><con:property><con:name>totalCountBefore</con:name><con:value>3</con:value></con:property><con:property><con:name>totalCountAfter</con:name><con:value>0</con:value></con:property><con:property><con:name>execId</con:name><con:value/></con:property><con:property><con:name>jobTimeoutPart</con:name><con:value>1</con:value></con:property><con:property><con:name>jobTimeoutValue</con:name><con:value>20</con:value></con:property></con:properties></con:testCase><con:testCase id="6b41de77-9d3b-4ba5-8499-f0d37278b183" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="exportDataJob (simple)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="004db9ed-1f7f-474f-af00-4deab5b4dd3e"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create exportDataJob" id="a871f8e7-75e0-438d-aa9e-e81022d6e961"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create exportDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#exportDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#exportDataJobName}">\r
               <api:parameters id="20001" type="STRING" name="asOf">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="20002" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20003" type="STRING" name="updatesAfter">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="20004" type="BOOLEAN" name="skipDeleted">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="20005" type="BOOLEAN" name="skipRelations">\r
                  <api:value>\r
                     <api:booleanValue>false</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="20006" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#exportDataJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="20007" type="STRING" name="databaseUrl">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="20008" type="STRING" name="operationId">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="20009" type="STRING" name="definitionContent">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = exportDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#exportDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="a61fd4ed-b20a-4984-81a1-30ee377ea1ee"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>exportData JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create exportDataJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>exportDataJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find exportDataJob" id="6dfd9d0a-c5e5-4ff9-a877-edaee23defca"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find exportDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#exportDataJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = exportDataJobId"><con:configuration><path>//@id</path><content>${#TestCase#exportDataJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = exportDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#exportDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove exportDataJob" id="56dc6ceb-e6a0-4dc9-807e-75c74ef2035e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove exportDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#exportDataJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>759180</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>412555</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T12:59:20.358</con:value></con:property><con:property><con:name>exportDataJobName</con:name><con:value>exportDataJob</con:value></con:property><con:property><con:name>exportDataJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>exportDataJobId</con:name><con:value>37</con:value></con:property></con:properties></con:testCase><con:testCase id="2d310898-209f-4aca-b2ec-47edace7960b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="duplicateJob (simple)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="d5cde052-aac7-4a14-8168-023ac474b737"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob" id="ebb2fe38-4e1b-44e2-886a-9a2677ae11fc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30002" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30003" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30004" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="d5b0975d-e638-4077-80aa-56622d04ce76"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create duplicateJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find duplicateJob" id="a910d024-0764-4315-9443-b9e767c4b1b0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#duplicateJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = duplicateJobId"><con:configuration><path>//@id</path><content>${#TestCase#duplicateJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="8da4d953-3f00-4cb4-8283-91f4bb44c626"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>904705</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>874431</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:12:37.925</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value>60</con:value></con:property></con:properties></con:testCase><con:testCase id="89cadbb7-c421-45a5-bf4a-ec7df605fc53" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="reindexDataJob" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="845f88fb-d46e-467e-b1e1-854b143165a9"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
rand3 = new Random().nextInt(999999 - 100000) + 100000
rand4 = new Random().nextInt(999999 - 100000) + 100000
rand5 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())
testRunner.testCase.setPropertyValue("randomData3", rand3.toString())
testRunner.testCase.setPropertyValue("randomData4", rand4.toString())
testRunner.testCase.setPropertyValue("randomData5", rand5.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Login as admin" id="0fe1de27-b2e8-48c9-8274-cfdfeb9be5a4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Login as admin" id="100985e6-2622-4cda-ad45-061a8e83e137"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">
   <soapenv:Header/>
   <soapenv:Body>
      <api:apiRequestBody>
         <api:common storageId="1" operationId="1">
            <api:security>
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>
            </api:security>
          </api:common>
         <api:requestAuthenticate doLogin="true"/>
      </api:apiRequestBody>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="328ef7ba-beff-4ace-838f-800f6eaac52f"/><con:assertion type="XPath Match" id="75342c63-75fb-425f-9cdd-9f51c1c89af1" name="isAdmin"><con:configuration><path>//@isAdmin</path><content>true</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e9ee692f-60ac-4b80-8994-c8f34af8fb5c" name="sessionToken"><con:configuration><path>declare namespace xmlns='http://api.mdm.unidata.com/${#Project#protoVer}/';
//xmlns:sessionToken[@token]</path><content>&lt;sessionToken token="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8dbc116f-24af-4711-81f0-564abe5882bb" name="List of roles"><con:configuration><path>//*:role[1]</path><content>&lt;role name="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer session token" id="b6560efa-70cb-405f-a7a9-a53235278b4e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>sessionToken to Find recs before</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>Find all records before upsert</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>sessionToken to Find recs after</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>Find all records after upsert</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="true" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>sessionToken to Clear Notif</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>Clear notifications</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="true" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>sessionToken to Get Notif</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Login as admin</con:sourceStep><con:sourcePath>//@token</con:sourcePath><con:targetType>Authorization</con:targetType><con:targetStep>Get notifications</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Create reindexDataJob" id="feb7cab9-e0f6-40f8-b0ed-d57e8af10597"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#reindexDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#reindexDataJobName}">\r
               <api:parameters id="40001" type="STRING" name="reindexTypes">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#reindexDataJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
			<api:parameters id="40002" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
			<api:parameters id="40003" type="BOOLEAN" name="updateMappings">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
			<api:parameters id="40004" type="BOOLEAN" name="cleanIndexes">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
              <api:parameters id="40005" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#reindexDataJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40006" type="BOOLEAN" name="reindexRecords">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40007" type="BOOLEAN" name="reindexRelations">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40008" type="BOOLEAN" name="reindexClassifiers">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40009" type="BOOLEAN" name="reindexMatching">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40010" type="BOOLEAN" name="skipDq">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40011" type="BOOLEAN" name="suppressConsistencyCheck">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40012" type="BOOLEAN" name="skipNotifications">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="67afe91f-e4a2-45d1-be8e-4bca61f9b187"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>reindex JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create reindexDataJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>reindexDataJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find reindexDataJob" id="1e10beea-12b2-4c6a-9566-9ee9b7036b81"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#reindexDataJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = reindexDataJobId"><con:configuration><path>//@id</path><content>${#TestCase#reindexDataJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Run reindexDataJob before upsert" id="aaa152a0-17b1-4dfc-ab18-31432ea66461"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run reindexDataJob before upsert" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#reindexDataJobId}"></api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get status of reindexDataJob" id="31915600-bf62-45c2-9b0d-3676b244a214" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get status of reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJobStatus id="${#TestCase#reindexDataJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = reindexDataJobId"><con:configuration><path>//@id</path><content>${#TestCase#reindexDataJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Wait for job to be completed" id="1308b6d3-0d72-4887-b6d6-f72c7bc43d4c"><con:settings/><con:config><script>import groovy.util.XmlSlurper

Boolean completed=false;
String f="1"

def jobTimeoutPart = testRunner.testCase.getPropertyValue("jobTimeoutPart").toInteger()
def jobTimeoutValue = testRunner.testCase.getPropertyValue("jobTimeoutValue").toInteger()
//log.info("jobTimeoutValue = " + jobTimeoutValue)

for(int i=1; i&lt;=jobTimeoutPart; i++){
	
	sleep(jobTimeoutValue * 1000)
	
	testRunner.runTestStepByName("Get status of reindexDataJob")
	
	responseContent = testRunner.testCase.getTestStepByName("Get status of reindexDataJob").getPropertyValue("response")
	XmlResponse = new XmlSlurper().parseText(responseContent)
	//log.info (XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status);
	
	if(XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status.toString()=="COMPLETED" || XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status.toString()=="STOPPED"){
		completed=true;
		break
	}

}
 
assert completed == true</script></con:config></con:testStep><con:testStep type="restrequest" name="Find all records before upsert" id="fad38b95-3212-444b-bc97-9f6a287c0df9"><con:settings/><con:config service="REST API" resourcePath="/search/simple" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Find all records before upsert" id="babb7dc0-812f-4d04-b01c-2b1dbebc405a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
	"searchFields": ["R_SIMP_ATTR"],
	"returnFields": ["R_SIMP_ATTR"],
	"sortFields": [],
	"facets": [],
	"entity": "R_MASTER",
	"fetchAll": true,
	"operator": "AND",
	"qtype": "FUZZY",
	"formFields": [],
	"text": "",
	"@type": "SIMPLE",
	"source": false,
	"totalCount": true,
	"countOnly": false,
	"page": 1,
	"start": 0,
	"count": 30
}
</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/search/simple</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="dfe71cae-02e7-4a24-a71c-ae02e78a24a3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer total count before" id="a6a3ab8b-7475-4fcf-8e09-74e18bb3a457"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>total_count to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Find all records before upsert</con:sourceStep><con:sourcePath>total_count</con:sourcePath><con:targetType>totalCountBefore</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Upsert first record to Entity" id="74581bcf-da65-4d28-a76a-f4cf42c5769c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert first record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs1}\r
               <data:originKey externalId="${#TestCase#randomData1}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert second record to Entity" id="a287d345-f001-4aac-bb9a-ad6b5fecc40c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert second record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs2}\r
               <data:originKey externalId="${#TestCase#randomData2}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert third record to Entity" id="5fbe0f4e-14d8-4487-8eb9-9f9881e04a8c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert third record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs3}\r
               <data:originKey externalId="${#TestCase#randomData3}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert fourth record to Entity" id="cce763ba-cb8e-4518-b649-7e3969841bdb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert fourth record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs4}\r
               <data:originKey externalId="${#TestCase#randomData4}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Upsert fifth record to Entity" id="23812cab-7b9e-4d96-a273-f3e41e04f63f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Upsert fifth record to Entity" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestUpsert entityName="${#TestCase#entityName}" lastUpdateDate="${#TestCase#currDate}" skipCleanse="false" bypassExtensionPoints="false">\r
            <api:originRecord>\r
               ${#TestCase#ent_attrs5}\r
               <data:originKey externalId="${#TestCase#randomData5}" sourceSystem="${#TestCase#sourceSystem}" entityName="${#TestCase#entityName}"/>\r
            </api:originRecord>\r
         </api:requestUpsert>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2b2c5cd4-7442-4349-8cd0-c97661ca6e29" name="etalonKey"><con:configuration><path>//*:etalonKey[@id]</path><content>&lt;etalonKey id="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ff81d0e-2d27-4504-bdaf-87811b807c12" name="originKey"><con:configuration><path>//*:originKey[@id]</path><content>&lt;originKey id="*" externalId="*" sourceSystem="*" entityName="*" xmlns="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns2="http://data.mdm.unidata.com/${#Project#protoVer}/" xmlns:ns3="http://meta.mdm.unidata.com/${#Project#protoVer}/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:domain>70963374-8b17-446b-9fee-8e03fe8c15cd</con:domain><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="Find all records after upsert" id="4cbb4c83-23d1-4252-a702-219970fbec20"><con:settings/><con:config service="REST API" resourcePath="/search/simple" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Find all records after upsert" id="babb7dc0-812f-4d04-b01c-2b1dbebc405a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request>{
	"searchFields": ["R_SIMP_ATTR"],
	"returnFields": ["R_SIMP_ATTR"],
	"sortFields": [],
	"facets": [],
	"entity": "R_MASTER",
	"fetchAll": true,
	"operator": "AND",
	"qtype": "FUZZY",
	"formFields": [],
	"text": "",
	"@type": "SIMPLE",
	"source": false,
	"totalCount": true,
	"countOnly": false,
	"page": 1,
	"start": 0,
	"count": 30
}
</con:request><con:originalUri>http://localhost/unidata-backend/api/internal/search/simple</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="dfe71cae-02e7-4a24-a71c-ae02e78a24a3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer total count after" id="29afb038-fd6b-44e6-b525-7ce9fca5339c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>total_count to props</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Find all records after upsert</con:sourceStep><con:sourcePath>total_count</con:sourcePath><con:targetType>totalCountAfter</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Clear notifications" id="65a10d25-646a-4182-b354-22e30f85c6d8"><con:settings/><con:config service="REST API" resourcePath="/user/notifications" methodName="DELETE" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Clear notifications" id="a327db57-d4b0-4fa9-9888-e7cbabe3e203" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/user/notifications</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="dfe71cae-02e7-4a24-a71c-ae02e78a24a3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="request" name="Run reindexDataJob after upsert" id="cc95db9d-0dd9-4b34-a102-683d3d6d32f7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run reindexDataJob after upsert" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#reindexDataJobId}"></api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get status of reindexDataJob after upsert" id="1ead59bc-9cb0-4b6c-a441-19d2dddff558" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get status of reindexDataJob after upsert" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJobStatus id="${#TestCase#reindexDataJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = reindexDataJobId"><con:configuration><path>//@id</path><content>${#TestCase#reindexDataJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Wait for job after upsert to be completed" id="fbe1250b-b40e-4012-b9fd-2d1f923dd08e"><con:settings/><con:config><script>import groovy.util.XmlSlurper

Boolean completed=false;
String f="1"

def jobTimeoutPart = testRunner.testCase.getPropertyValue("jobTimeoutPart").toInteger()
def jobTimeoutValue = testRunner.testCase.getPropertyValue("jobTimeoutValue").toInteger()
//log.info("jobTimeoutValue = " + jobTimeoutValue)

for(int i=1; i&lt;=jobTimeoutPart; i++){
	
	sleep(jobTimeoutValue * 1000)
	
	testRunner.runTestStepByName("Get status of reindexDataJob after upsert")
	
	responseContent = testRunner.testCase.getTestStepByName("Get status of reindexDataJob after upsert").getPropertyValue("response")
	XmlResponse = new XmlSlurper().parseText(responseContent)
	//log.info (XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status);
	
	if(XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status.toString()=="COMPLETED" || XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status.toString()=="STOPPED"){
		completed=true;
		break
	}
	
	
	
}
 
assert completed == true</script></con:config></con:testStep><con:testStep type="delay" name="Delay" id="8bdc1bd1-26a5-484d-b710-4aadef9ef45e"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="restrequest" name="Get notifications" id="7713fc3e-b4f6-4da1-b88c-a4767b12517d"><con:settings/><con:config service="REST API" resourcePath="/user/notifications" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get notifications" id="61bbae2b-e85a-49aa-89cd-652685a2d03f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpointREST}</con:endpoint><con:request/><con:originalUri>http://localhost/unidata-backend/api/internal/user/notifications</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Authorization" value="dfe71cae-02e7-4a24-a71c-ae02e78a24a3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer notification content" id="4865de77-5ce5-497a-b06d-861008bf6294"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>notificationContent to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Get notifications</con:sourceStep><con:sourcePath>$.content[0].content</con:sourcePath><con:targetType>notificationContent</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Assert total count before upsert, after upsert and after reindex" id="69063e59-98d5-4f2e-9aac-6c5fbf2a2e09"><con:settings/><con:config><script>def notificationContentStr = testRunner.testCase.getPropertyValue("notificationContent")
String[] str;
str = notificationContentStr.split(' ');
strBefore = str[8].split(';')
strAfter = str[10].split(';')
reindexRecordsCountBefore = strBefore[0].toInteger()
reindexRecordsCountAfter = strAfter[0].toInteger()

/*
log.info("     values = " + str)
log.info("     values 8  = " + str[8])
log.info("     values 10 = " + str[10])

log.info("     before  = " + strBefore[0])
log.info("     after = " + strAfter[0])
log.info(" ")

log.info("Reindex")
log.info("     before = " + reindexRecordsCountBefore)
log.info("     after = " + reindexRecordsCountAfter)
*/

def totalCountBeforeStr = testRunner.testCase.getPropertyValue("totalCountBefore")
def totalCountAfterStr = testRunner.testCase.getPropertyValue("totalCountAfter")
totalCountBeforeInt = totalCountBeforeStr.toInteger()
totalCountAfterInt = totalCountAfterStr.toInteger()
/* 
log.info("Search")
log.info("     before = " + totalCountBeforeInt)
log.info("     after = " + totalCountAfterInt)
*/

assert totalCountBeforeInt + 5 == totalCountAfterInt
assert reindexRecordsCountAfter == reindexRecordsCountBefore
assert reindexRecordsCountAfter >= totalCountAfterInt</script></con:config></con:testStep><con:testStep type="request" name="Remove reindexDataJob" id="0463b079-dae8-4ff6-a616-8483ddc2b256"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#reindexDataJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>ent_attrs1</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData1}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs2</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData2}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs3</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData3}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs4</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData4}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>ent_attrs5</con:name><con:value>&lt;data:simpleAttribute name="R_SIMP_ATTR">&lt;data:intValue>${#TestCase#randomData5}&lt;/data:intValue>&lt;/data:simpleAttribute></con:value></con:property><con:property><con:name>search_condition</con:name><con:value>&lt;api:atom attributeName="R_SIMP_ATTR" operator="EQUALS" constant="*"/></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T12:59:21.173</con:value></con:property><con:property><con:name>randomData1</con:name><con:value>981460</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>464006</con:value></con:property><con:property><con:name>randomData3</con:name><con:value>975880</con:value></con:property><con:property><con:name>randomData4</con:name><con:value>971522</con:value></con:property><con:property><con:name>randomData5</con:name><con:value>568094</con:value></con:property><con:property><con:name>etalonKeyID1</con:name><con:value>3adf4bbd-ace5-11e7-9fb8-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID2</con:name><con:value>3b27c673-ace5-11e7-9fb8-87ba01ce01e0</con:value></con:property><con:property><con:name>etalonKeyID3</con:name><con:value>3b505d19-ace5-11e7-9fb8-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="3b505d19-ace5-11e7-9fb8-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>softDeleteCleanupJobName</con:name><con:value>softDeleteCleanupJob</con:value></con:property><con:property><con:name>softDeleteCleanupJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>softDeleteCleanupJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>softDeleteCleanupJobOverdueDays</con:name><con:value>0</con:value></con:property><con:property><con:name>softDeleteCleanupJobId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">147</con:value></con:property><con:property><con:name>totalCountBefore</con:name><con:value>5</con:value></con:property><con:property><con:name>totalCountAfter</con:name><con:value>10</con:value></con:property><con:property><con:name>execId</con:name><con:value/></con:property><con:property><con:name>jobTimeoutPart</con:name><con:value>1</con:value></con:property><con:property><con:name>jobTimeoutValue</con:name><con:value>60</con:value></con:property><con:property><con:name>reindexDataJobName</con:name><con:value>reindexDataJob</con:value></con:property><con:property><con:name>reindexDataJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>reindexDataJobBlockSize</con:name><con:value>1000</con:value></con:property><con:property><con:name>reindexDataJobId</con:name><con:value>39</con:value></con:property><con:property><con:name>reindexDataJobNotificationData</con:name><con:value/></con:property><con:property><con:name>notificationContent</con:name><con:value>Переиндексация данных - Задача завершена.

 Записи данных (Было: 10; Стало: 10;)
 Записи классификаторов (Не содержит данных)
 Классифицированные записи данных (Не содержит данных)
</con:value></con:property></con:properties></con:testCase><con:testCase id="5537cc88-28be-4b07-a3f0-4e37a71e9b8c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="reindexDataJob (simple)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="534d7e38-ad41-464b-977e-8fc5762251f5"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create reindexDataJob" id="34180416-e44e-4b2f-95df-801effbd9e02"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#reindexDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#reindexDataJobName}">\r
               <api:parameters id="40001" type="STRING" name="reindexTypes">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#reindexDataJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40002" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#reindexDataJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40003" type="BOOLEAN" name="cleanTypes">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40004" type="BOOLEAN" name="reindexRecords">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40005" type="BOOLEAN" name="reindexRelations">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40006" type="BOOLEAN" name="reindexClassifiers">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40007" type="BOOLEAN" name="reindexMatching">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="40008" type="BOOLEAN" name="skipDq">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="cd0d675c-3f5a-45c3-aa4d-9be5089a1198"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>reindex JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create reindexDataJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>reindexDataJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find reindexDataJob" id="154de82e-4067-4225-bc03-5cd8c7f3efd3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#reindexDataJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = reindexDataJobId"><con:configuration><path>//@id</path><content>${#TestCase#reindexDataJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove reindexDataJob" id="412be288-c6ef-4f9f-b4ad-3e6d4d35b3cf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#reindexDataJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>789615</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>235364</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-10-11T14:43:52.320</con:value></con:property><con:property><con:name>reindexDataJobName</con:name><con:value>reindexDataJob</con:value></con:property><con:property><con:name>reindexDataJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>reindexDataJobBlockSize</con:name><con:value>1000</con:value></con:property><con:property><con:name>reindexDataJobId</con:name><con:value>5</con:value></con:property></con:properties></con:testCase><con:testCase id="427bda09-86b4-4f2d-a4b9-310c0d797d1b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="reindexMappingsJob" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="87c7ab40-0191-424f-888e-8f6fdca47945"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create reindexMappingsJob" id="0703a1d4-4485-43e8-a194-95e6cfb90f1a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create reindexMappingsJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#reindexMappingsJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#reindexMappingsJobName}">\r
                 <api:parameters type="STRING" name="reindexTypes">
                  <api:value>
                     <api:stringValue>${#TestCase#reindexMappingsJobEntityName}</api:stringValue>
                  </api:value>
               </api:parameters>
			<api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
			<api:parameters type="BOOLEAN" name="updateMappings">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
			<api:parameters type="BOOLEAN" name="cleanIndexes">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters type="BOOLEAN" name="recreateAudit">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexMappingsJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexMappingsJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="8485938b-d106-4856-ae43-72e3f07114e9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>updateDataMapping JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create reindexMappingsJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>reindexMappingsJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find reindexMappingsJob" id="7fec8c97-a8fd-40e6-868f-21962aeef6f2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find reindexMappingsJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#reindexMappingsJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = reindexMappingsJobId"><con:configuration><path>//@id</path><content>${#TestCase#reindexMappingsJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexMappingsJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexMappingsJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Run reindexMappingsJob" id="76daf423-a8a0-40cb-8426-ce78a5e3fd3d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run reindexMappingsJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#reindexMappingsJobId}"></api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexMappingsJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexMappingsJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get status of reindexMappingsJob" id="7a4bfe89-6301-4e3b-999a-4f11a1f63494" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get status of reindexMappingsJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJobStatus id="${#TestCase#reindexMappingsJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = reindexMappingsJobId"><con:configuration><path>//@id</path><content>${#TestCase#reindexMappingsJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexMappingsJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexMappingsJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Wait for job to be completed" id="7071b9bb-252d-41b2-aff2-84234b7e4cc3"><con:settings/><con:config><script>import groovy.util.XmlSlurper

Boolean completed=false;
String f="1"

def jobTimeoutPart = testRunner.testCase.getPropertyValue("jobTimeoutPart").toInteger()
def jobTimeoutValue = testRunner.testCase.getPropertyValue("jobTimeoutValue").toInteger()
//log.info("jobTimeoutValue = " + jobTimeoutValue)

for(int i=1; i&lt;=jobTimeoutPart; i++){
	
	sleep(jobTimeoutValue * 1000)
	
	testRunner.runTestStepByName("Get status of reindexMappingsJob")
	
	responseContent = testRunner.testCase.getTestStepByName("Get status of reindexMappingsJob").getPropertyValue("response")
	XmlResponse = new XmlSlurper().parseText(responseContent)
	//log.info (XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status);
	
	if(XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status.toString()=="COMPLETED" || XmlResponse.Body.apiResponseBody.responseJobStatus.jobExecution.@status.toString()=="STOPPED"){
		completed=true;
		break
	}

}
 
assert completed == true</script></con:config></con:testStep><con:testStep type="request" name="Remove reindexMappingsJob" id="c66179c8-ce86-4f73-9dbb-a4f85aa9cc3c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove reindexMappingsJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#reindexMappingsJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>886024</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>304103</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:01:28.716</con:value></con:property><con:property><con:name>reindexMappingsJobName</con:name><con:value>reindexMappingsJob</con:value></con:property><con:property><con:name>reindexMappingsJobEntityName</con:name><con:value>ALL</con:value></con:property><con:property><con:name>reindexMappingsJobId</con:name><con:value>40</con:value></con:property><con:property><con:name>jobTimeoutPart</con:name><con:value>1</con:value></con:property><con:property><con:name>jobTimeoutValue</con:name><con:value>20</con:value></con:property></con:properties></con:testCase><con:testCase id="8adbf1e6-7039-4c11-b2db-34cdcc4de82b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="dqJob_outofdate" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="9a65ed81-2b74-42eb-b01c-d28814918471"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create dqJob" id="2c9ef88c-fba7-4a67-a01f-8aa98e1e0d3e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create dqJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#dqJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#dqJobName}">\r
               <api:parameters id="50001" type="LONG" name="offset">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#dqJobOffset}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="50002" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50003" type="LONG" name="quantityOfProcessedRecords">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#dqJobQuantityOfProcessedRecords}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="50004" type="STRING" name="importDatabaseUrl">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#dqJobImportDatabaseUrl}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="50005" type="STRING" name="importDefinitionContent">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#dqJobImportDefinitionContent}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="50006" type="STRING" name="databaseUrl">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#dqJobDatabaseUrl}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="50007" type="STRING" name="exportDefinitionContent">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#dqJobExportDefinitionContent}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="50008" type="LONG" name="batchSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#dqJobBatchSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="50009" type="STRING" name="operationId">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#dqJobOperationId}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = dqJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#dqJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="0546a5b0-bcc5-4d10-a445-067cf6213c7b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>dq JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create dqJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>dqJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find dqJob" id="0bd6e37f-2240-462b-ae76-4c983ba7f6fc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find dqJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#dqJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = dqJobId"><con:configuration><path>//@id</path><content>${#TestCase#dqJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = dqJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#dqJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove dqJob" id="503a0461-5a95-433c-89eb-a283e52581bc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove dqJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#dqJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>449068</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>931798</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-09T11:49:21.776</con:value></con:property><con:property><con:name>dqJobName</con:name><con:value>dqJob</con:value></con:property><con:property><con:name>dqJobOffset</con:name><con:value>123</con:value></con:property><con:property><con:name>dqJobQuantityOfProcessedRecords</con:name><con:value>456</con:value></con:property><con:property><con:name>dqJobImportDatabaseUrl</con:name><con:value>impDBurl</con:value></con:property><con:property><con:name>dqJobImportDefinitionContent</con:name><con:value>impDEFcontent</con:value></con:property><con:property><con:name>dqJobDatabaseUrl</con:name><con:value>http://database</con:value></con:property><con:property><con:name>dqJobExportDefinitionContent</con:name><con:value>expDEFcontent</con:value></con:property><con:property><con:name>dqJobBatchSize</con:name><con:value>500</con:value></con:property><con:property><con:name>dqJobOperationId</con:name><con:value>operid123</con:value></con:property><con:property><con:name>dqJobId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="394c2d1f-56e7-48b8-bd5f-ee294cf24b4e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="republishRegistryJob (simple)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="c67516c3-20f8-40af-9d63-83b655ac3e12"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create republishRegistryJob" id="8ae09f71-84e3-4ea9-9419-00107fd952b4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create republishRegistryJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#republishRegistryJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#republishRegistryJobName}">\r
               <api:parameters id="60001" type="STRING" name="publishType">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#republishRegistryJobPublishType}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="60002" type="BOOLEAN" name="allPeriods">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#republishRegistryJobAllPeriods}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="60003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#republishRegistryJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = republishRegistryJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#republishRegistryJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="ece17a3b-4e7b-49c1-bee7-808ca3a931f9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>republishRegistry JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create republishRegistryJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>republishRegistryJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find republishRegistryJob" id="8026ce9f-03de-4598-b018-249526a3fc20"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find republishRegistryJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#republishRegistryJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = republishRegistryJobId"><con:configuration><path>//@id</path><content>${#TestCase#republishRegistryJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = republishRegistryJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#republishRegistryJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove republishRegistryJob" id="0203e74c-5662-4d99-a723-f2474243a992"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove republishRegistryJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#republishRegistryJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>416200</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>740091</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:01:49.451</con:value></con:property><con:property><con:name>republishRegistryJobName</con:name><con:value>republishRegistryJob</con:value></con:property><con:property><con:name>republishRegistryJobPublishType</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>republishRegistryJobAllPeriods</con:name><con:value>true</con:value></con:property><con:property><con:name>republishRegistryJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>republishRegistryJobId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">41</con:value></con:property></con:properties></con:testCase><con:testCase id="c77813a2-8f5a-4206-9df3-94ac7baca892" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="importDataJob (simple)" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="7d52a8b0-c97a-475d-a9ce-a3bebcb11a69"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create importDataJob" id="5b2b84b8-d046-422b-847a-bb674568b938"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create importDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#importDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#importDataJobName}">\r
               <api:parameters id="70001" type="STRING" name="dataSetSize">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#importDataJobDataSetSize}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70002" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#importDataJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70003" type="BOOLEAN" name="initialLoad">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#importDataJobInitialLoad}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70004" type="LONG" name="auditLevel">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#importDataJobAuditLevel}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70005" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70006" type="STRING" name="databaseUrl">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#importDataJobDatabaseUrl}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70007" type="STRING" name="operationId">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#importDataJobOperationId}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70008" type="STRING" name="definitionContent">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#importDataJobDefinitionContent}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70009" type="BOOLEAN" name="skipDq">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#importDataJobSkipDq}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70010" type="BOOLEAN" name="skipMatching">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#importDataJobSkipMatching}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70011" type="BOOLEAN" name="skipIndexing">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#importDataJobSkipIndexing}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70012" type="BOOLEAN" name="skipNotifications">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#importDataJobSkipNotifications}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70013" type="BOOLEAN" name="skipIndexRebuild">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#importDataJobSkipIndexRebuild}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70014" type="STRING" name="indexTablespace">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#importDataJobIndexTablespace}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="70015" type="BOOLEAN" name="mergeWithPreviousVersion">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#importDataJobMergeWithPreviousVersion}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = importDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#importDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="eb5796ae-267a-4829-b23c-da90d29a58cf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>importData JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create importDataJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>importDataJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Run importDataJob" id="269fb229-6112-405e-9faa-8640e73a19f7" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run importDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#importDataJobId}"></api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = importDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#importDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get status of importDataJob" id="2da9d93d-12e0-4ed3-9ed6-ebf43bd3b780" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get status of importDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJobStatus id="${#TestCase#importDataJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = importDataJobId"><con:configuration><path>//@id</path><content>${#TestCase#importDataJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = importDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#importDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Find importDataJob" id="d27a592e-326d-451d-9600-7b8e8a034cd7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find importDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#importDataJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = importDataJobId"><con:configuration><path>//@id</path><content>${#TestCase#importDataJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = importDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#importDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove importDataJob" id="9f1e75eb-7db3-489f-b194-0d48775b49b7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove importDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#importDataJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>640927</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>393799</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:01:49.841</con:value></con:property><con:property><con:name>importDataJobName</con:name><con:value>importDataJob</con:value></con:property><con:property><con:name>importDataJobDataSetSize</con:name><con:value>SMALL</con:value></con:property><con:property><con:name>importDataJobBlockSize</con:name><con:value>1000</con:value></con:property><con:property><con:name>importDataJobInitialLoad</con:name><con:value>true</con:value></con:property><con:property><con:name>importDataJobAuditLevel</con:name><con:value>1</con:value></con:property><con:property><con:name>importDataJobDatabaseUrl</con:name><con:value>http://database</con:value></con:property><con:property><con:name>importDataJobOperationId</con:name><con:value>operid123</con:value></con:property><con:property><con:name>importDataJobDefinitionContent</con:name><con:value>defcontent</con:value></con:property><con:property><con:name>importDataJobSkipDq</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobSkipMatching</con:name><con:value>true</con:value></con:property><con:property><con:name>importDataJobSkipIndexing</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobSkipNotifications</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobSkipIndexRebuild</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobIndexTablespace</con:name><con:value>indtblspace</con:value></con:property><con:property><con:name>importDataJobMergeWithPreviousVersion</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobId</con:name><con:value>42</con:value></con:property></con:properties></con:testCase><con:testCase id="b92e0f5f-c798-4320-b368-0e16f95b804e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="findAllJobs" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="request" name="Find all jobs before" id="0509ccd2-ec83-4021-b1a0-b16992353f5d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find all jobs before" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindAllJobs/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Prepare data" id="5cac710f-1d46-4c9a-be45-bf04c86ae991"><con:settings/><con:config><script>import groovy.util.XmlSlurper

// Generate random values
rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000
testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// Get Date/Time
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())

// Get jobsCountBefore
responseContent = testRunner.testCase.getTestStepByName("Find all jobs before").getPropertyValue("response")
XmlResponse = new XmlSlurper().parseText(responseContent)
//log.info (XmlResponse.Body.apiResponseBody.responseFindAllJobs);
def jobsList = XmlResponse.Body.apiResponseBody.responseFindAllJobs
def jobsCount = 0

	for (jobs in jobsList.jobs)
      {
      	jobsCount = jobsCount + 1
      }
      //log.info ("jobsCount = " + jobsCount);

testRunner.testCase.setPropertyValue("jobsCountBefore", jobsCount.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create softDeleteCleanupJob" id="9d4456d4-3b42-4b36-bd61-2ed9d0760f52"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create softDeleteCleanupJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#softDeleteCleanupJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#softDeleteCleanupJobName}">\r
               <api:parameters id="10001" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#softDeleteCleanupJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="10002" type="STRING" name="cleanType">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#softDeleteCleanupJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="10003" type="LONG" name="overdueDays">\r
                  <api:value>\r
                     <api:longValue>10</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = softDeleteCleanupJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#softDeleteCleanupJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create exportDataJob" id="dd5668f5-9025-4145-97ec-3a10775f2cee"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create exportDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#exportDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#exportDataJobName}">\r
              <api:parameters id="20001" type="STRING" name="asOf">
                  <api:value>
                     <api:stringValue>value</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20002" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20003" type="STRING" name="updatesAfter">
                  <api:value>
                     <api:stringValue>value</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20004" type="BOOLEAN" name="skipDeleted">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20005" type="BOOLEAN" name="skipRelations">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20006" type="LONG" name="blockSize">
                  <api:value>
                     <api:longValue>${#TestCase#exportDataJobBlockSize}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20007" type="STRING" name="databaseUrl">
                  <api:value>
                     <api:stringValue>value</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20008" type="STRING" name="operationId">
                  <api:value>
                     <api:stringValue>value</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="20009" type="STRING" name="definitionContent">
                  <api:value>
                     <api:stringValue>value</api:stringValue>
                  </api:value>
               </api:parameters>

            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = exportDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#exportDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob" id="631ac63d-8db8-43a4-8c3e-2db3ecef895b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
             <api:parameters id="30001" type="STRING" name="entityName">
                  <api:value>
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30003" type="STRING" name="matchingName">
                  <api:value>
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30004" type="LONG" name="blockSize">
                  <api:value>
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create reindexDataJob" id="a43ef9bd-609d-4a70-9fa3-c2350192ec97"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#reindexDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#reindexDataJobName}">\r
               <api:parameters id="40001" type="STRING" name="reindexTypes">
                  <api:value>
                     <api:stringValue>${#TestCase#reindexDataJobEntityName}</api:stringValue>
                  </api:value>
               </api:parameters>
			<api:parameters id="40002" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
			<api:parameters id="40003" type="BOOLEAN" name="updateMappings">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
			<api:parameters id="40004" type="BOOLEAN" name="cleanIndexes">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
              <api:parameters id="40005" type="LONG" name="blockSize">
                  <api:value>
                     <api:longValue>${#TestCase#reindexDataJobBlockSize}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="40006" type="BOOLEAN" name="reindexRecords">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="40007" type="BOOLEAN" name="reindexRelations">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="40008" type="BOOLEAN" name="reindexClassifiers">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="40009" type="BOOLEAN" name="reindexMatching">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="40010" type="BOOLEAN" name="skipDq">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="40011" type="BOOLEAN" name="suppressConsistencyCheck">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="40012" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>true</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = reindexDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#reindexDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create dqJob" id="f44326b9-4ad4-4aa3-bdff-d7bc44dce621" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create dqJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#dqJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#dqJobName}">\r
                <api:parameters id="50001" type="LONG" name="offset">
                  <api:value>
                     <api:longValue>${#TestCase#dqJobOffset}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50002" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50003" type="LONG" name="quantityOfProcessedRecords">
                  <api:value>
                     <api:longValue>${#TestCase#dqJobQuantityOfProcessedRecords}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50004" type="STRING" name="importDatabaseUrl">
                  <api:value>
                     <api:stringValue>${#TestCase#dqJobImportDatabaseUrl}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50005" type="STRING" name="importDefinitionContent">
                  <api:value>
                     <api:stringValue>${#TestCase#dqJobImportDefinitionContent}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50006" type="STRING" name="databaseUrl">
                  <api:value>
                     <api:stringValue>${#TestCase#dqJobDatabaseUrl}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50007" type="STRING" name="exportDefinitionContent">
                  <api:value>
                     <api:stringValue>${#TestCase#dqJobExportDefinitionContent}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50008" type="LONG" name="batchSize">
                  <api:value>
                     <api:longValue>${#TestCase#dqJobBatchSize}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="50009" type="STRING" name="operationId">
                  <api:value>
                     <api:stringValue>${#TestCase#dqJobOperationId}</api:stringValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = dqJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#dqJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create republishRegistryJob" id="015aa7cb-7c60-487d-a33e-eb73e091232f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create republishRegistryJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#republishRegistryJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#republishRegistryJobName}">\r
               <api:parameters id="60001" type="STRING" name="publishType">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#republishRegistryJobPublishType}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="60002" type="BOOLEAN" name="allPeriods">\r
                  <api:value>\r
                     <api:booleanValue>${#TestCase#republishRegistryJobAllPeriods}</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="60003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#republishRegistryJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = republishRegistryJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#republishRegistryJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create importDataJob" id="9eee04b0-2541-4815-8b0e-2a89557699d9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create importDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#importDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#importDataJobName}">\r
                <api:parameters id="70001" type="STRING" name="dataSetSize">
                  <api:value>
                     <api:stringValue>${#TestCase#importDataJobDataSetSize}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70002" type="LONG" name="blockSize">
                  <api:value>
                     <api:longValue>${#TestCase#importDataJobBlockSize}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70003" type="BOOLEAN" name="initialLoad">
                  <api:value>
                     <api:booleanValue>${#TestCase#importDataJobInitialLoad}</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70004" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>${#TestCase#importDataJobAuditLevel}</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70005" type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70006" type="STRING" name="databaseUrl">
                  <api:value>
                     <api:stringValue>${#TestCase#importDataJobDatabaseUrl}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70007" type="STRING" name="operationId">
                  <api:value>
                     <api:stringValue>${#TestCase#importDataJobOperationId}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70008" type="STRING" name="definitionContent">
                  <api:value>
                     <api:stringValue>${#TestCase#importDataJobDefinitionContent}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70009" type="BOOLEAN" name="skipDq">
                  <api:value>
                     <api:booleanValue>${#TestCase#importDataJobSkipDq}</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70010" type="BOOLEAN" name="skipMatching">
                  <api:value>
                     <api:booleanValue>${#TestCase#importDataJobSkipMatching}</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70011" type="BOOLEAN" name="skipIndexing">
                  <api:value>
                     <api:booleanValue>${#TestCase#importDataJobSkipIndexing}</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70012" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>${#TestCase#importDataJobSkipNotifications}</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70013" type="BOOLEAN" name="skipIndexRebuild">
                  <api:value>
                     <api:booleanValue>${#TestCase#importDataJobSkipIndexRebuild}</api:booleanValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70014" type="STRING" name="indexTablespace">
                  <api:value>
                     <api:stringValue>${#TestCase#importDataJobIndexTablespace}</api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="70015" type="BOOLEAN" name="mergeWithPreviousVersion">
                  <api:value>
                     <api:booleanValue>${#TestCase#importDataJobMergeWithPreviousVersion}</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = importDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#importDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="4aef3ee1-5e94-4f8a-920c-18c942059c10"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>reindex JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create reindexDataJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>reindexDataJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>softDelete JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create softDeleteCleanupJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>softDeleteCleanupJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>exportData JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create exportDataJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>exportDataJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create duplicateJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="true" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>dq JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create dqJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>dqJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>republishRegistry JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create republishRegistryJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>republishRegistryJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>importData JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create importDataJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>importDataJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find all jobs" id="9a174aaf-b054-4826-a624-c991089f003d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find all jobs" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindAllJobs/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b859cb2d-88ef-496a-9af7-0cc393c1f161" name="Contains softDeleteCleanupJobName_randomData1"><con:configuration><token>${#TestCase#softDeleteCleanupJobName}_${#TestCase#randomData1}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b859cb2d-88ef-496a-9af7-0cc393c1f161" name="Contains exportDataJobName_randomData1"><con:configuration><token>${#TestCase#exportDataJobName}_${#TestCase#randomData1}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b859cb2d-88ef-496a-9af7-0cc393c1f161" name="Contains duplicateJobName_randomData1"><con:configuration><token>${#TestCase#duplicateJobName}_${#TestCase#randomData1}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b859cb2d-88ef-496a-9af7-0cc393c1f161" name="Contains reindexDataJobName_randomData1"><con:configuration><token>${#TestCase#reindexDataJobName}_${#TestCase#randomData1}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b859cb2d-88ef-496a-9af7-0cc393c1f161" name="Contains dqJobName_randomData1" disabled="true"><con:configuration><token>${#TestCase#dqJobName}_${#TestCase#randomData1}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b859cb2d-88ef-496a-9af7-0cc393c1f161" name="Contains republishRegistryJobName_randomData1"><con:configuration><token>${#TestCase#republishRegistryJobName}_${#TestCase#randomData1}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b859cb2d-88ef-496a-9af7-0cc393c1f161" name="Contains importDataJobName_randomData1"><con:configuration><token>${#TestCase#importDataJobName}_${#TestCase#randomData1}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove softDeleteCleanupJob" id="bc2ad01f-9b68-4d43-8875-48390174395f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove softDeleteCleanupJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#softDeleteCleanupJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove exportDataJob" id="e3ea0988-25f3-45c7-bed5-9b116c99abbd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove exportDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#exportDataJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="9187b4f9-0ec3-4ca5-81cf-725fd05693c6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove reindexDataJob" id="d311c067-7d5a-4142-83a4-0b0bd340a659"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove reindexDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#reindexDataJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove dqJob" id="d3777f5b-4542-4be4-91a7-e172e7ad96ad" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove dqJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#dqJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove republishRegistryJob" id="c0a62318-946e-45b3-b5ea-14f76c7b0674"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove republishRegistryJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#republishRegistryJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove importDataJob" id="8641dbc9-9757-4ef1-b8c7-36740d58e3cf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove importDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#importDataJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check jobs count after" id="4eaac302-96c6-413a-92c4-272e9dbb7d04"><con:settings/><con:config><script>import groovy.util.XmlSlurper

def defaultJobsCount = testRunner.testCase.getPropertyValue( "defaultJobsCount" ).toInteger();

// Get jobsCount after and assert
responseContent = testRunner.testCase.getTestStepByName("Find all jobs").getPropertyValue("response")
XmlResponse = new XmlSlurper().parseText(responseContent)
//log.info (XmlResponse.Body.apiResponseBody.responseFindAllJobs);
def jobsList = XmlResponse.Body.apiResponseBody.responseFindAllJobs
def jobsCount = 0
def jobsCountBefore = testRunner.testCase.getPropertyValue("jobsCountBefore").toInteger()

	for (jobs in jobsList.jobs)
      {
      	jobsCount = jobsCount + 1
      }
      
      /*
      log.info ("jobsCount = " + jobsCount);
      log.info ("jobsCountBefore = " + jobsCountBefore);
      log.info ("defaultJobsCount = " + defaultJobsCount);
      */

assert jobsCountBefore + defaultJobsCount == jobsCount</script></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>276829</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>582571</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:13:15.984</con:value></con:property><con:property><con:name>defaultJobsCount</con:name><con:value>6</con:value></con:property><con:property><con:name>reindexDataJobName</con:name><con:value>reindexDataJob</con:value></con:property><con:property><con:name>reindexDataJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>reindexDataJobBlockSize</con:name><con:value>1000</con:value></con:property><con:property><con:name>reindexDataJobId</con:name><con:value>64</con:value></con:property><con:property><con:name>softDeleteCleanupJobName</con:name><con:value>softDeleteCleanupJob</con:value></con:property><con:property><con:name>softDeleteCleanupJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>softDeleteCleanupJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>softDeleteCleanupJobId</con:name><con:value>61</con:value></con:property><con:property><con:name>exportDataJobName</con:name><con:value>exportDataJob</con:value></con:property><con:property><con:name>exportDataJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>exportDataJobId</con:name><con:value>62</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value>63</con:value></con:property><con:property><con:name>dqJobName</con:name><con:value>dqJob</con:value></con:property><con:property><con:name>dqJobOffset</con:name><con:value>123</con:value></con:property><con:property><con:name>dqJobQuantityOfProcessedRecords</con:name><con:value>456</con:value></con:property><con:property><con:name>dqJobImportDatabaseUrl</con:name><con:value>impDBurl</con:value></con:property><con:property><con:name>dqJobImportDefinitionContent</con:name><con:value>impDEFcontent</con:value></con:property><con:property><con:name>dqJobDatabaseUrl</con:name><con:value>http://database</con:value></con:property><con:property><con:name>dqJobExportDefinitionContent</con:name><con:value>expDEFcontent</con:value></con:property><con:property><con:name>dqJobBatchSize</con:name><con:value>500</con:value></con:property><con:property><con:name>dqJobOperationId</con:name><con:value>operid123</con:value></con:property><con:property><con:name>dqJobId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>republishRegistryJobName</con:name><con:value>republishRegistryJob</con:value></con:property><con:property><con:name>republishRegistryJobPublishType</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>republishRegistryJobAllPeriods</con:name><con:value>true</con:value></con:property><con:property><con:name>republishRegistryJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>republishRegistryJobId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">65</con:value></con:property><con:property><con:name>importDataJobName</con:name><con:value>importDataJob</con:value></con:property><con:property><con:name>importDataJobDataSetSize</con:name><con:value>SMALL</con:value></con:property><con:property><con:name>importDataJobBlockSize</con:name><con:value>1000</con:value></con:property><con:property><con:name>importDataJobInitialLoad</con:name><con:value>true</con:value></con:property><con:property><con:name>importDataJobAuditLevel</con:name><con:value>1</con:value></con:property><con:property><con:name>importDataJobDatabaseUrl</con:name><con:value>http://database</con:value></con:property><con:property><con:name>importDataJobOperationId</con:name><con:value>operid123</con:value></con:property><con:property><con:name>importDataJobDefinitionContent</con:name><con:value>defcontent</con:value></con:property><con:property><con:name>importDataJobSkipDq</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobSkipMatching</con:name><con:value>true</con:value></con:property><con:property><con:name>importDataJobSkipIndexing</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobSkipNotifications</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobSkipIndexRebuild</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobIndexTablespace</con:name><con:value>indtblspace</con:value></con:property><con:property><con:name>importDataJobMergeWithPreviousVersion</con:name><con:value>false</con:value></con:property><con:property><con:name>importDataJobId</con:name><con:value>66</con:value></con:property><con:property><con:name>JobsCountBefore</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="d1377c7e-6977-4760-afdf-f7ee9a69e0ae" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create Job with same name" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="5aa60590-06ae-4549-ac54-7a09a815921f"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create exportDataJob without parameters Id" id="4420fbc2-f7aa-4eab-b1b5-2cdd69b3c46b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create exportDataJob without parameters Id" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#exportDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#exportDataJobName}">\r
               <api:parameters type="STRING" name="asOf">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
                <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters type="STRING" name="updatesAfter">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="BOOLEAN" name="skipDeleted">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="BOOLEAN" name="skipRelations">\r
                  <api:value>\r
                     <api:booleanValue>false</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#exportDataJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="databaseUrl">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="operationId">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="definitionContent">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = exportDataJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#exportDataJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create exportDataJob with the same name" id="9f147c05-8f2c-4910-bfc9-d1a97a6ee99b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create exportDataJob with the same name" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#exportDataJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#exportDataJobName}">\r
               <api:parameters type="STRING" name="asOf">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters type="STRING" name="updatesAfter">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="BOOLEAN" name="skipDeleted">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="BOOLEAN" name="skipRelations">\r
                  <api:value>\r
                     <api:booleanValue>false</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#exportDataJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="databaseUrl">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="operationId">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="definitionContent">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.sameName"><con:configuration><path>//@errorCode</path><content>app.job.sameName</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="a4e09585-d222-41d2-93fc-aeb817818de5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>exportData JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create exportDataJob without parameters Id</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>exportDataJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Remove exportDataJob" id="cb82e7fc-8d51-405a-aeb9-b13f3bda4f6c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove exportDataJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#exportDataJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>294650</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>372288</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:01:52.096</con:value></con:property><con:property><con:name>exportDataJobName</con:name><con:value>exportDataJob</con:value></con:property><con:property><con:name>exportDataJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>exportDataJobId</con:name><con:value>49</con:value></con:property></con:properties></con:testCase><con:testCase id="c49d40fe-6883-456e-aac3-8de515f4bfe2" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create Job with non-existing jobNameReference" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="0f0210eb-93fd-4bc4-b73f-36c1b984352d"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create job with non-existing jobNameReference" id="b9993fc6-67b3-4f2c-917c-b09b5b1fe3da"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create job with non-existing jobNameReference" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#exportDataJobName}_${#TestCase#randomData1}" jobNameReference="non-existing_${#TestCase#exportDataJobName}">\r
               <api:parameters type="STRING" name="asOf">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters type="STRING" name="updatesAfter">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="BOOLEAN" name="skipDeleted">\r
                  <api:value>\r
                     <api:booleanValue>true</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="BOOLEAN" name="skipRelations">\r
                  <api:value>\r
                     <api:booleanValue>false</api:booleanValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#exportDataJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="databaseUrl">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="operationId">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="definitionContent">\r
                  <api:value>\r
                     <api:stringValue>value</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.unknown.parameters"><con:configuration><path>//@errorCode</path><content>app.job.unknown.parameters</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>480888</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>621955</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-02-21T13:01:52.515</con:value></con:property><con:property><con:name>exportDataJobName</con:name><con:value>exportDataJob</con:value></con:property><con:property><con:name>exportDataJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>exportDataJobId</con:name><con:value>153</con:value></con:property></con:properties></con:testCase><con:testCase id="a44be368-1408-4063-b7c3-637502d7171b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create job with same parameters id" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="25264f6c-5c0f-498c-9e08-e16fce919ae9"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create inactive duplicateJob" id="f28ecce8-6b95-4856-a904-8833686917aa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create inactive duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30001" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30001" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="3bd036fa-ddf3-47cf-afb1-7ce6a08a1f5c" name="count parameters = 4"><con:configuration><path>count(//*:parameters)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="ccd6c5c0-bc9d-4d18-92f4-46376c81d8a8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create inactive duplicateJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="49d76c75-7a4a-4afc-a453-3bfb8c5a05a2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>555114</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>349563</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:14:45.014</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value>68</con:value></con:property></con:properties></con:testCase><con:testCase id="4fcb3784-f982-4753-bb9e-c4dde4ddcc70" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update Job without parameters id" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="703f241e-ab05-4946-a47f-33b282f9fb80"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob" id="d24700ad-ef19-4af6-b293-d3aff9cd89f6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="e518f6a7-9f65-4ac0-89e5-4ab7c874c688"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create duplicateJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Update duplicateJob without parameters Id" id="f88d24c4-97d9-440e-8d9f-74b63f6a0af3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Update duplicateJob without parameters Id" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job id="${#TestCase#duplicateJobId}" enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>1${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>1${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>1${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="b7be0638-97a4-46f1-a9b9-603213b80d8e" name="Parameters count = 4"><con:configuration><path>count(//*:parameters)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dded8e33-0f5b-4a48-9310-ab5f40c02dac" name="Contains first updated parameter value"><con:configuration><token>1${#TestCase#duplicateJobEntityName}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dded8e33-0f5b-4a48-9310-ab5f40c02dac" name="Contains second updated parameter value"><con:configuration><token>1${#TestCase#duplicateJobMatchingName}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dded8e33-0f5b-4a48-9310-ab5f40c02dac" name="Contains third updated parameter value"><con:configuration><token>1${#TestCase#duplicateJobBlockSize}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Find duplicateJob" id="9a9331a4-a362-4ce6-aac9-e19e6d5979f2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#duplicateJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = duplicateJobId"><con:configuration><path>//@id</path><content>${#TestCase#duplicateJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="e509d2e8-2dd2-446c-9c5e-b25976ebedfa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>317163</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>503707</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:15:22.920</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">70</con:value></con:property></con:properties></con:testCase><con:testCase id="293e2fe1-3543-4a57-8bfc-ccc7a24fba81" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update Job with another parameters id" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="c127436a-da64-44e9-b0a2-371ee55bac3c"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob" id="f1a22a36-7190-4b63-b7e8-94ad5e7301ed"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="8d762210-4f8b-4314-9003-8997f3387cab"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create duplicateJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Update duplicateJob with another parameters Id" id="02d493c9-75cc-48c1-bc42-81a4c2a0d708"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Update duplicateJob with another parameters Id" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job id="${#TestCase#duplicateJobId}" enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="3023542354001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>2${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="300235423402" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>2${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30023542354303" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>2${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e93c8d32-182a-4b33-9f9b-fa63b2d5baef" name="Parameters count = 4"><con:configuration><path>count(//*:parameters)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5905bfe8-d561-4961-81e2-da1deda0275e" name="Contains first updated parameter value"><con:configuration><token>2${#TestCase#duplicateJobEntityName}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5905bfe8-d561-4961-81e2-da1deda0275e" name="Contains second updated parameter value"><con:configuration><token>2${#TestCase#duplicateJobMatchingName}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5905bfe8-d561-4961-81e2-da1deda0275e" name="Contains third updated parameter value"><con:configuration><token>2${#TestCase#duplicateJobBlockSize}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="d8b72bac-bd5f-4580-bed6-bfda989fbfbd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>241784</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>358698</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:35:58.234</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">72</con:value></con:property></con:properties></con:testCase><con:testCase id="cd45d36a-fb9d-4748-8209-df2f8b99b88a" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update Find Run Status Remove non-existing job" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="request" name="Update non-existing job" id="b9fb4b21-8805-4ee6-a21f-6d00cebbfdb1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Update non-existing job" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job id="1234567890" enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>1${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>1${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>1${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.updateError"><con:configuration><path>//@errorCode</path><content>app.job.updateError</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Find non-existing job" id="c01d77b4-b38e-4354-a120-597e1a575c81"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find non-existing job" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="1234567890"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.notFound"><con:configuration><path>//@errorCode</path><content>app.job.notFound</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Run non-existing job" id="375f9fed-1c2a-4858-b8be-111e52cdaec9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run non-existing job" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="1234567890"></api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.notFound"><con:configuration><path>//@errorCode</path><content>app.job.notFound</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Get status of non-existing job" id="34a4fca6-a3ff-497d-b1f3-3a15d1d82756"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get status of non-existing job" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJobStatus id="1234567890"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.execution.notFound"><con:configuration><path>//@errorCode</path><content>app.job.execution.notFound</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="c2c4d597-f3e7-49ca-85ef-f7c66a8e2334"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="1234567890"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.notFound"><con:configuration><path>//@errorCode</path><content>app.job.notFound</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>524683</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>443387</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2017-10-05T14:32:09.356</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">97</con:value></con:property></con:properties></con:testCase><con:testCase id="99cd0ba5-f672-4216-88af-39be0fff610e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Check for parameters changes on job startup" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="93237e54-1e8d-43b2-b4b9-3792f04083f8"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob" id="15b9f3ca-a8e2-49f4-916f-0cf896e319e3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>               
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="cb8c8652-a4ef-4a29-baf3-56551b9615f5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create duplicateJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find duplicateJob" id="f6c9e39b-c8c2-4036-b26a-2aedae1c4015"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#duplicateJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = duplicateJobId"><con:configuration><path>//@id</path><content>${#TestCase#duplicateJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Run duplicateJob" id="2a695d9b-8d97-4129-b6f4-0aaf7c820ecf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#duplicateJobId}">\r
            <api:parameters id="30001" type="STRING" name="entityName">\r
               <api:value>\r
                  <api:stringValue>1${#TestCase#duplicateJobEntityName}</api:stringValue>\r
               </api:value>\r
            </api:parameters>\r
            <api:parameters id="30002" type="STRING" name="matchingName">\r
               <api:value>\r
                  <api:stringValue>1${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
               </api:value>\r
            </api:parameters>\r
            
            <api:parameters id="30003" type="LONG" name="blockSize">\r
               <api:value>\r
                  <api:longValue>1${#TestCase#duplicateJobBlockSize}</api:longValue>\r
               </api:value>\r
            </api:parameters>\r


            
            <!--<api:parameters id="10001" type="LONG" name="blockSize">
               <api:value>
                  <api:longValue>1${#TestCase#softDeleteCleanupJobBlockSize}</api:longValue>
               </api:value>
            </api:parameters>
            <api:parameters id="10002" type="STRING" name="cleanType">
               <api:value>
                  <api:stringValue>1${#TestCase#softDeleteCleanupJobEntityName}</api:stringValue>
               </api:value>
            </api:parameters>
            <api:parameters id="10003" type="LONG" name="overdueDays">
               <api:value>
                  <api:longValue>1${#TestCase#softDeleteCleanupJobOverdueDays}</api:longValue>
               </api:value>
            </api:parameters>-->\r
         </api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="113e64df-b422-43ca-aa85-954229948b90" name="Contains first updated parameter"><con:configuration><token>1${#TestCase#duplicateJobEntityName}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="113e64df-b422-43ca-aa85-954229948b90" name="Contains second updated parameter"><con:configuration><token>1${#TestCase#duplicateJobMatchingName}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="113e64df-b422-43ca-aa85-954229948b90" name="Contains third updated parameter"><con:configuration><token>1${#TestCase#duplicateJobBlockSize}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="1435a159-57e3-4eec-95b9-019093fb6d5e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>944778</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>532425</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:38:34.775</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value>73</con:value></con:property></con:properties></con:testCase><con:testCase id="c2336228-9b32-4df7-a5f0-d1f87bc9f63d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Getting job run error" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="25e27416-d242-4d08-a934-6f0c159bfb92"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob" id="e4d8e4be-a029-4dc1-85a2-ace4302b18e5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="650f15ff-45e0-4de7-b299-39ac1e8c3942"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create duplicateJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Find duplicateJob" id="add83ee6-f909-4c96-abc9-c246c1b4083c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Find duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestFindJob id="${#TestCase#duplicateJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = duplicateJobId"><con:configuration><path>//@id</path><content>${#TestCase#duplicateJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Run duplicateJob" id="b8c65318-1c5a-49c1-b002-0dbbe2f95674"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#duplicateJobId}"></api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = duplicateJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Waiting for job finish" id="43745cdf-7886-48f4-b06a-45c2e67d0301"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="request" name="Get status of duplicateJob" id="6771d76b-8640-49b6-8b6d-15b1445b5f27"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Get status of duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestJobStatus id="${#TestCase#duplicateJobId}"/>
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="id = duplicateJobId"><con:configuration><path>//@id</path><content>${#TestCase#duplicateJobId}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobNameReference = softDeleteCleanupJobName"><con:configuration><path>//@jobNameReference</path><content>${#TestCase#duplicateJobName}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="jobExecution status = FAILED"><con:configuration><path>//@status</path><content>FAILED</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitStatus description is received"><con:configuration><path>//*:executionSteps/*:exitStatus/*:description</path><content>com.unidata.mdm.backend.common.exception.SystemRuntimeException: [EX_MATCHING_GROUP_OR_RULE_NOT_FOUND] Can't find a group with name GroupName</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="a0a35733-85d7-4ea4-a56b-be12bbcbc2be"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>506952</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>850586</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:39:01.545</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>GroupName</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value>74</con:value></con:property></con:properties></con:testCase><con:testCase id="871fb640-1cac-455a-8ae8-feacef6c3c50" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Create Update Run job without any parameter, with unknown parameter" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="0dbd9ac8-e6b1-46f5-be10-388c36a3ba6f"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob without parameter" id="a39301ad-e77f-4a35-9057-33b511daf5bd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob without parameter" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
             <!--  <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r -->
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.parameters.not.set"><con:configuration><path>//@errorCode</path><content>app.job.parameters.not.set</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob with unknown parameter" id="a186d0c3-ee32-4174-bd5a-c76ab9a92c88"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob with unknown parameter" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30004" type="LONG" name="blockSizeasdfasdfasdf">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.unknown.parameters"><con:configuration><path>//@errorCode</path><content>app.job.unknown.parameters</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Create duplicateJob with valid parameters set" id="cbd9794d-e51a-4cf8-bd94-9811dbcaf29f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create duplicateJob with valid parameters set" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="a8964352-0d28-4274-967f-7da2e51d34d4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create duplicateJob with valid parameters set</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Update duplicateJob without parameter" id="d4f6e4ad-6a15-4e58-b198-8682630eebf8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Update duplicateJob without parameter" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job id="${#TestCase#duplicateJobId}" enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
             <!--  <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r -->
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.parameters.not.set"><con:configuration><path>//@errorCode</path><content>app.job.parameters.not.set</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Update duplicateJob with unknown parameter" id="9b05cd7c-a101-48a5-9ae3-b7e5641e88e0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Update duplicateJob with unknown parameter" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job id="${#TestCase#duplicateJobId}" enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30004" type="LONG" name="blockSizeasdfasdfasdf">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.unknown.parameters"><con:configuration><path>//@errorCode</path><content>app.job.unknown.parameters</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Run duplicateJob" id="a7e2be3c-5cb5-4229-a0d6-08ffaa8fee62"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#duplicateJobId}">\r
            <api:parameters id="30001" type="STRING" name="entityName">\r
               <api:value>\r
                  <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
               </api:value>\r
            </api:parameters>\r
            <api:parameters id="30002" type="STRING" name="matchingName">\r
               <api:value>\r
                  <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
               </api:value>\r
            </api:parameters>\r
            <api:parameters id="30003" type="LONG" name="blockSize">\r
               <api:value>\r
                  <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
               </api:value>\r
            </api:parameters>\r
            <api:parameters id="30004" type="LONG" name="UnknownParameter">\r
               <api:value>\r
                  <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
               </api:value>\r
            </api:parameters>\r
         </api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.unknown.parameters"><con:configuration><path>//@errorCode</path><content>app.job.unknown.parameters</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="b9fac858-a18d-45dc-be82-947dbd2198ae"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>398130</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>391031</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:39:54.079</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value>75</con:value></con:property></con:properties></con:testCase><con:testCase id="83575a81-f573-4219-a7d4-e58a0a54c79f" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Run inactive job" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Prepare data" id="ec06143a-4604-4ea4-bc59-3a9ff371b744"><con:settings/><con:config><script>rand1 = new Random().nextInt(999999 - 100000) + 100000
rand2 = new Random().nextInt(999999 - 100000) + 100000

testRunner.testCase.setPropertyValue("randomData1", rand1.toString())
testRunner.testCase.setPropertyValue("randomData2", rand2.toString())

// GET DATE/TIME
def date = new Date()
def timeZone = TimeZone.getTimeZone('Etc/GMT-3')
result = date.format("yyyy-MM-dd'T'HH:mm:ss.SSS", timeZone)
testRunner.testCase.setPropertyValue("currDate", result.toString())</script></con:config></con:testStep><con:testStep type="request" name="Create inactive duplicateJob" id="1efe6164-a958-4e86-8bc6-6bfb93952a79"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Create inactive duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job enabled="false" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="744a4c21-2315-4a03-8c6f-8578c191f827" name="job enabled = false"><con:configuration><path>//@enabled</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Transfer created job ids" id="49af742f-5dd0-4355-b0e9-c5d51df20ce1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="true" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>duplicate JobId to prop</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create inactive duplicateJob</con:sourceStep><con:sourcePath>//@id</con:sourcePath><con:targetType>duplicateJobId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Set enabled true by update" id="8d8aa259-48b2-445a-8318-db0a5008c0e8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Set enabled true by update" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job id="${#TestCase#duplicateJobId}" enabled="true" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="744a4c21-2315-4a03-8c6f-8578c191f827" name="job enabled = true"><con:configuration><path>//@enabled</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Set enabled false by update" id="a4173ef4-e6df-4fa4-8dbe-03391c08f072"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Set enabled false by update" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestSaveJob>\r
            <api:job id="${#TestCase#duplicateJobId}" enabled="false" error="" cronExpression="" description="Job Description" skipCronWarnings="true" name="${#TestCase#duplicateJobName}_${#TestCase#randomData1}" jobNameReference="${#TestCase#duplicateJobName}">\r
               <api:parameters id="30001" type="STRING" name="entityName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters type="STRING" name="usersSelector">
                  <api:value>
                     <api:stringValue></api:stringValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30002" type="STRING" name="matchingName">\r
                  <api:value>\r
                     <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30003" type="LONG" name="blockSize">\r
                  <api:value>\r
                     <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
                  </api:value>\r
               </api:parameters>\r
               <api:parameters id="30005" type="LONG" name="auditLevel">
                  <api:value>
                     <api:longValue>0</api:longValue>
                  </api:value>
               </api:parameters>
               <api:parameters id="30006" type="BOOLEAN" name="skipNotifications">
                  <api:value>
                     <api:booleanValue>false</api:booleanValue>
                  </api:value>
               </api:parameters>
            </api:job>\r
         </api:requestSaveJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="744a4c21-2315-4a03-8c6f-8578c191f827" name="job enabled = false"><con:configuration><path>//@enabled</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Run inactive duplicateJob" id="d3e1dd25-32dd-4175-97ee-6cfd4b5e3ae8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Run inactive duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRunJob id="${#TestCase#duplicateJobId}">\r
            <api:parameters id="30001" type="STRING" name="entityName">\r
               <api:value>\r
                  <api:stringValue>${#TestCase#duplicateJobEntityName}</api:stringValue>\r
               </api:value>\r
            </api:parameters>\r
            <api:parameters id="30002" type="STRING" name="matchingName">\r
               <api:value>\r
                  <api:stringValue>${#TestCase#duplicateJobMatchingName}</api:stringValue>\r
               </api:value>\r
            </api:parameters>\r
            <api:parameters id="30003" type="LONG" name="blockSize">\r
               <api:value>\r
                  <api:longValue>${#TestCase#duplicateJobBlockSize}</api:longValue>\r
               </api:value>\r
            </api:parameters>\r
         </api:requestRunJob>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Error"><con:configuration><path>//@exitCode</path><content>Error</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="errorCode = app.job.disabled"><con:configuration><path>//@errorCode</path><content>app.job.disabled</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Remove duplicateJob" id="c2919634-2175-48f3-8adc-2e3b9746d0e8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SOAP API</con:interface><con:operation>apiCall</con:operation><con:request name="Remove duplicateJob" id="58e8c620-19c5-448e-b0e4-0adb89d30faf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#serviceEndpointSOAP}</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.mdm.unidata.com/${#Project#protoVer}/" xmlns:data="http://data.mdm.unidata.com/${#Project#protoVer}/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <api:apiRequestBody>\r
         <api:common storageId="1" operationId="1">\r
            <api:security>\r
               <api:credentials username="${#Project#adminUsername}" password="${#Project#adminPassword}"/>\r
            </api:security>\r
         </api:common>\r
         <api:requestRemoveJob id="${#TestCase#duplicateJobId}"/>\r
      </api:apiRequestBody>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="b3b62d51-d66c-4f38-8c27-33f54186b046"/><con:assertion type="XPath Match" id="8bac943b-b39e-480b-b114-54ee0097d471" name="exitCode = Success"><con:configuration><path>//@exitCode</path><content>Success</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>entityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>ent_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData1}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Origin первой записи ${#TestCase#randomData1}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>lookupEntityName</con:name><con:value>EGRPO</con:value></con:property><con:property><con:name>etalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>originKeyID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0dc0db5c-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>buff</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">&lt;etalonKey id="0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0" xmlns="http://api.mdm.unidata.com/v4/" xmlns:ns2="http://data.mdm.unidata.com/v4/" xmlns:ns3="http://dq.mdm.unidata.com/v4/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></con:value></con:property><con:property><con:name>randomData1</con:name><con:value>583391</con:value></con:property><con:property><con:name>randomData2</con:name><con:value>239653</con:value></con:property><con:property><con:name>sourceSystem</con:name><con:value>data_steward</con:value></con:property><con:property><con:name>secondEtalonKeyID</con:name><con:value>0dc0b44b-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondOriginKeyID</con:name><con:value>0dd96c71-72d6-11e7-ad6a-87ba01ce01e0</con:value></con:property><con:property><con:name>secondEntityName</con:name><con:value>R_CONS</con:value></con:property><con:property><con:name>secondEnt_attrs</con:name><con:value><![CDATA[<data:simpleAttribute name="r_cons_c_attr"> <data:intValue>${#TestCase#randomData2}</data:intValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr1"> <data:stringValue>Соединяем origin с etalon</data:stringValue> </data:simpleAttribute> <data:simpleAttribute name="r_cons_atr2"> <data:stringValue>Вторая запись ${#TestCase#randomData2}</data:stringValue> </data:simpleAttribute>]]></con:value></con:property><con:property><con:name>currDate</con:name><con:value>2018-04-03T11:40:27.707</con:value></con:property><con:property><con:name>duplicateJobName</con:name><con:value>duplicateJob</con:value></con:property><con:property><con:name>duplicateJobEntityName</con:name><con:value>R_MASTER</con:value></con:property><con:property><con:name>duplicateJobMatchingName</con:name><con:value>Имя группы</con:value></con:property><con:property><con:name>duplicateJobBlockSize</con:name><con:value>500</con:value></con:property><con:property><con:name>duplicateJobId</con:name><con:value>76</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>remoteHost</con:name><con:value>http://localhost:8080</con:value></con:property><con:property><con:name>adminUsername</con:name><con:value>admin</con:value></con:property><con:property><con:name>adminPassword</con:name><con:value>admin1234</con:value></con:property><con:property><con:name>dataBaseName</con:name><con:value>unidata</con:value></con:property><con:property><con:name>protoVer</con:name><con:value>v4</con:value></con:property><con:property><con:name>serviceEndpointSOAP</con:name><con:value>${#Project#remoteHost}/unidata-backend/api/public/${#Project#protoVer}/UnidataService</con:value></con:property><con:property><con:name>serviceEndpointREST</con:name><con:value>${#Project#remoteHost}/unidata-backend/api/internal</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>